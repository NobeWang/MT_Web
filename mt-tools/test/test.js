var global,__global,__reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r};void 0===global&&(global=window),void 0===__global&&(__global=global);var __define=this&&this.__define||function(t,e,r,i){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:r,set:i})};!function(t){t.$hashCount=1;var e=(Object.defineProperty(r.prototype,"hashCode",{get:function(){return this.$hashCode},enumerable:!0,configurable:!0}),r);function r(){this.$hashCode=t.$hashCount++}t.HashObject=e,__reflect(e.prototype,"egret.HashObject",["egret.IHashObject"])}(egret=egret||{}),function(c){var r,l=[],t=(r=c.HashObject,__extends(e,r),e.prototype.$getEventMap=function(t){var e=this.$EventDispatcher;return t?e[2]:e[1]},e.prototype.addEventListener=function(t,e,r,i,n){this.$addListener(t,e,r,i,n)},e.prototype.once=function(t,e,r,i,n){this.$addListener(t,e,r,i,n,!0)},e.prototype.$addListener=function(t,e,r,i,n,o){e||c.$error(1003,"listener");var a=this.$EventDispatcher,s=i?a[2]:a[1],l=s[t];l?0!==a[3]&&(s[t]=l=l.concat()):l=s[t]=[],this.$insertEventBin(l,t,e,r,i,n,o)},e.prototype.$insertEventBin=function(t,e,r,i,n,o,a){o=0|+o;for(var s=-1,l=t.length,c=0;c<l;c++){var h=t[c];if(h.listener==r&&h.thisObject==i&&h.target==this)return!1;-1==s&&h.priority<o&&(s=c)}var u={type:e,listener:r,thisObject:i,priority:o,target:this,useCapture:n,dispatchOnce:!!a};return-1!==s?t.splice(s,0,u):t.push(u),!0},e.prototype.removeEventListener=function(t,e,r,i){var n=this.$EventDispatcher,o=i?n[2]:n[1],a=o[t];a&&(0!==n[3]&&(o[t]=a=a.concat()),this.$removeEventBin(a,e,r),0==a.length&&(o[t]=null))},e.prototype.$removeEventBin=function(t,e,r){for(var i=t.length,n=0;n<i;n++){var o=t[n];if(o.listener==e&&o.thisObject==r&&o.target==this)return t.splice(n,1),!0}return!1},e.prototype.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},e.prototype.willTrigger=function(t){return this.hasEventListener(t)},e.prototype.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},e.prototype.$notifyListener=function(t,e){var r=this.$EventDispatcher,i=(e?r[2]:r[1])[t.$type];if(!i)return!0;var n=i.length;if(0==n)return!0;var o=l;r[3]++;for(var a,s=0;s<n&&((a=i[s]).listener.call(a.thisObject,t),a.dispatchOnce&&o.push(a),!t.$isPropagationImmediateStopped);s++);for(r[3]--;o.length;)(a=o.pop()).target.removeEventListener(a.type,a.listener,a.thisObject,a.useCapture);return!t.$isDefaultPrevented},e.prototype.dispatchEventWith=function(t,e,r,i){if(e||this.hasEventListener(t)){var n=c.Event.create(c.Event,t,e,i);n.data=r;var o=this.dispatchEvent(n);return c.Event.release(n),o}return!0},e);function e(t){void 0===t&&(t=null);var e=r.call(this)||this;return e.$EventDispatcher={0:t||e,1:{},2:{},3:0},e}c.EventDispatcher=t,__reflect(t.prototype,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret=egret||{}),function(e){var r,t=(r=e.HashObject,__extends(i,r),i.prototype.$toJson=function(){return""},i.prototype.updatePadding=function(){},i.prototype.onPropertyChange=function(){var t=this;t.updatePadding(),e.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(t.$id,t.paddingTop,t.paddingBottom,t.paddingLeft,t.paddingRight),egret_native.NativeDisplayObject.setDataToFilter(t))},i);function i(){var t=r.call(this)||this;return t.type=null,t.$id=null,t.paddingTop=0,t.paddingBottom=0,t.paddingLeft=0,t.paddingRight=0,t.$uniforms={},e.nativeRender&&egret_native.NativeDisplayObject.createFilter(t),t}e.Filter=t,__reflect(t.prototype,"egret.Filter")}(egret=egret||{}),function(y){function o(t){return 180<(t%=360)?t-=360:t<-180&&(t+=360),t}var l,t=(l=y.EventDispatcher,__extends(c,l),c.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(0)},Object.defineProperty(c.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),c.prototype.$setParent=function(t){this.$parent=t},c.prototype.$onAddToStage=function(t,e){this.$stage=t,this.$nestLevel=e,this.$hasAddToStage=!0,y.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},c.prototype.$onRemoveFromStage=function(){this.$nestLevel=0,y.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},c.prototype.$updateUseTransform=function(){var t=this;1==t.$scaleX&&1==t.$scaleY&&0==t.$skewX&&0==t.$skewY?t.$useTranslate=!1:t.$useTranslate=!0},Object.defineProperty(c.prototype,"stage",{get:function(){return this.$stage},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"matrix",{get:function(){return this.$getMatrix().clone()},set:function(t){this.$setMatrix(t)},enumerable:!0,configurable:!0}),c.prototype.$getMatrix=function(){var t=this;return t.$matrixDirty&&(t.$matrixDirty=!1,t.$matrix.$updateScaleAndRotation(t.$scaleX,t.$scaleY,t.$skewX,t.$skewY)),t.$matrix.tx=t.$x,t.$matrix.ty=t.$y,t.$matrix},c.prototype.$setMatrix=function(t,e){void 0===e&&(e=!0);var r=this,i=r.$matrix;i.a=t.a,i.b=t.b,i.c=t.c,i.d=t.d,r.$x=t.tx,r.$y=t.ty,r.$matrixDirty=!1,1==i.a&&0==i.b&&0==i.c&&1==i.d?r.$useTranslate=!1:r.$useTranslate=!0,e&&(r.$scaleX=i.$getScaleX(),r.$scaleY=i.$getScaleY(),r.$skewX=t.$getSkewX(),r.$skewY=t.$getSkewY(),r.$skewXdeg=o(180*r.$skewX/Math.PI),r.$skewYdeg=o(180*r.$skewY/Math.PI),r.$rotation=o(180*r.$skewY/Math.PI)),y.nativeRender&&r.$nativeDisplayObject.setMatrix(t.a,t.b,t.c,t.d,t.tx,t.ty)},c.prototype.$getConcatenatedMatrix=function(){var t=this,e=(e=t.$concatenatedMatrix)||(t.$concatenatedMatrix=new y.Matrix);t.$parent?t.$parent.$getConcatenatedMatrix().$preMultiplyInto(t.$getMatrix(),e):e.copyFrom(t.$getMatrix());var r=t.$anchorOffsetX,i=t.$anchorOffsetY,n=t.$scrollRect;return n?e.$preMultiplyInto(y.$TempMatrix.setTo(1,0,0,1,-n.x-r,-n.y-i),e):0==r&&0==i||e.$preMultiplyInto(y.$TempMatrix.setTo(1,0,0,1,-r,-i),e),t.$concatenatedMatrix},c.prototype.$getInvertedConcatenatedMatrix=function(){var t=this;return t.$invertedConcatenatedMatrix||(t.$invertedConcatenatedMatrix=new y.Matrix),t.$getConcatenatedMatrix().$invertInto(t.$invertedConcatenatedMatrix),t.$invertedConcatenatedMatrix},Object.defineProperty(c.prototype,"x",{get:function(){return this.$getX()},set:function(t){this.$setX(t)},enumerable:!0,configurable:!0}),c.prototype.$getX=function(){return this.$x},c.prototype.$setX=function(t){var e,r,i=this;return i.$x!=t&&(i.$x=t,y.nativeRender?i.$nativeDisplayObject.setX(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())),!0)},Object.defineProperty(c.prototype,"y",{get:function(){return this.$getY()},set:function(t){this.$setY(t)},enumerable:!0,configurable:!0}),c.prototype.$getY=function(){return this.$y},c.prototype.$setY=function(t){var e,r,i=this;return i.$y!=t&&(i.$y=t,y.nativeRender?i.$nativeDisplayObject.setY(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())),!0)},Object.defineProperty(c.prototype,"scaleX",{get:function(){return this.$getScaleX()},set:function(t){this.$setScaleX(t)},enumerable:!0,configurable:!0}),c.prototype.$getScaleX=function(){return this.$scaleX},c.prototype.$setScaleX=function(t){var e,r,i=this;i.$scaleX!=t&&(i.$scaleX=t,i.$matrixDirty=!0,i.$updateUseTransform(),y.nativeRender?i.$nativeDisplayObject.setScaleX(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"scaleY",{get:function(){return this.$getScaleY()},set:function(t){this.$setScaleY(t)},enumerable:!0,configurable:!0}),c.prototype.$getScaleY=function(){return this.$scaleY},c.prototype.$setScaleY=function(t){var e,r,i=this;i.$scaleY!=t&&(i.$scaleY=t,i.$matrixDirty=!0,i.$updateUseTransform(),y.nativeRender?i.$nativeDisplayObject.setScaleY(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"rotation",{get:function(){return this.$getRotation()},set:function(t){this.$setRotation(t)},enumerable:!0,configurable:!0}),c.prototype.$getRotation=function(){return this.$rotation},c.prototype.$setRotation=function(t){var e,r,i,n=this;(t=o(t))!=n.$rotation&&(e=(t-n.$rotation)/180*Math.PI,n.$skewX+=e,n.$skewY+=e,n.$rotation=t,n.$matrixDirty=!0,n.$updateUseTransform(),y.nativeRender?n.$nativeDisplayObject.setRotation(t):((r=n.$parent)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()),(i=n.$maskedObject)&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"skewX",{get:function(){return this.$skewXdeg},set:function(t){this.$setSkewX(t)},enumerable:!0,configurable:!0}),c.prototype.$setSkewX=function(t){var e,r,i=this;t!=i.$skewXdeg&&(t=(t=o(i.$skewXdeg=t))/180*Math.PI,i.$skewX=t,i.$matrixDirty=!0,i.$updateUseTransform(),y.nativeRender?i.$nativeDisplayObject.setSkewX(i.$skewXdeg):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"skewY",{get:function(){return this.$skewYdeg},set:function(t){this.$setSkewY(t)},enumerable:!0,configurable:!0}),c.prototype.$setSkewY=function(t){var e,r,i=this;t!=i.$skewYdeg&&(t=((t=o(i.$skewYdeg=t))+i.$rotation)/180*Math.PI,i.$skewY=t,i.$matrixDirty=!0,i.$updateUseTransform(),y.nativeRender?i.$nativeDisplayObject.setSkewY(i.$skewYdeg):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){this.$setWidth(t)},enumerable:!0,configurable:!0}),c.prototype.$getWidth=function(){return isNaN(this.$explicitWidth)?this.$getOriginalBounds().width:this.$explicitWidth},c.prototype.$setWidth=function(t){t=isNaN(t)?NaN:t,this.$explicitWidth!=t&&(this.$explicitWidth=t)},Object.defineProperty(c.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){this.$setHeight(t)},enumerable:!0,configurable:!0}),c.prototype.$getHeight=function(){return isNaN(this.$explicitHeight)?this.$getOriginalBounds().height:this.$explicitHeight},c.prototype.$setHeight=function(t){t=isNaN(t)?NaN:t,this.$explicitHeight!=t&&(this.$explicitHeight=t)},Object.defineProperty(c.prototype,"measuredWidth",{get:function(){return this.$getOriginalBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"measuredHeight",{get:function(){return this.$getOriginalBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"anchorOffsetX",{get:function(){return this.$anchorOffsetX},set:function(t){this.$setAnchorOffsetX(t)},enumerable:!0,configurable:!0}),c.prototype.$setAnchorOffsetX=function(t){var e,r,i=this;i.$anchorOffsetX!=t&&(i.$anchorOffsetX=t,y.nativeRender?i.$nativeDisplayObject.setAnchorOffsetX(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"anchorOffsetY",{get:function(){return this.$anchorOffsetY},set:function(t){this.$setAnchorOffsetY(t)},enumerable:!0,configurable:!0}),c.prototype.$setAnchorOffsetY=function(t){var e,r,i=this;i.$anchorOffsetY!=t&&(i.$anchorOffsetY=t,y.nativeRender?i.$nativeDisplayObject.setAnchorOffsetY(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$setVisible(t)},enumerable:!0,configurable:!0}),c.prototype.$setVisible=function(t){var e,r,i=this;i.$visible!=t&&(i.$visible=t,y.nativeRender?i.$nativeDisplayObject.setVisible(t):(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"cacheAsBitmap",{get:function(){return this.$cacheAsBitmap},set:function(t){this.$cacheAsBitmap=t,y.nativeRender?this.$nativeDisplayObject.setCacheAsBitmap(t):this.$setHasDisplayList(t)},enumerable:!0,configurable:!0}),c.prototype.$setHasDisplayList=function(t){var e,r=this;!!r.$displayList!=t&&(t?(e=y.sys.DisplayList.create(r))&&(r.$displayList=e,r.$cacheDirty=!0):r.$displayList=null)},c.prototype.$cacheDirtyUp=function(){var t=this.$parent;t&&!t.$cacheDirty&&(t.$cacheDirty=!0,t.$cacheDirtyUp())},Object.defineProperty(c.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$setAlpha(t)},enumerable:!0,configurable:!0}),c.prototype.$setAlpha=function(t){var e,r,i=this;i.$alpha!=t&&(i.$alpha=t,y.nativeRender?i.$nativeDisplayObject.setAlpha(t):(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"touchEnabled",{get:function(){return this.$getTouchEnabled()},set:function(t){this.$setTouchEnabled(t)},enumerable:!0,configurable:!0}),c.prototype.$getTouchEnabled=function(){return this.$touchEnabled},c.prototype.$setTouchEnabled=function(t){this.$touchEnabled=!!t},Object.defineProperty(c.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){this.$setScrollRect(t)},enumerable:!0,configurable:!0}),c.prototype.$setScrollRect=function(t){var e,r,i=this;t||i.$scrollRect?(t?(i.$scrollRect||(i.$scrollRect=new y.Rectangle),i.$scrollRect.copyFrom(t),y.nativeRender&&i.$nativeDisplayObject.setScrollRect(t.x,t.y,t.width,t.height)):(i.$scrollRect=null,y.nativeRender&&i.$nativeDisplayObject.setScrollRect(0,0,0,0)),y.nativeRender||(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))):i.$updateRenderMode()},Object.defineProperty(c.prototype,"blendMode",{get:function(){return y.sys.numberToBlendMode(this.$blendMode)},set:function(t){var e,r,i=this,n=y.sys.blendModeToNumber(t);i.$blendMode!=n&&(i.$blendMode=n,y.nativeRender?i.$nativeDisplayObject.setBlendMode(n):(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"mask",{get:function(){return this.$mask?this.$mask:this.$maskRect},set:function(t){var e=this;if(t!==e){if(t)if(t instanceof c){if(t==e.$mask)return;t.$maskedObject&&(t.$maskedObject.mask=null),(t.$maskedObject=e).$mask=t,y.nativeRender||t.$updateRenderMode(),e.$maskRect&&(y.nativeRender&&e.$nativeDisplayObject.setMaskRect(0,0,0,0),e.$maskRect=null),y.nativeRender&&e.$nativeDisplayObject.setMask(t.$nativeDisplayObject.id)}else e.$maskRect||(e.$maskRect=new y.Rectangle),e.$maskRect.copyFrom(t),y.nativeRender&&e.$nativeDisplayObject.setMaskRect(t.x,t.y,t.width,t.height),e.$mask&&(e.$mask.$maskedObject=null,y.nativeRender||e.$mask.$updateRenderMode()),e.mask&&(y.nativeRender&&e.$nativeDisplayObject.setMask(-1),e.$mask=null);else e.$mask&&(e.$mask.$maskedObject=null,y.nativeRender||e.$mask.$updateRenderMode()),e.mask&&(y.nativeRender&&e.$nativeDisplayObject.setMask(-1),e.$mask=null),e.$maskRect&&(y.nativeRender&&e.$nativeDisplayObject.setMaskRect(0,0,0,0),e.$maskRect=null);y.nativeRender||e.$updateRenderMode()}},enumerable:!0,configurable:!0}),c.prototype.$setMaskRect=function(t){var e=this;(t||e.$maskRect)&&(t?(e.$maskRect||(e.$maskRect=new y.Rectangle),e.$maskRect.copyFrom(t)):e.$maskRect=null)},Object.defineProperty(c.prototype,"filters",{get:function(){return this.$filters},set:function(t){var e,r,i=this;if(!i.$filters&&!t)return i.$filters=t,void(y.nativeRender?i.$nativeDisplayObject.setFilters(null):(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())));t&&t.length?(t=t.concat(),i.$filters=t,y.nativeRender&&i.$nativeDisplayObject.setFilters(t)):(i.$filters=t,y.nativeRender&&i.$nativeDisplayObject.setFilters(null)),y.nativeRender||(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))},enumerable:!0,configurable:!0}),c.prototype.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},c.prototype.getBounds=function(t,e){void 0===e&&(e=!0);var r=this;return t=r.$getTransformedBounds(r,t),e&&(0!=r.$anchorOffsetX&&(t.x-=r.$anchorOffsetX),0!=r.$anchorOffsetY&&(t.y-=r.$anchorOffsetY)),t},c.prototype.$getTransformedBounds=function(t,e){var r,i=this.$getOriginalBounds();return(e=e||new y.Rectangle).copyFrom(i),t==this||(t?(r=y.$TempMatrix,t.$getInvertedConcatenatedMatrix().$preMultiplyInto(this.$getConcatenatedMatrix(),r)):r=this.$getConcatenatedMatrix(),r.$transformBounds(e)),e},c.prototype.globalToLocal=function(t,e,r){if(void 0===t&&(t=0),void 0===e&&(e=0),y.nativeRender){egret_native.updateNativeRender();var i=egret_native.nrGlobalToLocal(this.$nativeDisplayObject.id,t,e).split(","),n=parseFloat(i[0]),o=parseFloat(i[1]);return r?r.setTo(n,o):r=new y.Point(n,o),r}return this.$getInvertedConcatenatedMatrix().transformPoint(t,e,r)},c.prototype.localToGlobal=function(t,e,r){if(void 0===t&&(t=0),void 0===e&&(e=0),y.nativeRender){egret_native.updateNativeRender();var i=egret_native.nrLocalToGlobal(this.$nativeDisplayObject.id,t,e).split(","),n=parseFloat(i[0]),o=parseFloat(i[1]);return r?r.setTo(n,o):r=new y.Point(n,o),r}return this.$getConcatenatedMatrix().transformPoint(t,e,r)},c.prototype.$getOriginalBounds=function(){var t=this.$getContentBounds();this.$measureChildBounds(t);var e=this.$measureFiltersOffset(!1);return e&&(t.x+=e.minX,t.y+=e.minY,t.width+=-e.minX+e.maxX,t.height+=-e.minY+e.maxY),t},c.prototype.$measureChildBounds=function(t){},c.prototype.$getContentBounds=function(){var t=y.$TempRectangle;return t.setEmpty(),this.$measureContentBounds(t),t},c.prototype.$measureContentBounds=function(t){},c.prototype.$getRenderNode=function(){var t=this,e=t.$renderNode;return e?(t.$renderDirty&&(e.cleanBeforeRender(),t.$updateRenderNode(),t.$renderDirty=!1,e=t.$renderNode),e):null},c.prototype.$updateRenderMode=function(){var t=this;!t.$visible||t.$alpha<=0||t.$maskedObject?t.$renderMode=1:t.filters&&0<t.filters.length?t.$renderMode=2:0!==t.$blendMode||t.$mask&&t.$mask.$stage?t.$renderMode=3:t.$scrollRect||t.$maskRect?t.$renderMode=4:t.$renderMode=null},c.prototype.$measureFiltersOffset=function(t){for(var e=this,r=0,i=0,n=0,o=0;e;){var a=e.$filters;if(a&&a.length)for(var s=a.length,l=0;l<s;l++){var c,h,u,p,d,f,g,m=a[l];"blur"==m.type?(r-=c=m.blurX,i-=h=m.blurY,n+=c,o+=h):"glow"==m.type?(r-=c=m.blurX,i-=h=m.blurY,n+=c,o+=h,u=m.distance||0,p=m.angle||0,(f=d=0)!=u&&(r+=d=0<(d=u*y.NumberUtils.cos(p))?Math.ceil(d):Math.floor(d),n+=d,i+=f=0<(f=u*y.NumberUtils.sin(p))?Math.ceil(f):Math.floor(f),o+=f)):"custom"==m.type&&(r-=g=m.padding,i-=g,n+=g,o+=g)}e=t?e.$parent:null}return{minX:r=Math.min(r,0),minY:i=Math.min(i,0),maxX:n=Math.max(n,0),maxY:o=Math.max(o,0)}},c.prototype.$getConcatenatedMatrixAt=function(t,e){var r=t.$getInvertedConcatenatedMatrix();if(0===r.a||0===r.d){var i=this,n=t.$nestLevel;for(e.identity();i.$nestLevel>n;){var o=i.$scrollRect;o&&e.concat(y.$TempMatrix.setTo(1,0,0,1,-o.x,-o.y)),e.concat(i.$getMatrix()),i=i.$parent}}else r.$preMultiplyInto(e,e)},c.prototype.$updateRenderNode=function(){},c.prototype.$hitTest=function(t,e){var r=this;if(!y.nativeRender&&!r.$renderNode||!r.$visible||0==r.$scaleX||0==r.$scaleY)return null;var i=r.$getInvertedConcatenatedMatrix();if(0==i.a&&0==i.b&&0==i.c&&0==i.d)return null;var n=r.$getContentBounds(),o=i.a*t+i.c*e+i.tx,a=i.b*t+i.d*e+i.ty;if(n.contains(o,a)){if(!r.$children){var s=r.$scrollRect?r.$scrollRect:r.$maskRect;if(s&&!s.contains(o,a))return null;if(r.$mask&&!r.$mask.$hitTest(t,e))return null}return r}return null},c.prototype.hitTestPoint=function(t,e,r){var i=this;if(r){var n=(h=i.$getInvertedConcatenatedMatrix()).a*t+h.c*e+h.tx,o=h.b*t+h.d*e+h.ty,a=void 0;if(y.nativeRender){(l=y.sys.customHitTestBuffer).resize(3,3),egret_native.forHitTest=!0,egret_native.activateBuffer(l),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject2(i.$nativeDisplayObject.id,1-n,1-o,!0);try{a=new Uint8Array(4),egret_native.nrGetPixels(1,1,1,1,a)}catch(t){throw new Error(y.sys.tr(1039))}return egret_native.activateBuffer(null),egret_native.forHitTest=!1,0!==a[3]}var s=i.$displayList;if(s){var l=s.renderBuffer;try{a=l.getPixels(n-s.offsetX,o-s.offsetY)}catch(t){throw new Error(y.sys.tr(1039))}}else{(l=y.sys.customHitTestBuffer).resize(3,3);var c=y.Matrix.create();c.identity(),c.translate(1-n,1-o),y.sys.systemRenderer.render(this,l,c,!0),y.Matrix.release(c);try{a=l.getPixels(1,1)}catch(t){throw new Error(y.sys.tr(1039))}}return 0!==a[3]}if(0==i.$scaleX||0==i.$scaleY)return!1;var h=i.$getInvertedConcatenatedMatrix(),u=i.getBounds(null,!1),n=h.a*t+h.c*e+h.tx,o=h.b*t+h.d*e+h.ty;if(u.contains(n,o)){var p=i.$scrollRect?i.$scrollRect:i.$maskRect;return!(p&&!p.contains(n,o))}return!1},c.prototype.$addListener=function(t,e,r,i,n,o){l.prototype.$addListener.call(this,t,e,r,i,n,o);var a,s=t==y.Event.ENTER_FRAME;!s&&t!=y.Event.RENDER||-1==(a=s?c.$enterFrameCallBackList:c.$renderCallBackList).indexOf(this)&&a.push(this)},c.prototype.removeEventListener=function(t,e,r,i){l.prototype.removeEventListener.call(this,t,e,r,i);var n,o,a=t==y.Event.ENTER_FRAME;!a&&t!=y.Event.RENDER||this.hasEventListener(t)||-1!==(o=(n=a?c.$enterFrameCallBackList:c.$renderCallBackList).indexOf(this))&&n.splice(o,1)},c.prototype.dispatchEvent=function(t){if(!t.$bubbles)return l.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),r=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,r),!t.$isDefaultPrevented},c.prototype.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var r=e.concat();return r.reverse(),e=r.concat(e)},c.prototype.$dispatchPropagationEvent=function(t,e,r){for(var i=e.length,n=r-1,o=0;o<i;o++){var a=e[o];if(t.$currentTarget=a,t.$eventPhase=o<n?1:o==r||o==n?2:3,a.$notifyListener(t,o<r),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},c.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},Object.defineProperty(c.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this.$tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!0,configurable:!0}),c.prototype.sortChildren=function(){this.$sortDirty=!1},Object.defineProperty(c.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.$sortDirty=!0)},enumerable:!0,configurable:!0}),c.defaultTouchEnabled=!1,c.$enterFrameCallBackList=[],c.$renderCallBackList=[],c);function c(){var t=l.call(this)||this;return t.$children=null,t.$name="",t.$parent=null,t.$stage=null,t.$nestLevel=0,t.$useTranslate=!1,t.$matrix=new y.Matrix,t.$matrixDirty=!1,t.$x=0,t.$y=0,t.$scaleX=1,t.$scaleY=1,t.$rotation=0,t.$skewX=0,t.$skewXdeg=0,t.$skewY=0,t.$skewYdeg=0,t.$explicitWidth=NaN,t.$explicitHeight=NaN,t.$anchorOffsetX=0,t.$anchorOffsetY=0,t.$visible=!0,t.$displayList=null,t.$cacheAsBitmap=!1,t.$cacheDirty=!1,t.$alpha=1,t.$touchEnabled=c.defaultTouchEnabled,t.$scrollRect=null,t.$blendMode=0,t.$maskedObject=null,t.$mask=null,t.$maskRect=null,t.$parentDisplayList=null,t.$renderNode=null,t.$renderDirty=!1,t.$renderMode=null,t._tint=0,t.$tintRGB=0,t.$sortDirty=!1,t._zIndex=0,t.$lastSortedIndex=0,t.sortableChildren=!1,y.nativeRender&&t.createNativeDisplayObject(),t.tint=16777215,t}y.DisplayObject=t,__reflect(t.prototype,"egret.DisplayObject")}(egret=egret||{}),function(p){p.$TextureScaleFactor=1;var e,t=(e=p.HashObject,__extends(r,e),Object.defineProperty(r.prototype,"textureWidth",{get:function(){return this.$getTextureWidth()},enumerable:!0,configurable:!0}),r.prototype.$getTextureWidth=function(){return this.$textureWidth},Object.defineProperty(r.prototype,"textureHeight",{get:function(){return this.$getTextureHeight()},enumerable:!0,configurable:!0}),r.prototype.$getTextureHeight=function(){return this.$textureHeight},r.prototype.$getScaleBitmapWidth=function(){return this.$bitmapWidth*p.$TextureScaleFactor},r.prototype.$getScaleBitmapHeight=function(){return this.$bitmapHeight*p.$TextureScaleFactor},Object.defineProperty(r.prototype,"bitmapData",{get:function(){return this.$bitmapData},set:function(t){this.$ktxData=null,this._setBitmapData(t)},enumerable:!0,configurable:!0}),r.prototype._setBitmapData=function(t){this.$bitmapData=t;var e=p.$TextureScaleFactor,r=t.width*e,i=t.height*e;this.$initData(0,0,r,i,0,0,r,i,t.width,t.height)},Object.defineProperty(r.prototype,"ktxData",{get:function(){return this.$ktxData},set:function(t){this._setKtxData(t)},enumerable:!0,configurable:!0}),r.prototype._setKtxData=function(t){var e,r;t?t!=this.$ktxData&&((e=new p.KTXContainer(t,1)).isInvalid?p.error("ktx data is invalid"):(this.$ktxData=t,(r=new p.BitmapData(t)).format="ktx",e.uploadLevels(r,!1),this._setBitmapData(r))):p.error("ktx data is null")},r.prototype.$initData=function(t,e,r,i,n,o,a,s,l,c,h){void 0===h&&(h=!1);var u=p.$TextureScaleFactor;this.$bitmapX=t/u,this.$bitmapY=e/u,this.$bitmapWidth=r/u,this.$bitmapHeight=i/u,this.$offsetX=n,this.$offsetY=o,this.$textureWidth=a,this.$textureHeight=s,this.$sourceWidth=l,this.$sourceHeight=c,this.$rotated=h,p.BitmapData.$invalidate(this.$bitmapData)},r.prototype.getPixel32=function(t,e){throw new Error},r.prototype.getPixels=function(t,e,r,i){throw void 0===r&&(r=1),void 0===i&&(i=1),new Error},r.prototype.toDataURL=function(t,e,r){throw new Error},r.prototype.saveToFile=function(t,e,r){throw new Error},r.prototype.dispose=function(){this.$bitmapData&&(this.disposeBitmapData&&this.$bitmapData.$dispose(),this.$bitmapData=null)},r);function r(){var t=e.call(this)||this;return t.disposeBitmapData=!0,t.$bitmapX=0,t.$bitmapY=0,t.$bitmapWidth=0,t.$bitmapHeight=0,t.$offsetX=0,t.$offsetY=0,t.$textureWidth=0,t.$textureHeight=0,t.$sourceWidth=0,t.$sourceHeight=0,t.$bitmapData=null,t.$ktxData=null,t.$rotated=!1,t}p.Texture=t,__reflect(t.prototype,"egret.Texture")}(egret=egret||{}),function(t){var o,e=(o=t.HashObject,__extends(s,o),Object.defineProperty(s.prototype,"type",{get:function(){return this.$type},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bubbles",{get:function(){return this.$bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cancelable",{get:function(){return this.$cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"eventPhase",{get:function(){return this.$eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"currentTarget",{get:function(){return this.$currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"target",{get:function(){return this.$target},enumerable:!0,configurable:!0}),s.prototype.$setTarget=function(t){return this.$target=t,!0},s.prototype.isDefaultPrevented=function(){return this.$isDefaultPrevented},s.prototype.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},s.prototype.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},s.prototype.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},s.prototype.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},s.dispatchEvent=function(t,e,r,i){void 0===r&&(r=!1);var n=s.create(s,e,r),o=s._getPropertyData(s);null!=i&&(o.data=i);var a=t.dispatchEvent(n);return s.release(n),a},s._getPropertyData=function(t){return t._props||(t._props={})},s.create=function(t,e,r,i){var n;if(t.hasOwnProperty("eventPool")&&(n=t.eventPool),(n=n||(t.eventPool=[])).length){var o=n.pop();return o.$type=e,o.$bubbles=!!r,o.$cancelable=!!i,o.$isDefaultPrevented=!1,o.$isPropagationStopped=!1,o.$isPropagationImmediateStopped=!1,o.$eventPhase=2,o}return new t(e,r,i)},s.release=function(t){t.clean(),Object.getPrototypeOf(t).constructor.eventPool.push(t)},s.ADDED_TO_STAGE="addedToStage",s.REMOVED_FROM_STAGE="removedFromStage",s.ADDED="added",s.REMOVED="removed",s.ENTER_FRAME="enterFrame",s.RENDER="render",s.RESIZE="resize",s.CHANGE="change",s.CHANGING="changing",s.COMPLETE="complete",s.LOOP_COMPLETE="loopComplete",s.FOCUS_IN="focusIn",s.FOCUS_OUT="focusOut",s.ENDED="ended",s.ACTIVATE="activate",s.DEACTIVATE="deactivate",s.CLOSE="close",s.CONNECT="connect",s.LEAVE_STAGE="leaveStage",s.SOUND_COMPLETE="soundComplete",s);function s(t,e,r,i){var n=o.call(this)||this;return n.$eventPhase=2,n.$currentTarget=null,n.$target=null,n.$isDefaultPrevented=!1,n.$isPropagationStopped=!1,n.$isPropagationImmediateStopped=!1,n.$type=t,n.$bubbles=!!e,n.$cancelable=!!r,n.data=i,n}t.Event=e,__reflect(e.prototype,"egret.Event")}(egret=egret||{}),global.DEBUG=!0,global.RELEASE=!1,function(n){n.getString=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return n.sys.tr.apply(n.sys,arguments)},n.$error=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=n.sys.tr.apply(null,arguments);throw n.sys.$errorToFPS("Error #"+t+": "+i),new Error("#"+t+": "+i)},n.$warn=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=n.sys.tr.apply(null,arguments);n.sys.$warnToFPS("Warning #"+t+": "+i),n.warn("Warning #"+t+": "+i)},n.$markCannotUse=function(e,r,t){Object.defineProperty(e.prototype,r,{get:function(){return n.$warn(1009,n.getQualifiedClassName(e),r),t},set:function(t){n.$error(1009,n.getQualifiedClassName(e),r)},enumerable:!0,configurable:!0})}}(egret=egret||{}),function(r){var i,n=[],o=Math.PI/180,t=(i=r.HashObject,__extends(a,i),a.release=function(t){t&&n.push(t)},a.create=function(t,e){return(n.pop()||new a).setTo(t,e)},Object.defineProperty(a.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),a.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},a.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},a.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},a.prototype.add=function(t){return new a(this.x+t.x,this.y+t.y)},a.interpolate=function(t,e,r){var i=1-r;return new a(t.x*r+e.x*i,t.y*r+e.y*i)},a.prototype.normalize=function(t){var e;0==this.x&&0==this.y||(e=t/this.length,this.x*=e,this.y*=e)},a.prototype.offset=function(t,e){this.x+=t,this.y+=e},a.polar=function(t,e){return new a(t*r.NumberUtils.cos(e/o),t*r.NumberUtils.sin(e/o))},a.prototype.subtract=function(t){return new a(this.x-t.x,this.y-t.y)},a.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},a);function a(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var r=i.call(this)||this;return r.x=t,r.y=e,r}r.Point=t,__reflect(t.prototype,"egret.Point"),r.$TempPoint=new t}(egret=egret||{}),function(h){var u,t=(u=h.DisplayObject,__extends(p,u),Object.defineProperty(p.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),p.prototype.setChildrenSortMode=function(t){h.nativeRender&&this.$nativeDisplayObject.setChildrenSortMode&&this.$nativeDisplayObject.setChildrenSortMode(t)},p.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},p.prototype.addChildAt=function(t,e){return((e=0|+e)<0||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},p.prototype.$doAddChild=function(t,e,r){void 0===r&&(r=!0);var i=this;t==i?h.$error(1005):t instanceof h.DisplayObjectContainer&&t.contains(i)&&h.$error(1004);var n=t.$parent;if(n==i)return i.doSetChildIndex(t,e),t;n&&n.removeChild(t),i.$children.splice(e,0,t),t.$setParent(i),h.nativeRender&&i.$nativeDisplayObject.addChildAt(t.$nativeDisplayObject.id,e);var o,a,s=i.$stage;if(s&&t.$onAddToStage(s,i.$nestLevel+1),r&&t.dispatchEventWith(h.Event.ADDED,!0),s)for(var l=p.$EVENT_ADD_TO_STAGE_LIST;l.length;){var c=l.shift();c.$stage&&r&&c.dispatchEventWith(h.Event.ADDED_TO_STAGE)}return h.nativeRender||(t.$maskedObject&&t.$maskedObject.$updateRenderMode(),i.$cacheDirty||(i.$cacheDirty=!0,(o=i.$parent)&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp()),(a=i.$maskedObject)&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp()))),this.$childAdded(t,e),t},p.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},p.prototype.getChildAt=function(t){return 0<=(t=0|+t)&&t<this.$children.length?this.$children[t]:(h.$error(1007),null)},p.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},p.prototype.getChildByName=function(t){for(var e,r=this.$children,i=r.length,n=0;n<i;n++)if((e=r[n]).name==t)return e;return null},p.prototype.removeChild=function(t){var e=this.$children.indexOf(t);return 0<=e?this.$doRemoveChild(e):(h.$error(1006),null)},p.prototype.removeChildAt=function(t){return 0<=(t=0|+t)&&t<this.$children.length?this.$doRemoveChild(t):(h.$error(1007),null)},p.prototype.$doRemoveChild=function(t,e){void 0===e&&(e=!0),t=0|+t;var r=this,i=this.$children,n=i[t];if(this.$childRemoved(n,t),e&&n.dispatchEventWith(h.Event.REMOVED,!0),this.$stage){n.$onRemoveFromStage();for(var o=p.$EVENT_REMOVE_FROM_STAGE_LIST;0<o.length;){var a=o.shift();e&&a.$hasAddToStage&&(a.$hasAddToStage=!1,a.dispatchEventWith(h.Event.REMOVED_FROM_STAGE)),a.$hasAddToStage=!1,a.$stage=null}}this.$displayList||this.$parentDisplayList,n.$setParent(null);var s,l,c=i.indexOf(n);return-1!=c&&i.splice(c,1),h.nativeRender?r.$nativeDisplayObject.removeChild(n.$nativeDisplayObject.id):(n.$maskedObject&&n.$maskedObject.$updateRenderMode(),r.$cacheDirty||(r.$cacheDirty=!0,(s=r.$parent)&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp()),(l=r.$maskedObject)&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp()))),n},p.prototype.setChildIndex=function(t,e){((e=0|+e)<0||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},p.prototype.doSetChildIndex=function(t,e){var r,i,n=this.$children.indexOf(t);n<0&&h.$error(1006),n!=e&&(this.$childRemoved(t,n),this.$children.splice(n,1),this.$children.splice(e,0,t),this.$childAdded(t,e),h.nativeRender?(this.$nativeDisplayObject.removeChild(t.$nativeDisplayObject.id),this.$nativeDisplayObject.addChildAt(t.$nativeDisplayObject.id,e)):this.$cacheDirty||(this.$cacheDirty=!0,(r=this.$parent)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()),(i=this.$maskedObject)&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())))},p.prototype.swapChildrenAt=function(t,e){e=0|+e,0<=(t=0|+t)&&t<this.$children.length&&0<=e&&e<this.$children.length?this.doSwapChildrenAt(t,e):h.$error(1007)},p.prototype.swapChildren=function(t,e){var r=this.$children.indexOf(t),i=this.$children.indexOf(e);-1==r||-1==i?h.$error(1006):this.doSwapChildrenAt(r,i)},p.prototype.doSwapChildrenAt=function(t,e){if(e<t){var r=e;e=t,t=r}else if(t==e)return;var i,n,o=this.$children,a=o[t],s=o[e];this.$childRemoved(a,t),this.$childRemoved(s,e),o[t]=s,o[e]=a,this.$childAdded(s,t),this.$childAdded(a,e),h.nativeRender?this.$nativeDisplayObject.swapChild(t,e):this.$cacheDirty||(this.$cacheDirty=!0,(i=this.$parent)&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp()),(n=this.$maskedObject)&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp()))},p.prototype.removeChildren=function(){for(var t=this.$children.length-1;0<=t;t--)this.$doRemoveChild(t)},p.prototype.$childAdded=function(t,e){},p.prototype.$childRemoved=function(t,e){},p.prototype.$onAddToStage=function(t,e){u.prototype.$onAddToStage.call(this,t,e);var r=this.$children.length;e++;for(var i=0;i<r;i++){var n=this.$children[i];n.$onAddToStage(t,e),n.$maskedObject&&n.$maskedObject.$updateRenderMode()}},p.prototype.$onRemoveFromStage=function(){u.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,e=t.length,r=0;r<e;r++)t[r].$onRemoveFromStage()},p.prototype.$measureChildBounds=function(t){var e=this.$children,r=e.length;if(0!=r){for(var i=0,n=0,o=0,a=0,s=!1,l=-1;l<r;l++){var c=void 0;(c=-1==l?t:(e[l].getBounds(h.$TempRectangle),e[l].$getMatrix().$transformBounds(h.$TempRectangle),h.$TempRectangle)).isEmpty()||(a=s?(i=Math.min(i,c.x),n=Math.max(n,c.x+c.width),o=Math.min(o,c.y),Math.max(a,c.y+c.height)):(s=!0,n=(i=c.x)+c.width,(o=c.y)+c.height))}t.setTo(i,o,n-i,a-o)}},Object.defineProperty(p.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),p.prototype.$getTouchChildren=function(){return this.$touchChildren},p.prototype.$setTouchChildren=function(t){return this.$touchChildren!=t&&(this.$touchChildren=t,!0)},p.prototype.$hitTest=function(t,e){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),i=r.a*t+r.c*e+r.tx,n=r.b*t+r.d*e+r.ty,o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(i,n))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null;for(var a=this.$children,s=!1,l=null,c=a.length-1;0<=c;c--){var h=a[c];if(!h.$maskedObject&&(l=h.$hitTest(t,e))){if(s=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:s?this:u.prototype.$hitTest.call(this,t,e)},p.prototype._sortChildrenFunc=function(t,e){return t.zIndex===e.zIndex?t.$lastSortedIndex-e.$lastSortedIndex:t.zIndex-e.zIndex},p.prototype.sortChildren=function(){u.prototype.sortChildren.call(this);for(var t=this.$sortDirty=!1,e=this.$children,r=null,i=0,n=e.length;i<n;++i)(r=e[i]).$lastSortedIndex=i,t||0===r.zIndex||(t=!0);t&&1<e.length&&e.sort(this._sortChildrenFunc)},p.$EVENT_ADD_TO_STAGE_LIST=[],p.$EVENT_REMOVE_FROM_STAGE_LIST=[],p);function p(){var t=u.call(this)||this;return t.$touchChildren=!0,t.$children=[],t}h.DisplayObjectContainer=t,__reflect(t.prototype,"egret.DisplayObjectContainer")}(egret=egret||{}),function(h){var r,t=(r=h.HashObject,__extends(e,r),e.prototype.getTexture=function(t){return this._textureMap[t]},e.prototype.createTexture=function(t,e,r,i,n,o,a,s,l){void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=o+i),void 0===l&&(l=a+n);var c=new h.Texture;return c.disposeBitmapData=!1,c.$bitmapData=this.$texture.$bitmapData,c.$initData(this._bitmapX+e,this._bitmapY+r,i,n,o,a,s,l,this.$texture.$sourceWidth,this.$texture.$sourceHeight),this._textureMap[t]=c},e.prototype.dispose=function(){this.$texture&&this.$texture.dispose()},e);function e(t){var e=r.call(this)||this;return e._bitmapX=0,e._bitmapY=0,e._textureMap=h.createMap(),e.$texture=t,e._bitmapX=t.$bitmapX-t.$offsetX,e._bitmapY=t.$bitmapY-t.$offsetY,e}h.SpriteSheet=t,__reflect(t.prototype,"egret.SpriteSheet")}(egret=egret||{}),function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret=egret||{}),function(a){(a.sys||(a.sys={})).tr=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=a.$locale_strings[a.$language][t];if(!i)return"{"+t+"}";for(var n=e.length,o=0;o<n;o++)i=i.replace("{"+o+"}",e[o]);return i}}(egret=egret||{}),function(c){var i,t=(i=c.DisplayObject,__extends(r,i),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(1)},r.prototype.$onAddToStage=function(t,e){i.prototype.$onAddToStage.call(this,t,e);var r=this.$texture;r&&r.$bitmapData&&c.BitmapData.$addDisplayObject(this,r.$bitmapData)},r.prototype.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this);var t=this.$texture;t&&c.BitmapData.$removeDisplayObject(this,t.$bitmapData)},Object.defineProperty(r.prototype,"texture",{get:function(){return this.$texture},set:function(t){this.$setTexture(t),t&&this.$renderNode&&(this.$renderNode.rotated=t.$rotated)},enumerable:!0,configurable:!0}),r.prototype.$setTexture=function(t){var e=this,r=e.$texture;if(t==r)return!1;if(!(e.$texture=t)){r&&c.BitmapData.$removeDisplayObject(e,r.$bitmapData),e.setImageData(null,0,0,0,0,0,0,0,0,0,0),e.$renderDirty=!0;var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var n=e.$maskedObject;return n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp()),c.nativeRender&&this.setBitmapDataToWasm(null),!0}if(e.$refreshImageData(),e.$stage){if(r&&r.$bitmapData){if(r.$bitmapData.hashCode==(t.$bitmapData?t.$bitmapData.hashCode:-1)){e.$renderDirty=!0;var o=e.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var a=e.$maskedObject;return a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp()),!0}c.BitmapData.$removeDisplayObject(e,r.$bitmapData)}c.BitmapData.$addDisplayObject(e,t.$bitmapData)}e.$renderDirty=!0;var s=e.$parent;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp());var l=e.$maskedObject;return l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp()),!0},r.prototype.$setBitmapData=function(t){this.$setTexture(t)},r.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setTexture(t)},r.prototype.$refreshImageData=function(){var t=this.$texture;t?(c.nativeRender&&this.setBitmapDataToWasm(t),this.setImageData(t.$bitmapData,t.$bitmapX,t.$bitmapY,t.$bitmapWidth,t.$bitmapHeight,t.$offsetX,t.$offsetY,t.$getTextureWidth(),t.$getTextureHeight(),t.$sourceWidth,t.$sourceHeight)):c.nativeRender&&this.setBitmapDataToWasm(null)},r.prototype.setImageData=function(t,e,r,i,n,o,a,s,l,c,h){this.$bitmapData=t,this.$bitmapX=e,this.$bitmapY=r,this.$bitmapWidth=i,this.$bitmapHeight=n,this.$offsetX=o,this.$offsetY=a,this.$textureWidth=s,this.$textureHeight=l,this.$sourceWidth=c,this.$sourceHeight=h},Object.defineProperty(r.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$setScale9Grid(t)},enumerable:!0,configurable:!0}),r.prototype.$setScale9Grid=function(t){var e,r,i=this;i.$scale9Grid=t,i.$renderDirty=!0,c.nativeRender?t?i.$nativeDisplayObject.setScale9Grid(t.x,t.y,t.width,t.height):i.$nativeDisplayObject.setScale9Grid(0,0,-1,-1):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))},Object.defineProperty(r.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){this.$setFillMode(t)},enumerable:!0,configurable:!0}),r.prototype.$setFillMode=function(t){var e,r,i=this;return t!=i.$fillMode&&(i.$fillMode=t,c.nativeRender?i.$nativeDisplayObject.setBitmapFillMode(i.$fillMode):(i.$renderDirty=!0,(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())),!0)},Object.defineProperty(r.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){var e,r;t!=this.$smoothing&&(this.$smoothing=t,this.$renderNode.smoothing=t,c.nativeRender||((e=this.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=this.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},enumerable:!0,configurable:!0}),r.prototype.$setWidth=function(t){var e,r,i=this;return!(t<0||t==i.$explicitBitmapWidth||(i.$explicitBitmapWidth=t,i.$renderDirty=!0,c.nativeRender?i.$nativeDisplayObject.setWidth(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())),0))},r.prototype.$setHeight=function(t){var e,r,i=this;return!(t<0||t==i.$explicitBitmapHeight||(i.$explicitBitmapHeight=t,i.$renderDirty=!0,c.nativeRender?i.$nativeDisplayObject.setHeight(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())),0))},r.prototype.$getWidth=function(){return isNaN(this.$explicitBitmapWidth)?this.$getContentBounds().width:this.$explicitBitmapWidth},r.prototype.$getHeight=function(){return isNaN(this.$explicitBitmapHeight)?this.$getContentBounds().height:this.$explicitBitmapHeight},r.prototype.$measureContentBounds=function(t){var e,r;r=this.$bitmapData?(e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight):(e=isNaN(this.$explicitBitmapWidth)?0:this.$explicitBitmapWidth,isNaN(this.$explicitBitmapHeight)?0:this.$explicitBitmapHeight),t.setTo(0,0,e,r)},r.prototype.$updateRenderNode=function(){var t,e,r;this.$texture&&(t=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,e=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,(r=this.scale9Grid||this.$texture.scale9Grid)?(this.$renderNode instanceof c.sys.NormalBitmapNode&&(this.$renderNode=new c.sys.BitmapNode),c.sys.BitmapNode.$updateTextureDataWithScale9Grid(this.$renderNode,this.$bitmapData,r,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,t,e,this.$sourceWidth,this.$sourceHeight,this.$smoothing)):(this.fillMode==c.BitmapFillMode.REPEAT&&this.$renderNode instanceof c.sys.NormalBitmapNode&&(this.$renderNode=new c.sys.BitmapNode),c.sys.BitmapNode.$updateTextureData(this.$renderNode,this.$bitmapData,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,t,e,this.$sourceWidth,this.$sourceHeight,this.$fillMode,this.$smoothing)))},Object.defineProperty(r.prototype,"pixelHitTest",{get:function(){return this._pixelHitTest},set:function(t){this._pixelHitTest=!!t},enumerable:!0,configurable:!0}),r.prototype.$hitTest=function(t,e){var r=i.prototype.$hitTest.call(this,t,e);return r&&this._pixelHitTest&&(this.hitTestPoint(t,e,!0)||(r=null)),r},r.defaultSmoothing=!0,r);function r(t){var e=i.call(this)||this;return e.$texture=null,e.$bitmapData=null,e.$bitmapX=0,e.$bitmapY=0,e.$bitmapWidth=0,e.$bitmapHeight=0,e.$offsetX=0,e.$offsetY=0,e.$textureWidth=0,e.$textureHeight=0,e.$sourceWidth=0,e.$sourceHeight=0,e.$smoothing=r.defaultSmoothing,e.$explicitBitmapWidth=NaN,e.$explicitBitmapHeight=NaN,e.$scale9Grid=null,e.$fillMode="scale",e._pixelHitTest=!1,e.$renderNode=new c.sys.NormalBitmapNode,e.$setTexture(t),t&&(e.$renderNode.rotated=t.$rotated),e}c.Bitmap=t,__reflect(t.prototype,"egret.Bitmap")}(egret=egret||{}),function(t){var e,r;function i(){this.type=0,this.drawData=[],this.renderCount=0}e=t.sys||(t.sys={}),i.prototype.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},i.prototype.$getRenderCount=function(){return this.renderCount},r=i,e.RenderNode=r,__reflect(r.prototype,"egret.sys.RenderNode")}(egret=egret||{}),function(t){var e,r;function i(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0,this.$lastX=0,this.$lastY=0}e=t.sys||(t.sys={}),i.prototype.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var r=this.dataPosition;this.$data[r++]=t,this.$data[r++]=e,this.dataPosition=r},i.prototype.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var r=this.dataPosition;this.$data[r++]=t,this.$data[r++]=e,this.dataPosition=r},i.prototype.curveTo=function(t,e,r,i){this.$commands[this.commandPosition++]=3;var n=this.dataPosition;this.$data[n++]=t,this.$data[n++]=e,this.$data[n++]=r,this.$data[n++]=i,this.dataPosition=n},i.prototype.cubicCurveTo=function(t,e,r,i,n,o){this.$commands[this.commandPosition++]=4;var a=this.dataPosition;this.$data[a++]=t,this.$data[a++]=e,this.$data[a++]=r,this.$data[a++]=i,this.$data[a++]=n,this.$data[a++]=o,this.dataPosition=a},i.prototype.drawRect=function(t,e,r,i){var n=t+r,o=e+i;this.moveTo(t,e),this.lineTo(n,e),this.lineTo(n,o),this.lineTo(t,o),this.lineTo(t,e)},i.prototype.drawRoundRect=function(t,e,r,i,n,o){var a,s,l,c,h,u,p,d,f=.5*n|0,g=o?.5*o|0:f;f&&g?((a=.5*r)<f&&(f=a),(s=.5*i)<g&&(g=s),a!==f||s!==g?(h=t+f,u=(l=t+r)-f,p=e+g,d=(c=e+i)-g,this.moveTo(l,d),this.curveTo(l,c,u,c),this.lineTo(h,c),this.curveTo(t,c,t,d),this.lineTo(t,p),this.curveTo(t,e,h,e),this.lineTo(u,e),this.curveTo(l,e,l,p),this.lineTo(l,d)):f===g?this.drawCircle(t+f,e+g,f):this.drawEllipse(t,e,2*f,2*g)):this.drawRect(t,e,r,i)},i.prototype.drawCircle=function(t,e,r){this.arcToBezier(t,e,r,r,0,2*Math.PI)},i.prototype.drawEllipse=function(t,e,r,i){var n=.5*r,o=.5*i;t+=n,e+=o,this.arcToBezier(t,e,n,o,0,2*Math.PI)},i.prototype.drawArc=function(t,e,r,i,n,o){o?i<=n&&(n-=2*Math.PI):n<=i&&(n+=2*Math.PI),this.arcToBezier(t,e,r,r,i,n,o)},i.prototype.arcToBezier=function(t,e,r,i,n,o,a){var s=.5*Math.PI,l=n,c=l;a?(c+=-s-l%s)<o&&(c=o):o<(c+=s-l%s)&&(c=o);var h=t+Math.cos(l)*r,u=e+Math.sin(l)*i;this.$lastX==h&&this.$lastY==u||this.moveTo(h,u);for(var p=Math.cos(l),d=Math.sin(l),f=0;f<4;f++){var g=c-l,m=4*Math.tan(g/4)/3,y=h-d*m*r,v=u+p*m*i,_=(h=t+(p=Math.cos(c))*r)+(d=Math.sin(c))*m*r,b=(u=e+d*i)-p*m*i;if(this.cubicCurveTo(y,v,_,b,h,u),c===o)break;l=c,a?(c=l-s)<o&&(c=o):o<(c=l+s)&&(c=o)}},r=i,e.Path2D=r,__reflect(r.prototype,"egret.sys.Path2D")}(egret=egret||{}),(egret=egret||{}).fontMapping={},(egret||(egret={})).createMap=function(){var t=Object.create(null);return t.__v8__=void 0,delete t.__v8__,t},function(t){var h,e=(h=t.Filter,__extends(r,h),Object.defineProperty(r.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16,this.$uniforms.color.x=this.$red/255,this.$uniforms.color.y=this.$green/255,this.$uniforms.color.z=this.$blue/255)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.$uniforms.alpha=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.$uniforms.blurX=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.$uniforms.blurY=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"strength",{get:function(){return this.$strength},set:function(t){this.$strength!=t&&(this.$strength=t,this.$uniforms.strength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this.$quality},set:function(t){this.$quality!=t&&(this.$quality=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"inner",{get:function(){return this.$inner},set:function(t){this.$inner!=t&&(this.$inner=t,this.$uniforms.inner=t?1:0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"knockout",{get:function(){return this.$knockout},set:function(t){this.$knockout!=t&&(this.$knockout=t,this.$uniforms.knockout=t?0:1)},enumerable:!0,configurable:!0}),r.prototype.$toJson=function(){return'{"color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+"}"},r.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY},r);function r(t,e,r,i,n,o,a,s){void 0===t&&(t=16711680),void 0===e&&(e=1),void 0===r&&(r=6),void 0===i&&(i=6),void 0===n&&(n=2),void 0===o&&(o=1),void 0===a&&(a=!1),void 0===s&&(s=!1);var l=h.call(this)||this,c=l;return c.type="glow",c.$color=t,c.$blue=255&t,c.$green=(65280&t)>>8,c.$red=t>>16,c.$alpha=e,c.$blurX=r,c.$blurY=i,c.$strength=n,c.$quality=o,c.$inner=a,c.$knockout=s,c.$uniforms.color={x:l.$red/255,y:l.$green/255,z:l.$blue/255,w:1},c.$uniforms.alpha=e,c.$uniforms.blurX=r,c.$uniforms.blurY=i,c.$uniforms.strength=n,c.$uniforms.inner=a?1:0,c.$uniforms.knockout=s?0:1,c.$uniforms.dist=0,c.$uniforms.angle=0,c.$uniforms.hideObject=0,c.onPropertyChange(),l}t.GlowFilter=e,__reflect(e.prototype,"egret.GlowFilter")}(egret=egret||{}),function(r){var e,t=(e=r.DisplayObjectContainer,__extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(13)},Object.defineProperty(i.prototype,"frameRate",{get:function(){return r.ticker.$frameRate},set:function(t){r.ticker.$setFrameRate(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),i.prototype.invalidate=function(){r.sys.$invalidateRenderFlag=!0},i.prototype.registerImplementation=function(t,e){r.registerImplementation(t,e)},i.prototype.getImplementation=function(t){return r.getImplementation(t)},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureScaleFactor",{get:function(){return r.$TextureScaleFactor},set:function(t){r.$TextureScaleFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i);function i(){var t=e.call(this)||this;return t.$stageWidth=0,t.$stageHeight=0,t.$scaleMode=r.StageScaleMode.SHOW_ALL,t.$orientation=r.OrientationMode.AUTO,t.$maxTouches=99,(t.$stage=t).$nestLevel=1,t}r.Stage=t,__reflect(t.prototype,"egret.Stage"),r.$markCannotUse(t,"alpha",1),r.$markCannotUse(t,"visible",!0),r.$markCannotUse(t,"x",0),r.$markCannotUse(t,"y",0),r.$markCannotUse(t,"scaleX",1),r.$markCannotUse(t,"scaleY",1),r.$markCannotUse(t,"rotation",0),r.$markCannotUse(t,"cacheAsBitmap",!1),r.$markCannotUse(t,"scrollRect",null),r.$markCannotUse(t,"filters",null),r.$markCannotUse(t,"blendMode",null),r.$markCannotUse(t,"touchEnabled",!0),r.$markCannotUse(t,"matrix",null)}(egret=egret||{}),function(t){var e=(r.NORMAL="normal",r.ADD="add",r.ERASE="erase",r);function r(){}t.BlendMode=e,__reflect(e.prototype,"egret.BlendMode")}(egret=egret||{}),function(t){!function(t){for(var r=["normal","add","erase"],i={},e=r.length,n=0;n<e;n++){i[r[n]]=n}t.blendModeToNumber=function(t){var e=i[t];return void 0===e?0:e},t.numberToBlendMode=function(t){var e=r[t];return void 0===e?"normal":e}}(t.sys||(t.sys={}))}(egret=egret||{}),(egret=egret||{}).ChildrenSortMode={DEFAULT:"default",INCREASE_Y:"increaseY",DECREASE_Y:"decreaseY"},(egret=egret||{}).CapsStyle={NONE:"none",ROUND:"round",SQUARE:"square"},function(a){var t=(s.compileProgram=function(t,e,r){var i=s.compileFragmentShader(t,r),n=s.compileVertexShader(t,e),o=t.createProgram();return t.attachShader(o,n),t.attachShader(o,i),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||a.$warn(1020),o},s.compileFragmentShader=function(t,e){return s._compileShader(t,e,t.FRAGMENT_SHADER)},s.compileVertexShader=function(t,e){return s._compileShader(t,e,t.VERTEX_SHADER)},s._compileShader=function(t,e,r){var i=t.createShader(r);return t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:null},s.checkCanUseWebGL=function(){if(null==s.canUseWebGL)try{var t=document.createElement("canvas");s.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){s.canUseWebGL=!1}return s.canUseWebGL},s.deleteWebGLTexture=function(t){var e;t&&(t[a.engine_default_empty_texture]?console.warn("deleteWebGLTexture:"+a.engine_default_empty_texture):(e=t[a.glContext])?e.deleteTexture(t):console.error("deleteWebGLTexture gl = "+e))},s.premultiplyTint=function(t,e){return 1===e?(255*e<<24)+t:0===e?0:(255*e<<24)+(((t>>16&255)*e+.5|0)<<16)+(((t>>8&255)*e+.5|0)<<8)+((255&t)*e+.5|0)},s);function s(){}a.WebGLUtils=t,__reflect(t.prototype,"egret.WebGLUtils")}(egret=egret||{}),function(t){var i,e=(i=t.Event,__extends(r,i),r.FOCUS_IN="focusIn",r.FOCUS_OUT="focusOut",r);function r(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),i.call(this,t,e,r)||this}t.FocusEvent=e,__reflect(e.prototype,"egret.FocusEvent")}(egret=egret||{}),function(t){var e,r=(e=t.Event,__extends(i,e),i.PERMISSION_DENIED="permissionDenied",i.UNAVAILABLE="unavailable",i);function i(){return null!==e&&e.apply(this,arguments)||this}t.GeolocationEvent=r,__reflect(r.prototype,"egret.GeolocationEvent")}(egret=egret||{}),function(n){var o,t=(o=n.Event,__extends(a,o),Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),a.dispatchHTTPStatusEvent=function(t,e){var r=n.Event.create(a,a.HTTP_STATUS);r._status=e;var i=t.dispatchEvent(r);return n.Event.release(r),i},a.HTTP_STATUS="httpStatus",a);function a(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var i=o.call(this,t,e,r)||this;return i._status=0,i}n.HTTPStatusEvent=t,__reflect(t.prototype,"egret.HTTPStatusEvent")}(egret=egret||{}),function(i){var n,t=(n=i.Event,__extends(o,n),o.dispatchIOErrorEvent=function(t){var e=i.Event.create(o,o.IO_ERROR),r=t.dispatchEvent(e);return i.Event.release(e),r},o.IO_ERROR="ioError",o);function o(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),n.call(this,t,e,r)||this}i.IOErrorEvent=t,__reflect(t.prototype,"egret.IOErrorEvent")}(egret=egret||{}),function(t){var e,r=(e=t.Event,__extends(i,e),i);function i(){return null!==e&&e.apply(this,arguments)||this}t.MotionEvent=r,__reflect(r.prototype,"egret.MotionEvent")}(egret=egret||{}),function(t){var e,r=(e=t.Event,__extends(i,e),i);function i(){return null!==e&&e.apply(this,arguments)||this}t.OrientationEvent=r,__reflect(r.prototype,"egret.OrientationEvent")}(egret=egret||{}),function(a){var s,t=(s=a.Event,__extends(l,s),l.dispatchProgressEvent=function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=a.Event.create(l,e);n.bytesLoaded=r,n.bytesTotal=i;var o=t.dispatchEvent(n);return a.Event.release(n),o},l.PROGRESS="progress",l.SOCKET_DATA="socketData",l);function l(t,e,r,i,n){void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===i&&(i=0),void 0===n&&(n=0);var o=s.call(this,t,e,r)||this;return o.bytesLoaded=0,o.bytesTotal=0,o.bytesLoaded=i,o.bytesTotal=n,o}a.ProgressEvent=t,__reflect(t.prototype,"egret.ProgressEvent")}(egret=egret||{}),function(n){var i,t=(i=n.Event,__extends(o,i),o.dispatchStageOrientationEvent=function(t,e){var r=n.Event.create(o,e),i=t.dispatchEvent(r);return n.Event.release(r),i},o.ORIENTATION_CHANGE="orientationChange",o);function o(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),i.call(this,t,e,r)||this}n.StageOrientationEvent=t,__reflect(t.prototype,"egret.StageOrientationEvent")}(egret=egret||{}),function(o){var a,t=(a=o.Event,__extends(s,a),s.dispatchTextEvent=function(t,e,r){var i=o.Event.create(s,e);i.text=r;var n=t.dispatchEvent(i);return o.Event.release(i),n},s.LINK="link",s);function s(t,e,r,i){void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===i&&(i="");var n=a.call(this,t,e,r)||this;return n.text=i,n}o.TextEvent=t,__reflect(t.prototype,"egret.TextEvent")}(egret=egret||{}),function(a){var i,t=(i=a.Event,__extends(s,i),s.prototype.updateAfterEvent=function(){a.sys.$requestRenderingFlag=!0},s.dispatchTimerEvent=function(t,e,r,i){var n=a.Event.create(s,e,r,i),o=t.dispatchEvent(n);return a.Event.release(n),o},s.TIMER="timer",s.TIMER_COMPLETE="timerComplete",s);function s(t,e,r){return i.call(this,t,e,r)||this}a.TimerEvent=t,__reflect(t.prototype,"egret.TimerEvent")}(egret=egret||{}),function(s){function t(){}s.CompressedTextureData=t,__reflect(t.prototype,"egret.CompressedTextureData"),s.etc_alpha_mask="etc_alpha_mask",s.engine_default_empty_texture="engine_default_empty_texture",s.is_compressed_texture="is_compressed_texture",s.glContext="glContext",s.UNPACK_PREMULTIPLY_ALPHA_WEBGL="UNPACK_PREMULTIPLY_ALPHA_WEBGL";var i,e=(i=s.HashObject,__extends(l,i),Object.defineProperty(l.prototype,"source",{get:function(){return this.$source},set:function(t){this.$source=t,s.nativeRender&&egret_native.NativeDisplayObject.setSourceToNativeBitmapData(this.$nativeBitmapData,t)},enumerable:!0,configurable:!0}),l.create=function(t,e,r){var i="",n="image/png";"/"===(i="arraybuffer"===t?s.Base64Util.encode(e):e).charAt(0)?n="image/jpeg":"R"===i.charAt(0)?n="image/gif":"i"===i.charAt(0)&&(n="image/png");var o=new Image;o.src="data:"+n+";base64,"+i,o.crossOrigin="*";var a=new l(o);return o.onload=function(){o.onload=void 0,a.source=o,a.height=o.height,a.width=o.width,r&&r(a)},a},l.prototype.$dispose=function(){"webgl"==s.Capabilities.renderMode&&this.webGLTexture&&(s.WebGLUtils.deleteWebGLTexture(this.webGLTexture),this.webGLTexture=null),this.source&&this.source.dispose&&this.source.dispose(),this.source&&this.source.src&&(this.source.src=""),this.source=null,this.clearCompressedTextureData(),this.debugCompressedTextureURL="",this.etcAlphaMask=null,s.nativeRender&&egret_native.NativeDisplayObject.disposeNativeBitmapData(this.$nativeBitmapData),l.$dispose(this)},l.$addDisplayObject=function(t,e){var r,i;!e||(r=e.hashCode)&&(l._displayList[r]?(i=l._displayList[r]).indexOf(t)<0&&i.push(t):l._displayList[r]=[t])},l.$removeDisplayObject=function(t,e){var r,i,n;!e||(r=e.hashCode)&&(!l._displayList[r]||0<=(n=(i=l._displayList[r]).indexOf(t))&&i.splice(n,1))},l.$invalidate=function(t){if(t){var e=t.hashCode;if(e&&l._displayList[e])for(var r=l._displayList[e],i=0;i<r.length;i++){r[i]instanceof s.Bitmap&&r[i].$refreshImageData();var n=r[i];n.$renderDirty=!0;var o=n.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var a=n.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}}},l.$dispose=function(t){if(t){var e=t.hashCode;if(e&&l._displayList[e]){for(var r=0,i=l._displayList[e];r<i.length;r++){var n=i[r];n instanceof s.Bitmap&&(n.$bitmapData=null),n.$renderDirty=!0;var o=n.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var a=n.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}delete l._displayList[e]}}},l.prototype._getCompressedTextureData=function(t,e){var r=this.compressedTextureData[t];return r?r[e]:null},l.prototype.getCompressed2dTextureData=function(){return this._getCompressedTextureData(0,0)},l.prototype.hasCompressed2d=function(){return!!this.getCompressed2dTextureData()},l.prototype.clearCompressedTextureData=function(){this.compressedTextureData.length=0},l._displayList=s.createMap(),l);function l(t){var e,r=i.call(this)||this;return r.format="image",r.$deleteSource=!0,r.compressedTextureData=[],r.debugCompressedTextureURL="",r.etcAlphaMask=null,s.nativeRender&&((e=new egret_native.NativeBitmapData).$init(),r.$nativeBitmapData=e),r.source=t,r.source=t,r.source&&(r.width=+t.width,r.height=+t.height),r}s.BitmapData=e,__reflect(e.prototype,"egret.BitmapData")}(egret=egret||{}),function(h){var s,t=new h.Point,e=(s=h.Event,__extends(u,s),u.prototype.$initTo=function(t,e,r){this.touchPointID=+r||0,this.$stageX=+t||0,this.$stageY=+e||0},Object.defineProperty(u.prototype,"stageX",{get:function(){return this.$stageX},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"stageY",{get:function(){return this.$stageY},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"localX",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localX},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"localY",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localY},enumerable:!0,configurable:!0}),u.prototype.getLocalXY=function(){this.targetChanged=!1,this.$target.$getInvertedConcatenatedMatrix().transformPoint(this.$stageX,this.$stageY,t),this._localX=t.x,this._localY=t.y},u.prototype.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},u.prototype.updateAfterEvent=function(){h.sys.$requestRenderingFlag=!0},u.dispatchTouchEvent=function(t,e,r,i,n,o,a,s){if(void 0===s&&(s=!1),!r&&!t.hasEventListener(e))return!0;var l=h.Event.create(u,e,r,i);l.$initTo(n,o,a),l.touchDown=s;var c=t.dispatchEvent(l);return h.Event.release(l),c},u.TOUCH_MOVE="touchMove",u.TOUCH_BEGIN="touchBegin",u.TOUCH_END="touchEnd",u.TOUCH_CANCEL="touchCancel",u.TOUCH_TAP="touchTap",u.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",u);function u(t,e,r,i,n,o){var a=s.call(this,t,e,r)||this;return a.targetChanged=!0,a.touchDown=!1,a.$initTo(i,n,o),a}h.TouchEvent=e,__reflect(e.prototype,"egret.TouchEvent")}(egret=egret||{}),function(r){var o,t=(o=r.Filter,__extends(e,o),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.blurXFilter.blurX=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.blurYFilter.blurY=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"blurX": '+this.$blurX+', "blurY": '+this.$blurY+', "quality": 1}'},e.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY},e.prototype.onPropertyChange=function(){var t=this;t.updatePadding(),r.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(t.blurXFilter.$id,0,0,t.paddingLeft,t.paddingRight),egret_native.NativeDisplayObject.setFilterPadding(t.blurYFilter.$id,t.paddingTop,t.paddingBottom,0,0),egret_native.NativeDisplayObject.setDataToFilter(t))},e);function e(t,e,r){void 0===t&&(t=4),void 0===e&&(e=4),void 0===r&&(r=1);var i=o.call(this)||this,n=i;return n.type="blur",n.$blurX=t,n.$blurY=e,n.$quality=r,n.blurXFilter=new a(t),n.blurYFilter=new l(e),n.onPropertyChange(),i}r.BlurFilter=t,__reflect(t.prototype,"egret.BlurFilter");var i,a=(i=r.Filter,__extends(n,i),Object.defineProperty(n.prototype,"blurX",{get:function(){return this.$uniforms.blur.x},set:function(t){this.$uniforms.blur.x=t},enumerable:!0,configurable:!0}),n);function n(t){void 0===t&&(t=4);var e=i.call(this)||this;return r.nativeRender?e.type="blur":e.type="blurX",e.$uniforms.blur={x:t,y:0},e.onPropertyChange(),e}__reflect(a.prototype,"BlurXFilter",["egret.IBlurXFilter"]);var s,l=(s=r.Filter,__extends(c,s),Object.defineProperty(c.prototype,"blurY",{get:function(){return this.$uniforms.blur.y},set:function(t){this.$uniforms.blur.y=t},enumerable:!0,configurable:!0}),c);function c(t){void 0===t&&(t=4);var e=s.call(this)||this;return r.nativeRender?e.type="blur":e.type="blurY",e.$uniforms.blur={x:0,y:t},e.onPropertyChange(),e}__reflect(l.prototype,"BlurYFilter",["egret.IBlurYFilter"])}(egret=(egret=egret||{})||{}),function(t){var r,e=(r=t.Filter,__extends(i,r),Object.defineProperty(i.prototype,"matrix",{get:function(){for(var t=0;t<20;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},set:function(t){this.setMatrix(t)},enumerable:!0,configurable:!0}),i.prototype.setMatrix=function(t){if(t)for(var e=0;e<20;e++)this.$matrix[e]=t[e];else for(e=0;e<20;e++)this.$matrix[e]=0==e||6==e||12==e||18==e?1:0;for(var r=this.$matrix,i=this.$uniforms.matrix,n=this.$uniforms.colorAdd,e=0,o=0;e<r.length;e++)4===e?n.x=r[e]/255:9===e?n.y=r[e]/255:14===e?n.z=r[e]/255:19===e?n.w=r[e]/255:(i[o]=r[e],o++);this.onPropertyChange()},i.prototype.$toJson=function(){return'{"matrix": ['+this.$matrix.toString()+"]}"},i);function i(t){void 0===t&&(t=null);var e=r.call(this)||this;return e.$matrix=[],e.matrix2=[],e.type="colorTransform",e.$uniforms.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.$uniforms.colorAdd={x:0,y:0,z:0,w:0},e.setMatrix(t),e.onPropertyChange(),e}t.ColorMatrixFilter=e,__reflect(e.prototype,"egret.ColorMatrixFilter")}(egret=egret||{}),function(e){var o,a,s={},l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=new Array(36),h=0,t=(a=e.Filter,__extends(r,a),Object.defineProperty(r.prototype,"padding",{get:function(){return this.$padding},set:function(t){this.$padding!=t&&(this.$padding=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.$uniforms},enumerable:!0,configurable:!0}),r.prototype.onPropertyChange=function(){var t;e.nativeRender&&(t=this,egret_native.NativeDisplayObject.setFilterPadding(t.$id,t.$padding,t.$padding,t.$padding,t.$padding),egret_native.NativeDisplayObject.setDataToFilter(t))},r);function r(t,e,r){void 0===r&&(r={});var i=a.call(this)||this;i.$padding=0;var n=(i.$vertexSrc=t)+(i.$fragmentSrc=e);return s[n]||(s[n]=function(){for(var t=0;t<36;t++)8===t||13===t||18===t||23===t?c[t]="-":14===t?c[t]="4":(h<=2&&(h=33554432+16777216*Math.random()|0),o=15&h,h>>=4,c[t]=l[19===t?3&o|8:o]);return c.join("")}()),i.$shaderKey=s[n],i.$uniforms=r,i.type="custom",i}e.CustomFilter=t,__reflect(t.prototype,"egret.CustomFilter")}(egret=egret||{}),function(o){var d,t=(d=o.GlowFilter,__extends(e,d),Object.defineProperty(e.prototype,"distance",{get:function(){return this.$distance},set:function(t){this.$distance!=t&&(this.$distance=t,this.$uniforms.dist=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.$angle},set:function(t){this.$angle!=t&&(this.$angle=t,this.$uniforms.angle=t/180*Math.PI,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideObject",{get:function(){return this.$hideObject},set:function(t){this.$hideObject!=t&&(this.$hideObject=t,this.$uniforms.hideObject=t?1:0)},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"distance": '+this.$distance+', "angle": '+this.$angle+', "color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+', "hideObject": '+this.$hideObject+"}"},e.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY;var e=t.distance||0,r=t.angle||0,i=0,n=0;0!=e&&(i=0<(i=e*o.NumberUtils.cos(r))?Math.ceil(i):Math.floor(i),n=0<(n=e*o.NumberUtils.sin(r))?Math.ceil(n):Math.floor(n),t.paddingLeft+=i,t.paddingRight+=i,t.paddingTop+=n,t.paddingBottom+=n)},e);function e(t,e,r,i,n,o,a,s,l,c,h){void 0===t&&(t=4),void 0===e&&(e=45),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=4),void 0===o&&(o=4),void 0===a&&(a=1),void 0===s&&(s=1),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===h&&(h=!1);var u=d.call(this,r,i,n,o,a,s,l,c)||this,p=u;return p.$distance=t,p.$angle=e,p.$hideObject=h,p.$uniforms.dist=t,p.$uniforms.angle=e/180*Math.PI,p.$uniforms.hideObject=h?1:0,p.onPropertyChange(),u}o.DropShadowFilter=t,__reflect(t.prototype,"egret.DropShadowFilter")}(egret=egret||{}),function(t){var e=(r.LINEAR="linear",r.RADIAL="radial",r);function r(){}t.GradientType=e,__reflect(e.prototype,"egret.GradientType")}(egret=egret||{}),function(f){function h(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),t}function u(t,e){for(var r=[],i=0;i<e;i++){var n=function(t,e){var r=0,i=0,n=0,o=t.length;{var a,s,l,c,h,u,p,d;o/2==3?(a=t[r++],s=t[r++],l=t[r++],c=t[r++],h=t[r++],u=t[r++],i=g(a,l,h,e),n=g(s,c,u,e)):o/2==4&&(a=t[r++],s=t[r++],l=t[r++],c=t[r++],h=t[r++],u=t[r++],p=t[r++],d=t[r++],i=m(a,l,h,p,e),n=m(s,c,u,d,e))}return f.Point.create(i,n)}(t,i/e);n&&r.push(n)}return r}function g(t,e,r,i){return Math.pow(1-i,2)*t+2*i*(1-i)*e+Math.pow(i,2)*r}function m(t,e,r,i,n){return Math.pow(1-n,3)*t+3*n*Math.pow(1-n,2)*e+3*(1-n)*Math.pow(n,2)*r+Math.pow(n,3)*i}var e,t=(e=f.HashObject,__extends(r,e),r.prototype.$setTarget=function(t){this.$targetDisplay&&(this.$targetDisplay.$renderNode=null),t.$renderNode=this.$renderNode,this.$targetDisplay=t,this.$targetIsSprite=t instanceof f.Sprite},r.prototype.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},r.prototype.beginFill=function(t,e){void 0===e&&(e=1),t=+t||0,e=+e||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginFill(t,e),this.fillPath=this.$renderNode.beginFill(t,e,this.strokePath),1<this.$renderNode.drawData.length&&this.fillPath.moveTo(this.lastX,this.lastY)},r.prototype.beginGradientFill=function(t,e,r,i,n){void 0===n&&(n=null),f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginGradientFill(t,e,r,i,n),this.fillPath=this.$renderNode.beginGradientFill(t,e,r,i,n,this.strokePath),1<this.$renderNode.drawData.length&&this.fillPath.moveTo(this.lastX,this.lastY)},r.prototype.endFill=function(){f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setEndFill(),this.fillPath=null},r.prototype.lineStyle=function(t,e,r,i,n,o,a,s,l){void 0===t&&(t=NaN),void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=!1),void 0===n&&(n="normal"),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=3),t=+t||0,e=+e||0,r=+r||0,s=+s||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineStyle(t,e,r,i,n,o,a,s),t<=0?(this.strokePath=null,this.setStrokeWidth(0)):(this.setStrokeWidth(t),this.strokePath=this.$renderNode.lineStyle(t,e,r,o,a,s,l),1<this.$renderNode.drawData.length&&this.strokePath.moveTo(this.lastX,this.lastY))},r.prototype.drawRect=function(t,e,r,i){t=+t||0,e=+e||0,r=+r||0,i=+i||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRect(t,e,r,i);var n=this.fillPath,o=this.strokePath;n&&n.drawRect(t,e,r,i),o&&o.drawRect(t,e,r,i),this.extendBoundsByPoint(t+r,e+i),this.updatePosition(t,e),this.dirty()},r.prototype.drawRoundRect=function(t,e,r,i,n,o){t=+t||0,e=+e||0,r=+r||0,i=+i||0,n=+n||0,o=+o||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRoundRect(t,e,r,i,n,o);var a=this.fillPath,s=this.strokePath;a&&a.drawRoundRect(t,e,r,i,n,o),s&&s.drawRoundRect(t,e,r,i,n,o);var l=t+r,c=e+i,h=c-(o?.5*o|0:.5*n|0);this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(l,c),this.updatePosition(l,h),this.dirty()},r.prototype.drawCircle=function(t,e,r){t=+t||0,e=+e||0,r=+r||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawCircle(t,e,r);var i=this.fillPath,n=this.strokePath;i&&i.drawCircle(t,e,r),n&&n.drawCircle(t,e,r),this.extendBoundsByPoint(t-r-1,e-r-1),this.extendBoundsByPoint(t+r+2,e+r+2),this.updatePosition(t+r,e),this.dirty()},r.prototype.drawEllipse=function(t,e,r,i){t=+t||0,e=+e||0,r=+r||0,i=+i||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawEllipse(t,e,r,i);var n=this.fillPath,o=this.strokePath;n&&n.drawEllipse(t,e,r,i),o&&o.drawEllipse(t,e,r,i),this.extendBoundsByPoint(t-1,e-1),this.extendBoundsByPoint(t+r+2,e+i+2),this.updatePosition(t+r,e+.5*i),this.dirty()},r.prototype.moveTo=function(t,e){t=+t||0,e=+e||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setMoveTo(t,e);var r=this.fillPath,i=this.strokePath;r&&r.moveTo(t,e),i&&i.moveTo(t,e),this.includeLastPosition=!1,this.lastX=t,this.lastY=e,this.dirty()},r.prototype.lineTo=function(t,e){t=+t||0,e=+e||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineTo(t,e);var r=this.fillPath,i=this.strokePath;r&&r.lineTo(t,e),i&&i.lineTo(t,e),this.updatePosition(t,e),this.dirty()},r.prototype.curveTo=function(t,e,r,i){t=+t||0,e=+e||0,r=+r||0,i=+i||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCurveTo(t,e,r,i);var n=this.fillPath,o=this.strokePath;n&&n.curveTo(t,e,r,i),o&&o.curveTo(t,e,r,i);for(var a=u([this.lastX||0,this.lastY||0,t,e,r,i],50),s=0;s<a.length;s++){var l=a[s];this.extendBoundsByPoint(l.x,l.y),f.Point.release(l)}this.extendBoundsByPoint(r,i),this.updatePosition(r,i),this.dirty()},r.prototype.cubicCurveTo=function(t,e,r,i,n,o){t=+t||0,e=+e||0,r=+r||0,i=+i||0,n=+n||0,o=+o||0,f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCubicCurveTo(t,e,r,i,n,o);var a=this.fillPath,s=this.strokePath;a&&a.cubicCurveTo(t,e,r,i,n,o),s&&s.cubicCurveTo(t,e,r,i,n,o);for(var l=u([this.lastX||0,this.lastY||0,t,e,r,i,n,o],50),c=0;c<l.length;c++){var h=l[c];this.extendBoundsByPoint(h.x,h.y),f.Point.release(h)}this.extendBoundsByPoint(n,o),this.updatePosition(n,o),this.dirty()},r.prototype.drawArc=function(t,e,r,i,n,o){var a,s,l,c;r<0||i===n||(t=+t||0,e=+e||0,r=+r||0,n=+n||0,o=!!o,i=h(i=+i||0),n=h(n),f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawArc(t,e,r,i,n,o),a=this.fillPath,s=this.strokePath,a&&(a.$lastX=this.lastX,a.$lastY=this.lastY,a.drawArc(t,e,r,i,n,o)),s&&(s.$lastX=this.lastX,s.$lastY=this.lastY,s.drawArc(t,e,r,i,n,o)),o?this.arcBounds(t,e,r,n,i):this.arcBounds(t,e,r,i,n),l=t+Math.cos(n)*r,c=e+Math.sin(n)*r,this.updatePosition(l,c),this.dirty())},r.prototype.dirty=function(){var t,e,r;this.$renderNode.dirtyRender=!0,f.nativeRender||((t=this.$targetDisplay).$cacheDirty=!0,(e=t.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=t.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))},r.prototype.arcBounds=function(t,e,r,i,n){var o=Math.PI;if(Math.abs(i-n)<.01)return this.extendBoundsByPoint(t-r,e-r),void this.extendBoundsByPoint(t+r,e+r);n<i&&(n+=2*o);for(var a=Math.cos(i)*r,s=Math.cos(n)*r,l=Math.min(a,s),c=Math.max(a,s),h=Math.sin(i)*r,u=Math.sin(n)*r,p=Math.min(h,u),d=Math.max(h,u),f=i/(.5*o),g=n/(.5*o),m=Math.ceil(f);m<=g;m++)switch(m%4){case 0:c=r;break;case 1:d=r;break;case 2:l=-r;break;case 3:p=-r}l=Math.floor(l),p=Math.floor(p),c=Math.ceil(c),d=Math.ceil(d),this.extendBoundsByPoint(l+t,p+e),this.extendBoundsByPoint(c+t,d+e)},r.prototype.clear=function(){f.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setGraphicsClear(),this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.dirty()},r.prototype.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},r.prototype.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},r.prototype.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},r.prototype.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},r.prototype.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e)},r.prototype.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},r.prototype.$hitTest=function(t,e){var r=this.$targetDisplay,i=r.$getInvertedConcatenatedMatrix(),n=i.a*t+i.c*e+i.tx,o=i.b*t+i.d*e+i.ty,a=f.sys.canvasHitTestBuffer;a.resize(3,3);var s=this.$renderNode,l=f.Matrix.create();l.identity(),l.translate(1-n,1-o),f.sys.canvasRenderer.drawNodeToBuffer(s,a,l,!0),f.Matrix.release(l);try{if(0===a.getPixels(1,1)[3])return null}catch(t){throw new Error(f.sys.tr(1039))}return r},r.prototype.$onRemoveFromStage=function(){this.$renderNode&&this.$renderNode.clean(),f.nativeRender&&egret_native.NativeDisplayObject.disposeGraphicData(this)},r);function r(){var t=e.call(this)||this;return t.lastX=0,t.lastY=0,t.fillPath=null,t.strokePath=null,t.topLeftStrokeWidth=0,t.bottomRightStrokeWidth=0,t.minX=1/0,t.minY=1/0,t.maxX=-1/0,t.maxY=-1/0,t.includeLastPosition=!0,t.$renderNode=new f.sys.GraphicsNode,t}f.Graphics=t,__reflect(t.prototype,"egret.Graphics")}(egret=egret||{}),function(c){var s,t=Math.PI,a=2*t,h=t/180,e=[],r=(s=c.HashObject,__extends(i,s),i.release=function(t){t&&e.push(t)},i.create=function(){return e.pop()||new i},i.prototype.clone=function(){return new i(this.a,this.b,this.c,this.d,this.tx,this.ty)},i.prototype.concat=function(t){var e=this.a*t.a,r=0,i=0,n=this.d*t.d,o=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;0===this.b&&0===this.c&&0===t.b&&0===t.c||(e+=this.b*t.c,n+=this.c*t.b,r+=this.a*t.b+this.b*t.d,i+=this.c*t.a+this.d*t.c,o+=this.ty*t.c,a+=this.tx*t.b),this.a=e,this.b=r,this.c=i,this.d=n,this.tx=o,this.ty=a},i.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},i.prototype.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},i.prototype.invert=function(){this.$invertInto(this)},i.prototype.$invertInto=function(t){var e,r,i=this.a,n=this.b,o=this.c,a=this.d,s=this.tx,l=this.ty;0!=n||0!=o?0!=(e=i*a-n*o)?(e=1/e,r=t.a=a*e,n=t.b=-n*e,o=t.c=-o*e,a=t.d=i*e,t.tx=-(r*s+o*l),t.ty=-(n*s+a*l)):t.identity():(t.b=t.c=0)==i||0==a?t.a=t.d=t.tx=t.ty=0:(i=t.a=1/i,a=t.d=1/a,t.tx=-i*s,t.ty=-a*l)},i.prototype.rotate=function(t){var e,r,i,n,o,a,s,l;0!=(t=+t)&&(t/=h,e=c.NumberUtils.cos(t),r=c.NumberUtils.sin(t),i=this.a,n=this.b,o=this.c,a=this.d,s=this.tx,l=this.ty,this.a=i*e-n*r,this.b=i*r+n*e,this.c=o*e-a*r,this.d=o*r+a*e,this.tx=s*e-l*r,this.ty=s*r+l*e)},i.prototype.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},i.prototype.setTo=function(t,e,r,i,n,o){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o,this},i.prototype.transformPoint=function(t,e,r){var i=this.a*t+this.c*e+this.tx,n=this.b*t+this.d*e+this.ty;return r?(r.setTo(i,n),r):new c.Point(i,n)},i.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},i.prototype.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},i.prototype.prepend=function(t,e,r,i,n,o){var a,s,l=this.tx;return 1==t&&0==e&&0==r&&1==i||(a=this.a,s=this.c,this.a=a*t+this.b*r,this.b=a*e+this.b*i,this.c=s*t+this.d*r,this.d=s*e+this.d*i),this.tx=l*t+this.ty*r+n,this.ty=l*e+this.ty*i+o,this},i.prototype.append=function(t,e,r,i,n,o){var a=this.a,s=this.b,l=this.c,c=this.d;return 1==t&&0==e&&0==r&&1==i||(this.a=t*a+e*l,this.b=t*s+e*c,this.c=r*a+i*l,this.d=r*s+i*c),this.tx=n*a+o*l+this.tx,this.ty=n*s+o*c+this.ty,this},i.prototype.deltaTransformPoint=function(t){var e=this.a*t.x+this.c*t.y,r=this.b*t.x+this.d*t.y;return new c.Point(e,r)},i.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},i.prototype.createBox=function(t,e,r,i,n){void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0);var o,a,s=this;0!==r?(r/=h,o=c.NumberUtils.cos(r),a=c.NumberUtils.sin(r),s.a=o*t,s.b=a*e,s.c=-a*t,s.d=o*e):(s.a=t,s.b=0,s.c=0,s.d=e),s.tx=i,s.ty=n},i.prototype.createGradientBox=function(t,e,r,i,n){void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0),this.createBox(t/1638.4,e/1638.4,r,i+t/2,n+e/2)},i.prototype.$transformBounds=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,o=this.tx,a=this.ty,s=t.x,l=t.y,c=s+t.width,h=l+t.height,u=e*s+i*l+o,p=r*s+n*l+a,d=e*c+i*l+o,f=r*c+n*l+a,g=e*c+i*h+o,m=r*c+n*h+a,y=e*s+i*h+o,v=r*s+n*h+a,_=0;d<u&&(_=u,u=d,d=_),y<g&&(_=g,g=y,y=_),t.x=Math.floor(u<g?u:g),t.width=Math.ceil((y<d?d:y)-t.x),f<p&&(_=p,p=f,f=_),v<m&&(_=m,m=v,v=_),t.y=Math.floor(p<m?p:m),t.height=Math.ceil((v<f?f:v)-t.y)},i.prototype.getDeterminant=function(){return this.a*this.d-this.b*this.c},i.prototype.$getScaleX=function(){var t=this;if(0==t.b)return t.a;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},i.prototype.$getScaleY=function(){var t=this;if(0==t.c)return t.d;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},i.prototype.$getSkewX=function(){return this.d<0?Math.atan2(this.d,this.c)+t/2:Math.atan2(this.d,this.c)-t/2},i.prototype.$getSkewY=function(){return this.a<0?Math.atan2(this.b,this.a)-t:Math.atan2(this.b,this.a)},i.prototype.$updateScaleAndRotation=function(t,e,r,i){if(!(0!=r&&r!=a||0!=i&&i!=a))return this.a=t,this.b=this.c=0,void(this.d=e);r/=h,i/=h;var n=c.NumberUtils.cos(r),o=c.NumberUtils.sin(r);r==i?(this.a=n*t,this.b=o*t):(this.a=c.NumberUtils.cos(i)*t,this.b=c.NumberUtils.sin(i)*t),this.c=-o*e,this.d=n*e},i.prototype.$preMultiplyInto=function(t,e){var r=t.a*this.a,i=0,n=0,o=t.d*this.d,a=t.tx*this.a+this.tx,s=t.ty*this.d+this.ty;0===t.b&&0===t.c&&0===this.b&&0===this.c||(r+=t.b*this.c,o+=t.c*this.b,i+=t.a*this.b+t.b*this.d,n+=t.c*this.a+t.d*this.c,a+=t.ty*this.c,s+=t.tx*this.b),e.a=r,e.b=i,e.c=n,e.d=o,e.tx=a,e.ty=s},i);function i(t,e,r,i,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0);var a=s.call(this)||this;return a.a=t,a.b=e,a.c=r,a.d=i,a.tx=n,a.ty=o,a}c.Matrix=r,__reflect(r.prototype,"egret.Matrix"),c.$TempMatrix=new r}(egret=egret||{}),function(t){var o,e=[],r=(o=t.HashObject,__extends(i,o),i.release=function(t){t&&e.push(t)},i.create=function(){return e.pop()||new i},Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topLeft",{get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),i.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i.prototype.setTo=function(t,e,r,i){return this.x=t,this.y=e,this.width=r,this.height=i,this},i.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},i.prototype.intersection=function(t){return this.clone().$intersectInPlace(t)},i.prototype.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},i.prototype.$intersectInPlace=function(t){var e=this.x,r=this.y,i=t.x,n=t.y,o=Math.max(e,i),a=Math.min(e+this.width,i+t.width);if(o<=a){var s=Math.max(r,n),l=Math.min(r+this.height,n+t.height);if(s<=l)return this.setTo(o,s,a-o,l-s),this}return this.setEmpty(),this},i.prototype.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},i.prototype.isEmpty=function(){return this.width<=0||this.height<=0},i.prototype.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.containsPoint=function(t){return this.x<=t.x&&this.x+this.width>t.x&&this.y<=t.y&&this.y+this.height>t.y},i.prototype.containsRect=function(t){var e=t.x+t.width,r=t.y+t.height,i=this.x+this.width,n=this.y+this.height;return t.x>=this.x&&t.x<i&&t.y>=this.y&&t.y<n&&e>this.x&&e<=i&&r>this.y&&r<=n},i.prototype.equals=function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},i.prototype.inflatePoint=function(t){this.inflate(t.x,t.y)},i.prototype.offset=function(t,e){this.x+=t,this.y+=e},i.prototype.offsetPoint=function(t){this.offset(t.x,t.y)},i.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},i.prototype.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var r=Math.min(e.x,t.x),i=Math.min(e.y,t.y);return e.setTo(r,i,Math.max(e.right,t.right)-r,Math.max(e.bottom,t.bottom)-i),e},i.prototype.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t));return e*this.width+r*this.height},i.prototype.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t));return Math.abs(Math.sin(t))*this.width+e*this.height},i);function i(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0);var n=o.call(this)||this;return n.x=t,n.y=e,n.width=r,n.height=i,n}t.Rectangle=r,__reflect(r.prototype,"egret.Rectangle"),t.$TempRectangle=new r}(egret=egret||{}),function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton errorsingleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="Cross domains pictures can not get pixel information!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="{0} is deprecated, please use {1} replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[1043]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[1044]="The current version of the Runtime does not support video playback, please use the latest version",e[1045]="The resource url is not found",e[1046]="BitmapText no corresponding characters: {0}, please check the configuration file",e[1047]="egret.localStorage.setItem save failed,key={0}&value={1}",e[1048]="Video loading failed",e[1049]="In the absence of sound is not allowed to play after loading",e[1050]="ExternalInterface calls the method without js registration: {0}",e[1051]="runtime only support webgl render mode",e[1052]="network request timeout{0}",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list",e[3014]="set fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[3200]="getResByUrl must be called after loadConfig",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!",e[4500]="The platform does not support {0} adapter mode and has been automatically replaced with {1} mode, please modify your code adapter logic"}(egret=egret||{}),(egret=egret||{}).JointStyle={BEVEL:"bevel",MITER:"miter",ROUND:"round"},function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="Egret: {0}",e[1002]="Egret {0} egret.DisplayObject",e[1003]=" {0}  null",e[1004]="",e[1005]="",e[1006]=" DisplayObject ",e[1007]="",e[1008]=" {0} ",e[1009]=" {0}  {1}",e[1010]=" {0}  {1} ",e[1011]="URL: {0}",e[1012]=" {0}  Class",e[1013]="NaN",e[1014]=" {0}  {1} ",e[1015]="xml not found!",e[1016]="{0}",e[1017]="JSON: {0}\ndata: {1}",e[1018]="9",e[1019]=":{0}",e[1020]="",e[1021]="webgl",e[1022]="{0} ArgumentError",e[1023]="ScrollView!",e[1025]="",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=":{0} ",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="toDataURLbase64",e[1034]='"{0}"mp3',e[1035]="Native ",e[1036]=" Sound.play() ",e[1037]="blob",e[1038]="XML !",e[1039]="!",e[1040]="hitTestPoint ! ",e[1041]="{0} , {1} ",e[1042]="drawToTexture,",e[1043]="{0}  : {1} : {2}",e[1044]=" runtime ,",e[1045]="",e[1046]="BitmapText :{0}",e[1047]="egret.localStorage.setItem,key={0}&value={1}",e[1048]="",e[1049]="",e[1050]="ExternalInterfacejs: {0}",e[1051]="runtime  webgl ",e[1052]=":{0}",e[3e3]=": {0}",e[3001]=": {0}",e[3002]=':"{0}"',e[3003]="",e[3004]="addChild(){0}addElement()",e[3005]="addChildAt(){0}addElementAt()",e[3006]="removeChild(){0}removeElement()",e[3007]="removeChildAt(){0}removeElementAt()",e[3008]="setChildIndex(){0}setElementIndex()",e[3009]="swapChildren(){0}swapElements()",e[3010]="swapChildrenAt(){0}swapElementsAt()",e[3011]=':"{0}"',e[3012]="Scroller!",e[3013]="UIStageGUI",e[3014]="",e[3100]="WebSocket",e[3101]="WebSocket",e[3102]="type",e[3200]="getResByUrl  loadConfig ",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!",e[4500]=" {0}  {1} "}(egret=egret||{}),function(t){t.localStorage||(t.localStorage={})}(egret=egret||{}),function(t){var e,r;e=t.sys||(t.sys={}),r=[],e.$pushSoundChannel=function(t){r.indexOf(t)<0&&r.push(t)},e.$popSoundChannel=function(t){var e=r.indexOf(t);return 0<=e&&(r.splice(e,1),!0)}}(egret=egret||{}),function(t){var e;(e=t.HttpMethod||(t.HttpMethod={})).GET="GET",e.POST="POST"}(egret=(egret=(egret=egret||{})||{})||{}),function(t){var e=(r.TEXT="text",r.ARRAY_BUFFER="arraybuffer",r);function r(){}t.HttpResponseType=e,__reflect(e.prototype,"egret.HttpResponseType")}(egret=(egret=egret||{})||{}),function(a){var s,r,t;function l(t){var e=r.call(this)||this;return e.isStage=!1,e.$renderNode=new s.BitmapNode,e.renderBuffer=null,e.offsetX=0,e.offsetY=0,e.offsetMatrix=new a.Matrix,e.$canvasScaleX=1,e.$canvasScaleY=1,e.root=t,e.isStage=t instanceof a.Stage,e}s=a.sys||(a.sys={}),r=a.HashObject,__extends(l,r),l.create=function(t){var e=new a.sys.DisplayList(t);try{var r=new s.RenderBuffer;e.renderBuffer=r}catch(t){return null}return e.root=t,e},l.prototype.$getRenderNode=function(){return this.$renderNode},l.prototype.setClipRect=function(t,e){t*=l.$canvasScaleX,e*=l.$canvasScaleY,this.renderBuffer.resize(t,e)},l.prototype.drawToSurface=function(){var t;this.$canvasScaleX=this.offsetMatrix.a=l.$canvasScaleX,this.$canvasScaleY=this.offsetMatrix.d=l.$canvasScaleY,this.isStage||this.changeSurfaceSize();var e,r,i,n,o=this.renderBuffer;return o.clear(),t=s.systemRenderer.render(this.root,o,this.offsetMatrix),this.isStage||(e=o.surface,(r=this.$renderNode).drawData.length=0,i=e.width,n=e.height,this.bitmapData?(this.bitmapData.source=e,this.bitmapData.width=i,this.bitmapData.height=n):this.bitmapData=new a.BitmapData(e),r.image=this.bitmapData,r.imageWidth=i,r.imageHeight=n,r.drawImage(0,0,i,n,-this.offsetX,-this.offsetY,i/this.$canvasScaleX,n/this.$canvasScaleY)),t},l.prototype.changeSurfaceSize=function(){this.root;var t=this.offsetX,e=this.offsetY,r=this.root.$getOriginalBounds(),i=this.$canvasScaleX,n=this.$canvasScaleY;this.offsetX=-r.x,this.offsetY=-r.y,this.offsetMatrix.setTo(this.offsetMatrix.a,0,0,this.offsetMatrix.d,this.offsetX,this.offsetY);var o=this.renderBuffer,a=Math.max(257,r.width*i),s=Math.max(257,r.height*n);this.offsetX==t&&this.offsetY==e&&o.surface.width==a&&o.surface.height==s||o.resize(a,s)},l.$setCanvasScale=function(t,e){l.$canvasScaleX=t,l.$canvasScaleY=e,a.nativeRender&&egret_native.nrSetCanvasScaleFactor(l.$canvasScaleFactor,t,e)},l.$canvasScaleFactor=1,l.$canvasScaleX=1,l.$canvasScaleY=1,t=l,s.DisplayList=t,__reflect(t.prototype,"egret.sys.DisplayList")}(egret=(egret=egret||{})||{}),function(f){!function(l){var n,t=(n=f.HashObject,__extends(e,n),e.prototype.createDisplayList=function(t,e){var r=new l.DisplayList(t);return r.renderBuffer=e,t.$displayList=r},e.prototype.start=function(){!this.isPlaying&&this.stage&&(l.$TempStage=l.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),f.ticker.$addPlayer(this))},e.prototype.initialize=function(){var t,e;this.entryClassName&&(t=f.getDefinitionByName(this.entryClassName)),t?(e=new t,(this.root=e)instanceof f.DisplayObject?this.stage.addChild(e):f.$error(1002,this.entryClassName)):f.$error(1001,this.entryClassName)},e.prototype.stop=function(){this.pause(),this.stage=null},e.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,f.ticker.$removePlayer(this))},e.prototype.$render=function(t,e){if(f.nativeRender)return egret_native.updateNativeRender(),void egret_native.nrRender();var r=this.stage,i=f.getTimer(),n=r.$displayList.drawToSurface(),o=f.getTimer();t&&this.showFPS&&c.update(n,o-i,e)},e.prototype.updateStageSize=function(t,e){var r=this.stage;r.$stageWidth=t,r.$stageHeight=e,f.nativeRender?egret_native.nrResize(t,e):(this.screenDisplayList.setClipRect(t,e),this.stageDisplayList&&this.stageDisplayList.setClipRect(t,e)),r.dispatchEventWith(f.Event.RESIZE)},e.prototype.displayFPS=function(t,e,r,i){if((e=!!e)&&(f.log=function(){for(var t=arguments.length,e="",r=0;r<t;r++)e+=arguments[r]+" ";l.$logToFPS(e),console.log.apply(console,d(arguments))},f.warn=function(){for(var t=arguments.length,e="",r=0;r<t;r++)e+=arguments[r]+" ";l.$warnToFPS(e),console.warn.apply(console,d(arguments))},f.error=function(){for(var t=arguments.length,e="",r=0;r<t;r++)e+=arguments[r]+" ";l.$errorToFPS(e),console.error.apply(console,d(arguments))}),this.showFPS=!!t,this.showLog=e,!c){c=new FPS(this.stage,t,e,r,i);for(var n=h.length,o=0;o<n;o++)c.updateInfo(h[o]);h=null;for(var a=u.length,o=0;o<a;o++)c.updateWarn(u[o]);u=null;for(var s=p.length,o=0;o<s;o++)c.updateError(p[o]);p=null}},e);function e(t,e,r){var i=n.call(this)||this;return i.isPlaying=!1,t||f.$error(1003,"buffer"),i.entryClassName=r,i.stage=e,i.screenDisplayList=i.createDisplayList(e,t),i.showFPS=!1,i.showLog=!1,i.stageDisplayList=null,f.nativeRender&&(egret_native.rootWebGLBuffer=t),i}l.Player=t,__reflect(t.prototype,"egret.sys.Player");var c,h=[],u=[],p=[];l.$logToFPS=function(t){c?c.updateInfo(t):h.push(t)},l.$warnToFPS=function(t){c?c.updateWarn(t):u.push(t)},l.$errorToFPS=function(t){c?c.updateError(t):p.push(t)};var r=(i.prototype.update=function(t,e,r){var i,n,o,a,s=f.getTimer();this.totalTime+=s-this.lastTime,this.lastTime=s,this.totalTick++,this.drawCalls+=t,this.costRender+=e,this.costTicker+=r,1e3<=this.totalTime&&(i=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),f.ticker.$frameRate),n=Math.round(this.drawCalls/this.totalTick),o=Math.round(this.costRender/this.totalTick),a=Math.round(this.costTicker/this.totalTick),this.fpsDisplay.update({fps:i,draw:n,costTicker:a,costRender:o}),this.totalTick=0,this.totalTime=this.totalTime%1e3,this.drawCalls=0,this.costRender=0,this.costTicker=0)},i.prototype.updateInfo=function(t){t&&this.showLog&&this.filter(t)&&this.fpsDisplay.updateInfo(t)},i.prototype.updateWarn=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateWarn?this.fpsDisplay.updateWarn(t):this.fpsDisplay.updateInfo("[Warning]"+t))},i.prototype.updateError=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateError?this.fpsDisplay.updateError(t):this.fpsDisplay.updateInfo("[Error]"+t))},i);function i(t,e,r,i,n){var o;this.showFPS=e,this.showLog=r,this.logFilter=i,this.styles=n,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this._stage=t,this.showFPS=e,this.showLog=r,this.logFilter=i,this.styles=n,this.fpsDisplay=new f.FPSDisplay(t,e,r,i,n);try{o=i?new RegExp(i):null}catch(t){f.log(t)}this.filter=function(t){return o?o.test(t):!i||0==t.indexOf(i)}}function d(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r]);return e}__reflect(r.prototype,"FPSImpl"),__global.FPS=r,f.warn=function(){console.warn.apply(console,d(arguments))},f.error=function(){console.error.apply(console,d(arguments))},f.assert=function(){console.assert.apply(console,d(arguments))},f.log=function(){console.log.apply(console,d(arguments))}}(f.sys||(f.sys={}))}(egret=(egret=(egret=egret||{})||{})||{}),function(t){var e,r,i;t.nativeRender=__global.nativeRender,t.nativeRender&&(e=egret_native.nrABIVersion,r=egret_native.nrMinEgretVersion,e<5?(t.nativeRender=!1,i=" 0.1.14 ",t.sys.$warnToFPS(i),t.warn(i)):5<e&&(t.nativeRender=!1,i=" "+r+" ",t.sys.$warnToFPS(i),t.warn(i)))}(egret=egret||{}),function(f){var t=(g.prototype.uploadLevels=function(t,e){this.loadType===g.COMPRESSED_2D&&this._upload2DCompressedLevels(t,e)},g.prototype._upload2DCompressedLevels=function(t,e){t.clearCompressedTextureData();for(var r=t.compressedTextureData,i=g.HEADER_LEN+this.bytesOfKeyValueData,n=this.pixelWidth,o=this.pixelHeight,a=e?this.numberOfMipmapLevels:1,s=0;s<a;s++){var l=new Int32Array(this.arrayBuffer,i,1)[0];i+=4;for(var c=[],h=0;h<this.numberOfFaces;h++){var u=new Uint8Array(this.arrayBuffer,i,l),p=new f.CompressedTextureData;p.glInternalFormat=this.glInternalFormat,p.width=n,p.height=o,p.byteArray=u,p.face=h,p.level=s,c.push(p),i+=l,i+=3-(l+3)%4}r.push(c),n=Math.max(1,.5*n),o=Math.max(1,.5*o)}var d=t.getCompressed2dTextureData();d&&(t.width=d.width,t.height=d.height)},g.HEADER_LEN=64,g.COMPRESSED_2D=0,g.COMPRESSED_3D=1,g.TEX_2D=2,g.TEX_3D=3,g);function g(t,e,r,i){this.arrayBuffer=t,this.isInvalid=!1;var n=new Uint8Array(this.arrayBuffer,0,12);if(171!==n[0]||75!==n[1]||84!==n[2]||88!==n[3]||32!==n[4]||49!==n[5]||49!==n[6]||187!==n[7]||13!==n[8]||10!==n[9]||26!==n[10]||10!==n[11])return this.isInvalid=!0,void console.error("texture missing KTX identifier");var o=Uint32Array.BYTES_PER_ELEMENT,a=new DataView(this.arrayBuffer,12,13*o),s=67305985===a.getUint32(0,!0);this.glType=a.getUint32(+o,s),this.glTypeSize=a.getUint32(2*o,s),this.glFormat=a.getUint32(3*o,s),this.glInternalFormat=a.getUint32(4*o,s),this.glBaseInternalFormat=a.getUint32(5*o,s),this.pixelWidth=a.getUint32(6*o,s),this.pixelHeight=a.getUint32(7*o,s),this.pixelDepth=a.getUint32(8*o,s),this.numberOfArrayElements=a.getUint32(9*o,s),this.numberOfFaces=a.getUint32(10*o,s),this.numberOfMipmapLevels=a.getUint32(11*o,s),this.bytesOfKeyValueData=a.getUint32(12*o,s),0===this.glType?(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0!==this.pixelHeight&&0===this.pixelDepth?0===this.numberOfArrayElements?this.numberOfFaces===e?this.loadType=g.COMPRESSED_2D:console.error("number of faces expected"+e+", but found "+this.numberOfFaces):console.error("texture arrays not currently supported"):console.error("only 2D textures currently supported")):console.error("only compressed formats currently supported")}f.KTXContainer=t,__reflect(t.prototype,"egret.KTXContainer")}(egret=egret||{}),function(t){t.sys||(t.sys={})}(egret=egret||{}),function(u){var t,e,r;function i(){return e.call(this)||this}t=u.sys||(u.sys={}),e=u.HashObject,__extends(i,e),i.prototype.calculateStageSize=function(t,e,r,i,n){var o=e,a=r,s=i,l=n,c=e/s||0,h=r/l||0;switch(t){case u.StageScaleMode.EXACT_FIT:break;case u.StageScaleMode.FIXED_HEIGHT:s=Math.round(e/h);break;case u.StageScaleMode.FIXED_WIDTH:l=Math.round(r/c);break;case u.StageScaleMode.NO_BORDER:h<c?a=Math.round(l*c):o=Math.round(s*h);break;case u.StageScaleMode.SHOW_ALL:h<c?o=Math.round(s*h):a=Math.round(l*c);break;case u.StageScaleMode.FIXED_NARROW:h<c?s=Math.round(e/h):l=Math.round(r/c);break;case u.StageScaleMode.FIXED_WIDE:h<c?l=Math.round(r/c):s=Math.round(e/h);break;default:s=e,l=r}return u.Capabilities.runtimeType!=u.RuntimeType.WXGAME&&(s%2!=0&&(s+=1),l%2!=0&&(l+=1),o%2!=0&&(o+=1),a%2!=0&&(a+=1)),{stageWidth:s,stageHeight:l,displayWidth:o,displayHeight:a}},r=i,t.DefaultScreenAdapter=r,__reflect(r.prototype,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(egret=egret||{}),function(t){var e=(r.NO_SCALE="noScale",r.SHOW_ALL="showAll",r.NO_BORDER="noBorder",r.EXACT_FIT="exactFit",r.FIXED_WIDTH="fixedWidth",r.FIXED_HEIGHT="fixedHeight",r.FIXED_NARROW="fixedNarrow",r.FIXED_WIDE="fixedWide",r);function r(){}t.StageScaleMode=e,__reflect(e.prototype,"egret.StageScaleMode")}(egret=egret||{}),function(t){var e;(e=t.sys||(t.sys={})).mainCanvas=function(t,e){return console.error("empty sys.mainCanvas = "+t+", "+e),null},e.createCanvas=function(t,e){return console.error("empty sys.createCanvas = "+t+", "+e),null},e.resizeContext=function(t,e,r,i){console.error("empty sys.resizeContext = "+t+", "+e+", "+r+", "+i)},e.getContextWebGL=function(t){return console.error("empty sys.getContextWebGL = "+t),null},e.getContext2d=function(t){return console.error("empty sys.getContext2d = "+t),null},e.createTexture=function(t,e){return console.error("empty sys.createTexture = "+e),null},e._createTexture=function(t,e,r,i){return console.error("empty sys._createTexture = "+e+", "+r+", "+i),null},e.drawTextureElements=function(t,e,r){return console.error("empty sys.drawTextureElements = "+t+", "+e+", "+r),0},e.measureTextWith=function(t,e){return console.error("empty sys.measureTextWith = "+t+", "+e),0},e.createCanvasRenderBufferSurface=function(t,e,r,i){return console.error("empty sys.createCanvasRenderBufferSurface = "+e+", "+r),null},e.resizeCanvasRenderBuffer=function(t,e,r,i){console.error("empty sys.resizeContext = "+t+", "+e+", "+r+", "+i)}}(egret=egret||{}),function(m){!function(g){g.$START_TIME=0,g.$invalidateRenderFlag=!1,g.$requestRenderingFlag=!1;var t=(e.prototype.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(egret_stages.push(t.stage),this.playerList=this.playerList.concat(),this.playerList.push(t))},e.prototype.$removePlayer=function(t){var e,r=this.playerList.indexOf(t);-1!==r&&(e=egret_stages.indexOf(t.stage),egret_stages.splice(e,1),this.playerList=this.playerList.concat(),this.playerList.splice(r,1))},e.prototype.$startTick=function(t,e){-1==this.getTickIndex(t,e)&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},e.prototype.$stopTick=function(t,e){var r=this.getTickIndex(t,e);-1!=r&&(this.concatTick(),this.callBackList.splice(r,1),this.thisObjectList.splice(r,1))},e.prototype.getTickIndex=function(t,e){for(var r=this.callBackList,i=this.thisObjectList,n=r.length-1;0<=n;n--)if(r[n]==t&&i[n]==e)return n;return-1},e.prototype.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},e.prototype.$setFrameRate=function(t){return!(t<=0||this.$frameRate==t||(60<(this.$frameRate=t)&&(t=60),this.frameDeltaTime=1e3/t,this.lastCount=this.frameInterval=Math.round(6e4/t),0))},e.prototype.pause=function(){this.isPaused=!0},e.prototype.resume=function(){this.isPaused=!1},e.prototype.update=function(t){for(var e=m.getTimer(),r=this.callBackList,i=this.thisObjectList,n=r.length,o=g.$requestRenderingFlag,a=m.getTimer(),s=0,l=m.lifecycle.contexts;s<l.length;s++){var c=l[s];c.onUpdate&&c.onUpdate()}if(this.isPaused)this.lastTimeStamp=a;else{this.callLaterAsyncs();for(var h=0;h<n;h++)r[h].call(i[h],a)&&(o=!0);var u=m.getTimer(),p=a-this.lastTimeStamp;if(this.lastTimeStamp=a,p>=this.frameDeltaTime||t)this.lastCount=this.frameInterval;else{if(this.lastCount-=1e3,0<this.lastCount)return void(o&&this.render(!1,this.costEnterFrame+u-e));this.lastCount+=this.frameInterval}this.render(!0,this.costEnterFrame+u-e);var d=m.getTimer();this.broadcastEnterFrame();var f=m.getTimer();this.costEnterFrame=f-d}},e.prototype.render=function(t,e){var r=this.playerList,i=r.length;if(0!=i){this.callLaters(),g.$invalidateRenderFlag&&(this.broadcastRender(),g.$invalidateRenderFlag=!1);for(var n=0;n<i;n++)r[n].$render(t,e);g.$requestRenderingFlag=!1}},e.prototype.broadcastEnterFrame=function(){var t=m.DisplayObject.$enterFrameCallBackList,e=t.length;if(0!=e){t=t.concat();for(var r=0;r<e;r++)t[r].dispatchEventWith(m.Event.ENTER_FRAME)}},e.prototype.broadcastRender=function(){var t=m.DisplayObject.$renderCallBackList,e=t.length;if(0!=e){t=t.concat();for(var r=0;r<e;r++)t[r].dispatchEventWith(m.Event.RENDER)}},e.prototype.callLaters=function(){var t,e,r;if(0<m.$callLaterFunctionList.length&&(t=m.$callLaterFunctionList,m.$callLaterFunctionList=[],e=m.$callLaterThisList,m.$callLaterThisList=[],r=m.$callLaterArgsList,m.$callLaterArgsList=[]),t)for(var i=t.length,n=0;n<i;n++){var o=t[n];null!=o&&o.apply(e[n],r[n])}},e.prototype.callLaterAsyncs=function(){if(0<m.$callAsyncFunctionList.length){var t=m.$callAsyncFunctionList,e=m.$callAsyncThisList,r=m.$callAsyncArgsList;m.$callAsyncFunctionList=[],m.$callAsyncThisList=[],m.$callAsyncArgsList=[];for(var i=0;i<t.length;i++){var n=t[i];null!=n&&n.apply(e[i],r[i])}}},e);function e(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.lastTimeStamp=0,this.costEnterFrame=0,this.isPaused=!1,m.ticker&&m.$error(1008,"egret.sys.SystemTicker"),g.$START_TIME=Date.now(),this.frameDeltaTime=1e3/this.$frameRate,this.lastCount=this.frameInterval=Math.round(6e4/this.$frameRate)}g.SystemTicker=t,__reflect(t.prototype,"egret.sys.SystemTicker")}(m.sys||(m.sys={}))}(egret=egret||{}),function(n){!function(r){r.contexts=[];var t=!0,i=(e.prototype.pause=function(){t&&(t=!1,r.stage.dispatchEvent(new n.Event(n.Event.DEACTIVATE)),r.onPause&&r.onPause())},e.prototype.resume=function(){t||(t=!0,r.stage.dispatchEvent(new n.Event(n.Event.ACTIVATE)),r.onResume&&r.onResume())},e);function e(){}r.LifecycleContext=i,__reflect(i.prototype,"egret.lifecycle.LifecycleContext"),r.addLifecycleListener=function(t){var e=new i;r.contexts.push(e),t(e)}}(n.lifecycle||(n.lifecycle={})),n.ticker=new n.sys.SystemTicker}(egret=egret||{}),global.egret_stages=[],function(o){var t,r,e;function i(t){var e=r.call(this)||this;return e.maxTouches=0,e.useTouchesCount=0,e.touchDownTarget={},e.lastTouchX=-1,e.lastTouchY=-1,e.stage=t,e}t=o.sys||(o.sys={}),r=o.HashObject,__extends(i,r),i.prototype.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},i.prototype.onTouchBegin=function(t,e,r){var i;this.useTouchesCount>=this.maxTouches||(this.lastTouchX=t,this.lastTouchY=e,i=this.findTarget(t,e),null==this.touchDownTarget[r]&&(this.touchDownTarget[r]=i,this.useTouchesCount++),o.TouchEvent.dispatchTouchEvent(i,o.TouchEvent.TOUCH_BEGIN,!0,!0,t,e,r,!0))},i.prototype.onTouchMove=function(t,e,r){var i;null!=this.touchDownTarget[r]&&(this.lastTouchX==t&&this.lastTouchY==e||(this.lastTouchX=t,this.lastTouchY=e,i=this.findTarget(t,e),o.TouchEvent.dispatchTouchEvent(i,o.TouchEvent.TOUCH_MOVE,!0,!0,t,e,r,!0)))},i.prototype.onTouchEnd=function(t,e,r){var i,n;null!=this.touchDownTarget[r]&&(i=this.findTarget(t,e),n=this.touchDownTarget[r],delete this.touchDownTarget[r],this.useTouchesCount--,o.TouchEvent.dispatchTouchEvent(i,o.TouchEvent.TOUCH_END,!0,!0,t,e,r,!1),n==i?o.TouchEvent.dispatchTouchEvent(i,o.TouchEvent.TOUCH_TAP,!0,!0,t,e,r,!1):o.TouchEvent.dispatchTouchEvent(n,o.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,t,e,r,!1))},i.prototype.findTarget=function(t,e){return this.stage.$hitTest(t,e)||this.stage},e=i,t.TouchHandler=e,__reflect(e.prototype,"egret.sys.TouchHandler")}(egret=egret||{}),function(G){var t,e,r;function E(){var t=e.call(this)||this;return t.image=null,t.smoothing=!0,t.blendMode=null,t.alpha=NaN,t.filter=null,t.rotated=!1,t.type=1,t}t=G.sys||(G.sys={}),e=t.RenderNode,__extends(E,e),E.prototype.drawImage=function(t,e,r,i,n,o,a,s){this.drawData.push(t,e,r,i,n,o,a,s),this.renderCount++},E.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null,this.blendMode=null,this.alpha=NaN,this.filter=null},E.$updateTextureData=function(t,e,r,i,n,o,a,s,l,c,h,u,p,d,f,g){if(e){var m=G.$TextureScaleFactor;if(t.smoothing=g,t.image=e,t.imageWidth=p,t.imageHeight=d,f==G.BitmapFillMode.SCALE){var y=h/l*m,v=u/c*m;t.drawImage(r,i,n,o,y*a,v*s,y*n,v*o)}else if(f==G.BitmapFillMode.CLIP){var _=Math.min(l,h),b=Math.min(c,u);E.drawClipImage(t,m,r,i,T=n*m,C=o*m,a,s,_,b)}else for(var T=n*m,C=o*m,S=0;S<h;S+=l)for(var x=0;x<u;x+=c)_=Math.min(h-S,l),b=Math.min(u-x,c),E.drawClipImage(t,m,r,i,T,C,a,s,_,b,S,x)}},E.$updateTextureDataWithScale9Grid=function(t,e,r,i,n,o,a,s,l,c,h,u,p,d,f,g){t.smoothing=g,t.image=e,t.imageWidth=d,t.imageHeight=f,u-=c-o*G.$TextureScaleFactor,p-=h-a*G.$TextureScaleFactor;var m=r.x-s,y=r.y-l,v=m/G.$TextureScaleFactor,_=y/G.$TextureScaleFactor,b=r.width/G.$TextureScaleFactor,T=r.height/G.$TextureScaleFactor;0==T&&(T=1,a<=_&&_--),0==b&&(b=1,o<=v&&v--);var C,S,x,E,$,w,L,P,R=i,O=R+v,I=O+b,D=o-v-b,M=n,A=M+_,N=A+T,k=a-_-T,U=D*G.$TextureScaleFactor,B=k*G.$TextureScaleFactor;(v+D)*G.$TextureScaleFactor>u||(_+k)*G.$TextureScaleFactor>p?t.drawImage(i,n,o,a,s,l,u,p):(S=(C=s)+m,x=C+(u-U),E=u-m-U,w=($=l)+y,L=$+p-B,P=p-y-B,0<_&&(0<v&&t.drawImage(R,M,v,_,C,$,m,y),0<b&&t.drawImage(O,M,b,_,S,$,E,y),0<D&&t.drawImage(I,M,D,_,x,$,U,y)),0<T&&(0<v&&t.drawImage(R,A,v,T,C,w,m,P),0<b&&t.drawImage(O,A,b,T,S,w,E,P),0<D&&t.drawImage(I,A,D,T,x,w,U,P)),0<k&&(0<v&&t.drawImage(R,N,v,k,C,L,m,B),0<b&&t.drawImage(O,N,b,k,S,L,E,B),0<D&&t.drawImage(I,N,D,k,x,L,U,B)))},E.drawClipImage=function(t,e,r,i,n,o,a,s,l,c,h,u){void 0===h&&(h=0),void 0===u&&(u=0);var p=a+n-l;0<p&&(n-=p),0<(p=s+o-c)&&(o-=p),t.drawImage(r,i,n/e,o/e,h+a,u+s,n,o)},r=E,t.BitmapNode=r,__reflect(r.prototype,"egret.sys.BitmapNode")}(egret=egret||{}),function(c){var h,e,l,u,t;function r(){var t=e.call(this)||this;return t.dirtyRender=!0,t.type=3,t}h=c.sys||(c.sys={}),l=["none","round","square"],u=["bevel","miter","round"],e=h.RenderNode,__extends(r,e),r.prototype.beginFill=function(t,e,r){void 0===e&&(e=1);var i,n=new h.FillPath;return n.fillColor=t,n.fillAlpha=e,r?(i=this.drawData.lastIndexOf(r),this.drawData.splice(i,0,n)):this.drawData.push(n),this.renderCount++,n},r.prototype.beginGradientFill=function(t,e,r,i,n,o){var a=new c.Matrix;n?(a.a=819.2*n.a,a.b=819.2*n.b,a.c=819.2*n.c,a.d=819.2*n.d,a.tx=n.tx,a.ty=n.ty):(a.a=100,a.d=100);var s,l=new h.GradientFillPath;return l.gradientType=t,l.colors=e,l.alphas=r,l.ratios=i,l.matrix=a,o?(s=this.drawData.lastIndexOf(o),this.drawData.splice(s,0,l)):this.drawData.push(l),this.renderCount++,l},r.prototype.lineStyle=function(t,e,r,i,n,o,a){void 0===r&&(r=1),void 0===o&&(o=3),void 0===a&&(a=[]),-1==l.indexOf(i)&&(i="round"),-1==u.indexOf(n)&&(n="round");var s=new h.StrokePath;return s.lineWidth=t,s.lineColor=e,s.lineAlpha=r,s.caps=i||c.CapsStyle.ROUND,s.joints=n,s.miterLimit=o,s.lineDash=a,this.drawData.push(s),this.renderCount++,s},r.prototype.clear=function(){this.drawData.length=0,this.dirtyRender=!0,this.renderCount=0},r.prototype.cleanBeforeRender=function(){},r.prototype.clean=function(){this.$texture&&(c.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},t=r,h.GraphicsNode=t,__reflect(t.prototype,"egret.sys.GraphicsNode")}(egret=egret||{}),function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.type=4,t}e=t.sys||(t.sys={}),r=e.RenderNode,__extends(n,r),n.prototype.addNode=function(t){this.drawData.push(t)},n.prototype.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;0<=e;e--)t[e].cleanBeforeRender()},n.prototype.$getRenderCount=function(){for(var t=0,e=this.drawData,r=e.length-1;0<=r;r--)t+=e[r].$getRenderCount();return t},i=n,e.GroupNode=i,__reflect(i.prototype,"egret.sys.GroupNode")}(egret=egret||{}),function(e){var t,r,i;function n(){var t=r.call(this)||this;return t.image=null,t.smoothing=!0,t.bounds=new e.Rectangle,t.blendMode=null,t.alpha=NaN,t.filter=null,t.rotated=!1,t.type=5,t.vertices=[],t.uvs=[],t.indices=[],t}t=e.sys||(e.sys={}),r=t.RenderNode,__extends(n,r),n.prototype.drawMesh=function(t,e,r,i,n,o,a,s){this.drawData.push(t,e,r,i,n,o,a,s),this.renderCount++},n.prototype.cleanBeforeRender=function(){r.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},i=n,t.MeshNode=i,__reflect(i.prototype,"egret.sys.MeshNode")}(egret=egret||{}),function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.image=null,t.smoothing=!0,t.rotated=!1,t.type=6,t}e=t.sys||(t.sys={}),r=e.RenderNode,__extends(n,r),n.prototype.drawImage=function(t,e,r,i,n,o,a,s){var l=this;l.sourceX=t,l.sourceY=e,l.sourceW=r,l.sourceH=i,l.drawX=n,l.drawY=o,l.drawW=a,l.drawH=s,l.renderCount=1},n.prototype.cleanBeforeRender=function(){r.prototype.cleanBeforeRender.call(this),this.image=null},i=n,e.NormalBitmapNode=i,__reflect(i.prototype,"egret.sys.NormalBitmapNode")}(egret=egret||{}),function(l){var r,t=(r=l.Bitmap,__extends(e,r),e.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(12)},e.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setBitmapDataToMesh(t)},e.prototype.$updateRenderNode=function(){var t,e,r,i,n,o,a,s=this.$bitmapData;s&&(l.$TextureScaleFactor,(t=this.$renderNode).smoothing=this.$smoothing,t.image=s,t.imageWidth=this.$sourceWidth,t.imageHeight=this.$sourceHeight,e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,r=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,i=e/this.$textureWidth,n=r/this.$textureHeight,o=this.$bitmapWidth,a=this.$bitmapHeight,t.drawMesh(this.$bitmapX,this.$bitmapY,o,a,this.$offsetX*i,this.$offsetY*n,i*o,n*a))},e.prototype.$updateVertices=function(){var t,e,r;this._verticesDirty=!0,this.$renderDirty=!0,l.nativeRender?(t=this.$renderNode,this.$nativeDisplayObject.setDataToMesh(t.vertices,t.indices,t.uvs)):((e=this.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=this.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))},e.prototype.$measureContentBounds=function(t){if(this._verticesDirty){this._verticesDirty=!1;var e=this.$renderNode,r=e.vertices;if(r.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0,n=r.length;i<n;i+=2){var o=r[i],a=r[i+1];this._bounds.x>o&&(this._bounds.x=o),this._bounds.width<o&&(this._bounds.width=o),this._bounds.y>a&&(this._bounds.y=a),this._bounds.height<a&&(this._bounds.height=a)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},e);function e(t){var e=r.call(this,t)||this;return e._verticesDirty=!0,e._bounds=new l.Rectangle,e.$renderNode=new l.sys.MeshNode,e}l.Mesh=t,__reflect(t.prototype,"egret.Mesh")}(egret=egret||{}),function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.textColor=16777215,t.strokeColor=0,t.size=30,t.stroke=0,t.bold=!1,t.italic=!1,t.fontFamily="Arial",t.dirtyRender=!0,t.type=2,t}e=t.sys||(t.sys={}),r=e.RenderNode,__extends(n,r),n.prototype.drawText=function(t,e,r,i){this.drawData.push(t,e,r,i),this.renderCount++,this.dirtyRender=!0},n.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},n.prototype.cleanBeforeRender=function(){r.prototype.cleanBeforeRender.call(this),this.dirtyRender=!0},i=n,e.TextNode=i,__reflect(i.prototype,"egret.sys.TextNode")}(egret=egret||{}),function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.type=1,t}e=t.sys||(t.sys={}),r=e.Path2D,__extends(n,r),i=n,e.FillPath=i,__reflect(i.prototype,"egret.sys.FillPath")}(egret=egret||{}),function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.type=2,t}e=t.sys||(t.sys={}),r=e.Path2D,__extends(n,r),i=n,e.GradientFillPath=i,__reflect(i.prototype,"egret.sys.GradientFillPath")}(egret=egret||{}),(egret=egret||{}).OrientationMode={AUTO:"auto",PORTRAIT:"portrait",LANDSCAPE:"landscape",LANDSCAPE_FLIPPED:"landscapeFlipped"},function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.type=3,t}e=t.sys||(t.sys={}),r=e.Path2D,__extends(n,r),i=n,e.StrokePath=i,__reflect(i.prototype,"egret.sys.StrokePath")}(egret=egret||{}),function(C){var D=["source-over","lighter","destination-out"],M="source-over",p="#000000",d={none:"butt",square:"square",round:"round"},L=[],A=[],t=(e.prototype.render=function(t,e,r,i){this.nestLevel++;var n=e.context;n.transform(r.a,r.b,r.c,r.d,0,0);var o=this.drawDisplayObject(t,n,r.tx,r.ty,!0),a=C.Matrix.create();if(r.$invertInto(a),n.transform(a.a,a.b,a.c,a.d,0,0),C.Matrix.release(a),this.nestLevel--,0===this.nestLevel){6<L.length&&(L.length=6);for(var s=L.length,l=0;l<s;l++)L[l].resize(0,0)}return o},e.prototype.drawDisplayObject=function(t,e,r,i,n){var o=0,a=t.$displayList,s=a&&!n?((t.$cacheDirty||t.$renderDirty||a.$canvasScaleX!=C.sys.DisplayList.$canvasScaleX||a.$canvasScaleY!=C.sys.DisplayList.$canvasScaleY)&&(o+=a.drawToSurface()),a.$renderNode):t.$renderDirty?t.$getRenderNode():t.$renderNode;if(t.$cacheDirty=!1,s){switch(o++,e.$offsetX=r,e.$offsetY=i,s.type){case 1:this.renderBitmap(s,e);break;case 2:this.renderText(s,e);break;case 3:this.renderGraphics(s,e);break;case 4:this.renderGroup(s,e);break;case 5:this.renderMesh(s,e);break;case 6:this.renderNormalBitmap(s,e)}e.$offsetX=0,e.$offsetY=0}if(a&&!n)return o;var l=t.$children;if(l)for(var c=l.length,h=0;h<c;h++){var u,p=l[h],d=void 0,f=void 0;f=p.$useTranslate?(u=p.$getMatrix(),d=r+p.$x,f=i+p.$y,e.save(),e.transform(u.a,u.b,u.c,u.d,d,f),d=-p.$anchorOffsetX,-p.$anchorOffsetY):(d=r+p.$x-p.$anchorOffsetX,i+p.$y-p.$anchorOffsetY);var g=void 0;switch(1!=p.$alpha&&(g=e.globalAlpha,e.globalAlpha*=p.$alpha),p.$renderMode){case 1:break;case 2:o+=this.drawWithFilter(p,e,d,f);break;case 3:o+=this.drawWithClip(p,e,d,f);break;case 4:o+=this.drawWithScrollRect(p,e,d,f);break;default:o+=this.drawDisplayObject(p,e,d,f)}p.$useTranslate?e.restore():g&&(e.globalAlpha=g)}return o},e.prototype.drawWithFilter=function(t,e,r,i){if(t.$children&&0==t.$children.length&&(!t.$renderNode||0==t.$renderNode.$getRenderCount()))return 0;var n,o=0,a=t.$filters,s=a.length,l=0!==t.$blendMode;l&&(n=(n=D[t.$blendMode])||M);var c=t.$getOriginalBounds(),h=c.x,u=c.y,p=c.width,d=c.height;if(p<=0||d<=0)return o;var f,g,m,y,v,_,b,T,C,S,x=this.createRenderBuffer(p-h,d-u,!0),E=x.context;if(t.$mask?o+=this.drawWithClip(t,E,-h,-u):t.$scrollRect||t.$maskRect?o+=this.drawWithScrollRect(t,E,-h,-u):o+=this.drawDisplayObject(t,E,-h,-u),0<o){l&&(e.globalCompositeOperation=n),o++;for(var $=E.getImageData(0,0,x.surface.width,x.surface.height),w=0;w<s;w++){var L,P,R,O,I=a[w];"colorTransform"==I.type?N($.data,x.surface.width,x.surface.height,I.$matrix):"blur"==I.type?k($.data,x.surface.width,x.surface.height,I.$blurX,I.$blurY):"glow"==I.type?(L=I.$red,P=I.$green,R=I.$blue,O=I.$alpha,I.$inner||I.$knockout||I.$hideObject?function(t,e,r,i,n,o,a,s,l,c,h,u){var p;p=new(X?Uint8ClampedArray:Array)(t.length);for(var d,f,g=i[3],m=0,y=0,v=s*Math.cos(a),_=s*Math.sin(a),b=3.141592653589793,T=n/7,C=o/7,S=0;S<e;S++)for(var x=0;x<r;x++){for(var E=x*e*4+4*S,$=0,w=0,L=t[E]/255,P=t[1+E]/255,R=t[2+E]/255,O=t[3+E]/255,I=0;I<=2*b;I+=2*b/12){d=Math.cos(I+0),f=Math.sin(I+0);for(var D=0;D<7;D++){m=D*T*d,y=D*C*f;var M=Math.round(S+m-v),A=Math.round(x+y-_),N=0;N=e<=M||M<0||A<0||r<=A?0:t[A*e*4+4*M+3]/255,$+=(7-D)*N,w+=7-D}}O=Math.max(O,1e-4);var k=$/w*l*g*(1-c)*Math.max(Math.min(u,h),1-O),U=(w-$)/w*l*g*c*O;O=Math.max(O*h*(1-u),1e-4);var B=U/(U+O),G=K(L,i[0],B),F=K(P,i[1],B),H=K(R,i[2],B),j=k/(U+O+k),W=K(G,i[0],j),q=K(F,i[1],j),Y=K(H,i[2],j),V=Math.min(O+k+U,1);p[E]=255*W,p[1+E]=255*q,p[2+E]=255*Y,p[3+E]=255*V}X?t.set(p):z(t,p)}($.data,x.surface.width,x.surface.height,[L/255,P/255,R/255,O],I.$blurX,I.$blurY,I.$angle?I.$angle/180*Math.PI:0,I.$distance||0,I.$strength,I.$inner?1:0,I.$knockout?0:1,I.$hideObject?1:0):(f=$.data,g=x.surface.width,m=x.surface.height,y=[L/255,P/255,R/255,O],v=I.$blurX,_=I.$blurY,b=I.$angle?I.$angle/180*Math.PI:0,T=I.$distance||0,C=I.$strength,S=void 0,function(t,e,r,i,n){var o,a,s=Math.sin(i)*n|0,l=Math.cos(i)*n|0;if(X){o=new Int32Array(t.buffer),a=new Int32Array(o.length);for(var c=0;c<r;c++)if(!((u=c+s)<0||r<u))for(var h=0;h<e;h++)(p=h+l)<0||e<p||(a[u*e+p]=o[c*e+h]);o.set(a)}else{o=t,a=new Array(o.length);for(var u,c=0;c<r;c++)if(!((u=c+s)<0||r<u))for(var p,h=0;h<e;h++)(p=h+l)<0||e<p||(a[4*(u*e+p)+0]=o[4*(c*e+h)+0],a[4*(u*e+p)+1]=o[4*(c*e+h)+1],a[4*(u*e+p)+2]=o[4*(c*e+h)+2],a[4*(u*e+p)+3]=o[4*(c*e+h)+3]);z(o,a)}}(S=function(t,e){var r;e=e||[0,0,0,0],X?r=new Uint8ClampedArray(t):z(r=new Array(t.length),t);for(var i=e[0],n=e[1],o=e[2],a=e[3],s=0,l=r.length;s<l;s+=4){var c=r[s+3];r[s+0]=i*c,r[s+1]=n*c,r[s+2]=o*c,r[s+3]=a*c}return r}(f,y),g,m,b,T),k(S,g,m,v,_),function(t,e){for(var r=0,i=t.length;r<i;r+=4)t[r+3]*=e}(S,C),function(t,e){for(var r=0,i=t.length;r<i;r+=4){var n=t[r+0],o=t[r+1],a=t[r+2],s=t[r+3]/255,l=e[r+0],c=e[r+1],h=e[r+2],u=e[r+3]/255;t[r+0]=l+n*(1-u),t[r+1]=c+o*(1-u),t[r+2]=h+a*(1-u),t[r+3]=255*(u+s*(1-u))}}(S,f),f.set(S),X?f.set(S):z(f,S))):I.type}E.putImageData($,0,0),e.drawImage(x.surface,r+h,i+u),l&&(e.globalCompositeOperation=M)}return A.push(x),o},e.prototype.drawWithClip=function(t,e,r,i){var n,o=0,a=0!==t.$blendMode;a&&(n=(n=D[t.$blendMode])||M);var s=t.$scrollRect?t.$scrollRect:t.$maskRect,l=t.$mask;if(l){var c=l.$getMatrix();if(0==c.a&&0==c.b||0==c.c&&0==c.d)return o}if(!(l||t.$children&&0!=t.$children.length))return s&&(e.save(),e.beginPath(),e.rect(s.x+r,s.y+i,s.width,s.height),e.clip()),a&&(e.globalCompositeOperation=n),o+=this.drawDisplayObject(t,e,r,i),a&&(e.globalCompositeOperation=M),s&&e.restore(),o;if(l){var h=l.$getRenderNode();if((!l.$children||0==l.$children.length)&&h&&3==h.type&&1==h.drawData.length&&1==h.drawData[0].type&&1==h.drawData[0].fillAlpha){this.renderingMask=!0,e.save(),(y=C.Matrix.create()).copyFrom(l.$getConcatenatedMatrix()),l.$getConcatenatedMatrixAt(t,y),y.prepend(1,0,0,1,r,i),e.transform(y.a,y.b,y.c,y.d,y.tx,y.ty);var u=this.drawDisplayObject(l,e,0,0);return this.renderingMask=!1,y.$invertInto(y),e.transform(y.a,y.b,y.c,y.d,y.tx,y.ty),C.Matrix.release(y),s&&(e.beginPath(),e.rect(s.x+r,s.y+i,s.width,s.height),e.clip()),u+=this.drawDisplayObject(t,e,r,i),e.restore(),u}}var p=t.$getOriginalBounds(),d=p.x,f=p.y,g=p.width,m=p.height;if(g<=0||m<=0)return o;var y,v,_,b=this.createRenderBuffer(g,m),T=b.context;return T?(o+=this.drawDisplayObject(t,T,-d,-f),l&&(h=l.$getRenderNode(),(y=C.Matrix.create()).copyFrom(l.$getConcatenatedMatrix()),l.$getConcatenatedMatrixAt(t,y),y.translate(-d,-f),h&&1==h.$getRenderCount()||l.$displayList?(T.globalCompositeOperation="destination-in",T.save(),T.setTransform(y.a,y.b,y.c,y.d,y.tx,y.ty),o+=this.drawDisplayObject(l,T,0,0),T.restore()):((_=(v=this.createRenderBuffer(g,m)).context).setTransform(y.a,y.b,y.c,y.d,y.tx,y.ty),o+=this.drawDisplayObject(l,_,0,0),T.globalCompositeOperation="destination-in",T.drawImage(v.surface,0,0),L.push(v)),C.Matrix.release(y)),0<o&&(o++,a&&(e.globalCompositeOperation=n),s&&(e.save(),e.beginPath(),e.rect(s.x+r,s.y+i,s.width,s.height),e.clip()),e.drawImage(b.surface,r+d,i+f),s&&e.restore(),a&&(e.globalCompositeOperation=M)),L.push(b),o):o+=this.drawDisplayObject(t,e,r,i)},e.prototype.drawWithScrollRect=function(t,e,r,i){var n=0,o=t.$scrollRect?t.$scrollRect:t.$maskRect;return o.isEmpty()||(t.$scrollRect&&(r-=o.x,i-=o.y),e.save(),e.beginPath(),e.rect(o.x+r,o.y+i,o.width,o.height),e.clip(),n+=this.drawDisplayObject(t,e,r,i),e.restore()),n},e.prototype.drawNodeToBuffer=function(t,e,r,i){var n=e.context;n.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.renderNode(t,n,i)},e.prototype.drawDisplayToBuffer=function(t,e,r){var i,n=e.context;r&&n.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty);var o=0;if(i=t.$renderDirty?t.$getRenderNode():t.$renderNode)switch(o++,i.type){case 1:this.renderBitmap(i,n);break;case 2:this.renderText(i,n);break;case 3:this.renderGraphics(i,n);break;case 4:this.renderGroup(i,n);break;case 5:this.renderMesh(i,n);break;case 6:this.renderNormalBitmap(i,n)}var a=t.$children;if(a)for(var s=a.length,l=0;l<s;l++){var c=a[l];switch(c.$renderMode){case 1:break;case 2:o+=this.drawWithFilter(c,n,0,0);break;case 3:o+=this.drawWithClip(c,n,0,0);break;case 4:o+=this.drawWithScrollRect(c,n,0,0);break;default:o+=this.drawDisplayObject(c,n,0,0)}}return o},e.prototype.renderNode=function(t,e,r){var i=0;switch(t.type){case 1:i=this.renderBitmap(t,e);break;case 2:i=1,this.renderText(t,e);break;case 3:i=this.renderGraphics(t,e,r);break;case 4:i=this.renderGroup(t,e);break;case 5:i=this.renderMesh(t,e);break;case 6:i+=this.renderNormalBitmap(t,e)}return i},e.prototype.renderNormalBitmap=function(t,e){var r,i,n,o,a,s,l,c,h=t.image;return h&&h.source?(e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing),t.rotated?(r=t.sourceX,i=t.sourceY,n=t.sourceW,o=t.sourceH,a=t.drawX,s=t.drawY,l=t.drawW,c=t.drawH,e.save(),e.transform(0,-1,1,0,0,c),e.drawImage(h.source,r,i,o,n,a+e.$offsetX,s+e.$offsetY,c,l),e.restore()):e.drawImage(h.source,t.sourceX,t.sourceY,t.sourceW,t.sourceH,t.drawX+e.$offsetX,t.drawY+e.$offsetY,t.drawW,t.drawH),1):0},e.prototype.renderBitmap=function(t,e){var r=t.image;if(!r||!r.source)return 0;e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing);var i,n,o,a=t.drawData,s=a.length,l=0,c=t.matrix,h=t.blendMode,u=t.alpha,p=!1;c&&(e.save(),p=!0,0==e.$offsetX&&0==e.$offsetY||(e.translate(e.$offsetX,e.$offsetY),i=e.$offsetX,n=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(c.a,c.b,c.c,c.d,c.tx,c.ty)),h&&(e.globalCompositeOperation=D[h]),u==u&&(o=e.globalAlpha,e.globalAlpha*=u);var d,f,g=0,m=t.filter;if(m&&8==s){var y=a[0],v=a[1],_=a[2],b=a[3],T=a[4],C=a[5],S=a[6],x=a[7];t.rotated&&(_=a[3],b=a[2],S=a[7],x=a[6]);var E=this.createRenderBuffer(S,x),$=E.context;g++,t.rotated&&e.transform(0,-1,1,0,0,S),$.drawImage(r.source,y,v,_,b,0,0,S,x),g++;var w=$.getImageData(0,0,S,x);N(w.data,S,x,m.$matrix),$.putImageData(w,0,0),e.drawImage(E.surface,0,0,S,x,T+e.$offsetX,C+e.$offsetY,S,x),L.push(E)}else for(;l<s;)g++,t.rotated?(y=a[l++],v=a[l++],b=a[l++],_=a[l++],d=a[l++],f=a[l++],x=a[l++],S=a[l++],e.save(),e.transform(0,-1,1,0,0,S),e.drawImage(r.source,y,v,_,b,d+e.$offsetX,f+e.$offsetY,S,x),e.restore()):e.drawImage(r.source,a[l++],a[l++],a[l++],a[l++],a[l++]+e.$offsetX,a[l++]+e.$offsetY,a[l++],a[l++]);return p?e.restore():(h&&(e.globalCompositeOperation=M),u==u&&(e.globalAlpha=o)),i&&(e.$offsetX=i),n&&(e.$offsetY=n),g},e.prototype.renderMesh=function(t,e){return 0},e.prototype.renderText=function(t,e){e.textAlign="left",e.textBaseline="middle",e.lineJoin="round";for(var r=t.drawData,i=r.length,n=0;n<i;){var o=r[n++],a=r[n++],s=r[n++],l=r[n++];e.font=f(t,l);var c=null==l.textColor?t.textColor:l.textColor,h=null==l.strokeColor?t.strokeColor:l.strokeColor,u=null==l.stroke?t.stroke:l.stroke;e.fillStyle=C.toColorString(c),e.strokeStyle=C.toColorString(h),u&&(e.lineWidth=2*u,e.strokeText(s,o+e.$offsetX,a+e.$offsetY)),e.fillText(s,o+e.$offsetX,a+e.$offsetY)}},e.prototype.renderGraphics=function(t,e,r){var i=t.drawData,n=i.length;r=!!r;for(var o=0;o<n;o++){var a=i[o];switch(a.type){case 1:e.fillStyle=r?p:g(a.fillColor,a.fillAlpha),this.renderPath(a,e),this.renderingMask?e.clip():e.fill();break;case 2:var s=a;e.fillStyle=r?p:function(t,e,r,i,n){var o;o=e==C.GradientType.LINEAR?t.createLinearGradient(-1,0,1,0):t.createRadialGradient(0,0,0,0,0,1);for(var a=r.length,s=0;s<a;s++)o.addColorStop(n[s]/255,g(r[s],i[s]));return o}(e,s.gradientType,s.colors,s.alphas,s.ratios,s.matrix),e.save();var l=s.matrix;this.renderPath(a,e),e.transform(l.a,l.b,l.c,l.d,l.tx,l.ty),e.fill(),e.restore();break;case 3:var c=a,h=c.lineWidth;e.lineWidth=h,e.strokeStyle=r?p:g(c.lineColor,c.lineAlpha),e.lineCap=d[c.caps],e.lineJoin=c.joints,e.miterLimit=c.miterLimit,e.setLineDash&&e.setLineDash(c.lineDash);var u=1===h||3===h;u&&e.translate(.5,.5),this.renderPath(a,e),e.stroke(),u&&e.translate(-.5,-.5)}}return 0==n?0:1},e.prototype.renderPath=function(t,e){e.beginPath();for(var r=t.$data,i=t.$commands,n=i.length,o=0,a=0;a<n;a++)switch(i[a]){case 4:e.bezierCurveTo(r[o++]+e.$offsetX,r[o++]+e.$offsetY,r[o++]+e.$offsetX,r[o++]+e.$offsetY,r[o++]+e.$offsetX,r[o++]+e.$offsetY);break;case 3:e.quadraticCurveTo(r[o++]+e.$offsetX,r[o++]+e.$offsetY,r[o++]+e.$offsetX,r[o++]+e.$offsetY);break;case 2:e.lineTo(r[o++]+e.$offsetX,r[o++]+e.$offsetY);break;case 1:e.moveTo(r[o++]+e.$offsetX,r[o++]+e.$offsetY)}},e.prototype.renderGroup=function(t,e){var r,i,n=t.matrix,o=!1;n&&(e.save(),o=!0,0==e.$offsetX&&0==e.$offsetY||(e.translate(e.$offsetX,e.$offsetY),r=e.$offsetX,i=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty));for(var a=0,s=t.drawData,l=s.length,c=0;c<l;c++){var h=s[c];a+=this.renderNode(h,e)}return o&&e.restore(),r&&(e.$offsetX=r),i&&(e.$offsetY=i),a},e.prototype.createRenderBuffer=function(t,e,r){var i=r?A.pop():L.pop();return i?i.resize(t,e,!0):i=new C.sys.CanvasRenderBuffer(t,e),i},e);function e(){this.nestLevel=0,this.renderingMask=!1}function f(t,e){var r=(null==e.italic?t.italic:e.italic)?"italic ":"normal ";return r+=(null==e.bold?t.bold:e.bold)?"bold ":"normal ",r+=(null==e.size?t.size:e.size)+"px "+(e.fontFamily||t.fontFamily)}function g(t,e){return"rgba("+(t>>16)+","+(t>>8&255)+","+(255&t)+","+e+")"}C.CanvasRenderer=t,__reflect(t.prototype,"egret.CanvasRenderer"),C.getFontString=f,C.getRGBAString=g;var X=!1;try{X=!0}catch(t){}function z(t,e,r){void 0===r&&(r=0);for(var i=0,n=e.length;i<n;i++)t[i+r]=e[i]}function N(t,e,r,i){for(var n=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],h=i[6],u=i[7],p=i[8],d=i[9],f=i[10],g=i[11],m=i[12],y=i[13],v=i[14],_=i[15],b=i[16],T=i[17],C=i[18],S=i[19],x=0,E=e*r*4;x<E;x+=4){var $=t[x+0],w=t[x+1],L=t[x+2],P=t[x+3];t[x+0]=n*$+o*w+a*L+s*P+l,t[x+1]=c*$+h*w+u*L+p*P+d,t[x+2]=f*$+g*w+m*L+y*P+v,t[x+3]=_*$+b*w+T*L+C*P+S}}function k(t,e,r,i,n){!function(t,e,r,i){var n;n=new(X?Uint8ClampedArray:Array)(4*e);for(var o=4*e,a=2*i+1,s=0;s<r;s++){for(var l=s*o,c=0,h=0,u=0,p=0,d=0,f=0,g=4*-i,m=4*i+4;g<m;g+=4){var y=l+g;y<l||l+o<=y||(d=t[y+3],c+=t[y+0]*d,h+=t[y+1]*d,u+=t[y+2]*d,p+=d)}for(var m=l+o,v=0,_=(g=l)-4*i,b=g+4*(i+1);g<m;g+=4,v+=4,b+=4,_+=4)0===p?(n[v+0]=0,n[v+1]=0,n[v+2]=0,n[v+3]=0):(n[v+0]=c/p,n[v+1]=h/p,n[v+2]=u/p,n[v+3]=p/a),d=t[b+3],f=t[_+3],d||0==d?f||0==f?(c+=t[b+0]*d-t[_+0]*f,h+=t[b+1]*d-t[_+1]*f,u+=t[b+2]*d-t[_+2]*f,p+=d-f):(c+=t[b+0]*d,h+=t[b+1]*d,u+=t[b+2]*d,p+=d):!f&&0!=f||(c+=-t[_+0]*f,h+=-t[_+1]*f,u+=-t[_+2]*f,p+=-f);X?t.set(n,l):z(t,n,l)}}(t,e,r,i),function(t,e,r,i){var n;n=new(X?Uint8ClampedArray:Array)(4*r);for(var o=4*e,a=2*i+1,s=0;s<e;s++){for(var l=4*s,c=0,h=0,u=0,p=0,d=0,f=0,g=-i*o,m=i*o+o;g<m;g+=o){var y=l+g;y<l||l+r*o<=y||(d=t[y+3],c+=t[y+0]*d,h+=t[y+1]*d,u+=t[y+2]*d,p+=d)}for(var g=l,m=l+r*o,v=0,_=l-i*o,b=l+(i+1)*o;g<m;g+=o,v+=4,b+=o,_+=o)0===p?(n[v+0]=0,n[v+1]=0,n[v+2]=0,n[v+3]=0):(n[v+0]=c/p,n[v+1]=h/p,n[v+2]=u/p,n[v+3]=p/a),d=t[b+3],f=t[_+3],d||0==d?f||0==f?(c+=t[b+0]*d-t[_+0]*f,h+=t[b+1]*d-t[_+1]*f,u+=t[b+2]*d-t[_+2]*f,p+=d-f):(c+=t[b+0]*d,h+=t[b+1]*d,u+=t[b+2]*d,p+=d):!f&&0!=f||(c+=-t[_+0]*f,h+=-t[_+1]*f,u+=-t[_+2]*f,p+=-f);for(var T=4*s,m=T+r*o,C=0;T<m;T+=o,C+=4)t[T+0]=n[C+0],t[T+1]=n[C+1],t[T+2]=n[C+2],t[T+3]=n[C+3]}}(t,e,r,n)}function K(t,e,r){return t*(1-r)+e*r}}(egret=egret||{}),(egret=egret||{}).DeviceOrientation=null,function(t){var e;(e=t.RuntimeType||(t.RuntimeType={})).WEB="web",e.NATIVE="native",e.RUNTIME2="runtime2",e.MYGAME="mygame",e.WXGAME="wxgame",e.BAIDUGAME="baidugame",e.QGAME="qgame",e.OPPOGAME="oppogame",e.QQGAME="qqgame",e.VIVOGAME="vivogame";var r=(i.language="zh-CN",i.os="Unknown",i.runtimeType=t.RuntimeType.WEB,i.engineVersion="5.2.31",i.renderMode="Unknown",i.boundingClientWidth=0,i.boundingClientHeight=0,i);function i(){}t.Capabilities=r,__reflect(r.prototype,"egret.Capabilities")}(egret=(egret=(egret=egret||{})||{})||{}),function(d){var r,t=(r=d.Texture,__extends(e,r),e.prototype.drawToTexture=function(t,e,r){if(void 0===r&&(r=1),e&&(0==e.width||0==e.height))return!1;var i=e||t.$getOriginalBounds();if(0==i.width||0==i.height)return!1;r/=d.$TextureScaleFactor;var n=(i.x+i.width)*r,o=(i.y+i.height)*r;e&&(n=i.width*r,o=i.height*r);var a,s,l,c,h,u,p=this.$renderBuffer;return!!p&&(p.resize(n,o),this.$bitmapData.width=n,this.$bitmapData.height=o,d.nativeRender?(egret_native.activateBuffer(this.$renderBuffer),a=!1,h=c=l=s=0,e&&(a=!0,s=e.x,l=e.y,c=e.width,h=e.height),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject(t.$nativeDisplayObject.id,r,a,s,l,c,h),egret_native.activateBuffer(null)):((u=d.Matrix.create()).identity(),u.scale(r,r),e&&u.translate(-e.x,-e.y),d.sys.systemRenderer.render(t,p,u,!0),d.Matrix.release(u)),this.$initData(0,0,n,o,0,0,n,o,n,o),!0)},e.prototype.getPixel32=function(t,e){var r,i;return this.$renderBuffer&&(i=d.$TextureScaleFactor,t=Math.round(t/i),e=Math.round(e/i),r=this.$renderBuffer.getPixels(t,e,1,1)),r},e.prototype.dispose=function(){r.prototype.dispose.call(this),this.$renderBuffer=null},e);function e(){var t=r.call(this)||this;t.$renderBuffer=new d.sys.RenderBuffer;var e=new d.BitmapData(t.$renderBuffer.surface);return e.$deleteSource=!1,t._setBitmapData(e),t}d.RenderTexture=t,__reflect(t.prototype,"egret.RenderTexture")}(egret=egret||{}),function(t){var r={};t.registerImplementation=function(t,e){r[t]=e},t.getImplementation=function(t){return r[t]}}(egret=egret||{}),function(e){var i,t=(i=e.DisplayObject,__extends(r,i),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(8)},Object.defineProperty(r.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),r.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},r.prototype.$hitTest=function(t,e){var r=i.prototype.$hitTest.call(this,t,e);return r==this&&(r=this.$graphics.$hitTest(t,e)),r},r.prototype.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},r);function r(){var t=i.call(this)||this;return t.$graphics=new e.Graphics,t.$graphics.$setTarget(t),t}e.Shape=t,__reflect(t.prototype,"egret.Shape")}(egret=egret||{}),function(t){var i,e=(i=t.SpriteSheet,__extends(r,i),r.prototype.getTexture=function(t){var e=this._textureMap[t];if(!e){var r=this.charList[t];if(!r)return null;e=this.createTexture(t,r.x,r.y,r.w,r.h,r.offX,r.offY,r.sourceW,r.sourceH),this._textureMap[t]=e}return e},r.prototype.getConfig=function(t,e){return this.charList[t]?this.charList[t][e]:0},r.prototype._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var r,i,n=e.sourceH;if(void 0===n&&(void 0===(r=e.h)&&(r=0),void 0===(i=e.offY)&&(i=0),n=r+i),n<=0)continue;this.firstCharHeight=n;break}}return this.firstCharHeight},r.prototype.parseConfig=function(t){for(var e=(t=t.split("\r\n").join("\n")).split("\n"),r=this.getConfigByKey(e[3],"count"),i={},n=4;n<4+r;n++){var o=e[n],a={};(i[String.fromCharCode(this.getConfigByKey(o,"id"))]=a).x=this.getConfigByKey(o,"x"),a.y=this.getConfigByKey(o,"y"),a.w=this.getConfigByKey(o,"width"),a.h=this.getConfigByKey(o,"height"),a.offX=this.getConfigByKey(o,"xoffset"),a.offY=this.getConfigByKey(o,"yoffset"),a.xadvance=this.getConfigByKey(o,"xadvance")}return i},r.prototype.getConfigByKey=function(t,e){for(var r=t.split(" "),i=0,n=r.length;i<n;i++){var o=r[i];if(e==o.substring(0,e.length)){var a=o.substring(e.length+1);return parseInt(a)}}return 0},r);function r(t,e){var r=i.call(this,t)||this;return r.firstCharHeight=0,"string"==typeof e?r.charList=r.parseConfig(e):e&&e.hasOwnProperty("frames")?r.charList=e.frames:r.charList={},r}t.BitmapFont=e,__reflect(e.prototype,"egret.BitmapFont")}(egret=egret||{}),function(R){var e,t=(e=R.DisplayObject,__extends(O,e),O.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(O.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){var e,r;t!=this.$smoothing&&(this.$smoothing=t,R.nativeRender||((e=this.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=this.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"text",{get:function(){return this.$text},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),O.prototype.$setText=function(t){return(t=null==t?"":String(t))!=this.$text&&(this.$text=t,this.$invalidateContentBounds(),!0)},O.prototype.$getWidth=function(){var t=this.$textFieldWidth;return isNaN(t)?this.$getContentBounds().width:t},O.prototype.$setWidth=function(t){return!(t<0||t==this.$textFieldWidth||(this.$textFieldWidth=t,this.$invalidateContentBounds(),0))},O.prototype.$invalidateContentBounds=function(){this.$renderDirty=!0,this.$textLinesChanged=!0,this.$updateRenderNode()},O.prototype.$getHeight=function(){var t=this.$textFieldHeight;return isNaN(t)?this.$getContentBounds().height:t},O.prototype.$setHeight=function(t){return!(t<0||t==this.$textFieldHeight||(this.$textFieldHeight=t,this.$invalidateContentBounds(),0))},Object.defineProperty(O.prototype,"font",{get:function(){return this.$font},set:function(t){this.$setFont(t)},enumerable:!0,configurable:!0}),O.prototype.$setFont=function(t){return this.$font!=t&&(this.$font=t,this.$fontStringChanged=!0,this.$invalidateContentBounds(),!0)},Object.defineProperty(O.prototype,"lineSpacing",{get:function(){return this.$lineSpacing},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),O.prototype.$setLineSpacing=function(t){return this.$lineSpacing!=t&&(this.$lineSpacing=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(O.prototype,"letterSpacing",{get:function(){return this.$letterSpacing},set:function(t){this.$setLetterSpacing(t)},enumerable:!0,configurable:!0}),O.prototype.$setLetterSpacing=function(t){return this.$letterSpacing!=t&&(this.$letterSpacing=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(O.prototype,"textAlign",{get:function(){return this.$textAlign},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),O.prototype.$setTextAlign=function(t){return this.$textAlign!=t&&(this.$textAlign=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(O.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),O.prototype.$setVerticalAlign=function(t){return this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$invalidateContentBounds(),!0)},O.prototype.$updateRenderNode=function(){var t=this,e=this.$getTextLines(),r=e.length;if(0!=r){var i,n=[],o=this.$textLinesWidth,a=t.$font;R.nativeRender||(i=this.$renderNode,a.$texture&&(i.image=a.$texture.$bitmapData),i.smoothing=t.$smoothing);for(var s,l=a._getFirstCharHeight(),c=Math.ceil(l*O.EMPTY_FACTOR),h=!isNaN(t.$textFieldHeight),u=t.$textWidth,p=t.$textFieldWidth,d=t.$textFieldHeight,f=t.$textAlign,g=this.$textOffsetY+this.$textStartY,m=this.$lineHeights,y=0;y<r;y++){var v=m[y];if(h&&0<y&&d<g+v)break;var _,b=e[y],T=b.length,C=this.$textOffsetX;f!=R.HorizontalAlign.LEFT&&(_=u<p?p:u,f==R.HorizontalAlign.RIGHT?C+=_-o[y]:f==R.HorizontalAlign.CENTER&&(C+=Math.floor((_-o[y])/2)));for(var S=0;S<T;S++){var x,E,$=b.charAt(S),w=a.getTexture($);w?(x=w.$bitmapWidth,E=w.$bitmapHeight,R.nativeRender?n.push(w.$bitmapX,w.$bitmapY,x,E,C+w.$offsetX,g+w.$offsetY,w.$getScaleBitmapWidth(),w.$getScaleBitmapHeight(),w.$sourceWidth,w.$sourceHeight):(i.imageWidth=w.$sourceWidth,i.imageHeight=w.$sourceHeight,i.drawImage(w.$bitmapX,w.$bitmapY,x,E,C+w.$offsetX,g+w.$offsetY,w.$getScaleBitmapWidth(),w.$getScaleBitmapHeight())),C+=(a.getConfig($,"xadvance")||w.$getTextureWidth())+t.$letterSpacing):" "==$?C+=c:R.$warn(1046,$)}g+=v+t.$lineSpacing}R.nativeRender&&(t.$nativeDisplayObject.setDataToBitmapNode(t.$nativeDisplayObject.id,a.$texture,n),s=t.$getContentBounds(),t.$nativeDisplayObject.setWidth(s.width),t.$nativeDisplayObject.setHeight(s.height))}else R.nativeRender&&t.$font&&(t.$nativeDisplayObject.setDataToBitmapNode(t.$nativeDisplayObject.id,t.$font.$texture,[]),t.$nativeDisplayObject.setWidth(0),t.$nativeDisplayObject.setHeight(0))},O.prototype.$measureContentBounds=function(t){0==this.$getTextLines().length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$textWidth-this.$textOffsetX,this.$textHeight-this.$textOffsetY)},Object.defineProperty(O.prototype,"textWidth",{get:function(){return this.$getTextLines(),this.$textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"textHeight",{get:function(){return this.$getTextLines(),this.$textHeight},enumerable:!0,configurable:!0}),O.prototype.$getTextLines=function(){var t=this;if(!t.$textLinesChanged)return t.textLines;var e=[];t.textLines=e;var r=[];t.$textLinesWidth=r,t.$textLinesChanged=!1;var i=[];if(t.$lineHeights=i,!t.$text||!t.$font)return t.$textWidth=0,t.$textHeight=0,e;for(var n,o=t.$lineSpacing,a=t.$letterSpacing,s=0,l=0,c=!isNaN(t.$textFieldWidth),h=t.$textFieldWidth,u=t.$textFieldHeight,p=t.$font,d=p._getFirstCharHeight(),f=Math.ceil(d*O.EMPTY_FACTOR),g=t.$text.split(/(?:\r\n|\r|\n)/),m=g.length,y=0;y<m;y++){for(var v=g[y],_=v.length,b=0,T=0,C=!0,S=!1,x=0;x<_;x++){C||(T+=a);var E=v.charAt(x),$=void 0,w=void 0,L=p.getTexture(E);if(L)$=L.$getTextureWidth(),w=L.$getTextureHeight(),L.$offsetX,L.$offsetY;else{if(" "!=E){R.$warn(1046,E),C=C&&!1;continue}$=f,w=d}if(C=C&&!1,c&&0<x&&h<T+$){if(!P(v.substring(0,x)))break;_=(v=v.substring(x)).length,T=(x=0)!=_-1&&p.getConfig(E,"xadvance")||$,b=w}else T+=x!=_-1&&p.getConfig(E,"xadvance")||$,b=Math.max(w,b)}if(u&&0<y&&u<l)break;if(S=!0,!P(v))break}function P(t){return!(u&&0<e.length&&u<l)&&(l+=b+o,C||S||(T-=a),e.push(t),i.push(b),r.push(T),s=Math.max(T,s),1)}return l-=o,t.$textWidth=s,t.$textHeight=l,this.$textOffsetX=0,this.$textOffsetY=0,this.$textStartX=0,this.$textStartY=0,s<h&&((n=t.$textAlign)==R.HorizontalAlign.RIGHT?this.$textStartX=h-s:n==R.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor((h-s)/2))),l<u&&((n=t.$verticalAlign)==R.VerticalAlign.BOTTOM?this.$textStartY=u-l:n==R.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((u-l)/2))),e},O.EMPTY_FACTOR=.33,O);function O(){var t=e.call(this)||this;return t.$smoothing=R.Bitmap.defaultSmoothing,t.$text="",t.$textFieldWidth=NaN,t.$textLinesChanged=!1,t.$textFieldHeight=NaN,t.$font=null,t.$fontStringChanged=!1,t.$lineSpacing=0,t.$letterSpacing=0,t.$textAlign=R.HorizontalAlign.LEFT,t.$verticalAlign=R.VerticalAlign.TOP,t.$textWidth=NaN,t.$textHeight=NaN,t.$textOffsetX=0,t.$textOffsetY=0,t.$textStartX=0,t.$textStartY=0,t.textLines=[],t.$lineHeights=[],R.nativeRender||(t.$renderNode=new R.sys.BitmapNode),t}R.BitmapText=t,__reflect(t.prototype,"egret.BitmapText")}(egret=egret||{}),function(t){var e=(r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.JUSTIFY="justify",r.CONTENT_JUSTIFY="contentJustify",r);function r(){}t.HorizontalAlign=e,__reflect(e.prototype,"egret.HorizontalAlign")}(egret=egret||{}),function(o){var t=(e.prototype.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},e.prototype.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var r=this.replaceArr[e][0],i=this.replaceArr[e][1];t=t.replace(r,i)}return t},e.prototype.parse=function(t){this.stackArray=[],this.resutlArr=[];for(var e=0,r=t.length;e<r;)var i,n=t.indexOf("<",e),e=n<0?(this.addToResultArr(t.substring(e)),r):(this.addToResultArr(t.substring(e,n)),-1==(i=t.indexOf(">",n))?(o.$error(1038),i=n):"/"==t.charAt(n+1)?this.stackArray.pop():this.addToArray(t.substring(n+1,i)),i+1);return this.resutlArr},e.prototype.parser=function(t){return this.parse(t)},e.prototype.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),0<this.stackArray.length?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},e.prototype.changeStringToObject=function(t){var e,r={};if("i"==(t=t.trim()).charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(r,t,"true");else if(e=t.match(/^(font|a)\s/)){t=t.substring(e[0].length).trim();for(var i,n=0;i=t.match(this.getHeadReg());){var o=i[0],a="";'"'==(t=t.substring(o.length).trim()).charAt(0)?(n=t.indexOf('"',1),a=t.substring(1,n),n+=1):"'"==t.charAt(0)?(n=t.indexOf("'",1),a=t.substring(1,n),n+=1):n=(a=t.match(/(\S)+/)[0]).length,this.addProperty(r,o.substring(0,o.length-1).trim(),a.trim()),t=t.substring(n).trim()}}return r},e.prototype.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},e.prototype.addProperty=function(t,e,r){switch(e.toLowerCase()){case"color":case"textcolor":r=r.replace(/#/,"0x"),t.textColor=parseInt(r);break;case"strokecolor":r=r.replace(/#/,"0x"),t.strokeColor=parseInt(r);break;case"stroke":t.stroke=parseInt(r);break;case"b":case"bold":t.bold="true"==r;break;case"u":t.underline="true"==r;break;case"i":case"italic":t.italic="true"==r;break;case"size":t.size=parseInt(r);break;case"fontfamily":t.fontFamily=r;break;case"href":t.href=this.replaceSpecial(r);break;case"target":t.target=this.replaceSpecial(r)}},e.prototype.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var r=this.stackArray[this.stackArray.length-1];for(var i in r)null==e[i]&&(e[i]=r[i]);this.stackArray.push(e)}},e);function e(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}o.HtmlTextParser=t,__reflect(t.prototype,"egret.HtmlTextParser")}(egret=egret||{}),function(a){var e,t=(e=a.HashObject,__extends(r,e),r.prototype.init=function(t){this._text=t,this.stageText=new a.StageText,this.stageText.$setTextField(this._text)},r.prototype._addStageText=function(){this.stageTextAdded||(this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(a.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this),this.stageTextAdded=!0)},r.prototype._removeStageText=function(){this.stageTextAdded&&(this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this),this.stageTextAdded=!1)},r.prototype._getText=function(){return this.stageText.$getText()},r.prototype._setText=function(t){this.stageText.$setText(t)},r.prototype._setColor=function(t){this.stageText.$setColor(t)},r.prototype.focusHandler=function(t){this._isFocus||(this._isFocus=!0,t.showing||this._text.$setIsTyping(!0),this._text.dispatchEvent(new a.FocusEvent(a.FocusEvent.FOCUS_IN,!0)))},r.prototype.blurHandler=function(t){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$setIsTyping(!1),this.stageText.$onBlur(),this._text.dispatchEvent(new a.FocusEvent(a.FocusEvent.FOCUS_OUT,!0)))},r.prototype.onMouseDownHandler=function(t){this.$onFocus()},r.prototype.$onFocus=function(){var t=this;this._text.visible&&(this._isFocus||(this.tempStage.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),a.callLater(function(){t.tempStage.addEventListener(a.TouchEvent.TOUCH_BEGIN,t.onStageDownHandler,t)},this),a.nativeRender&&this.stageText.$setText(this._text.$TextField[13]),this.stageText.$show()))},r.prototype.onStageDownHandler=function(t){t.$target!=this._text&&this.stageText.$hide()},r.prototype.updateTextHandler=function(t){var e,r,i=this._text.$TextField,n=this.stageText.$getText(),o=!1;null!=i[35]&&(e=new RegExp("["+i[35]+"]","g"),n=(r=n.match(e))?r.join(""):"",o=!0),null!=i[36]&&(e=new RegExp("[^"+i[36]+"]","g"),n=(r=n.match(e))?r.join(""):"",o=!0),o&&this.stageText.$getText()!=n&&this.stageText.$setText(n),this.resetText(),this._text.dispatchEvent(new a.Event(a.Event.CHANGE,!0))},r.prototype.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},r.prototype._hideInput=function(){this.stageText.$removeFromStage()},r.prototype.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},r.prototype._updateProperties=function(){if(this._isFocus)return this.stageText.$resetStageText(),void this.updateInput();this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),this.updateInput()},r);function r(){var t=e.call(this)||this;return t.stageTextAdded=!1,t._text=null,t._isFocus=!1,t}a.InputController=t,__reflect(t.prototype,"egret.InputController")}(egret=egret||{}),function(M){var A=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![)}\\.\\,\\!\\?\\]\\:])");function N(t,e,r){var i=null==(r=r||{}).italic?e[16]:r.italic,n=null==r.bold?e[15]:r.bold,o=null==r.size?e[0]:r.size,a=r.fontFamily||e[8]||s.default_fontFamily;return M.sys.measureText(t,a,o,n,i)}var r,s=(r=M.DisplayObject,__extends(_,r),_.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(7)},_.prototype.isInput=function(){return this.$TextField[24]==M.TextFieldType.INPUT},_.prototype.$setTouchEnabled=function(t){r.prototype.$setTouchEnabled.call(this,t),this.isInput()&&(this.$inputEnabled=!0)},Object.defineProperty(_.prototype,"fontFamily",{get:function(){return this.$TextField[8]},set:function(t){this.$setFontFamily(t)},enumerable:!0,configurable:!0}),_.prototype.$setFontFamily=function(t){var e=this.$TextField;return e[8]!=t&&(e[8]=t,this.invalidateFontString(),M.nativeRender&&this.$nativeDisplayObject.setFontFamily(t),!0)},Object.defineProperty(_.prototype,"size",{get:function(){return this.$TextField[0]},set:function(t){this.$setSize(t)},enumerable:!0,configurable:!0}),_.prototype.$setSize=function(t){var e=this.$TextField;return e[0]!=t&&(e[0]=t,this.invalidateFontString(),M.nativeRender&&this.$nativeDisplayObject.setFontSize(t),!0)},Object.defineProperty(_.prototype,"bold",{get:function(){return this.$TextField[15]},set:function(t){this.$setBold(t)},enumerable:!0,configurable:!0}),_.prototype.$setBold=function(t){var e=this.$TextField;return t!=e[15]&&(e[15]=t,this.invalidateFontString(),M.nativeRender&&this.$nativeDisplayObject.setBold(t),!0)},Object.defineProperty(_.prototype,"italic",{get:function(){return this.$TextField[16]},set:function(t){this.$setItalic(t)},enumerable:!0,configurable:!0}),_.prototype.$setItalic=function(t){var e=this.$TextField;return t!=e[16]&&(e[16]=t,this.invalidateFontString(),M.nativeRender&&this.$nativeDisplayObject.setItalic(t),!0)},_.prototype.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},Object.defineProperty(_.prototype,"textAlign",{get:function(){return this.$TextField[9]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),_.prototype.$setTextAlign=function(t){var e=this.$TextField;return e[9]!=t&&(e[9]=t,this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setTextAlign(t),!0)},Object.defineProperty(_.prototype,"verticalAlign",{get:function(){return this.$TextField[10]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),_.prototype.$setVerticalAlign=function(t){var e=this.$TextField;return e[10]!=t&&(e[10]=t,this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setVerticalAlign(t),!0)},Object.defineProperty(_.prototype,"lineSpacing",{get:function(){return this.$TextField[1]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),_.prototype.$setLineSpacing=function(t){var e=this.$TextField;return e[1]!=t&&(e[1]=t,this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setLineSpacing(t),!0)},Object.defineProperty(_.prototype,"textColor",{get:function(){return this.$TextField[2]},set:function(t){this.$setTextColor(t)},enumerable:!0,configurable:!0}),_.prototype.$setTextColor=function(t){var e=this.$TextField;return e[2]!=t&&(e[2]=t,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setTextColor(t),!0)},Object.defineProperty(_.prototype,"wordWrap",{get:function(){return this.$TextField[19]},set:function(t){this.$setWordWrap(t)},enumerable:!0,configurable:!0}),_.prototype.$setWordWrap=function(t){var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setWordWrap(t)))},Object.defineProperty(_.prototype,"type",{get:function(){return this.$TextField[24]},set:function(t){this.$setType(t)},enumerable:!0,configurable:!0}),_.prototype.$setType=function(t){var e=this.$TextField;return e[24]!=t&&(e[24]=t,M.nativeRender&&this.$nativeDisplayObject.setType(t),t==M.TextFieldType.INPUT?(isNaN(e[3])&&this.$setWidth(100),isNaN(e[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new M.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0)},Object.defineProperty(_.prototype,"inputType",{get:function(){return this.$TextField[37]},set:function(t){this.$TextField[37]!=t&&(this.$TextField[37]=t,M.nativeRender&&this.$nativeDisplayObject.setInputType(t))},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"text",{get:function(){return this.$getText()},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),_.prototype.$getText=function(){return this.$TextField[24]==M.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},_.prototype.$setBaseText=function(t){t=null==t?"":t.toString(),this.isFlow=!1;var e=this.$TextField;if(e[13]==t)return!1;this.$invalidateTextField(),e[13]=t;var r="",r=e[20]?this.changeToPassText(t):t;return M.nativeRender&&this.$nativeDisplayObject.setText(r),this.setMiddleStyle([{text:r}]),!0},_.prototype.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},Object.defineProperty(_.prototype,"displayAsPassword",{get:function(){return this.$TextField[20]},set:function(t){this.$setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),_.prototype.$setDisplayAsPassword=function(t){var e=this.$TextField;if(e[20]==t)return!1;e[20]=t,this.$invalidateTextField();var r="",r=t?this.changeToPassText(e[13]):e[13];return M.nativeRender&&this.$nativeDisplayObject.setText(r),this.setMiddleStyle([{text:r}]),!0},Object.defineProperty(_.prototype,"strokeColor",{get:function(){return this.$TextField[25]},set:function(t){this.$setStrokeColor(t)},enumerable:!0,configurable:!0}),_.prototype.$setStrokeColor=function(t){var e=this.$TextField;return e[25]!=t&&(this.$invalidateTextField(),e[25]=t,M.nativeRender&&this.$nativeDisplayObject.setStrokeColor(t),e[26]=M.toColorString(t),!0)},Object.defineProperty(_.prototype,"stroke",{get:function(){return this.$TextField[27]},set:function(t){this.$setStroke(t)},enumerable:!0,configurable:!0}),_.prototype.$setStroke=function(t){return this.$TextField[27]!=t&&(this.$invalidateTextField(),this.$TextField[27]=t,M.nativeRender&&this.$nativeDisplayObject.setStroke(t),!0)},Object.defineProperty(_.prototype,"maxChars",{get:function(){return this.$TextField[21]},set:function(t){this.$setMaxChars(t)},enumerable:!0,configurable:!0}),_.prototype.$setMaxChars=function(t){return this.$TextField[21]!=t&&(this.$TextField[21]=t,M.nativeRender&&this.$nativeDisplayObject.setMaxChars(t),!0)},Object.defineProperty(_.prototype,"scrollV",{get:function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},set:function(t){(t=Math.max(t,1))!=this.$TextField[28]&&(this.$TextField[28]=t,M.nativeRender&&this.$nativeDisplayObject.setScrollV(t),this.$invalidateTextField())},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"maxScrollV",{get:function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-M.TextFieldUtils.$getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),_.prototype.$setSelection=function(t,e){return!1},_.prototype.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},Object.defineProperty(_.prototype,"numLines",{get:function(){return this.$getLinesArr(),this.$TextField[29]},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"multiline",{get:function(){return this.$TextField[30]},set:function(t){this.$setMultiline(t)},enumerable:!0,configurable:!0}),_.prototype.$setMultiline=function(t){return this.$TextField[30]!=t&&(this.$TextField[30]=t,this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setMultiline(t),!0)},Object.defineProperty(_.prototype,"restrict",{get:function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},set:function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var r=-1;r<t.length&&0!=(r=t.indexOf("^",r))&&0<r&&"\\"==t.charAt(r-1);)r++;0==r?(e[35]=null,e[36]=t.substring(r+1)):0<r?(e[35]=t.substring(0,r),e[36]=t.substring(r+1)):(e[35]=t,e[36]=null)}},enumerable:!0,configurable:!0}),_.prototype.$setWidth=function(t){M.nativeRender&&this.$nativeDisplayObject.setTextFieldWidth(t);var e=this.$TextField;if(isNaN(t)){if(isNaN(e[3]))return!1;e[3]=NaN}else{if(e[3]==t)return!1;e[3]=t}return!((t=+t)<0||(this.$invalidateTextField(),0))},_.prototype.$setHeight=function(t){M.nativeRender&&this.$nativeDisplayObject.setTextFieldHeight(t);var e=this.$TextField;if(isNaN(t)){if(isNaN(e[4]))return!1;e[4]=NaN}else{if(e[4]==t)return!1;e[4]=t}return!((t=+t)<0||(this.$invalidateTextField(),0))},_.prototype.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},_.prototype.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},Object.defineProperty(_.prototype,"border",{get:function(){return this.$TextField[31]},set:function(t){this.$setBorder(t)},enumerable:!0,configurable:!0}),_.prototype.$setBorder=function(t){t=!!t,this.$TextField[31]!=t&&(this.$TextField[31]=t,this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setBorder(t))},Object.defineProperty(_.prototype,"borderColor",{get:function(){return this.$TextField[32]},set:function(t){this.$setBorderColor(t)},enumerable:!0,configurable:!0}),_.prototype.$setBorderColor=function(t){t=+t||0,this.$TextField[32]!=t&&(this.$TextField[32]=t,this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setBorderColor(t))},Object.defineProperty(_.prototype,"background",{get:function(){return this.$TextField[33]},set:function(t){this.$setBackground(t)},enumerable:!0,configurable:!0}),_.prototype.$setBackground=function(t){this.$TextField[33]!=t&&(this.$TextField[33]=t,this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setBackground(t))},Object.defineProperty(_.prototype,"backgroundColor",{get:function(){return this.$TextField[34]},set:function(t){this.$setBackgroundColor(t)},enumerable:!0,configurable:!0}),_.prototype.$setBackgroundColor=function(t){this.$TextField[34]!=t&&(this.$TextField[34]=t,this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setBackgroundColor(t))},_.prototype.fillBackground=function(t){var e=this.$graphicsNode;e&&e.clear();var r,i,n=this.$TextField;if(n[33]||n[31]||t&&0<t.length){e||(e=this.$graphicsNode=new M.sys.GraphicsNode,M.nativeRender?this.$renderNode=this.textNode:((r=new M.sys.GroupNode).addNode(e),r.addNode(this.textNode),this.$renderNode=r));var o=void 0;if(n[33]&&e.beginFill(n[34]).drawRect(0,0,this.$getWidth(),this.$getHeight()),n[31]&&(o=e.lineStyle(1,n[32])).drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1),t&&0<t.length)for(var a=n[2],s=-1,l=t.length,c=0;c<l;c+=4){var h=t[c],u=t[c+1],p=t[c+2],d=t[c+3]||a;(s<0||s!=d)&&(s=d,o=e.lineStyle(2,d,1,M.CapsStyle.NONE)),o.moveTo(h,u),o.lineTo(h+p,u)}}e&&(i=this.$getRenderBounds(),e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height,M.Rectangle.release(i))},_.prototype.setFocus=function(){this.type==M.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},_.prototype.$onRemoveFromStage=function(){r.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==M.TextFieldType.INPUT&&this.inputUtils._removeStageText(),this.textNode&&(this.textNode.clean(),M.nativeRender&&egret_native.NativeDisplayObject.disposeTextData(this))},_.prototype.$onAddToStage=function(t,e){r.prototype.$onAddToStage.call(this,t,e),this.addEvent(),this.$TextField[24]==M.TextFieldType.INPUT&&this.inputUtils._addStageText()},_.prototype.$invalidateTextField=function(){var t,e,r=this;r.$renderDirty=!0,r.$TextField[18]=!0,r.$TextField[38]=!0,M.nativeRender||((t=r.$parent)&&!t.$cacheDirty&&(t.$cacheDirty=!0,t.$cacheDirtyUp()),(e=r.$maskedObject)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()))},_.prototype.$getRenderBounds=function(){var t=this.$getContentBounds(),e=M.Rectangle.create();e.copyFrom(t),this.$TextField[31]&&(e.width+=2,e.height+=2);var r=2*this.$TextField[27];return 0<r&&(e.width+=2*r,e.height+=2*r),e.x-=2+r,e.y-=2+r,e.width=Math.ceil(e.width)+4,e.height=Math.ceil(e.height)+4,e},_.prototype.$measureContentBounds=function(t){this.$getLinesArr();var e=0,r=0,r=M.nativeRender?(e=egret_native.nrGetTextFieldWidth(this.$nativeDisplayObject.id),egret_native.nrGetTextFieldHeight(this.$nativeDisplayObject.id)):(e=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],isNaN(this.$TextField[4])?M.TextFieldUtils.$getTextHeight(this):this.$TextField[4]);t.setTo(0,0,e,r)},_.prototype.$updateRenderNode=function(){if(this.$TextField[24]==M.TextFieldType.INPUT){if(this.inputUtils._updateProperties(),this.$isTyping)return void this.fillBackground()}else if(0==this.$TextField[3]){var t=this.$graphicsNode;return void(t&&t.clear())}var e=this.drawText();this.fillBackground(e);var r=this.$getRenderBounds(),i=this.textNode;i.x=r.x,i.y=r.y,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),M.Rectangle.release(r)},Object.defineProperty(_.prototype,"textFlow",{get:function(){return this.textArr},set:function(t){this.isFlow=!0;var e="";null==t&&(t=[]);for(var r=0;r<t.length;r++)e+=t[r].text;this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t),M.nativeRender&&this.$nativeDisplayObject.setTextFlow(t))},enumerable:!0,configurable:!0}),_.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",r=0,i=t.length;r<i;r++)switch(t.charAt(r)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},_.prototype.setMiddleStyle=function(t){this.$TextField[18]=!0,this.$TextField[38]=!0,this.textArr=t,this.$invalidateTextField()},Object.defineProperty(_.prototype,"textWidth",{get:function(){return this.$getLinesArr(),M.nativeRender?egret_native.nrGetTextWidth(this.$nativeDisplayObject.id):this.$TextField[5]},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"textHeight",{get:function(){return this.$getLinesArr(),M.nativeRender?egret_native.nrGetTextHeight(this.$nativeDisplayObject.id):M.TextFieldUtils.$getTextHeight(this)},enumerable:!0,configurable:!0}),_.prototype.appendText=function(t){this.appendElement({text:t})},_.prototype.appendElement=function(t){var e=this.$TextField[13]+t.text;if(M.nativeRender)return this.textArr.push(t),this.$TextField[13]=e,this.$TextField[18]=!0,this.$TextField[38]=!0,void this.$nativeDisplayObject.setTextFlow(this.textArr);this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.textArr.push(t),this.setMiddleStyle(this.textArr))},_.prototype.$getLinesArr=function(){var t=this.$TextField;return M.nativeRender&&t[38]?(egret_native.updateNativeRender(),void(t[38]=!1)):this.$getLinesArr2()},_.prototype.$getLinesArr2=function(){var t=this.$TextField;if(!t[18])return this.linesArr;t[18]=!1;var e=this.textArr;this.linesArr.length=0,t[6]=0,t[5]=0;var r=t[3];if(!isNaN(r)&&0==r)return[{width:t[29]=0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var i,n=this.linesArr,o=0,a=0,s=0,l=0,c=0,h=e.length;c<h;c++){var u=e[c];if(u.text){u.style=u.style||{};for(var p=u.text.toString().split(/(?:\r\n|\r|\n)/),d=0,f=p.length;d<f;d++){null==n[l]&&(i={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},n[l]=i,a=s=o=0),s=t[24]==M.TextFieldType.INPUT?t[0]:Math.max(s,u.style.size||t[0]);var g=!0;if(""==p[d])d==f-1&&(g=!1);else{var m=N(p[d],t,u.style);if(isNaN(r))o+=m,a+=p[d].length,i.elements.push({width:m,text:p[d],style:u.style}),d==f-1&&(g=!1);else if(o+m<=r)i.elements.push({width:m,text:p[d],style:u.style}),o+=m,a+=p[d].length,d==f-1&&(g=!1);else{for(var y=0,v=0,_=p[d],b=void 0,T=(b=t[19]?_.split(A):_.match(/./g)).length,C=0;y<T;y++){var S=!1;if(m=1==(w=b[y].length)&&y<T-1?(L=b[y].charCodeAt(0),P=b[y+1].charCodeAt(0),55296<=L&&L<=56319&&56320==(64512&P)?(w=2,S=!0,N(b[y]+b[y+1],t,u.style)):N(b[y],t,u.style)):N(b[y],t,u.style),0!=o&&r<o+m&&o+y!=0)break;if(r<v+m)for(var x=b[y].match(/./g),E=0,$=x.length;E<$;E++){var w,L,P,R=!1;if(m=1==(w=x[E].length)&&E<$-1?(L=x[E].charCodeAt(0),P=x[E+1].charCodeAt(0),55296<=L&&L<=56319&&56320==(64512&P)?(w=2,R=!0,N(x[E]+x[E+1],t,u.style)):N(x[E],t,u.style)):N(x[E],t,u.style),0<E&&r<o+m)break;v+=m,o+=m,a+=C+=w,R&&E++}else v+=m,o+=m,a+=C+=w;S&&y++}if(0<y){i.elements.push({width:v,text:_.substring(0,C),style:u.style});for(var O=_.substring(C),I=void 0,D=O.length,I=0;I<D&&" "==O.charAt(I);I++);p[d]=O.substring(I)}""!=p[d]&&(d--,g=!1)}}g&&(a++,i.hasNextLine=!0),d<p.length-1&&(i.width=o,i.height=s,i.charNum=a,t[5]=Math.max(t[5],o),t[6]+=s,l++)}c==e.length-1&&i&&(i.width=o,i.height=s,i.charNum=a,t[5]=Math.max(t[5],o),t[6]+=s)}else i&&(i.width=o,i.height=s,i.charNum=a,t[5]=Math.max(t[5],o),t[6]+=s)}return t[29]=n.length,n},_.prototype.$setIsTyping=function(t){this.$isTyping=t,this.$invalidateTextField(),M.nativeRender&&this.$nativeDisplayObject.setIsTyping(t)},_.prototype.drawText=function(){var t=this.textNode,e=this.$TextField;t.bold=e[15],t.fontFamily=e[8]||_.default_fontFamily,t.italic=e[16],t.size=e[0],t.stroke=e[27],t.strokeColor=e[25],t.textColor=e[2];var r=this.$getLinesArr();if(0==e[5])return[];var i=isNaN(e[3])?e[5]:e[3],n=M.TextFieldUtils.$getTextHeight(this),o=0,a=M.TextFieldUtils.$getStartLine(this),s=e[4];!isNaN(s)&&n<s&&(o+=M.TextFieldUtils.$getValign(this)*(s-n)),o=Math.round(o);for(var l=M.TextFieldUtils.$getHalign(this),c=0,h=[],u=a,p=e[29];u<p;u++){var d=r[u],f=d.height;if(o+=f/2,u!=a){if(e[24]==M.TextFieldType.INPUT&&!e[30])break;if(!isNaN(s)&&s<o)break}c=Math.round((i-d.width)*l);for(var g=0,m=d.elements.length;g<m;g++){var y=d.elements[g],v=y.style.size||e[0];t.drawText(c,o+(f-v)/2,y.text,y.style),y.style.underline&&h.push(c,o+f/2,y.width,y.style.textColor),c+=y.width}o+=f/2+e[1]}return h},_.prototype.addEvent=function(){this.addEventListener(M.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},_.prototype.removeEvent=function(){this.removeEventListener(M.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},_.prototype.onTapHandler=function(t){var e,r,i;this.$TextField[24]!=M.TextFieldType.INPUT&&(null==(e=M.TextFieldUtils.$getTextElement(this,t.localX,t.localY))||(r=e.style)&&r.href&&(r.href.match(/^event:/)?(i=r.href.match(/^event:/)[0],M.TextEvent.dispatchTextEvent(this,M.TextEvent.LINK,r.href.substring(i.length))):open(r.href,r.target||"_blank")))},_.default_fontFamily="Arial",_.default_size=30,_.default_textColor=16777215,_);function _(){var t=r.call(this)||this;t.$inputEnabled=!1,t.inputUtils=null,t.$graphicsNode=null,t.isFlow=!1,t.textArr=[],t.linesArr=[],t.$isTyping=!1;var e=new M.sys.TextNode;return e.fontFamily=_.default_fontFamily,t.textNode=e,t.$renderNode=e,t.$TextField={0:_.default_size,1:0,2:_.default_textColor,3:NaN,4:NaN,5:0,6:0,7:0,8:_.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:M.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:M.TextFieldInputType.TEXT,38:!1},t}M.TextField=s,__reflect(s.prototype,"egret.TextField")}(egret=(egret=egret||{})||{}),function(t){var e=(r.TEXT="text",r.TEL="tel",r.PASSWORD="password",r);function r(){}t.TextFieldInputType=e,__reflect(e.prototype,"egret.TextFieldInputType")}(egret=egret||{}),function(t){var e=(r.DYNAMIC="dynamic",r.INPUT="input",r);function r(){}t.TextFieldType=e,__reflect(e.prototype,"egret.TextFieldType")}(egret=egret||{}),function(n){var t=(g.$getStartLine=function(t){var e=t.$TextField,r=g.$getTextHeight(t),i=0,n=e[4];return isNaN(n)||(r<n||n<r&&(i=Math.max(e[28]-1,0),i=Math.min(e[29]-1,i)),e[30]||(i=Math.max(e[28]-1,0),0<e[29]&&(i=Math.min(e[29]-1,i)))),i},g.$getHalign=function(t){var e=t.$getLinesArr2(),r=0;return t.$TextField[9]==n.HorizontalAlign.CENTER?r=.5:t.$TextField[9]==n.HorizontalAlign.RIGHT&&(r=1),t.$TextField[24]==n.TextFieldType.INPUT&&!t.$TextField[30]&&1<e.length&&(r=0),r},g.$getTextHeight=function(t){return n.TextFieldType.INPUT!=t.$TextField[24]||t.$TextField[30]?t.$TextField[6]+(t.$TextField[29]-1)*t.$TextField[1]:t.$TextField[0]},g.$getValign=function(t){var e=g.$getTextHeight(t),r=t.$TextField[4];if(!isNaN(r)&&e<r){var i=0;return t.$TextField[10]==n.VerticalAlign.MIDDLE?i=.5:t.$TextField[10]==n.VerticalAlign.BOTTOM&&(i=1),i}return 0},g.$getTextElement=function(t,e,r){var i=g.$getHit(t,e,r),n=t.$getLinesArr2();return i&&n[i.lineIndex]&&n[i.lineIndex].elements[i.textElementIndex]?n[i.lineIndex].elements[i.textElementIndex]:null},g.$getHit=function(t,e,r){var i=t.$getLinesArr2();if(0==t.$TextField[3])return null;var n=0,o=g.$getTextHeight(t),a=0,s=t.$TextField[4];!isNaN(s)&&o<s&&0!=(a=g.$getValign(t)*(s-o))&&(r-=a);for(var l=0,c=g.$getStartLine(t);c<i.length;c++){var h=i[c];if(l+h.height>=r){l<r&&(n=c+1);break}if((l+=h.height)+t.$TextField[1]>r)return null;l+=t.$TextField[1]}if(0==n)return null;var u=i[n-1],p=t.$TextField[3];isNaN(p)&&(p=t.textWidth),e-=g.$getHalign(t)*(p-u.width);for(var d=0,c=0;c<u.elements.length;c++){var f=u.elements[c];if(d+f.width<=e)d+=f.width;else if(d<e)return{lineIndex:n-1,textElementIndex:c}}return null},g.$getScrollNum=function(t){var e,r,i,n=1;return t.$TextField[30]&&(e=t.height,(r=t.size)/2<e-(r+(i=t.lineSpacing))*(n=Math.floor(e/(r+i)))&&n++),n},g);function g(){}n.TextFieldUtils=t,__reflect(t.prototype,"egret.TextFieldUtils")}(egret=egret||{}),function(t){t.sys||(t.sys={})}(egret=egret||{}),function(t){var e=(r.TOP="top",r.BOTTOM="bottom",r.MIDDLE="middle",r.JUSTIFY="justify",r.CONTENT_JUSTIFY="contentJustify",r);function r(){}t.VerticalAlign=e,__reflect(e.prototype,"egret.VerticalAlign")}(egret=egret||{}),function(t){var e=(r.encode=function(t){for(var e=new Uint8Array(t),r=e.length,i="",n=0;n<r;n+=3)i+=chars[e[n]>>2],i+=chars[(3&e[n])<<4|e[n+1]>>4],i+=chars[(15&e[n+1])<<2|e[n+2]>>6],i+=chars[63&e[n+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},r.decode=function(t){var e,r,i,n,o=.75*t.length,a=t.length,s=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);for(var l=new ArrayBuffer(o),c=new Uint8Array(l),h=0;h<a;h+=4)e=lookup[t.charCodeAt(h)],r=lookup[t.charCodeAt(h+1)],i=lookup[t.charCodeAt(h+2)],n=lookup[t.charCodeAt(h+3)],c[s++]=e<<2|r>>4,c[s++]=(15&r)<<4|i>>2,c[s++]=(3&i)<<6|63&n;return l},r);function r(){}t.Base64Util=e,__reflect(e.prototype,"egret.Base64Util")}(egret=egret||{});for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;!function(a){var o=(t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t);function t(){}a.Endian=o,__reflect(o.prototype,"egret.Endian");var e=(Object.defineProperty(r.prototype,"endian",{get:function(){return 0==this.$endian?o.LITTLE_ENDIAN:o.BIG_ENDIAN},set:function(t){this.$endian=t==o.LITTLE_ENDIAN?0:1},enumerable:!0,configurable:!0}),r.prototype.setArrayBuffer=function(t){},Object.defineProperty(r.prototype,"readAvailable",{get:function(){return this.write_position-this._position},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(t){var e,r=t.byteLength,i=new Uint8Array(t),n=this.bufferExtSize;(e=0==n?new Uint8Array(r):new Uint8Array((1+(r/n|0))*n)).set(i),this.write_position=r,this._bytes=e,this.data=new DataView(e.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bytes",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataView",{get:function(){return this.data},set:function(t){this.buffer=t.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this._position},set:function(t){(this._position=t)>this.write_position&&(this.write_position=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t,this.data.byteLength>t&&(this._position=t),this._validateBuffer(t)},enumerable:!0,configurable:!0}),r.prototype._validateBuffer=function(t){var e,r;this.data.byteLength<t&&(r=void 0,(r=0==(e=this.bufferExtSize)?new Uint8Array(t):new Uint8Array((1+(t/e>>0))*e)).set(this._bytes),this._bytes=r,this.data=new DataView(r.buffer))},Object.defineProperty(r.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),r.prototype.clear=function(){var t=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(t),this._bytes=new Uint8Array(t),this._position=0,this.write_position=0},r.prototype.readBoolean=function(){if(this.validate(1))return!!this._bytes[this.position++]},r.prototype.readByte=function(){if(this.validate(1))return this.data.getInt8(this.position++)},r.prototype.readBytes=function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),t){var i=this._position,n=this.write_position-i;if(n<0)a.$error(1025);else{if(0==r)r=n;else if(n<r)return void a.$error(1025);var o=t._position;t._position=0,t.validateBuffer(e+r),t._position=o,t._bytes.set(this._bytes.subarray(i,i+r),e),this.position+=r}}},r.prototype.readDouble=function(){if(this.validate(8)){var t=this.data.getFloat64(this._position,0==this.$endian);return this.position+=8,t}},r.prototype.readFloat=function(){if(this.validate(4)){var t=this.data.getFloat32(this._position,0==this.$endian);return this.position+=4,t}},r.prototype.readInt=function(){if(this.validate(4)){var t=this.data.getInt32(this._position,0==this.$endian);return this.position+=4,t}},r.prototype.readShort=function(){if(this.validate(2)){var t=this.data.getInt16(this._position,0==this.$endian);return this.position+=2,t}},r.prototype.readUnsignedByte=function(){if(this.validate(1))return this._bytes[this.position++]},r.prototype.readUnsignedInt=function(){if(this.validate(4)){var t=this.data.getUint32(this._position,0==this.$endian);return this.position+=4,t}},r.prototype.readUnsignedShort=function(){if(this.validate(2)){var t=this.data.getUint16(this._position,0==this.$endian);return this.position+=2,t}},r.prototype.readUTF=function(){var t=this.readUnsignedShort();return 0<t?this.readUTFBytes(t):""},r.prototype.readUTFBytes=function(t){if(this.validate(t)){var e=this.data,r=new Uint8Array(e.buffer,e.byteOffset+this._position,t);return this.position+=t,this.decodeUTF8(r)}},r.prototype.writeBoolean=function(t){this.validateBuffer(1),this._bytes[this.position++]=+t},r.prototype.writeByte=function(t){this.validateBuffer(1),this._bytes[this.position++]=255&t},r.prototype.writeBytes=function(t,e,r){var i;void 0===e&&(e=0),void 0===r&&(r=0),e<0||r<0||0<(i=0==r?t.length-e:Math.min(t.length-e,r))&&(this.validateBuffer(i),this._bytes.set(t._bytes.subarray(e,e+i),this._position),this.position=this._position+i)},r.prototype.writeDouble=function(t){this.validateBuffer(8),this.data.setFloat64(this._position,t,0==this.$endian),this.position+=8},r.prototype.writeFloat=function(t){this.validateBuffer(4),this.data.setFloat32(this._position,t,0==this.$endian),this.position+=4},r.prototype.writeInt=function(t){this.validateBuffer(4),this.data.setInt32(this._position,t,0==this.$endian),this.position+=4},r.prototype.writeShort=function(t){this.validateBuffer(2),this.data.setInt16(this._position,t,0==this.$endian),this.position+=2},r.prototype.writeUnsignedInt=function(t){this.validateBuffer(4),this.data.setUint32(this._position,t,0==this.$endian),this.position+=4},r.prototype.writeUnsignedShort=function(t){this.validateBuffer(2),this.data.setUint16(this._position,t,0==this.$endian),this.position+=2},r.prototype.writeUTF=function(t){var e=this.encodeUTF8(t),r=e.length;this.validateBuffer(2+r),this.data.setUint16(this._position,r,0==this.$endian),this.position+=2,this._writeUint8Array(e,!1)},r.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},r.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},r.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0);var r=this._position,i=r+t.length;e&&this.validateBuffer(i),this.bytes.set(t,r),this.position=i},r.prototype.validate=function(t){var e=this._bytes.length;if(0<e&&this._position+t<=e)return!0;a.$error(1025)},r.prototype.validateBuffer=function(t){this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this._validateBuffer(t)},r.prototype.encodeUTF8=function(t){for(var e=0,r=this.stringToCodePoints(t),i=[];r.length>e;){var n=r[e++];if(this.inRange(n,55296,57343))this.encoderError(n);else if(this.inRange(n,0,127))i.push(n);else{var o=void 0,a=void 0;for(this.inRange(n,128,2047)?(o=1,a=192):this.inRange(n,2048,65535)?(o=2,a=224):this.inRange(n,65536,1114111)&&(o=3,a=240),i.push(this.div(n,Math.pow(64,o))+a);0<o;){var s=this.div(n,Math.pow(64,o-1));i.push(128+s%64),--o}}}return new Uint8Array(i)},r.prototype.decodeUTF8=function(t){for(var e=0,r="",i=0,n=0,o=0,a=0;t.length>e;){var s,l,c,h=t[e++];null!==(c=h==this.EOF_byte?0!=n?this.decoderError(!1):this.EOF_code_point:0==n?this.inRange(h,0,127)?h:(this.inRange(h,194,223)?(n=1,a=128,i=h-192):this.inRange(h,224,239)?(n=2,a=2048,i=h-224):this.inRange(h,240,244)?(n=3,a=65536,i=h-240):this.decoderError(!1),i*=Math.pow(64,n),null):this.inRange(h,128,191)?(o+=1,i+=(h-128)*Math.pow(64,n-o),o!==n?null:(s=i,l=a,a=o=n=i=0,this.inRange(s,l,1114111)&&!this.inRange(s,55296,57343)?s:this.decoderError(!1,h))):(a=o=n=i=0,e--,this.decoderError(!1,h)))&&c!==this.EOF_code_point&&(c<=65535?0<c&&(r+=String.fromCharCode(c)):(c-=65536,r+=String.fromCharCode(55296+(c>>10&1023)),r+=String.fromCharCode(56320+(1023&c))))}return r},r.prototype.encoderError=function(t){a.$error(1026,t)},r.prototype.decoderError=function(t,e){return t&&a.$error(1027),e||65533},r.prototype.inRange=function(t,e,r){return e<=t&&t<=r},r.prototype.div=function(t,e){return Math.floor(t/e)},r.prototype.stringToCodePoints=function(t){for(var e=[],r=0,i=t.length;r<t.length;){var n,o,a,s=t.charCodeAt(r);this.inRange(s,55296,57343)?this.inRange(s,56320,57343)||r==i-1?e.push(65533):(n=t.charCodeAt(r+1),this.inRange(n,56320,57343)?(o=1023&s,a=1023&n,r+=1,e.push(65536+(o<<10)+a)):e.push(65533)):e.push(s),r+=1}return e},r);function r(t,e){void 0===e&&(e=0),this.bufferExtSize=0,this.EOF_byte=-1,this.EOF_code_point=-1,e<0&&(e=0),this.bufferExtSize=e;var r,i,n=0;t?(r=void 0,t instanceof Uint8Array?n=(r=t).length:(n=t.byteLength,r=new Uint8Array(t)),(i=0==e?new Uint8Array(n):new Uint8Array((1+(n/e|0))*e)).set(r)):i=new Uint8Array(e),this.write_position=n,this._position=0,this._bytes=i,this.data=new DataView(i.buffer),this.endian=o.BIG_ENDIAN}a.ByteArray=e,__reflect(e.prototype,"egret.ByteArray")}(egret=egret||{}),function(u){var e,t=(e=u.DisplayObjectContainer,__extends(r,e),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(9)},Object.defineProperty(r.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),r.prototype.$hitTest=function(t,e){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),i=r.a*t+r.c*e+r.tx,n=r.b*t+r.d*e+r.ty,o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(i,n))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null;for(var a=this.$children,s=!1,l=null,c=a.length-1;0<=c;c--){var h=a[c];if(!h.$maskedObject&&(l=h.$hitTest(t,e))){if(s=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:s?this:l=(l=u.DisplayObject.prototype.$hitTest.call(this,t,e))&&this.$graphics.$hitTest(t,e)},r.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},r.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},r);function r(){var t=e.call(this)||this;return t.$graphics=new u.Graphics,t.$graphics.$setTarget(t),t}u.Sprite=t,__reflect(t.prototype,"egret.Sprite")}(egret=egret||{}),function(c){c.registerClass=function(t,e,r){t||c.$error(1003,"classDefinition"),t.prototype||c.$error(1012,"classDefinition"),void 0===e&&c.$error(1003,"className");var i=t.prototype;Object.defineProperty(i,"__class__",{value:e,enumerable:!1,writable:!0});var n=[e];r&&(n=n.concat(r));var o=i.__types__;if(i.__types__)for(var a=o.length,s=0;s<a;s++){var l=o[s];-1==n.indexOf(l)&&n.push(l)}Object.defineProperty(i,"__types__",{value:n,enumerable:!1,writable:!0})}}(egret=egret||{}),(egret=egret||{}).BitmapFillMode={REPEAT:"repeat",SCALE:"scale",CLIP:"clip"},function(t){var e=(Object.defineProperty(r,"logLevel",{set:function(t){},enumerable:!0,configurable:!0}),r.ALL="all",r.DEBUG="debug",r.INFO="info",r.WARN="warn",r.ERROR="error",r.OFF="off",r);function r(){}t.Logger=e,__reflect(e.prototype,"egret.Logger")}(egret=egret||{}),function(t){var e=(n.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},n.sin=function(t){var e=Math.floor(t),r=e+1,i=n.sinInt(e);return e==t?i:(t-e)*n.sinInt(r)+(r-t)*i},n.sinInt=function(t){return(t%=360)<0&&(t+=360),egret_sin_map[t]},n.cos=function(t){var e=Math.floor(t),r=e+1,i=n.cosInt(e);return e==t?i:(t-e)*n.cosInt(r)+(r-t)*i},n.cosInt=function(t){return(t%=360)<0&&(t+=360),egret_cos_map[t]},n.convertStringToHashCode=function(t){if(0===t.length)return 0;for(var e=0,r=0,i=t.length;r<i;++r)e=(e<<5)-e+t.charCodeAt(r),e|=0;return e},n);function n(){}t.NumberUtils=e,__reflect(e.prototype,"egret.NumberUtils")}(egret=egret||{});for(var egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;NumberUtils_i<360;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);function e(){}function r(){return n.apply(this instanceof e&&t?this:t,i.concat(Array.prototype.slice.call(arguments)))}var i=Array.prototype.slice.call(arguments,1),n=this;return e.prototype=this.prototype,r.prototype=new e,r}),function(r){var i,t=(i=r.EventDispatcher,__extends(e,i),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){t<1&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.stop(),this._currentCount=0},e.prototype.start=function(){this._running||(this.lastCount=this.updateInterval,this.lastTimeStamp=r.getTimer(),r.ticker.$startTick(this.$update,this),this._running=!0)},e.prototype.stop=function(){this._running&&(r.stopTick(this.$update,this),this._running=!1)},e.prototype.$update=function(t){if(t-this.lastTimeStamp>=this._delay)this.lastCount=this.updateInterval;else{if(this.lastCount-=1e3,0<this.lastCount)return!1;this.lastCount+=this.updateInterval}this.lastTimeStamp=t,this._currentCount++;var e=0<this.repeatCount&&this._currentCount>=this.repeatCount;return(0==this.repeatCount||this._currentCount<=this.repeatCount)&&r.TimerEvent.dispatchTimerEvent(this,r.TimerEvent.TIMER),e&&(this.stop(),r.TimerEvent.dispatchTimerEvent(this,r.TimerEvent.TIMER_COMPLETE)),!1},e);function e(t,e){void 0===e&&(e=0);var r=i.call(this)||this;return r._delay=0,r._currentCount=0,r._running=!1,r.updateInterval=1e3,r.lastCount=1e3,r.lastTimeStamp=0,r.delay=t,r.repeatCount=0|+e,r}r.Timer=t,__reflect(t.prototype,"egret.Timer")}(egret=egret||{}),function(n){n.$callLaterFunctionList=[],n.$callLaterThisList=[],n.$callLaterArgsList=[],n.callLater=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];n.$callLaterFunctionList.push(t),n.$callLaterThisList.push(e),n.$callLaterArgsList.push(r)},n.$callAsyncFunctionList=[],n.$callAsyncThisList=[],n.$callAsyncArgsList=[],n.$callAsync=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];n.$callAsyncFunctionList.push(t),n.$callAsyncThisList.push(e),n.$callAsyncArgsList.push(r)}}(egret=(egret=egret||{})||{}),function(t){t.superSetter=function(t,e,r){for(var i=[],n=3;n<arguments.length;n++)i[n-3]=arguments[n];var o,a=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}});var s=(o=t.__sets__)[r];if(s)return s.apply(e,i);var l=Object.getPrototypeOf(a);if(null!=l){for(;!l.hasOwnProperty(r);)if(null==(l=Object.getPrototypeOf(l)))return;s=Object.getOwnPropertyDescriptor(l,r).set,(o[r]=s).apply(e,i)}},t.superGetter=function(t,e,r){var i,n=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}});var o=(i=t.__gets__)[r];if(o)return o.call(e);var a=Object.getPrototypeOf(n);if(null!=a){for(;!a.hasOwnProperty(r);)if(null==(a=Object.getPrototypeOf(a)))return;return o=Object.getOwnPropertyDescriptor(a,r).get,(i[r]=o).call(e)}}}(egret=egret||{}),function(t){var o={};t.getDefinitionByName=function(t){if(!t)return null;var e=o[t];if(e)return e;var r=t.split("."),i=r.length;e=global;for(var n=0;n<i;n++){if(!(e=e[r[n]]))return null}return o[t]=e},t.cleanCache=function(){o={}}}(egret=egret||{}),((egret=egret||{})||(egret={})).getQualifiedClassName=function(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var r=t.prototype?t.prototype:Object.getPrototypeOf(t);if(r.hasOwnProperty("__class__"))return r.__class__;var i=r.constructor.toString().trim(),n=i.indexOf("("),o=i.substring(9,n);return Object.defineProperty(r,"__class__",{value:o,enumerable:!1,writable:!0}),o},function(n){n.getQualifiedSuperclassName=function(t){if(!t||"object"!=typeof t&&!t.prototype)return null;var e=t.prototype?t.prototype:Object.getPrototypeOf(t),r=Object.getPrototypeOf(e);if(!r)return null;var i=n.getQualifiedClassName(r.constructor);return i||null}}(egret=egret||{}),function(t){t.getTimer=function(){return Date.now()-t.sys.$START_TIME}}(egret=egret||{}),function(e){e.hasDefinition=function(t){return!!e.getDefinitionByName(t)}}(egret=egret||{}),(egret||(egret={})).is=function(t,e){if(!t||"object"!=typeof t)return!1;var r=Object.getPrototypeOf(t),i=r?r.__types__:null;return!!i&&-1!==i.indexOf(e)},function(r){r.startTick=function(t,e){t||r.$error(1003,"callBack"),r.ticker.$startTick(t,e)}}(egret=egret||{}),function(r){r.stopTick=function(t,e){t||r.$error(1003,"callBack"),r.ticker.$stopTick(t,e)}}(egret=egret||{}),(egret||(egret={})).toColorString=function(t){t<0&&(t=0),16777215<t&&(t=16777215);for(var e=t.toString(16).toUpperCase();6<e.length;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e};__reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r};!function(n){var t,e,r;function i(t){var i=e.call(this)||this;return i.onUpdate=function(t){var e=new n.GeolocationEvent(n.Event.CHANGE),r=t.coords;e.altitude=r.altitude,e.heading=r.heading,e.accuracy=r.accuracy,e.latitude=r.latitude,e.longitude=r.longitude,e.speed=r.speed,e.altitudeAccuracy=r.altitudeAccuracy,i.dispatchEvent(e)},i.onError=function(t){var e=n.GeolocationEvent.UNAVAILABLE;t.code==t.PERMISSION_DENIED&&(e=n.GeolocationEvent.PERMISSION_DENIED);var r=new n.GeolocationEvent(n.IOErrorEvent.IO_ERROR);r.errorType=e,r.errorMessage=t.message,i.dispatchEvent(r)},i.geolocation=navigator.geolocation,i}t=n.web||(n.web={}),e=n.EventDispatcher,__extends(i,e),i.prototype.start=function(){var t=this.geolocation;t?this.watchId=t.watchPosition(this.onUpdate,this.onError):this.onError({code:2,message:n.sys.tr(3004),PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2})},i.prototype.stop=function(){this.geolocation.clearWatch(this.watchId)},r=i,t.WebGeolocation=r,__reflect(r.prototype,"egret.web.WebGeolocation",["egret.Geolocation"])}(egret=egret||{}),function(a){var t,e,r;function i(){var o=null!==e&&e.apply(this,arguments)||this;return o.onChange=function(t){var e=new a.MotionEvent(a.Event.CHANGE),r={x:t.acceleration.x,y:t.acceleration.y,z:t.acceleration.z},i={x:t.accelerationIncludingGravity.x,y:t.accelerationIncludingGravity.y,z:t.accelerationIncludingGravity.z},n={alpha:t.rotationRate.alpha,beta:t.rotationRate.beta,gamma:t.rotationRate.gamma};e.acceleration=r,e.accelerationIncludingGravity=i,e.rotationRate=n,o.dispatchEvent(e)},o}t=a.web||(a.web={}),e=a.EventDispatcher,__extends(i,e),i.prototype.start=function(){window.addEventListener("devicemotion",this.onChange)},i.prototype.stop=function(){window.removeEventListener("devicemotion",this.onChange)},r=i,t.WebMotion=r,__reflect(r.prototype,"egret.web.WebMotion",["egret.Motion"])}(egret=egret||{}),function(t){function e(t){if(window.location){var e=location.search;if(""==e)return"";for(var r=(e=e.slice(1)).split("&"),i=r.length,n=0;n<i;n++){var o=r[n].split("=");if(o[0]==t)return o[1]}}return""}(t.web||(t.web={})).getOption=e,t.getOption=e}(egret=egret||{}),function(r){var i,n,t;function e(t){var e=n.call(this)||this;return e.$startTime=0,e.audio=null,e.isStopped=!1,e.canPlay=function(){e.audio.removeEventListener("canplay",e.canPlay);try{e.audio.currentTime=e.$startTime}catch(t){}finally{e.audio.play()}},e.onPlayEnd=function(){if(1==e.$loops)return e.stop(),void e.dispatchEventWith(r.Event.SOUND_COMPLETE);0<e.$loops&&e.$loops--,e.$play()},e._volume=1,t.addEventListener("ended",e.onPlayEnd),e.audio=t,e}i=r.web||(r.web={}),n=r.EventDispatcher,__extends(e,n),e.prototype.$play=function(){if(this.isStopped)r.$error(1036);else{try{this.audio.volume=this._volume,this.audio.currentTime=this.$startTime}catch(t){return void this.audio.addEventListener("canplay",this.canPlay)}this.audio.play()}},e.prototype.stop=function(){var t,e;this.audio&&(this.isStopped||r.sys.$popSoundChannel(this),this.isStopped=!0,(t=this.audio).removeEventListener("ended",this.onPlayEnd),t.removeEventListener("canplay",this.canPlay),t.volume=0,this._volume=0,this.audio=null,e=this.$url,window.setTimeout(function(){t.pause(),i.HtmlSound.$recycle(e,t)},200))},Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this.isStopped?r.$error(1036):(this._volume=t,this.audio&&(this.audio.volume=t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.audio?this.audio.currentTime:0},enumerable:!0,configurable:!0}),t=e,i.HtmlSoundChannel=t,__reflect(t.prototype,"egret.web.HtmlSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(egret=egret||{}),function(a){!function(i){var o=(r.decodeAudios=function(){var e;r.decodeArr.length<=0||r.isDecoding||(r.isDecoding=!0,e=r.decodeArr.shift(),r.ctx.decodeAudioData(e.buffer,function(t){e.self.audioBuffer=t,e.success&&e.success(),r.isDecoding=!1,r.decodeAudios()},function(){a.log("sound decode error"),e.fail&&e.fail(),r.isDecoding=!1,r.decodeAudios()}))},r.decodeArr=[],r.isDecoding=!1,r);function r(){}i.WebAudioDecode=o,__reflect(o.prototype,"egret.web.WebAudioDecode");var e,t=(e=a.EventDispatcher,__extends(n,e),Object.defineProperty(n.prototype,"length",{get:function(){if(this.audioBuffer)return this.audioBuffer.duration;throw new Error("sound not loaded!")},enumerable:!0,configurable:!0}),n.prototype.load=function(t){var e=this;(this.url=t)||a.$error(3002);var r=new XMLHttpRequest;function i(){e.loaded=!0,e.dispatchEventWith(a.Event.COMPLETE)}function n(){e.dispatchEventWith(a.IOErrorEvent.IO_ERROR)}r.open("GET",t,!0),r.responseType="arraybuffer",r.addEventListener("load",function(){400<=r.status?e.dispatchEventWith(a.IOErrorEvent.IO_ERROR):(o.decodeArr.push({buffer:r.response,success:i,fail:n,self:e,url:e.url}),o.decodeAudios())}),r.addEventListener("error",function(){e.dispatchEventWith(a.IOErrorEvent.IO_ERROR)}),r.send()},n.prototype.play=function(t,e){t=+t||0,e=+e||0,0==this.loaded&&a.$error(1049);var r=new i.WebAudioSoundChannel;return r.$url=this.url,r.$loops=e,r.$audioBuffer=this.audioBuffer,r.$startTime=t,r.$play(),a.sys.$pushSoundChannel(r),r},n.prototype.close=function(){},n.MUSIC="music",n.EFFECT="effect",n);function n(){var t=e.call(this)||this;return t.loaded=!1,t}i.WebAudioSound=t,__reflect(t.prototype,"egret.web.WebAudioSound",["egret.Sound"])}(a.web||(a.web={}))}(egret=egret||{}),function(i){var e,r,t;function n(){var t=r.call(this)||this;return t.$startTime=0,t.bufferSource=null,t.context=e.WebAudioDecode.ctx,t.isStopped=!1,t._currentTime=0,t._volume=1,t.onPlayEnd=function(){if(1==t.$loops)return t.stop(),void t.dispatchEventWith(i.Event.SOUND_COMPLETE);0<t.$loops&&t.$loops--,t.$play()},t._startTime=0,t.context.createGain?t.gain=t.context.createGain():t.gain=t.context.createGainNode(),t}e=i.web||(i.web={}),r=i.EventDispatcher,__extends(n,r),n.prototype.$play=function(){var t,e,r;this.isStopped?i.$error(1036):(this.bufferSource&&(this.bufferSource.onended=null,this.bufferSource=null),t=this.context,e=this.gain,r=t.createBufferSource(),(this.bufferSource=r).buffer=this.$audioBuffer,r.connect(e),e.connect(t.destination),r.onended=this.onPlayEnd,this._startTime=Date.now(),this.gain.gain.value=this._volume,r.start(0,this.$startTime),this._currentTime=0)},n.prototype.stop=function(){var t;this.bufferSource&&((t=this.bufferSource).stop?t.stop(0):t.noteOff(0),t.onended=null,t.disconnect(),this.bufferSource=null,this.$audioBuffer=null),this.isStopped||i.sys.$popSoundChannel(this),this.isStopped=!0},Object.defineProperty(n.prototype,"volume",{get:function(){return this._volume},set:function(t){this.isStopped?i.$error(1036):(this._volume=t,this.gain.gain.value=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this.bufferSource?(Date.now()-this._startTime)/1e3+this.$startTime:0},enumerable:!0,configurable:!0}),t=n,e.WebAudioSoundChannel=t,__reflect(t.prototype,"egret.web.WebAudioSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(egret=egret||{}),function(o){var t,i,e;function r(t,e){void 0===e&&(e=!0);var r=i.call(this)||this;return r.loaded=!1,r.closed=!1,r.heightSet=NaN,r.widthSet=NaN,r.waiting=!1,r.userPause=!1,r.userPlay=!1,r.isPlayed=!1,r.screenChanged=function(t){var e=document.fullscreenEnabled||document.webkitIsFullScreen;e||(r.checkFullScreen(!1),o.Capabilities.isMobile||(r._fullscreen=e))},r._fullscreen=!0,r.onVideoLoaded=function(){r.video.removeEventListener("canplay",r.onVideoLoaded);var t=r.video;r.loaded=!0,r.posterData&&(r.posterData.width=r.getPlayWidth(),r.posterData.height=r.getPlayHeight()),t.width=t.videoWidth,t.height=t.videoHeight,window.setTimeout(function(){r.dispatchEventWith(o.Event.COMPLETE)},200)},r.$renderNode=new o.sys.BitmapNode,r.src=t,r.once(o.Event.ADDED_TO_STAGE,r.loadPoster,r),t&&r.load(),r}t=o.web||(o.web={}),i=o.DisplayObject,__extends(r,i),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(1)},r.prototype.load=function(t,e){var r,i,n=this;void 0===e&&(e=!0),t=t||this.src,(this.src=t)||o.$error(3002),this.video&&this.video.src==t||(!this.video||o.Capabilities.isMobile?(r=document.createElement("video"),(this.video=r).controls=null):r=this.video,r.src=t,r.setAttribute("autoplay","autoplay"),r.setAttribute("webkit-playsinline","true"),r.addEventListener("canplay",this.onVideoLoaded),r.addEventListener("error",function(){return n.onVideoError()}),r.addEventListener("ended",function(){return n.onVideoEnded()}),i=!1,r.addEventListener("canplay",function(){n.waiting=!1,i?n.userPause?n.pause():n.userPlay&&n.play():(i=!0,r.pause())}),r.addEventListener("waiting",function(){n.waiting=!0}),r.load(),this.videoPlay(),r.style.position="absolute",r.style.top="0px",r.style.zIndex="-88888",r.style.left="0px",r.height=1,r.width=1)},r.prototype.play=function(e,r){var i=this;if(void 0===r&&(r=!1),0==this.loaded)return this.load(this.src),void this.once(o.Event.COMPLETE,function(t){return i.play(e,r)},this);this.isPlayed=!0;var t=this.video;null!=e&&(t.currentTime=+e||0),t.loop=!!r,o.Capabilities.isMobile?t.style.zIndex="-88888":t.style.zIndex="9999",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.height=t.videoHeight,t.width=t.videoWidth,"Windows PC"!=o.Capabilities.os&&"Mac OS"!=o.Capabilities.os&&window.setTimeout(function(){t.width=0},1e3),this.checkFullScreen(this._fullscreen)},r.prototype.videoPlay=function(){this.userPause=!1,this.waiting?this.userPlay=!0:(this.userPlay=!1,this.video.play())},r.prototype.checkFullScreen=function(t){var e=this.video;if(t)null==e.parentElement&&(e.removeAttribute("webkit-playsinline"),document.body.appendChild(e)),o.stopTick(this.markDirty,this),this.goFullscreen();else if(null!=e.parentElement&&e.parentElement.removeChild(e),e.setAttribute("webkit-playsinline","true"),this.setFullScreenMonitor(!1),o.startTick(this.markDirty,this),o.Capabilities.isMobile)return this.video.currentTime=0,void this.onVideoEnded();this.videoPlay()},r.prototype.goFullscreen=function(){var t=this.video,e=o.web.getPrefixStyleName("requestFullscreen",t);return(t[e]||t[e=o.web.getPrefixStyleName("requestFullScreen",t)])&&(t.removeAttribute("webkit-playsinline"),t[e](),this.setFullScreenMonitor(!0)),!0},r.prototype.setFullScreenMonitor=function(t){var e=this.video;t?(e.addEventListener("mozfullscreenchange",this.screenChanged),e.addEventListener("webkitfullscreenchange",this.screenChanged),e.addEventListener("mozfullscreenerror",this.screenError),e.addEventListener("webkitfullscreenerror",this.screenError)):(e.removeEventListener("mozfullscreenchange",this.screenChanged),e.removeEventListener("webkitfullscreenchange",this.screenChanged),e.removeEventListener("mozfullscreenerror",this.screenError),e.removeEventListener("webkitfullscreenerror",this.screenError))},r.prototype.screenError=function(){o.$error(3014)},r.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oCancelFullScreen?document.oCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},r.prototype.onVideoEnded=function(){this.pause(),this.isPlayed=!1,this.dispatchEventWith(o.Event.ENDED)},r.prototype.onVideoError=function(){this.dispatchEventWith(o.IOErrorEvent.IO_ERROR)},r.prototype.close=function(){var t=this;this.closed=!0,this.video.removeEventListener("canplay",this.onVideoLoaded),this.video.removeEventListener("error",function(){return t.onVideoError()}),this.video.removeEventListener("ended",function(){return t.onVideoEnded()}),this.pause(),0==this.loaded&&this.video&&(this.video.src=""),this.video&&this.video.parentElement&&(this.video.parentElement.removeChild(this.video),this.video=null),this.loaded=!1},r.prototype.pause=function(){this.userPlay=!1,this.waiting?this.userPause=!0:(this.userPause=!1,this.video.pause(),o.stopTick(this.markDirty,this))},Object.defineProperty(r.prototype,"volume",{get:function(){return this.video?this.video.volume:1},set:function(t){this.video&&(this.video.volume=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.video?this.video.currentTime:0},set:function(t){this.video&&(this.video.currentTime=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fullscreen",{get:function(){return this._fullscreen},set:function(t){o.Capabilities.isMobile||(this._fullscreen=!!t,this.video&&0==this.video.paused&&this.checkFullScreen(this._fullscreen))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bitmapData",{get:function(){return this.video&&this.loaded?(this._bitmapData||(this.video.width=this.video.videoWidth,this.video.height=this.video.videoHeight,this._bitmapData=new o.BitmapData(this.video),this._bitmapData.$deleteSource=!1),this._bitmapData):null},enumerable:!0,configurable:!0}),r.prototype.loadPoster=function(){var r,i=this,t=this.poster;t&&((r=new o.ImageLoader).once(o.Event.COMPLETE,function(t){var e;r.data,i.posterData=r.data,i.$renderDirty=!0,i.posterData.width=i.getPlayWidth(),i.posterData.height=i.getPlayHeight(),o.nativeRender&&((e=new o.Texture)._setBitmapData(i.posterData),i.$nativeDisplayObject.setTexture(e))},this),r.load(t))},r.prototype.$measureContentBounds=function(t){var e=this.bitmapData,r=this.posterData;e||r?t.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):t.setEmpty()},r.prototype.getPlayWidth=function(){return isNaN(this.widthSet)?this.bitmapData?this.bitmapData.width:this.posterData?this.posterData.width:NaN:this.widthSet},r.prototype.getPlayHeight=function(){return isNaN(this.heightSet)?this.bitmapData?this.bitmapData.height:this.posterData?this.posterData.height:NaN:this.heightSet},r.prototype.$updateRenderNode=function(){var t=this.$renderNode,e=this.bitmapData,r=this.posterData,i=this.getPlayWidth(),n=this.getPlayHeight();this.isPlayed&&!o.Capabilities.isMobile||!r?this.isPlayed&&e&&(t.image=e,t.imageWidth=e.width,t.imageHeight=e.height,o.WebGLUtils.deleteWebGLTexture(e.webGLTexture),e.webGLTexture=null,t.drawImage(0,0,e.width,e.height,0,0,i,n)):(t.image=r,t.imageWidth=i,t.imageHeight=n,t.drawImage(0,0,r.width,r.height,0,0,i,n))},r.prototype.markDirty=function(){return this.$renderDirty=!0},r.prototype.$setHeight=function(t){var e;this.heightSet=t,this.paused&&((e=this).$renderDirty=!0,window.setTimeout(function(){e.$renderDirty=!1},200)),i.prototype.$setHeight.call(this,t)},r.prototype.$setWidth=function(t){var e;this.widthSet=t,this.paused&&((e=this).$renderDirty=!0,window.setTimeout(function(){e.$renderDirty=!1},200)),i.prototype.$setWidth.call(this,t)},Object.defineProperty(r.prototype,"paused",{get:function(){return!this.video||this.video.paused},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){if(this.video)return this.video.duration;throw new Error("Video not loaded!")},enumerable:!0,configurable:!0}),e=r,t.WebVideo=e,__reflect(e.prototype,"egret.web.WebVideo",["egret.Video","egret.DisplayObject"]),o.Video=e}(egret=egret||{}),function(n){var t,e,r;function i(){var t=e.call(this)||this;return t.timeout=0,t._url="",t._method="",t}t=n.web||(n.web={}),e=n.EventDispatcher,__extends(i,e),Object.defineProperty(i.prototype,"response",{get:function(){return this._xhr?null!=this._xhr.response?this._xhr.response:"text"==this._responseType?this._xhr.responseText:"arraybuffer"==this._responseType&&/msie 9.0/i.test(navigator.userAgent)?window.convertResponseBodyToText(this._xhr.responseBody):"document"==this._responseType?this._xhr.responseXML:null:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"responseType",{get:function(){return this._responseType},set:function(t){this._responseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(t){this._withCredentials=t},enumerable:!0,configurable:!0}),i.prototype.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},i.prototype.open=function(t,e){void 0===e&&(e="GET"),this._url=t,this._method=e,this._xhr&&(this._xhr.abort(),this._xhr=null);var r=this.getXHR();window.XMLHttpRequest?(r.addEventListener("load",this.onload.bind(this)),r.addEventListener("error",this.onerror.bind(this))):r.onreadystatechange=this.onReadyStateChange.bind(this),r.onprogress=this.updateProgress.bind(this),r.ontimeout=this.onTimeout.bind(this),r.open(this._method,this._url,!0),this._xhr=r},i.prototype.send=function(t){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this.headerObj)for(var e in this.headerObj)this._xhr.setRequestHeader(e,this.headerObj[e]);this._xhr.timeout=this.timeout,this._xhr.send(t)},i.prototype.abort=function(){this._xhr&&this._xhr.abort()},i.prototype.getAllResponseHeaders=function(){if(!this._xhr)return null;var t=this._xhr.getAllResponseHeaders();return t||""},i.prototype.setRequestHeader=function(t,e){this.headerObj||(this.headerObj={}),this.headerObj[t]=e},i.prototype.getResponseHeader=function(t){if(!this._xhr)return null;var e=this._xhr.getResponseHeader(t);return e||""},i.prototype.onTimeout=function(){n.$warn(1052,this._url),this.dispatchEventWith(n.IOErrorEvent.IO_ERROR)},i.prototype.onReadyStateChange=function(){var t,e,r,i=this._xhr;4==i.readyState&&(t=400<=i.status||0==i.status,e=this._url,r=this,window.setTimeout(function(){t?(r.hasEventListener(n.IOErrorEvent.IO_ERROR)||n.$error(1011,e),r.dispatchEventWith(n.IOErrorEvent.IO_ERROR)):r.dispatchEventWith(n.Event.COMPLETE)},0))},i.prototype.updateProgress=function(t){t.lengthComputable&&n.ProgressEvent.dispatchProgressEvent(this,n.ProgressEvent.PROGRESS,t.loaded,t.total)},i.prototype.onload=function(){var t=this,e=this._xhr,r=this._url,i=400<=e.status;window.setTimeout(function(){i?(t.hasEventListener(n.IOErrorEvent.IO_ERROR)||n.$error(1011,r),t.dispatchEventWith(n.IOErrorEvent.IO_ERROR)):t.dispatchEventWith(n.Event.COMPLETE)},0)},i.prototype.onerror=function(){var t=this._url,e=this;window.setTimeout(function(){e.hasEventListener(n.IOErrorEvent.IO_ERROR)||n.$error(1011,t),e.dispatchEventWith(n.IOErrorEvent.IO_ERROR)},0)},r=i,t.WebHttpRequest=r,__reflect(r.prototype,"egret.web.WebHttpRequest",["egret.HttpRequest"]),n.HttpRequest=r}(egret=egret||{}),function(i){var r,e,n,t;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t._crossOrigin=null,t._hasCrossOriginSet=!1,t.currentImage=null,t.request=null,t}r=i.web||(i.web={}),n=window.URL||window.webkitURL,e=i.EventDispatcher,__extends(o,e),Object.defineProperty(o.prototype,"crossOrigin",{get:function(){return this._crossOrigin},set:function(t){this._hasCrossOriginSet=!0,this._crossOrigin=t},enumerable:!0,configurable:!0}),o.prototype.load=function(t){var e;r.Html5Capatibility._canUseBlob&&0!=t.indexOf("wxLocalResource:")&&0!=t.indexOf("data:")&&0!=t.indexOf("http:")&&0!=t.indexOf("https:")?((e=this.request)||((e=this.request=new i.web.WebHttpRequest).addEventListener(i.Event.COMPLETE,this.onBlobLoaded,this),e.addEventListener(i.IOErrorEvent.IO_ERROR,this.onBlobError,this),e.responseType="blob"),this.currentURL=t,e.open(t),e.send()):this.loadImage(t)},o.prototype.onBlobLoaded=function(t){var e=this.request.response;this.request=void 0,this.loadImage(n.createObjectURL(e))},o.prototype.onBlobError=function(t){this.dispatchIOError(this.currentURL),this.request=void 0},o.prototype.loadImage=function(t){var e=new Image;this.data=null,this.currentImage=e,this._hasCrossOriginSet?this._crossOrigin&&(e.crossOrigin=this._crossOrigin):o.crossOrigin&&(e.crossOrigin=o.crossOrigin),e.onload=this.onImageComplete.bind(this),e.onerror=this.onLoadError.bind(this),e.src=t},o.prototype.onImageComplete=function(t){var e,r=this.getImage(t);r&&(this.data=new i.BitmapData(r),e=this,window.setTimeout(function(){e.dispatchEventWith(i.Event.COMPLETE)},0))},o.prototype.onLoadError=function(t){var e=this.getImage(t);e&&this.dispatchIOError(e.src)},o.prototype.dispatchIOError=function(t){var e=this;window.setTimeout(function(){e.hasEventListener(i.IOErrorEvent.IO_ERROR)||i.$error(1011,t),e.dispatchEventWith(i.IOErrorEvent.IO_ERROR)},0)},o.prototype.getImage=function(t){var e=t.target;if(0==e.src.indexOf("blob:"))try{n.revokeObjectURL(e.src)}catch(t){i.$warn(1037)}return e.onerror=null,e.onload=null,this.currentImage!==e?null:(this.currentImage=null,e)},o.crossOrigin=null,t=o,r.WebImageLoader=t,__reflect(t.prototype,"egret.web.WebImageLoader",["egret.ImageLoader"]),i.ImageLoader=t}(egret=egret||{}),function(h){var t,e,r;function i(){var t=e.call(this)||this;return t._isNeedShow=!1,t.inputElement=null,t.inputDiv=null,t._gscaleX=0,t._gscaleY=0,t.textValue="",t.colorValue=16777215,t._styleInfoes={},t}t=h.web||(h.web={}),e=h.EventDispatcher,__extends(i,e),i.prototype.$setTextField=function(t){return this.$textfield=t,!0},i.prototype.$addToStage=function(){this.htmlInput=h.web.$getTextAdapter(this.$textfield)},i.prototype._initElement=function(){var t=this.$textfield.localToGlobal(0,0),e=t.x,r=t.y,i=this.htmlInput.$scaleX,n=this.htmlInput.$scaleY;this.inputDiv.style.left=e*i+"px",this.inputDiv.style.top=r*n+"px",this.$textfield.multiline&&this.$textfield.height>this.$textfield.size?(this.inputDiv.style.top=r*n+"px",this.inputElement.style.top=-this.$textfield.lineSpacing/2*n+"px"):(this.inputDiv.style.top=r*n+"px",this.inputElement.style.top="0px");for(var o=this.$textfield,a=1,s=1,l=0;o.parent;)a*=o.scaleX,s*=o.scaleY,l+=o.rotation,o=o.parent;var c=h.web.getPrefixStyleName("transform");this.inputDiv.style[c]="rotate("+l+"deg)",this._gscaleX=i*a,this._gscaleY=n*s},i.prototype.$show=function(){this.htmlInput.isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=this.htmlInput.getInputElement(this),this.$textfield.multiline?this.inputElement.type="text":this.inputElement.type=this.$textfield.inputType,this.inputDiv=this.htmlInput._inputDIV),this.htmlInput._needShow=!0,this._isNeedShow=!0,this._initElement()},i.prototype.onBlurHandler=function(){this.htmlInput.clearInputElement(),window.scrollTo(0,0)},i.prototype.onFocusHandler=function(){var t=this;window.setTimeout(function(){t.inputElement&&t.inputElement.scrollIntoView()},200)},i.prototype.executeShow=function(){this.inputElement.value=this.$getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler.bind(this)),null==this.inputElement.onfocus&&(this.inputElement.onfocus=this.onFocusHandler.bind(this)),this.$resetStageText(),0<this.$textfield.maxChars?this.inputElement.setAttribute("maxlength",this.$textfield.maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},i.prototype.$hide=function(){this.htmlInput&&this.htmlInput.disconnectStageText(this)},i.prototype.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},i.prototype.$setText=function(t){return this.textValue=t,this.resetText(),!0},i.prototype.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},i.prototype.$setColor=function(t){return this.colorValue=t,this.resetColor(),!0},i.prototype.resetColor=function(){this.inputElement&&this.setElementStyle("color",h.toColorString(this.colorValue))},i.prototype.$onBlur=function(){},i.prototype._onInput=function(){var t=this;window.setTimeout(function(){t.inputElement&&t.inputElement.selectionStart==t.inputElement.selectionEnd&&(t.textValue=t.inputElement.value,h.Event.dispatchEvent(t,"updateText",!1))},0)},i.prototype.setAreaHeight=function(){var t,e,r,i,n=this.$textfield;n.multiline&&(t=h.TextFieldUtils.$getTextHeight(n),n.height<=n.size?(this.setElementStyle("height",n.size*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",n.size*this._gscaleY+"px")):(n.height<t?(this.setElementStyle("height",n.height*this._gscaleY+"px"),this.setElementStyle("padding","0px")):(this.setElementStyle("height",(t+n.lineSpacing)*this._gscaleY+"px"),i=(e=(n.height-t)*this._gscaleY)-(r=e*h.TextFieldUtils.$getValign(n)),this.setElementStyle("padding",r+"px 0px "+i+"px 0px")),this.setElementStyle("lineHeight",(n.size+n.lineSpacing)*this._gscaleY+"px")))},i.prototype._onClickHandler=function(t){this._isNeedShow&&(t.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new h.Event("focus")))},i.prototype._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new h.Event("blur"))},i.prototype.setElementStyle=function(t,e){this.inputElement&&this._styleInfoes[t]!=e&&(this.inputElement.style[t]=e)},i.prototype.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnectStageText(this)},i.prototype.$resetStageText=function(){var t,e,r,i,n;this.inputElement&&(t=this.$textfield,this.setElementStyle("fontFamily",t.fontFamily),this.setElementStyle("fontStyle",t.italic?"italic":"normal"),this.setElementStyle("fontWeight",t.bold?"bold":"normal"),this.setElementStyle("textAlign",t.textAlign),this.setElementStyle("fontSize",t.size*this._gscaleY+"px"),this.setElementStyle("color",h.toColorString(t.textColor)),n=void 0,n=t.stage?(n=t.localToGlobal(0,0).x,Math.min(t.width,t.stage.stageWidth-n)):t.width,this.setElementStyle("width",n*this._gscaleX+"px"),this.setElementStyle("verticalAlign",t.verticalAlign),t.multiline?this.setAreaHeight():(this.setElementStyle("lineHeight",t.size*this._gscaleY+"px"),t.height<t.size?(this.setElementStyle("height",t.size*this._gscaleY+"px"),i=t.size/2*this._gscaleY,this.setElementStyle("padding","0px 0px "+i+"px 0px")):(this.setElementStyle("height",t.size*this._gscaleY+"px"),(i=(e=(t.height-t.size)*this._gscaleY)-(r=e*h.TextFieldUtils.$getValign(t)))<t.size/2*this._gscaleY&&(i=t.size/2*this._gscaleY),this.setElementStyle("padding",r+"px 0px "+i+"px 0px"))),this.inputDiv.style.clip="rect(0px "+t.width*this._gscaleX+"px "+t.height*this._gscaleY+"px 0px)",this.inputDiv.style.height=t.height*this._gscaleY+"px",this.inputDiv.style.width=n*this._gscaleX+"px")},r=i,t.HTML5StageText=r,__reflect(r.prototype,"egret.web.HTML5StageText",["egret.StageText"]),h.StageText=r}(egret=egret||{}),function(n){var t,e;function r(){this._needShow=!1,this.$scaleX=1,this.$scaleY=1}t=n.web||(n.web={}),r.prototype.isInputOn=function(){return null!=this._stageText},r.prototype.isCurrentStageText=function(t){return this._stageText==t},r.prototype.initValue=function(t){t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.border="none",t.style.padding="0"},r.prototype.$updateSize=function(){var t;this.canvas&&(this.$scaleX=n.sys.DisplayList.$canvasScaleX,this.$scaleY=n.sys.DisplayList.$canvasScaleY,this.StageDelegateDiv.style.left=this.canvas.style.left,this.StageDelegateDiv.style.top=this.canvas.style.top,t=n.web.getPrefixStyleName("transform"),this.StageDelegateDiv.style[t]=this.canvas.style[t],this.StageDelegateDiv.style[n.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px")},r.prototype._initStageDelegateDiv=function(t,e){this.canvas=e;var r,i=this;r||(r=document.createElement("div"),(this.StageDelegateDiv=r).id="StageDelegateDiv",t.appendChild(r),i.initValue(r),i._inputDIV=document.createElement("div"),i.initValue(i._inputDIV),i._inputDIV.style.width="0px",i._inputDIV.style.height="0px",i._inputDIV.style.left="0px",i._inputDIV.style.top="-100px",i._inputDIV.style[n.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",r.appendChild(i._inputDIV),this.canvas.addEventListener("click",function(t){i._needShow?(i._needShow=!1,i._stageText._onClickHandler(t),i.show()):i._inputElement&&(i.clearInputElement(),i._inputElement.blur(),i._inputElement=null)}),i.initInputElement(!0),i.initInputElement(!1))},r.prototype.initInputElement=function(t){var e,r=this;t?((e=document.createElement("textarea")).style.resize="none",(r._multiElement=e).id="egretTextarea"):(e=document.createElement("input"),(r._simpleElement=e).id="egretInput"),e.type="text",r._inputDIV.appendChild(e),e.setAttribute("tabindex","-1"),e.style.width="1px",e.style.height="12px",r.initValue(e),e.style.outline="thin",e.style.background="none",e.style.overflow="hidden",e.style.wordBreak="break-all",e.style.opacity=0,e.oninput=function(){r._stageText&&r._stageText._onInput()}},r.prototype.show=function(){var t=this._inputElement;n.$callAsync(function(){t.style.opacity=1},this)},r.prototype.disconnectStageText=function(t){null!=this._stageText&&this._stageText!=t||(this._inputElement&&this._inputElement.blur(),this.clearInputElement()),this._needShow=!1},r.prototype.clearInputElement=function(){var t=this;t._inputElement&&(t._inputElement.value="",t._inputElement.onblur=null,t._inputElement.onfocus=null,t._inputElement.style.width="1px",t._inputElement.style.height="12px",t._inputElement.style.left="0px",t._inputElement.style.top="0px",t._inputElement.style.opacity=0,(t._simpleElement==t._inputElement?t._multiElement:t._simpleElement).style.display="block",t._inputDIV.style.left="0px",t._inputDIV.style.top="-100px",t._inputDIV.style.height="0px",t._inputDIV.style.width="0px"),t._stageText&&(t._stageText._onDisconnect(),t._stageText=null,this.canvas.userTyping=!1)},r.prototype.getInputElement=function(t){var e=this;return e.clearInputElement(),e._stageText=t,this.canvas.userTyping=!0,e._stageText.$textfield.multiline?e._inputElement=e._multiElement:e._inputElement=e._simpleElement,(e._simpleElement==e._inputElement?e._multiElement:e._simpleElement).style.display="none",e._inputElement},e=r,t.HTMLInput=e,__reflect(e.prototype,"egret.web.HTMLInput")}(egret=egret||{}),function(t){var e,o,a,s;e=t.web||(t.web={}),o={},a={},s={},e.$getTextAdapter=function(t){var e=t.stage?t.stage.$hashCode:0,r=o[e],i=a[e],n=s[e];return i&&n&&(delete a[e],delete s[e]),r},e.$cacheTextAdapter=function(t,e,r,i){t._initStageDelegateDiv(r,i),o[e.$hashCode]=t,a[e.$hashCode]=i,s[e.$hashCode]=r}}(egret=egret||{}),function(a){var s;a.web||(a.web={});s=null,a.sys.measureText=function(t,e,r,i,n){s||((s=a.sys.canvasHitTestBuffer.context).textAlign="left",s.textBaseline="middle");var o="";return n&&(o+="italic "),i&&(o+="bold "),o+=(r||12)+"px ",o+=e||"Arial",s.font=o,a.sys.measureTextWith(s,t)}}(egret=egret||{}),function(s){var t,e;function i(t,e){var r=s.sys.createCanvas(t,e),i=r.getContext("2d");if(void 0===i.imageSmoothingEnabled){for(var n,o=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],a=o.length-1;0<=a&&void 0===i[n=o[a]];a--);try{Object.defineProperty(i,"imageSmoothingEnabled",{get:function(){return this[n]},set:function(t){this[n]=t}})}catch(t){i.imageSmoothingEnabled=i[n]}}return r}function r(t,e,r){this.surface=s.sys.createCanvasRenderBufferSurface(i,t,e,r),this.context=this.surface.getContext("2d"),this.context&&(this.context.$offsetX=0,this.context.$offsetY=0),this.resize(t,e)}t=s.web||(s.web={}),Object.defineProperty(r.prototype,"width",{get:function(){return this.surface.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.surface.height},enumerable:!0,configurable:!0}),r.prototype.resize=function(t,e,r){s.sys.resizeCanvasRenderBuffer(this,t,e,r)},r.prototype.getPixels=function(t,e,r,i){return void 0===r&&(r=1),void 0===i&&(i=1),this.context.getImageData(t,e,r,i).data},r.prototype.toDataURL=function(t,e){return this.surface.toDataURL(t,e)},r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.surface.width,this.surface.height)},r.prototype.destroy=function(){this.surface.width=this.surface.height=0},e=r,t.CanvasRenderBuffer=e,__reflect(e.prototype,"egret.web.CanvasRenderBuffer",["egret.sys.RenderBuffer"])}(egret=egret||{}),function(c){var t,i,e;function r(t,e){var r=i.call(this)||this;return r.onTouchBegin=function(t){var e=r.getLocation(t);r.touch.onTouchBegin(e.x,e.y,t.identifier)},r.onMouseMove=function(t){0==t.buttons?r.onTouchEnd(t):r.onTouchMove(t)},r.onTouchMove=function(t){var e=r.getLocation(t);r.touch.onTouchMove(e.x,e.y,t.identifier)},r.onTouchEnd=function(t){var e=r.getLocation(t);r.touch.onTouchEnd(e.x,e.y,t.identifier)},r.scaleX=1,r.scaleY=1,r.rotation=0,r.canvas=e,r.touch=new c.sys.TouchHandler(t),r.addListeners(),r}t=c.web||(c.web={}),i=c.HashObject,__extends(r,i),r.prototype.addListeners=function(){var e=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",function(t){t.identifier=t.pointerId,e.onTouchBegin(t),e.prevent(t)},!1),this.canvas.addEventListener("MSPointerMove",function(t){t.identifier=t.pointerId,e.onTouchMove(t),e.prevent(t)},!1),this.canvas.addEventListener("MSPointerUp",function(t){t.identifier=t.pointerId,e.onTouchEnd(t),e.prevent(t)},!1)):(c.Capabilities.isMobile||this.addMouseListener(),this.addTouchListener())},r.prototype.addMouseListener=function(){this.canvas.addEventListener("mousedown",this.onTouchBegin),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseup",this.onTouchEnd)},r.prototype.addTouchListener=function(){var i=this;this.canvas.addEventListener("touchstart",function(t){for(var e=t.changedTouches.length,r=0;r<e;r++)i.onTouchBegin(t.changedTouches[r]);i.prevent(t)},!1),this.canvas.addEventListener("touchmove",function(t){for(var e=t.changedTouches.length,r=0;r<e;r++)i.onTouchMove(t.changedTouches[r]);i.prevent(t)},!1),this.canvas.addEventListener("touchend",function(t){for(var e=t.changedTouches.length,r=0;r<e;r++)i.onTouchEnd(t.changedTouches[r]);i.prevent(t)},!1),this.canvas.addEventListener("touchcancel",function(t){for(var e=t.changedTouches.length,r=0;r<e;r++)i.onTouchEnd(t.changedTouches[r]);i.prevent(t)},!1)},r.prototype.prevent=function(t){t.stopPropagation(),1==t.isScroll||this.canvas.userTyping||t.preventDefault()},r.prototype.getLocation=function(t){t.identifier=+t.identifier||0;var e=document.documentElement,r=this.canvas.getBoundingClientRect(),i=r.left+window.pageXOffset-e.clientLeft,n=r.top+window.pageYOffset-e.clientTop,o=t.pageX-i,a=o,s=t.pageY-n,l=s;return 90==this.rotation?(a=s,l=r.width-o):-90==this.rotation&&(a=r.height-s,l=o),a/=this.scaleX,l/=this.scaleY,c.$TempPoint.setTo(Math.round(a),Math.round(l))},r.prototype.updateScaleMode=function(t,e,r){this.scaleX=t,this.scaleY=e,this.rotation=r},r.prototype.$updateMaxTouches=function(){this.touch.$initMaxTouches()},e=r,t.WebTouchHandler=e,__reflect(e.prototype,"egret.web.WebTouchHandler")}(egret=egret||{}),function(t){(t.web||(t.web={})).WebLifeCycleHandler=function(r){var t,e;window.addEventListener("focus",r.resume,!1),window.addEventListener("blur",r.pause,!1),void 0!==document.hidden?(t="hidden",e="visibilitychange"):void 0!==document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):void 0!==document.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden?(t="webkitHidden",e="webkitvisibilitychange"):void 0!==document.oHidden&&(t="oHidden",e="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",r.resume,!1),window.addEventListener("pagehide",r.pause,!1)),t&&e&&document.addEventListener(e,function(){document[t]?r.pause():r.resume()},!1);var i,n=navigator.userAgent,o=/micromessenger/gi.test(n),a=/mqq/gi.test(n);(/mobile.*qq/gi.test(n)||o)&&(a=!1),a&&((i=window.browser||{}).execWebFn=i.execWebFn||{},i.execWebFn.postX5GamePlayerMessage=function(t){var e=t.type;"app_enter_background"==e?r.pause():"app_enter_foreground"==e&&r.resume()},window.browser=i)}}(egret=egret||{}),function(c){!function(o){var a=(t.WEB_AUDIO=2,t.HTML5_AUDIO=3,t);function t(){}o.AudioType=a,__reflect(a.prototype,"egret.web.AudioType");var e,r=(e=c.HashObject,__extends(s,e),s.$init=function(){var t=navigator.userAgent.toLowerCase();s.ua=t,s._canUseBlob=!1;var e=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,r=0<=t.indexOf("iphone")||0<=t.indexOf("ipad")||0<=t.indexOf("ipod");if(e)try{o.WebAudioDecode.ctx=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext)}catch(t){e=!1}var i,n=s._audioType;n==a.WEB_AUDIO&&e||n==a.HTML5_AUDIO?(i=!1,s.setAudioType(n)):!r&&0<=t.indexOf("safari")&&-1===t.indexOf("chrome")?(i=!1,s.setAudioType(a.WEB_AUDIO)):(i=!0,s.setAudioType(a.HTML5_AUDIO)),0<=t.indexOf("android")?i&&e&&s.setAudioType(a.WEB_AUDIO):r&&7<=s.getIOSVersion()&&(s._canUseBlob=!0,i&&e&&s.setAudioType(a.WEB_AUDIO)),window.URL||window.webkitURL||(s._canUseBlob=!1),0<=t.indexOf("egretnative")&&(s.setAudioType(a.HTML5_AUDIO),s._canUseBlob=!0),c.Sound=s._AudioClass},s.setAudioType=function(t){switch(s._audioType=t){case a.WEB_AUDIO:s._AudioClass=c.web.WebAudioSound;break;case a.HTML5_AUDIO:s._AudioClass=c.web.HtmlSound}},s.getIOSVersion=function(){var t=s.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/);if(!t||0==t.length)return 0;var e=t[0];return parseInt(e.match(/\d+(_\d)*/)[0])||0},s._canUseBlob=!1,s._audioType=0,s.ua="",s);function s(){return e.call(this)||this}o.Html5Capatibility=r,__reflect(r.prototype,"egret.web.Html5Capatibility");var n=null;function l(t,e){if(t in e)return"";t=t.charAt(0).toUpperCase()+t.substring(1,t.length);for(var r=["webkit","ms","Moz","O"],i=0;i<r.length;i++){if(r[i]+t in e)return r[i]}return""}o.getPrefixStyleName=function(t,e){var r,i="";return""==(i=null!=e?l(t,e):(null==n&&(r=document.createElement("div").style,n=l("transform",r)),n))?t:i+t.charAt(0).toUpperCase()+t.substring(1,t.length)},o.getPrefix=l}(c.web||(c.web={}))}(egret=egret||{}),function(s){var o;function t(t,e){var r=document.createElement("canvas");return isNaN(t)||isNaN(e)||(r.width=t,r.height=e),r}function e(t,e,r,i){var n,o;t&&(o=(n=t).surface,i?(o.width<e&&(o.width=e),o.height<r&&(o.height=r)):(o.width!==e&&(o.width=e),o.height!==r&&(o.height=r)),n.onResize())}function r(t){return t?t.getContext("2d"):null}o=s.web||(s.web={}),s.sys.mainCanvas=t,s.sys.createCanvas=t,o.resizeContext=e,s.sys.resizeContext=e,s.sys.getContextWebGL=function(t){for(var e={antialias:o.WebGLRenderContext.antialias,stencil:!0},r=null,i=["webgl","experimental-webgl"],n=0;n<i.length;++n){try{r=t.getContext(i[n],e)}catch(t){}if(r)break}return r||s.$error(1021),r},o.getContext2d=r,s.sys.getContext2d=r,s.sys.createTexture=function(t,e){var r=t,i=r.context,n=i.createTexture();if(n)return(n[s.glContext]=i).bindTexture(i.TEXTURE_2D,n),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),n[s.UNPACK_PREMULTIPLY_ALPHA_WEBGL]=!0,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n;r.contextLost=!0},s.sys._createTexture=function(t,e,r,i){var n=t,o=n.context,a=o.createTexture();return a?((a[s.glContext]=o).bindTexture(o.TEXTURE_2D,a),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),a[s.UNPACK_PREMULTIPLY_ALPHA_WEBGL]=!0,o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e,r,0,o.RGBA,o.UNSIGNED_BYTE,i),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),a):(n.contextLost=!0,null)},s.sys.drawTextureElements=function(t,e,r){var i=t.context;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.texture);var n=3*e.count;return i.drawElements(i.TRIANGLES,n,i.UNSIGNED_SHORT,2*r),n},s.sys.measureTextWith=function(t,e){return t.measureText(e).width},s.sys.createCanvasRenderBufferSurface=function(t,e,r,i){return t(e,r)},s.sys.resizeCanvasRenderBuffer=function(t,e,r,i){var n,o=t,a=o.surface;i?(n=!1,a.width<e&&(a.width=e,n=!0),a.height<r&&(a.height=r,n=!0),n||(o.context.globalCompositeOperation="source-over",o.context.setTransform(1,0,0,1,0,0),o.context.globalAlpha=1)):(a.width!=e&&(a.width=e),a.height!=r&&(a.height=r)),o.clear()},s.Geolocation=s.web.WebGeolocation,s.Motion=s.web.WebMotion}(egret=egret||{}),function(v){!function(p){var d=!1;function f(t){"webgl"==t&&v.WebGLUtils.checkCanUseWebGL()?(v.sys.RenderBuffer=p.WebGLRenderBuffer,v.sys.systemRenderer=new p.WebGLRenderer,v.sys.canvasRenderer=new v.CanvasRenderer,v.sys.customHitTestBuffer=new p.WebGLRenderBuffer(3,3),v.sys.canvasHitTestBuffer=new p.CanvasRenderBuffer(3,3),v.Capabilities.renderMode="webgl"):(v.sys.RenderBuffer=p.CanvasRenderBuffer,v.sys.systemRenderer=new v.CanvasRenderer,v.sys.canvasRenderer=v.sys.systemRenderer,v.sys.customHitTestBuffer=new p.CanvasRenderBuffer(3,3),v.sys.canvasHitTestBuffer=v.sys.customHitTestBuffer,v.Capabilities.renderMode="canvas")}function g(e){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;(r=r||function(t){return window.setTimeout(t,1e3/60)})(function t(){r(t);e.update()})}window.isNaN=function(t){return(t=+t)!=t},v.runEgret=function(s){if(!d){d=!0,s=s||{};var t=navigator.userAgent.toLowerCase();if(0<=t.indexOf("egretnative")&&-1==t.indexOf("egretwebview")&&(v.Capabilities.runtimeType=v.RuntimeType.RUNTIME2),0<=t.indexOf("egretnative")&&v.nativeRender)egret_native.addModuleCallback(function(){var t,e;p.Html5Capatibility.$init(),"webgl"==s.renderMode&&(t=s.antialias,p.WebGLRenderContext.antialias=!!t),v.sys.CanvasRenderBuffer=p.CanvasRenderBuffer,f(s.renderMode),egret_native.nrSetRenderMode(2),e=s.canvasScaleFactor?s.canvasScaleFactor:s.calculateCanvasScaleFactor?s.calculateCanvasScaleFactor(v.sys.canvasHitTestBuffer.context):window.devicePixelRatio,v.sys.DisplayList.$canvasScaleFactor=e,g(v.ticker),s.screenAdapter?v.sys.screenAdapter=s.screenAdapter:v.sys.screenAdapter||(v.sys.screenAdapter=new v.sys.DefaultScreenAdapter);for(var r=document.querySelectorAll(".egret-player"),i=r.length,n=0;n<i;n++){var o=r[n],a=new p.WebPlayer(o,s);o["egret-player"]=a}window.addEventListener("resize",function(){isNaN(m)&&(m=window.setTimeout(y,300))})},null),egret_native.initNativeRender();else{p.Html5Capatibility._audioType=s.audioType,p.Html5Capatibility.$init();var e,r=s.renderMode;"webgl"==r&&(e=s.antialias,p.WebGLRenderContext.antialias=!!e),v.sys.CanvasRenderBuffer=p.CanvasRenderBuffer,0<=t.indexOf("egretnative")&&"webgl"!=r&&(v.$warn(1051),r="webgl"),f(r);var i,n,o=void 0;o=s.canvasScaleFactor?s.canvasScaleFactor:s.calculateCanvasScaleFactor?s.calculateCanvasScaleFactor(v.sys.canvasHitTestBuffer.context):(n=(i=v.sys.canvasHitTestBuffer.context).backingStorePixelRatio||i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,(window.devicePixelRatio||1)/n),v.sys.DisplayList.$canvasScaleFactor=o,g(v.ticker),s.screenAdapter?v.sys.screenAdapter=s.screenAdapter:v.sys.screenAdapter||(v.sys.screenAdapter=new v.sys.DefaultScreenAdapter);for(var a=document.querySelectorAll(".egret-player"),l=a.length,c=0;c<l;c++){var h=a[c],u=new p.WebPlayer(h,s);h["egret-player"]=u}window.addEventListener("resize",function(){isNaN(m)&&(m=window.setTimeout(y,300))})}}},v.updateAllScreens=function(){if(d)for(var t=document.querySelectorAll(".egret-player"),e=t.length,r=0;r<e;r++){t[r]["egret-player"].updateScreenSize()}};var m=NaN;function y(){m=NaN,v.updateAllScreens()}}(v.web||(v.web={}))}(egret=egret||{});var egret,language=navigator.language||navigator.browserLanguage||"en_US";(language=language.replace("-","_"))in egret.$locale_strings&&(egret.$language=language),function(i){var t,e;function n(){}t=i.web||(i.web={}),n.detect=function(){var t=i.Capabilities,e=navigator.userAgent.toLowerCase();t.isMobile=-1!=e.indexOf("mobile")||-1!=e.indexOf("android"),t.isMobile?e.indexOf("windows")<0&&(-1!=e.indexOf("iphone")||-1!=e.indexOf("ipad")||-1!=e.indexOf("ipod"))?t.os="iOS":-1!=e.indexOf("android")&&-1!=e.indexOf("linux")?t.os="Android":-1!=e.indexOf("windows")&&(t.os="Windows Phone"):-1!=e.indexOf("windows nt")?t.os="Windows PC":"MacIntel"==navigator.platform&&1<navigator.maxTouchPoints?(t.os="iOS",t.isMobile=!0):-1!=e.indexOf("mac os")&&(t.os="Mac OS");var r=(navigator.language||navigator.browserLanguage).toLowerCase().split("-");1<r.length&&(r[1]=r[1].toUpperCase()),t.language=r.join("-"),n.injectUIntFixOnIE9()},n.injectUIntFixOnIE9=function(){/msie 9.0/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document.write("\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\n<script type='text/vbscript' language='VBScript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n<\/script>\r\n\x3c!-- convertResponseBodyToText --\x3e\r\n<script>\r\nlet convertResponseBodyToText = function (binary) {\r\n   let byteMapping = {};\r\n   for ( let i = 0; i < 256; i++ ) {\r\n       for ( let j = 0; j < 256; j++ ) {\r\n           byteMapping[ String.fromCharCode( i + j * 256 ) ] =\r\n           String.fromCharCode(i) + String.fromCharCode(j);\r\n       }\r\n   }\r\n   let rawBytes = IEBinaryToArray_ByteStr(binary);\r\n   let lastChr = IEBinaryToArray_ByteStr_Last(binary);\r\n   return rawBytes.replace(/[\\s\\S]/g,                           function( match ) { return byteMapping[match]; }) + lastChr;\r\n};\r\n<\/script>\r\n")},e=n,t.WebCapability=e,__reflect(e.prototype,"egret.web.WebCapability"),e.detect()}(egret=egret||{}),function(s){var t,e;function r(t,e,r,i,n){var o,a;this.showPanle=!0,this.fpsHeight=0,this.WIDTH=101,this.HEIGHT=20,this.bgCanvasColor="#18304b",this.fpsFrontColor="#18fefe",this.WIDTH_COST=50,this.cost1Color="#18fefe",this.cost3Color="#ff0000",this.arrFps=[],this.arrCost=[],this.arrLog=[],(e||r)&&("canvas"==s.Capabilities.renderMode?this.renderMode="Canvas":this.renderMode="WebGL",this.panelX=void 0===n.x?0:parseInt(n.x),this.panelY=void 0===n.y?0:parseInt(n.y),this.fontColor=void 0===n.textColor?"#ffffff":n.textColor.replace("0x","#"),this.fontSize=void 0===n.size?12:parseInt(n.size),s.Capabilities.isMobile&&(this.fontSize-=2),(o=document.createElement("div")).style.position="absolute",o.style.background="rgba(0,0,0,"+n.bgAlpha+")",o.style.left=this.panelX+"px",o.style.top=this.panelY+"px",o.style.pointerEvents="none",o.id="egret-fps-panel",document.body.appendChild(o),(a=document.createElement("div")).style.color=this.fontColor,a.style.fontSize=this.fontSize+"px",a.style.lineHeight=this.fontSize+"px",a.style.margin="4px 4px 4px 4px",this.container=a,o.appendChild(a),e&&this.addFps(),r&&this.addLog())}t=s.web||(s.web={}),r.prototype.addFps=function(){var t=document.createElement("div");t.style.display="inline-block",this.containerFps=t,this.container.appendChild(t);var e=document.createElement("div");e.style.paddingBottom="2px",this.fps=e,this.containerFps.appendChild(e),e.innerHTML="0 FPS "+this.renderMode+"<br/>min0 max0 avg0";var r=document.createElement("canvas");this.containerFps.appendChild(r),r.width=this.WIDTH,r.height=this.HEIGHT;var i=(this.canvasFps=r).getContext("2d");(this.contextFps=i).fillStyle=this.bgCanvasColor,i.fillRect(0,0,this.WIDTH,this.HEIGHT);var n=document.createElement("div");this.divDatas=n,this.containerFps.appendChild(n);var o=document.createElement("div");o.style.float="left",o.innerHTML="Draw<br/>Cost",n.appendChild(o);var a=document.createElement("div");a.style.paddingLeft=o.offsetWidth+20+"px",n.appendChild(a);var s=document.createElement("div");(this.divDraw=s).innerHTML="0<br/>",a.appendChild(s);var l=document.createElement("div");(this.divCost=l).innerHTML='<font  style="color:'+this.cost1Color+'">0<font/> <font  style="color:'+this.cost3Color+'">0<font/>',a.appendChild(l),r=document.createElement("canvas"),this.canvasCost=r,this.containerFps.appendChild(r),r.width=this.WIDTH,r.height=this.HEIGHT,i=r.getContext("2d"),(this.contextCost=i).fillStyle=this.bgCanvasColor,i.fillRect(0,0,this.WIDTH,this.HEIGHT),i.fillStyle="#000000",i.fillRect(this.WIDTH_COST,0,1,this.HEIGHT),this.fpsHeight=this.container.offsetHeight},r.prototype.addLog=function(){var t=document.createElement("div");t.style.maxWidth=document.body.clientWidth-8-this.panelX+"px",t.style.wordWrap="break-word",this.log=t,this.container.appendChild(t)},r.prototype.update=function(t,e){var r,i,n;void 0===e&&(e=!1),e?(r=this.arrFps[this.arrFps.length-1],i=this.arrCost[this.arrCost.length-1][0],n=this.arrCost[this.arrCost.length-1][1]):(r=t.fps,i=t.costTicker,n=t.costRender,this.lastNumDraw=t.draw,this.arrFps.push(r),this.arrCost.push([i,n]));var o=0,a=this.arrFps.length;101<a&&(a=101,this.arrFps.shift(),this.arrCost.shift());for(var s=this.arrFps[0],l=this.arrFps[0],c=0;c<a;c++){var h=this.arrFps[c];o+=h,h<s?s=h:l<h&&(l=h)}var u=this.WIDTH,p=this.HEIGHT,d=this.contextFps;d.drawImage(this.canvasFps,1,0,u-1,p,0,0,u-1,p),d.fillStyle=this.bgCanvasColor,d.fillRect(u-1,0,1,p);var f=Math.floor(r/60*20);f<1&&(f=1),d.fillStyle=this.fpsFrontColor,d.fillRect(u-1,20-f,1,f);var g=this.WIDTH_COST;(d=this.contextCost).drawImage(this.canvasCost,1,0,g-1,p,0,0,g-1,p),d.drawImage(this.canvasCost,g+2,0,g-1,p,g+1,0,g-1,p);var m=Math.floor(i/2);m<1?m=1:20<m&&(m=20);var y=Math.floor(n/2);y<1?y=1:20<y&&(y=20),d.fillStyle=this.bgCanvasColor,d.fillRect(g-1,0,1,p),d.fillRect(2*g,0,1,p),d.fillRect(3*g+1,0,1,p),d.fillStyle=this.cost1Color,d.fillRect(g-1,20-m,1,m),d.fillStyle=this.cost3Color,d.fillRect(2*g,20-y,1,y);var v=Math.floor(o/a),_=r+" FPS "+this.renderMode;this.showPanle&&(_+="<br/>min"+s+" max"+l+" avg"+v,this.divDraw.innerHTML=this.lastNumDraw+"<br/>",this.divCost.innerHTML='<font  style="color:#18fefe">'+i+'<font/> <font  style="color:#ff0000">'+n+"<font/>"),this.fps.innerHTML=_},r.prototype.updateInfo=function(t){this.arrLog.push(t),this.updateLogLayout()},r.prototype.updateWarn=function(t){this.arrLog.push("[Warning]"+t),this.updateLogLayout()},r.prototype.updateError=function(t){this.arrLog.push("[Error]"+t),this.updateLogLayout()},r.prototype.updateLogLayout=function(){for(this.log.innerHTML=this.arrLog.join("<br/>");document.body.clientHeight<this.log.offsetHeight+this.fpsHeight+this.panelY+2*this.fontSize;)this.arrLog.shift(),this.log.innerHTML=this.arrLog.join("<br/>")},e=r,t.WebFps=e,__reflect(e.prototype,"egret.web.WebFps",["egret.FPSDisplay"]),s.FPSDisplay=e}(egret=egret||{}),function(i){!function(t){t.web||(t.web={});t.getItem=function(t){return window.localStorage.getItem(t)},t.setItem=function(e,r){try{return window.localStorage.setItem(e,r),!0}catch(t){return i.$warn(1047,e,r),!1}},t.removeItem=function(t){window.localStorage.removeItem(t)},t.clear=function(){window.localStorage.clear()}}(i.localStorage||(i.localStorage={}))}(egret=egret||{}),function(C){var c,i,t;function e(t,e){var r=i.call(this)||this;return r.init(t,e),r.initOrientation(),r}c=C.web||(C.web={}),i=C.HashObject,__extends(e,i),e.prototype.init=function(t,e){console.log("Egret Engine Version:",C.Capabilities.engineVersion);var r=this.readOption(t,e),i=new C.Stage;i.$screen=this,i.$scaleMode=r.scaleMode,i.$orientation=r.orientation,i.$maxTouches=r.maxTouches,i.frameRate=r.frameRate,i.textureScaleFactor=r.textureScaleFactor;var n=new C.sys.RenderBuffer(void 0,void 0,!0),o=n.surface;this.attachCanvas(t,o);var a=new c.WebTouchHandler(i,o),s=new C.sys.Player(n,i,r.entryClassName);C.lifecycle.stage=i,C.lifecycle.addLifecycleListener(c.WebLifeCycleHandler);var l=new c.HTMLInput;(r.showFPS||r.showLog)&&(C.nativeRender||s.displayFPS(r.showFPS,r.showLog,r.logFilter,r.fpsStyles)),this.playerOption=r,this.container=t,this.canvas=o,this.stage=i,this.player=s,this.webTouchHandler=a,this.webInput=l,C.web.$cacheTextAdapter(l,i,t,o),this.updateScreenSize(),this.updateMaxTouches(),s.start()},e.prototype.initOrientation=function(){var t=this;window.addEventListener("orientationchange",function(){window.setTimeout(function(){C.StageOrientationEvent.dispatchStageOrientationEvent(t.stage,C.StageOrientationEvent.ORIENTATION_CHANGE)},350)})},e.prototype.readOption=function(t,e){var r={};r.entryClassName=t.getAttribute("data-entry-class"),r.scaleMode=t.getAttribute("data-scale-mode")||C.StageScaleMode.NO_SCALE,r.frameRate=+t.getAttribute("data-frame-rate")||30,r.contentWidth=+t.getAttribute("data-content-width")||480,r.contentHeight=+t.getAttribute("data-content-height")||800,r.orientation=t.getAttribute("data-orientation")||C.OrientationMode.AUTO,r.maxTouches=+t.getAttribute("data-multi-fingered")||2,r.textureScaleFactor=+t.getAttribute("texture-scale-factor")||1,r.showFPS="true"==t.getAttribute("data-show-fps");for(var i=(t.getAttribute("data-show-fps-style")||"").split(","),n={},o=0;o<i.length;o++){var a=i[o].split(":");n[a[0]]=a[1]}return r.fpsStyles=n,r.showLog="true"==t.getAttribute("data-show-log"),r.logFilter=t.getAttribute("data-log-filter"),r},e.prototype.attachCanvas=function(t,e){var r=e.style;r.cursor="inherit",r.position="absolute",r.top="0",r.bottom="0",r.left="0",r.right="0",t.appendChild(e),(r=t.style).overflow="hidden",r.position="absolute"},e.prototype.updateScreenSize=function(){var t,e,r,i,n,o,a,s,l,c,h,u,p,d,f,g,m,y,v,_,b,T=this.canvas;T.userTyping||(t=this.playerOption,r=0,i=(e=this.container.getBoundingClientRect()).width,n=e.height,0!=i&&0!=n&&(e.top<0&&(n+=e.top,r=-e.top),o=!1,(a=this.stage.$orientation)!=C.OrientationMode.AUTO&&(o=a!=C.OrientationMode.PORTRAIT&&i<n||a==C.OrientationMode.PORTRAIT&&n<i),s=o?n:i,l=o?i:n,C.Capabilities.boundingClientWidth=s,C.Capabilities.boundingClientHeight=l,h=(c=C.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,s,l,t.contentWidth,t.contentHeight)).stageWidth,u=c.stageHeight,p=c.displayWidth,d=c.displayHeight,T.style[C.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",T.width!=h&&(T.width=h),T.height!=u&&(T.height=u),f=0,o?a==C.OrientationMode.LANDSCAPE?(f=90,T.style.top=r+(n-p)/2+"px",T.style.left=(i+d)/2+"px"):(f=-90,T.style.top=r+(n+p)/2+"px",T.style.left=(i-d)/2+"px"):(T.style.top=r+(n-d)/2+"px",T.style.left=(i-p)/2+"px"),m=d/u,y=(g=p/h)*C.sys.DisplayList.$canvasScaleFactor,v=m*C.sys.DisplayList.$canvasScaleFactor,"canvas"==C.Capabilities.renderMode&&(y=Math.ceil(y),v=Math.ceil(v)),(_=C.Matrix.create()).identity(),_.scale(g/y,m/v),_.rotate(f*Math.PI/180),b="matrix("+_.a+","+_.b+","+_.c+","+_.d+","+_.tx+","+_.ty+")",C.Matrix.release(_),T.style[C.web.getPrefixStyleName("transform")]=b,C.sys.DisplayList.$setCanvasScale(y,v),this.webTouchHandler.updateScaleMode(g,m,f),this.webInput.$updateSize(),this.player.updateStageSize(h,u),C.nativeRender&&(T.width=h*y,T.height=u*v)))},e.prototype.setContentSize=function(t,e){var r=this.playerOption;r.contentWidth=t,r.contentHeight=e,this.updateScreenSize()},e.prototype.updateMaxTouches=function(){this.webTouchHandler.$updateMaxTouches()},t=e,c.WebPlayer=t,__reflect(t.prototype,"egret.web.WebPlayer",["egret.sys.Screen"])}(egret=egret||{}),function(m){var y,v;function o(t,e){y||(y=m.sys.createCanvas(),v=y.getContext("2d"));var r=t.$getTextureWidth(),i=t.$getTextureHeight();null==e&&((e=m.$TempRectangle).x=0,e.y=0,e.width=r,e.height=i),e.x=Math.min(e.x,r-1),e.y=Math.min(e.y,i-1),e.width=Math.min(e.width,r-e.x),e.height=Math.min(e.height,i-e.y);var n=e.width,o=e.height,a=y;if(a.style.width=n+"px",a.style.height=o+"px",y.width=n,y.height=o,"webgl"==m.Capabilities.renderMode){var s=void 0;t.$renderBuffer?s=t:(s=new m.RenderTexture).drawToTexture(new m.Bitmap(t));for(var l=s.$renderBuffer.getPixels(e.x,e.y,n,o),c=new ImageData(n,o),h=0;h<l.length;h++)c.data[h]=l[h];return v.putImageData(c,0,0),t.$renderBuffer||s.dispose(),a}var u=t,p=Math.round(u.$offsetX),d=Math.round(u.$offsetY),f=u.$bitmapWidth,g=u.$bitmapHeight;return v.drawImage(u.$bitmapData.source,u.$bitmapX+e.x/m.$TextureScaleFactor,u.$bitmapY+e.y/m.$TextureScaleFactor,f*e.width/r,g*e.height/i,p,d,e.width,e.height),a}function l(t,e,r){try{return o(this,e).toDataURL(t,r)}catch(t){m.$error(1033)}return null}m.web||(m.web={}),m.Texture.prototype.toDataURL=l,m.Texture.prototype.saveToFile=function(t,e,r,i){var n,o,a,s=l.call(this,t,r,i);null!=s&&(n=s.replace(/^data:image[^;]*/,"data:image/octet-stream"),(o=document.createElement("a")).download=e,o.href=n,(a=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(a))},m.Texture.prototype.getPixel32=function(t,e){return m.$warn(1041,"getPixel32","getPixels"),this.getPixels(t,e)},m.Texture.prototype.getPixels=function(t,e,r,i){if(void 0===r&&(r=1),void 0===i&&(i=1),"webgl"==m.Capabilities.renderMode){var n=void 0;return this.$renderBuffer?n=this:(n=new m.RenderTexture).drawToTexture(new m.Bitmap(this)),n.$renderBuffer.getPixels(t,e,r,i)}try{o(this);return v.getImageData(t,e,r,i).data}catch(t){m.$error(1039)}}}(egret=egret||{}),function(s){!function(t){function e(t,e){this.nodeType=t,this.parent=e}t.XMLNode=e,__reflect(e.prototype,"egret.web.XMLNode");var a,m=(__extends(r,a=e),r);function r(t,e,r,i,n){var o=a.call(this,1,e)||this;return o.attributes={},o.children=[],o.localName=t,o.prefix=r,o.namespace=i,o.name=n,o}t.XML=m,__reflect(m.prototype,"egret.web.XML");var i,y=(__extends(n,i=e),n);function n(t,e){var r=i.call(this,3,e)||this;return r.text=t,r}t.XMLText=y,__reflect(y.prototype,"egret.web.XMLText");var o=new DOMParser;s.XML={parse:function(t){for(var e=o.parseFromString(t,"text/xml"),r=e.childNodes.length,i=0;i<r;i++){var n=e.childNodes[i];if(1==n.nodeType)return function t(e,r){if("parsererror"==e.localName)throw new Error(e.textContent);var i=new m(e.localName,r,e.prefix,e.namespaceURI,e.nodeName);var n=e.attributes;var o=i.attributes;var a=n.length;for(var s=0;s<a;s++){var l=n[s],c=l.name;0!=c.indexOf("xmlns:")&&(o[c]=l.value,i["$"+c]=l.value)}var h=e.childNodes;a=h.length;var u=i.children;for(var s=0;s<a;s++){var p,d=h[s],f=d.nodeType,g=null;1==f?g=t(d,i):3!=f||(p=d.textContent.trim())&&(g=new y(p,i)),g&&u.push(g)}return i}(n,null)}return null}}}(s.web||(s.web={}))}(egret=egret||{}),function(i){var t,e,r;function n(){var r=null!==e&&e.apply(this,arguments)||this;return r.onChange=function(t){var e=new i.OrientationEvent(i.Event.CHANGE);e.beta=t.beta,e.gamma=t.gamma,e.alpha=t.alpha,r.dispatchEvent(e)},r}t=i.web||(i.web={}),e=i.EventDispatcher,__extends(n,e),n.prototype.start=function(){window.addEventListener("deviceorientation",this.onChange)},n.prototype.stop=function(){window.removeEventListener("deviceorientation",this.onChange)},r=n,t.WebDeviceOrientation=r,__reflect(r.prototype,"egret.web.WebDeviceOrientation",["egret.DeviceOrientation"])}(egret=egret||{}),egret.DeviceOrientation=egret.web.WebDeviceOrientation,function(t){var e,r;function i(){}e=t.web||(t.web={}),i.call=function(t,e){},i.addCallback=function(t,e){},r=i,e.WebExternalInterface=r,__reflect(r.prototype,"egret.web.WebExternalInterface",["egret.ExternalInterface"]),navigator.userAgent.toLowerCase().indexOf("egretnative")<0&&(t.ExternalInterface=r)}(egret=egret||{}),function(o){var t,a,e;function r(){}t=o.web||(o.web={}),a={},r.call=function(t,e){var r={};r.functionName=t,r.value=e,egret_native.sendInfoToPlugin(JSON.stringify(r))},r.addCallback=function(t,e){a[t]=e},e=r,t.NativeExternalInterface=e,__reflect(e.prototype,"egret.web.NativeExternalInterface",["egret.ExternalInterface"]),0<=navigator.userAgent.toLowerCase().indexOf("egretnative")&&(o.ExternalInterface=e,egret_native.receivedPluginInfo=function(t){var e,r=JSON.parse(t),i=r.functionName,n=a[i];n?(e=r.value,n.call(null,e)):o.$warn(1050,i)})}(egret=egret||{}),function(i){var t,n,e;function r(){}t=i.web||(i.web={}),n={},r.call=function(t,e){__global.ExternalInterface.call(t,e)},r.addCallback=function(t,e){n[t]=e},r.invokeCallback=function(t,e){var r=n[t];r?r.call(null,e):i.$warn(1050,t)},e=r,t.WebViewExternalInterface=e,__reflect(e.prototype,"egret.web.WebViewExternalInterface",["egret.ExternalInterface"]),0<=navigator.userAgent.toLowerCase().indexOf("egretwebview")&&(i.ExternalInterface=e)}(egret=egret||{}),function(l){var n,e,t;function c(){var t=e.call(this)||this;return t.loaded=!1,t}n=l.web||(l.web={}),e=l.EventDispatcher,__extends(c,e),Object.defineProperty(c.prototype,"length",{get:function(){if(this.originAudio)return this.originAudio.duration;throw new Error("sound not loaded!")},enumerable:!0,configurable:!0}),c.prototype.load=function(t){var e=this;(this.url=t)||l.$error(3002);var r=new Audio(t);r.addEventListener("canplaythrough",o),r.addEventListener("error",a);var i=navigator.userAgent.toLowerCase();0<=i.indexOf("firefox")&&(r.autoplay=!0,r.muted=!0);var n=0<=i.indexOf("edge")||0<=i.indexOf("trident");function o(){c.$recycle(e.url,r),s(),0<=i.indexOf("firefox")&&(r.pause(),r.muted=!1),n&&document.body.appendChild(r),e.loaded=!0,e.dispatchEventWith(l.Event.COMPLETE)}function a(){s(),e.dispatchEventWith(l.IOErrorEvent.IO_ERROR)}function s(){r.removeEventListener("canplaythrough",o),r.removeEventListener("error",a),n&&document.body.removeChild(r)}n&&document.body.appendChild(r),r.load(),this.originAudio=r,c.clearAudios[this.url]&&delete c.clearAudios[this.url]},c.prototype.play=function(t,e){t=+t||0,e=+e||0,0==this.loaded&&l.$error(1049);var r=c.$pop(this.url);null==r&&(r=this.originAudio.cloneNode()),r.autoplay=!0;var i=new n.HtmlSoundChannel(r);return i.$url=this.url,i.$loops=e,i.$startTime=t,i.$play(),l.sys.$pushSoundChannel(i),i},c.prototype.close=function(){this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),c.$clear(this.url),this.loaded=!1},c.$clear=function(t){c.clearAudios[t]=!0;var e=c.audios[t];e&&(e.length=0)},c.$pop=function(t){var e=c.audios[t];return e&&0<e.length?e.pop():null},c.$recycle=function(t,e){var r;c.clearAudios[t]||(r=c.audios[t],null==c.audios[t]&&(r=c.audios[t]=[]),r.push(e))},c.MUSIC="music",c.EFFECT="effect",c.audios={},c.clearAudios={},t=c,n.HtmlSound=t,__reflect(t.prototype,"egret.web.HtmlSound",["egret.Sound"])}(egret=egret||{}),function(e){var r;e.web||(e.web={});Object.defineProperty(e.Logger,"logLevel",{set:function(t){switch(null==r&&(r={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log}),t){case e.Logger.OFF:console.error=function(){};case e.Logger.ERROR:console.warn=function(){};case e.Logger.WARN:console.info=function(){},console.log=function(){};case e.Logger.INFO:console.debug=function(){}}switch(t){case e.Logger.ALL:case e.Logger.DEBUG:console.debug=r.debug;case e.Logger.INFO:console.log=r.log,console.info=r.info;case e.Logger.WARN:console.warn=r.warn;case e.Logger.ERROR:console.error=r.error}},enumerable:!0,configurable:!0})}(egret=egret||{}),function(t){var e,r;function i(){this.drawData=[],this.drawDataLen=0}e=t.web||(t.web={}),i.prototype.pushDrawRect=function(){var t;0!=this.drawDataLen&&1==this.drawData[this.drawDataLen-1].type||((t=this.drawData[this.drawDataLen]||{}).type=1,t.count=0,this.drawData[this.drawDataLen]=t,this.drawDataLen++),this.drawData[this.drawDataLen-1].count+=2},i.prototype.pushDrawTexture=function(t,e,r,i,n){var o;void 0===e&&(e=2),r?((o=this.drawData[this.drawDataLen]||{}).type=0,o.texture=t,o.filter=r,o.count=e,o.textureWidth=i,o.textureHeight=n,this.drawData[this.drawDataLen]=o,this.drawDataLen++):(0!=this.drawDataLen&&0==this.drawData[this.drawDataLen-1].type&&t==this.drawData[this.drawDataLen-1].texture&&!this.drawData[this.drawDataLen-1].filter||((o=this.drawData[this.drawDataLen]||{}).type=0,o.texture=t,o.count=0,this.drawData[this.drawDataLen]=o,this.drawDataLen++),this.drawData[this.drawDataLen-1].count+=e)},i.prototype.pushChangeSmoothing=function(t,e){t.smoothing=e;var r=this.drawData[this.drawDataLen]||{};r.type=10,r.texture=t,r.smoothing=e,this.drawData[this.drawDataLen]=r,this.drawDataLen++},i.prototype.pushPushMask=function(t){void 0===t&&(t=1);var e=this.drawData[this.drawDataLen]||{};e.type=2,e.count=2*t,this.drawData[this.drawDataLen]=e,this.drawDataLen++},i.prototype.pushPopMask=function(t){void 0===t&&(t=1);var e=this.drawData[this.drawDataLen]||{};e.type=3,e.count=2*t,this.drawData[this.drawDataLen]=e,this.drawDataLen++},i.prototype.pushSetBlend=function(t){for(var e=!1,r=this.drawDataLen-1;0<=r;r--){var i=this.drawData[r];if(i){if(0!=i.type&&1!=i.type||(e=!0),!e&&4==i.type){this.drawData.splice(r,1),this.drawDataLen--;continue}if(4==i.type){if(i.value==t)return;break}}}var n=this.drawData[this.drawDataLen]||{};n.type=4,n.value=t,this.drawData[this.drawDataLen]=n,this.drawDataLen++},i.prototype.pushResize=function(t,e,r){var i=this.drawData[this.drawDataLen]||{};i.type=5,i.buffer=t,i.width=e,i.height=r,this.drawData[this.drawDataLen]=i,this.drawDataLen++},i.prototype.pushClearColor=function(){var t=this.drawData[this.drawDataLen]||{};t.type=6,this.drawData[this.drawDataLen]=t,this.drawDataLen++},i.prototype.pushActivateBuffer=function(t){for(var e=!1,r=this.drawDataLen-1;0<=r;r--){var i=this.drawData[r];!i||(4!=i.type&&7!=i.type&&(e=!0),e||7!=i.type)||(this.drawData.splice(r,1),this.drawDataLen--)}var n=this.drawData[this.drawDataLen]||{};n.type=7,n.buffer=t,n.width=t.rootRenderTarget.width,n.height=t.rootRenderTarget.height,this.drawData[this.drawDataLen]=n,this.drawDataLen++},i.prototype.pushEnableScissor=function(t,e,r,i){var n=this.drawData[this.drawDataLen]||{};n.type=8,n.x=t,n.y=e,n.width=r,n.height=i,this.drawData[this.drawDataLen]=n,this.drawDataLen++},i.prototype.pushDisableScissor=function(){var t=this.drawData[this.drawDataLen]||{};t.type=9,this.drawData[this.drawDataLen]=t,this.drawDataLen++},i.prototype.clear=function(){for(var t=0;t<this.drawDataLen;t++){var e=this.drawData[t];e.type=0,e.count=0,e.texture=null,e.filter=null,e.value="",e.buffer=null,e.width=0,e.height=0,e.textureWidth=0,e.textureHeight=0,e.smoothing=!1,e.x=0,e.y=0}this.drawDataLen=0},r=i,e.WebGLDrawCmdManager=r,__reflect(r.prototype,"egret.web.WebGLDrawCmdManager")}(egret=egret||{}),function(V){var t,e;function r(){this.vertSize=5,this.vertByteSize=4*this.vertSize,this.maxQuadsCount=2048,this.maxVertexCount=4*this.maxQuadsCount,this.maxIndicesCount=6*this.maxQuadsCount,this.vertices=null,this.indices=null,this.indicesForMesh=null,this.vertexIndex=0,this.indexIndex=0,this.hasMesh=!1,this._vertices=null,this._verticesFloat32View=null,this._verticesUint32View=null;var t=this.maxVertexCount*this.vertSize;this.vertices=new Float32Array(t),this._vertices=new ArrayBuffer(this.maxVertexCount*this.vertByteSize),this._verticesFloat32View=new Float32Array(this._vertices),this._verticesUint32View=new Uint32Array(this._vertices),this.vertices=this._verticesFloat32View;var e=this.maxIndicesCount;this.indices=new Uint16Array(e),this.indicesForMesh=new Uint16Array(e);for(var r=0,i=0;r<e;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3}t=V.web||(V.web={}),r.prototype.reachMaxSize=function(t,e){return void 0===t&&(t=4),void 0===e&&(e=6),this.vertexIndex>this.maxVertexCount-t||this.indexIndex>this.maxIndicesCount-e},r.prototype.getVertices=function(){return this.vertices.subarray(0,this.vertexIndex*this.vertSize)},r.prototype.getIndices=function(){return this.indices},r.prototype.getMeshIndices=function(){return this.indicesForMesh},r.prototype.changeToMeshIndices=function(){if(!this.hasMesh){for(var t=0,e=this.indexIndex;t<e;++t)this.indicesForMesh[t]=this.indices[t];this.hasMesh=!0}},r.prototype.isMesh=function(){return this.hasMesh},r.prototype.cacheArrays=function(t,e,r,i,n,o,a,s,l,c,h,u,p,d,f){var g=t.globalAlpha,g=Math.min(g,1),m=t.globalTintColor||16777215,y=t.currentTexture;g=g<1&&y&&y[V.UNPACK_PREMULTIPLY_ALPHA_WEBGL]?V.WebGLUtils.premultiplyTint(m,g):m+(255*g<<24);var v,_,b=t.globalMatrix,T=b.a,C=b.b,S=b.c,x=b.d,E=b.tx,$=b.ty,w=t.$offsetX,L=t.$offsetY;if(0==w&&0==L||(E=w*T+L*S+E,$=w*C+L*x+$),p||(0==o&&0==a||(E=o*T+a*S+E,$=o*C+a*x+$),1!=(v=s/i)&&(T*=v,C*=v),1!=(_=l/n)&&(S*=_,x*=_)),p){for(var P,R,O,I,D,M=this.vertices,A=this._verticesUint32View,N=this.vertexIndex*this.vertSize,k=0,k=0,U=u.length;k<U;k+=2)P=N+5*k/2,I=p[k],D=p[k+1],R=u[k],O=u[k+1],M[P+0]=T*I+S*D+E,M[P+1]=C*I+x*D+$,f?(M[P+2]=(e+(1-O)*n)/c,M[P+3]=(r+R*i)/h):(M[P+2]=(e+R*i)/c,M[P+3]=(r+O*n)/h),A[P+4]=g;if(this.hasMesh)for(var B=0,G=d.length;B<G;++B)this.indicesForMesh[this.indexIndex+B]=d[B]+this.vertexIndex;this.vertexIndex+=u.length/2,this.indexIndex+=d.length}else{var F=c,H=h,j=i,W=n;e/=F,r/=H;var q,Y,M=this.vertices,A=this._verticesUint32View,N=this.vertexIndex*this.vertSize;f?(q=i,i=n/F,n=q/H,M[N++]=E,M[N++]=$,M[N++]=i+e,M[N++]=r,A[N++]=g,M[N++]=T*j+E,M[N++]=C*j+$,M[N++]=i+e,M[N++]=n+r,A[N++]=g,M[N++]=T*j+S*W+E,M[N++]=x*W+C*j+$,M[N++]=e,M[N++]=n+r,A[N++]=g,M[N++]=S*W+E,M[N++]=x*W+$,M[N++]=e,M[N++]=r):(i/=F,n/=H,M[N++]=E,M[N++]=$,M[N++]=e,M[N++]=r,A[N++]=g,M[N++]=T*j+E,M[N++]=C*j+$,M[N++]=i+e,M[N++]=r,A[N++]=g,M[N++]=T*j+S*W+E,M[N++]=x*W+C*j+$,M[N++]=i+e,M[N++]=n+r,A[N++]=g,M[N++]=S*W+E,M[N++]=x*W+$,M[N++]=e,M[N++]=n+r),A[N++]=g,this.hasMesh&&((Y=this.indicesForMesh)[this.indexIndex+0]=0+this.vertexIndex,Y[this.indexIndex+1]=1+this.vertexIndex,Y[this.indexIndex+2]=2+this.vertexIndex,Y[this.indexIndex+3]=0+this.vertexIndex,Y[this.indexIndex+4]=2+this.vertexIndex,Y[this.indexIndex+5]=3+this.vertexIndex),this.vertexIndex+=4,this.indexIndex+=6}},r.prototype.clear=function(){this.hasMesh=!1,this.vertexIndex=0,this.indexIndex=0},e=r,t.WebGLVertexArrayObject=e,__reflect(e.prototype,"egret.web.WebGLVertexArrayObject")}(egret=egret||{}),function(r){var e,n,t;function i(t,e,r){var i=n.call(this)||this;return i.clearColor=[0,0,0,0],i.useFrameBuffer=!0,i.gl=t,i._resize(e,r),i}e=r.web||(r.web={}),n=r.HashObject,__extends(i,n),i.prototype._resize=function(t,e){e=e||1,(t=t||1)<1&&(r.warn("WebGLRenderTarget _resize width = "+t),t=1),e<1&&(r.warn("WebGLRenderTarget _resize height = "+e),e=1),this.width=t,this.height=e},i.prototype.resize=function(t,e){this._resize(t,e);var r=this.gl;this.frameBuffer&&(r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null)),this.stencilBuffer&&(r.deleteRenderbuffer(this.stencilBuffer),this.stencilBuffer=null)},i.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer())},i.prototype.getFrameBuffer=function(){return this.useFrameBuffer?this.frameBuffer:null},i.prototype.initFrameBuffer=function(){var t;this.frameBuffer||(t=this.gl,this.texture=this.createTexture(),this.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0))},i.prototype.createTexture=function(){var t=e.WebGLRenderContext.getInstance(0,0);return r.sys._createTexture(t,this.width,this.height,null)},i.prototype.clear=function(t){var e=this.gl;t&&this.activate(),e.colorMask(!0,!0,!0,!0),e.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),e.clear(e.COLOR_BUFFER_BIT)},i.prototype.enabledStencil=function(){var t;this.frameBuffer&&!this.stencilBuffer&&((t=this.gl).bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer))},i.prototype.dispose=function(){r.WebGLUtils.deleteWebGLTexture(this.texture)},t=i,e.WebGLRenderTarget=t,__reflect(t.prototype,"egret.web.WebGLRenderTarget")}(egret=egret||{}),function(l){var h,c,t;function i(t,e){var r;this._defaultEmptyTexture=null,this.glID=null,this.projectionX=NaN,this.projectionY=NaN,this.contextLost=!1,this._supportedCompressedTextureInfo=[],this.$scissorState=!1,this.vertSize=5,this.surface=l.sys.mainCanvas(t,e),l.nativeRender||(this.initWebGL(),this.$bufferStack=[],r=this.context,this.vertexBuffer=r.createBuffer(),this.indexBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.drawCmdManager=new h.WebGLDrawCmdManager,this.vao=new h.WebGLVertexArrayObject,this.setGlobalCompositeOperation("source-over"))}h=l.web||(l.web={}),c={},i.getInstance=function(t,e){return this.instance||(this.instance=new i(t,e)),this.instance},i.prototype.pushBuffer=function(t){this.$bufferStack.push(t),t!=this.currentBuffer&&(this.currentBuffer,this.drawCmdManager.pushActivateBuffer(t)),this.currentBuffer=t},i.prototype.popBuffer=function(){var t;this.$bufferStack.length<=1||(this.$bufferStack.pop()!=(t=this.$bufferStack[this.$bufferStack.length-1])&&this.drawCmdManager.pushActivateBuffer(t),this.currentBuffer=t)},i.prototype.activateBuffer=function(t,e,r){t.rootRenderTarget.activate(),this.bindIndices||this.uploadIndicesArray(this.vao.getIndices()),t.restoreStencil(),t.restoreScissor(),this.onResize(e,r)},i.prototype.uploadVerticesArray=function(t){var e=this.context;e.bufferData(e.ARRAY_BUFFER,t,e.STREAM_DRAW)},i.prototype.uploadIndicesArray=function(t){var e=this.context;e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW),this.bindIndices=!0},i.prototype.destroy=function(){this.surface.width=this.surface.height=0},i.prototype.onResize=function(t,e){t=t||this.surface.width,e=e||this.surface.height,this.projectionX=t/2,this.projectionY=-e/2,this.context&&this.context.viewport(0,0,t,e)},i.prototype.resize=function(t,e,r){l.sys.resizeContext(this,t,e,r)},i.prototype._buildSupportedCompressedTextureInfo=function(t){for(var e=[],r=0,i=t;r<i.length;r++){var n=i[r];if(n){var o={extensionName:n.name,supportedFormats:[]};for(var a in n)o.supportedFormats.push([a,n[a]]);if(0===o.supportedFormats.length)console.error("buildSupportedCompressedTextureInfo failed = "+n.name);else for(var a in l.log("support: "+n.name),n)l.log(a,n[a],"0x"+n[a].toString(16));e.push(o)}}return e},i.prototype.initWebGL=function(){this.onResize(),this.surface.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.surface.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.getWebGLContext();var t=this.context;this.$maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.pvrtc=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.pvrtc&&(this.pvrtc.name="WEBGL_compressed_texture_pvrtc"),this.etc1=t.getExtension("WEBGL_compressed_texture_etc1")||t.getExtension("WEBKIT_WEBGL_compressed_texture_etc1"),this.etc1&&(this.etc1.name="WEBGL_compressed_texture_etc1"),l.Capabilities.supportedCompressedTexture=l.Capabilities.supportedCompressedTexture||{},l.Capabilities.supportedCompressedTexture.pvrtc=!!this.pvrtc,l.Capabilities.supportedCompressedTexture.etc1=!!this.etc1,this._supportedCompressedTextureInfo=this._buildSupportedCompressedTextureInfo([this.etc1,this.pvrtc])},i.prototype.handleContextLost=function(){this.contextLost=!0},i.prototype.handleContextRestored=function(){this.initWebGL(),this.contextLost=!1},i.prototype.getWebGLContext=function(){var t=l.sys.getContextWebGL(this.surface);this.setContext(t)},i.prototype.setContext=function(t){(this.context=t).id=i.glContextId++,this.glID=t.id,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.colorMask(!0,!0,!0,!0),t.activeTexture(t.TEXTURE0)},i.prototype.enableStencilTest=function(){var t=this.context;t.enable(t.STENCIL_TEST)},i.prototype.disableStencilTest=function(){var t=this.context;t.disable(t.STENCIL_TEST)},i.prototype.enableScissorTest=function(t){var e=this.context;e.enable(e.SCISSOR_TEST),e.scissor(t.x,t.y,t.width,t.height)},i.prototype.disableScissorTest=function(){var t=this.context;t.disable(t.SCISSOR_TEST)},i.prototype.getPixels=function(t,e,r,i,n){var o=this.context;o.readPixels(t,e,r,i,o.RGBA,o.UNSIGNED_BYTE,n)},i.prototype.createTexture=function(t){return l.sys.createTexture(this,t)},i.prototype.checkCompressedTextureInternalFormat=function(t,e){for(var r=0,i=t.length;r<i;++r)for(var n=t[r].supportedFormats,o=0,a=n.length;o<a;++o)if(n[o][1]===e)return!0;return!1},i.prototype.$debugLogCompressedTextureNotSupported=function(t,e){if(!c[e]){c[e]=!0,l.log("internalFormat = "+e+":0x"+e.toString(16)+", the current hardware does not support the corresponding compression format.");for(var r=0,i=t.length;r<i;++r){var n=t[r];if(0<n.supportedFormats.length){l.log("support = "+n.extensionName);for(var o=0,a=n.supportedFormats.length;o<a;++o){var s=n.supportedFormats[o];l.log(s[0]+" : "+s[1]+" : 0x"+s[1].toString(16))}}}}},i.prototype.createCompressedTexture=function(t,e,r,i,n){if(!this.checkCompressedTextureInternalFormat(this._supportedCompressedTextureInfo,n))return this.$debugLogCompressedTextureNotSupported(this._supportedCompressedTextureInfo,n),this.defaultEmptyTexture;var o=this.context,a=o.createTexture();if(a)return a[l.glContext]=o,a[l.is_compressed_texture]=!0,o.bindTexture(o.TEXTURE_2D,a),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),a[l.UNPACK_PREMULTIPLY_ALPHA_WEBGL]=!0,o.compressedTexImage2D(o.TEXTURE_2D,i,n,e,r,0,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.bindTexture(o.TEXTURE_2D,null),a;this.contextLost=!0},i.prototype.updateTexture=function(t,e){var r=this.context;r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)},Object.defineProperty(i.prototype,"defaultEmptyTexture",{get:function(){var t,e;return this._defaultEmptyTexture||(t=l.sys.createCanvas(16,16),(e=l.sys.getContext2d(t)).fillStyle="white",e.fillRect(0,0,16,16),this._defaultEmptyTexture=this.createTexture(t),this._defaultEmptyTexture[l.engine_default_empty_texture]=!0),this._defaultEmptyTexture},enumerable:!0,configurable:!0}),i.prototype.getWebGLTexture=function(t){var e,r,i;return t.webGLTexture||("image"!=t.format||t.hasCompressed2d()?t.hasCompressed2d()&&(e=t.getCompressed2dTextureData(),t.webGLTexture=this.createCompressedTexture(e.byteArray,e.width,e.height,e.level,e.glInternalFormat),!(r=t.etcAlphaMask)||(i=this.getWebGLTexture(r))&&(t.webGLTexture[l.etc_alpha_mask]=i)):t.webGLTexture=this.createTexture(t.source),t.$deleteSource&&t.webGLTexture&&(t.source&&(t.source.src="",t.source=null),t.clearCompressedTextureData()),t.webGLTexture&&(t.webGLTexture.smoothing=!0)),t.webGLTexture},i.prototype.clearRect=function(t,e,r,i){var n,o;0!=t||0!=e||r!=this.surface.width||i!=this.surface.height?(n=this.currentBuffer).$hasScissor||0!=(o=n.globalMatrix).b||0!=o.c?(this.setGlobalCompositeOperation("destination-out"),this.drawRect(t,e,r,i),this.setGlobalCompositeOperation("source-over")):(t=t*o.a+o.tx,e=e*o.d+o.ty,r*=o.a,i*=o.d,this.enableScissor(t,-e-i+n.height,r,i),this.clear(),this.disableScissor()):this.clear()},i.prototype.setGlobalCompositeOperation=function(t){this.drawCmdManager.pushSetBlend(t)},i.prototype.drawImage=function(t,e,r,i,n,o,a,s,l,c,h,u,p){var d,f,g,m=this.currentBuffer;if(!this.contextLost&&t&&m){if(t.texture||t.source&&t.source.texture)d=t.texture||t.source.texture,m.saveTransform(),f=m.$offsetX,g=m.$offsetY,m.useOffset(),m.transform(1,0,0,-1,0,l+2*a);else{if(!t.source&&!t.webGLTexture)return;d=this.getWebGLTexture(t)}d&&(this.drawTexture(d,e,r,i,n,o,a,s,l,c,h,void 0,void 0,void 0,void 0,u,p),t.source&&t.source.texture&&(m.$offsetX=f,m.$offsetY=g,m.restoreTransform()))}},i.prototype.drawMesh=function(t,e,r,i,n,o,a,s,l,c,h,u,p,d,f,g,m){var y,v,_,b=this.currentBuffer;if(!this.contextLost&&t&&b){if(t.texture||t.source&&t.source.texture)y=t.texture||t.source.texture,b.saveTransform(),v=b.$offsetX,_=b.$offsetY,b.useOffset(),b.transform(1,0,0,-1,0,l+2*a);else{if(!t.source&&!t.webGLTexture)return;y=this.getWebGLTexture(t)}y&&(this.drawTexture(y,e,r,i,n,o,a,s,l,c,h,u,p,d,f,g,m),(t.texture||t.source&&t.source.texture)&&(b.$offsetX=v,b.$offsetY=_,b.restoreTransform()))}},i.prototype.drawTexture=function(t,e,r,i,n,o,a,s,l,c,h,u,p,d,f,g,m){var y,v=this.currentBuffer;!this.contextLost&&t&&v&&(p&&d?this.vao.reachMaxSize(p.length/2,d.length)&&this.$drawWebGL():this.vao.reachMaxSize()&&this.$drawWebGL(),null!=m&&t.smoothing!=m&&this.drawCmdManager.pushChangeSmoothing(t,m),u&&this.vao.changeToMeshIndices(),y=d?d.length/3:2,this.drawCmdManager.pushDrawTexture(t,y,this.$filter,c,h),v.currentTexture=t,this.vao.cacheArrays(v,e,r,i,n,o,a,s,l,c,h,u,p,d,g))},i.prototype.drawRect=function(t,e,r,i){var n=this.currentBuffer;!this.contextLost&&n&&(this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushDrawRect(),n.currentTexture=null,this.vao.cacheArrays(n,0,0,r,i,t,e,r,i,r,i))},i.prototype.pushMask=function(t,e,r,i){var n=this.currentBuffer;!this.contextLost&&n&&(n.$stencilList.push({x:t,y:e,width:r,height:i}),this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushPushMask(),n.currentTexture=null,this.vao.cacheArrays(n,0,0,r,i,t,e,r,i,r,i))},i.prototype.popMask=function(){var t,e=this.currentBuffer;!this.contextLost&&e&&(t=e.$stencilList.pop(),this.vao.reachMaxSize()&&this.$drawWebGL(),this.drawCmdManager.pushPopMask(),e.currentTexture=null,this.vao.cacheArrays(e,0,0,t.width,t.height,t.x,t.y,t.width,t.height,t.width,t.height))},i.prototype.clear=function(){this.drawCmdManager.pushClearColor()},i.prototype.enableScissor=function(t,e,r,i){var n=this.currentBuffer;this.drawCmdManager.pushEnableScissor(t,e,r,i),n.$hasScissor=!0},i.prototype.disableScissor=function(){var t=this.currentBuffer;this.drawCmdManager.pushDisableScissor(),t.$hasScissor=!1},i.prototype.$drawWebGL=function(){if(0!=this.drawCmdManager.drawDataLen&&!this.contextLost){this.uploadVerticesArray(this.vao.getVertices()),this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getMeshIndices());for(var t=this.drawCmdManager.drawDataLen,e=0,r=0;r<t;r++){var i=this.drawCmdManager.drawData[r],e=this.drawData(i,e);7==i.type&&(this.activatedBuffer=i.buffer),0!=i.type&&1!=i.type&&2!=i.type&&3!=i.type||this.activatedBuffer&&this.activatedBuffer.$computeDrawCall&&this.activatedBuffer.$drawCalls++}this.vao.isMesh()&&this.uploadIndicesArray(this.vao.getIndices()),this.drawCmdManager.clear(),this.vao.clear()}},i.prototype.drawData=function(t,e){if(t){var r,i,n=this.context,o=t.filter;switch(t.type){case 0:o?"custom"===o.type?r=h.EgretWebGLProgram.getProgram(n,o.$vertexSrc,o.$fragmentSrc,o.$shaderKey):"colorTransform"===o.type?r=t.texture[l.etc_alpha_mask]?(n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,t.texture[l.etc_alpha_mask]),h.EgretWebGLProgram.getProgram(n,h.EgretShaderLib.default_vert,h.EgretShaderLib.colorTransform_frag_etc_alphamask_frag,"colorTransform_frag_etc_alphamask_frag")):h.EgretWebGLProgram.getProgram(n,h.EgretShaderLib.default_vert,h.EgretShaderLib.colorTransform_frag,"colorTransform"):"blurX"===o.type||"blurY"===o.type?r=h.EgretWebGLProgram.getProgram(n,h.EgretShaderLib.default_vert,h.EgretShaderLib.blur_frag,"blur"):"glow"===o.type&&(r=h.EgretWebGLProgram.getProgram(n,h.EgretShaderLib.default_vert,h.EgretShaderLib.glow_frag,"glow")):t.texture[l.etc_alpha_mask]?(r=h.EgretWebGLProgram.getProgram(n,h.EgretShaderLib.default_vert,h.EgretShaderLib.texture_etc_alphamask_frag,l.etc_alpha_mask),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,t.texture[l.etc_alpha_mask])):r=h.EgretWebGLProgram.getProgram(n,h.EgretShaderLib.default_vert,h.EgretShaderLib.texture_frag,"texture"),this.activeProgram(n,r),this.syncUniforms(r,o,t.textureWidth,t.textureHeight),e+=this.drawTextureElements(t,e);break;case 1:r=h.EgretWebGLProgram.getProgram(n,h.EgretShaderLib.default_vert,h.EgretShaderLib.primitive_frag,"primitive"),this.activeProgram(n,r),this.syncUniforms(r,o,t.textureWidth,t.textureHeight),e+=this.drawRectElements(t,e);break;case 2:r=h.EgretWebGLProgram.getProgram(n,h.EgretShaderLib.default_vert,h.EgretShaderLib.primitive_frag,"primitive"),this.activeProgram(n,r),this.syncUniforms(r,o,t.textureWidth,t.textureHeight),e+=this.drawPushMaskElements(t,e);break;case 3:r=h.EgretWebGLProgram.getProgram(n,h.EgretShaderLib.default_vert,h.EgretShaderLib.primitive_frag,"primitive"),this.activeProgram(n,r),this.syncUniforms(r,o,t.textureWidth,t.textureHeight),e+=this.drawPopMaskElements(t,e);break;case 4:this.setBlendMode(t.value);break;case 5:t.buffer.rootRenderTarget.resize(t.width,t.height),this.onResize(t.width,t.height);break;case 6:this.activatedBuffer&&(0==(i=this.activatedBuffer.rootRenderTarget).width&&0==i.height||i.clear(!0));break;case 7:this.activateBuffer(t.buffer,t.width,t.height);break;case 8:var a=this.activatedBuffer;a&&(a.rootRenderTarget&&a.rootRenderTarget.enabledStencil(),a.enableScissor(t.x,t.y,t.width,t.height));break;case 9:(a=this.activatedBuffer)&&a.disableScissor();break;case 10:n.bindTexture(n.TEXTURE_2D,t.texture),t.smoothing?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST))}return e}},i.prototype.activeProgram=function(t,e){if(e!=this.currentProgram){t.useProgram(e.id);var r=e.attributes;for(var i in r)"aVertexPosition"===i?(t.vertexAttribPointer(r.aVertexPosition.location,2,t.FLOAT,!1,20,0),t.enableVertexAttribArray(r.aVertexPosition.location)):"aTextureCoord"===i?(t.vertexAttribPointer(r.aTextureCoord.location,2,t.FLOAT,!1,20,8),t.enableVertexAttribArray(r.aTextureCoord.location)):"aColor"===i&&(t.vertexAttribPointer(r.aColor.location,4,t.UNSIGNED_BYTE,!0,20,16),t.enableVertexAttribArray(r.aColor.location));this.currentProgram=e}},i.prototype.syncUniforms=function(t,e,r,i){var n,o=t.uniforms;for(var a in e&&e.type,o)"projectionVector"===a?o[a].setValue({x:this.projectionX,y:this.projectionY}):"uTextureSize"===a?o[a].setValue({x:r,y:i}):"uSampler"===a?o[a].setValue(0):"uSamplerAlphaMask"===a?o[a].setValue(1):void 0!==(n=e.$uniforms[a])&&o[a].setValue(n)},i.prototype.drawTextureElements=function(t,e){return l.sys.drawTextureElements(this,t,e)},i.prototype.drawRectElements=function(t,e){var r=this.context,i=3*t.count;return r.drawElements(r.TRIANGLES,i,r.UNSIGNED_SHORT,2*e),i},i.prototype.drawPushMaskElements=function(t,e){var r,i=this.context,n=3*t.count,o=this.activatedBuffer;return o&&(o.rootRenderTarget&&o.rootRenderTarget.enabledStencil(),0==o.stencilHandleCount&&(o.enableStencil(),i.clear(i.STENCIL_BUFFER_BIT)),r=o.stencilHandleCount,o.stencilHandleCount++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR),i.drawElements(i.TRIANGLES,n,i.UNSIGNED_SHORT,2*e),i.stencilFunc(i.EQUAL,r+1,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)),n},i.prototype.drawPopMaskElements=function(t,e){var r,i=this.context,n=3*t.count,o=this.activatedBuffer;return o&&(o.stencilHandleCount--,0==o.stencilHandleCount?o.disableStencil():(r=o.stencilHandleCount,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR),i.drawElements(i.TRIANGLES,n,i.UNSIGNED_SHORT,2*e),i.stencilFunc(i.EQUAL,r,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP))),n},i.prototype.setBlendMode=function(t){var e=this.context,r=i.blendModesForGL[t];r&&e.blendFunc(r[0],r[1])},i.prototype.drawTargetWidthFilters=function(t,e){var r=e,i=t.length;if(1<i)for(var n=0;n<i-1;n++){var o,a=t[n],s=e.rootRenderTarget.width,l=e.rootRenderTarget.height;(o=h.WebGLRenderBuffer.create(s,l)).setTransform(1,0,0,1,0,0),o.globalAlpha=1,this.drawToRenderTarget(a,e,o),e!=r&&h.WebGLRenderBuffer.release(e),e=o}var c=t[i-1];this.drawToRenderTarget(c,e,this.currentBuffer),e!=r&&h.WebGLRenderBuffer.release(e)},i.prototype.drawToRenderTarget=function(t,e,r){var i,n,o,a,s,l;this.contextLost||(this.vao.reachMaxSize()&&this.$drawWebGL(),this.pushBuffer(r),o=(i=e).rootRenderTarget.width,a=e.rootRenderTarget.height,"blur"==t.type&&(s=t.blurXFilter,l=t.blurYFilter,t=0!=s.blurX&&0!=l.blurY?((n=h.WebGLRenderBuffer.create(o,a)).setTransform(1,0,0,1,0,0),n.globalAlpha=1,this.drawToRenderTarget(t.blurXFilter,e,n),e!=i&&h.WebGLRenderBuffer.release(e),e=n,l):0===s.blurX?l:s),r.saveTransform(),r.transform(1,0,0,-1,0,a),r.currentTexture=e.rootRenderTarget.texture,this.vao.cacheArrays(r,0,0,o,a,0,0,o,a,o,a),r.restoreTransform(),this.drawCmdManager.pushDrawTexture(e.rootRenderTarget.texture,2,t,o,a),e!=i&&h.WebGLRenderBuffer.release(e),this.popBuffer())},i.initBlendMode=function(){(i.blendModesForGL={})["source-over"]=[1,771],i.blendModesForGL.lighter=[1,1],i.blendModesForGL["lighter-in"]=[770,771],i.blendModesForGL["destination-out"]=[0,771],i.blendModesForGL["destination-in"]=[0,770]},i.glContextId=0,i.blendModesForGL=null,t=i,h.WebGLRenderContext=t,__reflect(t.prototype,"egret.web.WebGLRenderContext",["egret.sys.RenderContext"]),t.initBlendMode()}(egret=egret||{}),function(p){!function(o){var a,t=(a=p.HashObject,__extends(n,a),n.prototype.enableStencil=function(){this.stencilState||(this.context.enableStencilTest(),this.stencilState=!0)},n.prototype.disableStencil=function(){this.stencilState&&(this.context.disableStencilTest(),this.stencilState=!1)},n.prototype.restoreStencil=function(){this.stencilState?this.context.enableStencilTest():this.context.disableStencilTest()},n.prototype.enableScissor=function(t,e,r,i){this.$scissorState||(this.$scissorState=!0,this.scissorRect.setTo(t,e,r,i),this.context.enableScissorTest(this.scissorRect))},n.prototype.disableScissor=function(){this.$scissorState&&(this.$scissorState=!1,this.scissorRect.setEmpty(),this.context.disableScissorTest())},n.prototype.restoreScissor=function(){this.$scissorState?this.context.enableScissorTest(this.scissorRect):this.context.disableScissorTest()},Object.defineProperty(n.prototype,"width",{get:function(){return p.nativeRender?this.surface.width:this.rootRenderTarget.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return p.nativeRender?this.surface.height:this.rootRenderTarget.height},enumerable:!0,configurable:!0}),n.prototype.resize=function(t,e,r){t=t||1,e=e||1,p.nativeRender?this.surface.resize(t,e):(this.context.pushBuffer(this),t==this.rootRenderTarget.width&&e==this.rootRenderTarget.height||(this.context.drawCmdManager.pushResize(this,t,e),this.rootRenderTarget.width=t,this.rootRenderTarget.height=e),this.root&&this.context.resize(t,e,r),this.context.clear(),this.context.popBuffer())},n.prototype.getPixels=function(t,e,r,i){void 0===r&&(r=1),void 0===i&&(i=1);var n,o=new Uint8Array(4*r*i);p.nativeRender?(egret_native.activateBuffer(this),egret_native.nrGetPixels(t,e,r,i,o),egret_native.activateBuffer(null)):(n=this.rootRenderTarget.useFrameBuffer,this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.getPixels(t,e,r,i,o),this.rootRenderTarget.useFrameBuffer=n,this.rootRenderTarget.activate());for(var a=new Uint8Array(4*r*i),s=0;s<i;s++)for(var l=0;l<r;l++){var c=4*(r*(i-s-1)+l),h=4*(r*s+l),u=o[3+h];a[c]=Math.round(o[h]/u*255),a[1+c]=Math.round(o[1+h]/u*255),a[2+c]=Math.round(o[2+h]/u*255),a[3+c]=o[3+h]}return a},n.prototype.toDataURL=function(t,e){return this.context.surface.toDataURL(t,e)},n.prototype.destroy=function(){this.context.destroy()},n.prototype.onRenderFinish=function(){this.$drawCalls=0},n.prototype.drawFrameBufferToSurface=function(t,e,r,i,n,o,a,s,l){void 0===l&&(l=!1),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.context.disableScissorTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),l&&this.context.clear(),this.context.drawImage(this.rootRenderTarget,t,e,r,i,n,o,a,s,r,i,!1),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.restoreStencil(),this.restoreScissor()},n.prototype.drawSurfaceToFrameBuffer=function(t,e,r,i,n,o,a,s,l){void 0===l&&(l=!1),this.rootRenderTarget.useFrameBuffer=!0,this.rootRenderTarget.activate(),this.context.disableStencilTest(),this.context.disableScissorTest(),this.setTransform(1,0,0,1,0,0),this.globalAlpha=1,this.context.setGlobalCompositeOperation("source-over"),l&&this.context.clear(),this.context.drawImage(this.context.surface,t,e,r,i,n,o,a,s,r,i,!1),this.context.$drawWebGL(),this.rootRenderTarget.useFrameBuffer=!1,this.rootRenderTarget.activate(),this.restoreStencil(),this.restoreScissor()},n.prototype.clear=function(){this.context.pushBuffer(this),this.context.clear(),this.context.popBuffer()},n.prototype.setTransform=function(t,e,r,i,n,o){var a=this.globalMatrix;a.a=t,a.b=e,a.c=r,a.d=i,a.tx=n,a.ty=o},n.prototype.transform=function(t,e,r,i,n,o){var a=this.globalMatrix,s=a.a,l=a.b,c=a.c,h=a.d;1==t&&0==e&&0==r&&1==i||(a.a=t*s+e*c,a.b=t*l+e*h,a.c=r*s+i*c,a.d=r*l+i*h),a.tx=n*s+o*c+a.tx,a.ty=n*l+o*h+a.ty},n.prototype.useOffset=function(){0==this.$offsetX&&0==this.$offsetY||(this.globalMatrix.append(1,0,0,1,this.$offsetX,this.$offsetY),this.$offsetX=this.$offsetY=0)},n.prototype.saveTransform=function(){var t=this.globalMatrix,e=this.savedGlobalMatrix;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},n.prototype.restoreTransform=function(){var t=this.globalMatrix,e=this.savedGlobalMatrix;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.tx=e.tx,t.ty=e.ty},n.create=function(t,e){var r,i=s.pop();return i?(i.resize(t,e),(r=i.globalMatrix).a=1,r.b=0,r.c=0,r.d=1,r.tx=0,r.ty=0,i.globalAlpha=1,i.$offsetX=0,i.$offsetY=0):(i=new n(t,e)).$computeDrawCall=!1,i},n.release=function(t){s.push(t)},n.autoClear=!0,n);function n(t,e,r){var i,n=a.call(this)||this;return n.currentTexture=null,n.globalAlpha=1,n.globalTintColor=16777215,n.stencilState=!1,n.$stencilList=[],n.stencilHandleCount=0,n.$scissorState=!1,n.scissorRect=new p.Rectangle,n.$hasScissor=!1,n.$drawCalls=0,n.$computeDrawCall=!1,n.globalMatrix=new p.Matrix,n.savedGlobalMatrix=new p.Matrix,n.$offsetX=0,n.$offsetY=0,n.context=o.WebGLRenderContext.getInstance(t,e),p.nativeRender?(n.surface=r?n.context.surface:new egret_native.NativeRenderSurface(n,t,e,r),n.rootRenderTarget=null):(n.rootRenderTarget=new o.WebGLRenderTarget(n.context.context,3,3),t&&e&&n.resize(t,e),n.root=r,n.root?(n.context.pushBuffer(n),n.surface=n.context.surface,n.$computeDrawCall=!0):((i=n.context.activatedBuffer)&&i.rootRenderTarget.activate(),n.rootRenderTarget.initFrameBuffer(),n.surface=n.rootRenderTarget)),n}o.WebGLRenderBuffer=t,__reflect(t.prototype,"egret.web.WebGLRenderBuffer",["egret.sys.RenderBuffer"]);var s=[]}(p.web||(p.web={}))}(egret=egret||{}),function(E){var C,$,w,L,t;function e(){this.wxiOS10=!1,this.nestLevel=0}C=E.web||(E.web={}),$=["source-over","lighter","destination-out"],w="source-over",L=[],e.prototype.render=function(t,e,r,i){this.nestLevel++;var n=e,o=n.context;o.pushBuffer(n),n.transform(r.a,r.b,r.c,r.d,0,0),this.drawDisplayObject(t,n,r.tx,r.ty,!0),o.$drawWebGL();var a=n.$drawCalls;n.onRenderFinish(),o.popBuffer();var s=E.Matrix.create();if(r.$invertInto(s),n.transform(s.a,s.b,s.c,s.d,0,0),E.Matrix.release(s),this.nestLevel--,0===this.nestLevel){6<L.length&&(L.length=6);for(var l=L.length,c=0;c<l;c++)L[c].resize(0,0)}return a},e.prototype.drawDisplayObject=function(t,e,r,i,n){var o=0,a=t.$displayList,s=a&&!n?((t.$cacheDirty||t.$renderDirty||a.$canvasScaleX!=E.sys.DisplayList.$canvasScaleX||a.$canvasScaleY!=E.sys.DisplayList.$canvasScaleY)&&(o+=a.drawToSurface()),a.$renderNode):t.$renderDirty?t.$getRenderNode():t.$renderNode;if(t.$cacheDirty=!1,s){switch(o++,e.$offsetX=r,e.$offsetY=i,s.type){case 1:this.renderBitmap(s,e);break;case 2:this.renderText(s,e);break;case 3:this.renderGraphics(s,e);break;case 4:this.renderGroup(s,e);break;case 5:this.renderMesh(s,e);break;case 6:this.renderNormalBitmap(s,e)}e.$offsetX=0,e.$offsetY=0}if(a&&!n)return o;var l=t.$children;if(l){t.sortableChildren&&t.$sortDirty&&t.sortChildren();for(var c=l.length,h=0;h<c;h++){var u=l[h],p=void 0,d=void 0,f=void 0,g=void 0;1!=u.$alpha&&(f=e.globalAlpha,e.globalAlpha*=u.$alpha),16777215!==u.tint&&(g=e.globalTintColor,e.globalTintColor=u.$tintRGB);var m,y,v=void 0;switch(d=u.$useTranslate?(y=u.$getMatrix(),p=r+u.$x,d=i+u.$y,m=e.globalMatrix,(v=E.Matrix.create()).a=m.a,v.b=m.b,v.c=m.c,v.d=m.d,v.tx=m.tx,v.ty=m.ty,e.transform(y.a,y.b,y.c,y.d,p,d),p=-u.$anchorOffsetX,-u.$anchorOffsetY):(p=r+u.$x-u.$anchorOffsetX,i+u.$y-u.$anchorOffsetY),u.$renderMode){case 1:break;case 2:o+=this.drawWithFilter(u,e,p,d);break;case 3:o+=this.drawWithClip(u,e,p,d);break;case 4:o+=this.drawWithScrollRect(u,e,p,d);break;default:o+=this.drawDisplayObject(u,e,p,d)}f&&(e.globalAlpha=f),g&&(e.globalTintColor=g),v&&((y=e.globalMatrix).a=v.a,y.b=v.b,y.c=v.c,y.d=v.d,y.tx=v.tx,y.ty=v.ty,E.Matrix.release(v))}}return o},e.prototype.drawWithFilter=function(t,e,r,i){var n=0;if(t.$children&&0==t.$children.length&&(!t.$renderNode||0==t.$renderNode.$getRenderCount()))return n;var o,a=t.$filters,s=0!==t.$blendMode;s&&(o=(o=$[t.$blendMode])||w);var l=t.$getOriginalBounds(),c=l.x,h=l.y,u=l.width,p=l.height;if(u<=0||p<=0)return n;if(!t.mask&&1==a.length&&("colorTransform"==a[0].type||"custom"===a[0].type&&0===a[0].padding)){var d=this.getRenderCount(t);if(!t.$children||1==d)return s&&e.context.setGlobalCompositeOperation(o),e.context.$filter=a[0],t.$mask?n+=this.drawWithClip(t,e,r,i):t.$scrollRect||t.$maskRect?n+=this.drawWithScrollRect(t,e,r,i):n+=this.drawDisplayObject(t,e,r,i),e.context.$filter=null,s&&e.context.setGlobalCompositeOperation(w),n}var f,g,m=this.createRenderBuffer(u,p);return m.context.pushBuffer(m),t.$mask?n+=this.drawWithClip(t,m,-c,-h):t.$scrollRect||t.$maskRect?n+=this.drawWithScrollRect(t,m,-c,-h):n+=this.drawDisplayObject(t,m,-c,-h),m.context.popBuffer(),0<n&&(s&&e.context.setGlobalCompositeOperation(o),n++,e.$offsetX=r+c,e.$offsetY=i+h,f=E.Matrix.create(),g=e.globalMatrix,f.a=g.a,f.b=g.b,f.c=g.c,f.d=g.d,f.tx=g.tx,f.ty=g.ty,e.useOffset(),e.context.drawTargetWidthFilters(a,m),g.a=f.a,g.b=f.b,g.c=f.c,g.d=f.d,g.tx=f.tx,g.ty=f.ty,E.Matrix.release(f),s&&e.context.setGlobalCompositeOperation(w)),L.push(m),n},e.prototype.getRenderCount=function(t){var e=0,r=t.$getRenderNode();if(r&&(e+=r.$getRenderCount()),t.$children)for(var i=0,n=t.$children;i<n.length;i++){var o,a=n[i],s=a.$filters;if(s&&0<s.length)return 2;a.$children?e+=this.getRenderCount(a):(o=a.$getRenderNode())&&(e+=o.$getRenderCount())}return e},e.prototype.drawWithClip=function(t,e,r,i){var n,o=0,a=0!==t.$blendMode;a&&(n=(n=$[t.$blendMode])||w);var s=t.$scrollRect?t.$scrollRect:t.$maskRect,l=t.$mask;if(l){var c=l.$getMatrix();if(0==c.a&&0==c.b||0==c.c&&0==c.d)return o}if(l||t.$children&&0!=t.$children.length){var h=t.$getOriginalBounds(),u=h.x,p=h.y,d=h.width,f=h.height;if(d<=0||f<=0)return o;var g,m,y,v,_,b,T,C,S,x=this.createRenderBuffer(d,f);return x.context.pushBuffer(x),o+=this.drawDisplayObject(t,x,-u,-p),l&&((g=this.createRenderBuffer(d,f)).context.pushBuffer(g),(m=E.Matrix.create()).copyFrom(l.$getConcatenatedMatrix()),l.$getConcatenatedMatrixAt(t,m),m.translate(-u,-p),g.setTransform(m.a,m.b,m.c,m.d,m.tx,m.ty),E.Matrix.release(m),o+=this.drawDisplayObject(l,g,0,0),g.context.popBuffer(),x.context.setGlobalCompositeOperation("destination-in"),x.setTransform(1,0,0,-1,0,g.height),y=g.rootRenderTarget.width,v=g.rootRenderTarget.height,x.context.drawTexture(g.rootRenderTarget.texture,0,0,y,v,0,0,y,v,y,v),x.setTransform(1,0,0,1,0,0),x.context.setGlobalCompositeOperation("source-over"),g.setTransform(1,0,0,1,0,0),L.push(g)),x.context.setGlobalCompositeOperation(w),x.context.popBuffer(),0<o&&(o++,a&&e.context.setGlobalCompositeOperation(n),s&&e.context.pushMask(s.x+r,s.y+i,s.width,s.height),_=E.Matrix.create(),b=e.globalMatrix,_.a=b.a,_.b=b.b,_.c=b.c,_.d=b.d,_.tx=b.tx,_.ty=b.ty,b.append(1,0,0,-1,r+u,i+p+x.height),T=x.rootRenderTarget.width,C=x.rootRenderTarget.height,e.context.drawTexture(x.rootRenderTarget.texture,0,0,T,C,0,0,T,C,T,C),s&&x.context.popMask(),a&&e.context.setGlobalCompositeOperation(w),(S=e.globalMatrix).a=_.a,S.b=_.b,S.c=_.c,S.d=_.d,S.tx=_.tx,S.ty=_.ty,E.Matrix.release(_)),L.push(x),o}return s&&e.context.pushMask(s.x+r,s.y+i,s.width,s.height),a&&e.context.setGlobalCompositeOperation(n),o+=this.drawDisplayObject(t,e,r,i),a&&e.context.setGlobalCompositeOperation(w),s&&e.context.popMask(),o},e.prototype.drawWithScrollRect=function(t,e,r,i){var n=0,o=t.$scrollRect?t.$scrollRect:t.$maskRect;if(o.isEmpty())return n;t.$scrollRect&&(r-=o.x,i-=o.y);var a,s,l,c,h,u,p,d,f,g,m,y,v,_,b,T,C,S,x,E,$,w=e.globalMatrix,L=e.context,P=!1;return e.$hasScissor||0!=w.b||0!=w.c?e.context.pushMask(o.x+r,o.y+i,o.width,o.height):(a=w.a,s=w.d,l=w.tx,c=w.ty,h=o.x+r,u=o.y+i,p=h+o.width,d=u+o.height,$=m=g=f=void 0,$=1==a&&1==s?(f=h+l,g=u+c,m=p+l,d+c):(E=0,(_=a*p+l)<(y=a*h+l)&&(E=y,y=_,_=E),(S=a*h+l)<(T=a*p+l)&&(E=T,T=S,S=E),f=y<T?y:T,m=S<_?_:S,(b=v=s*u+c)<v&&(E=v,v=b,b=E),(x=C=s*d+c)<C&&(E=C,C=x,x=E),g=v<C?v:C,x<b?b:x),L.enableScissor(f,-$+e.height,m-f,$-g),P=!0),n+=this.drawDisplayObject(t,e,r,i),P?L.disableScissor():L.popMask(),n},e.prototype.drawNodeToBuffer=function(t,e,r,i){var n=e;n.context.pushBuffer(n),n.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.renderNode(t,e,0,0,i),n.context.$drawWebGL(),n.onRenderFinish(),n.context.popBuffer()},e.prototype.drawDisplayToBuffer=function(t,e,r){var i;e.context.pushBuffer(e),r&&e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty);var n=0;if(i=t.$renderDirty?t.$getRenderNode():t.$renderNode)switch(n++,i.type){case 1:this.renderBitmap(i,e);break;case 2:this.renderText(i,e);break;case 3:this.renderGraphics(i,e);break;case 4:this.renderGroup(i,e);break;case 5:this.renderMesh(i,e);break;case 6:this.renderNormalBitmap(i,e)}var o=t.$children;if(o)for(var a=o.length,s=0;s<a;s++){var l=o[s];switch(l.$renderMode){case 1:break;case 2:n+=this.drawWithFilter(l,e,0,0);break;case 3:n+=this.drawWithClip(l,e,0,0);break;case 4:n+=this.drawWithScrollRect(l,e,0,0);break;default:n+=this.drawDisplayObject(l,e,0,0)}}return e.context.$drawWebGL(),e.onRenderFinish(),e.context.popBuffer(),n},e.prototype.renderNode=function(t,e,r,i,n){switch(e.$offsetX=r,e.$offsetY=i,t.type){case 1:this.renderBitmap(t,e);break;case 2:this.renderText(t,e);break;case 3:this.renderGraphics(t,e,n);break;case 4:this.renderGroup(t,e);break;case 5:this.renderMesh(t,e);break;case 6:this.renderNormalBitmap(t,e)}},e.prototype.renderNormalBitmap=function(t,e){var r=t.image;r&&e.context.drawImage(r,t.sourceX,t.sourceY,t.sourceW,t.sourceH,t.drawX,t.drawY,t.drawW,t.drawH,t.imageWidth,t.imageHeight,t.rotated,t.smoothing)},e.prototype.renderBitmap=function(t,e){var r=t.image;if(r){var i,n,o,a,s,l,c=t.drawData,h=c.length,u=0,p=t.matrix,d=t.blendMode,f=t.alpha;if(p&&(i=E.Matrix.create(),a=e.globalMatrix,i.a=a.a,i.b=a.b,i.c=a.c,i.d=a.d,i.tx=a.tx,i.ty=a.ty,n=e.$offsetX,o=e.$offsetY,e.useOffset(),e.transform(p.a,p.b,p.c,p.d,p.tx,p.ty)),d&&e.context.setGlobalCompositeOperation($[d]),f==f&&(s=e.globalAlpha,e.globalAlpha*=f),t.filter){for(e.context.$filter=t.filter;u<h;)e.context.drawImage(r,c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],t.imageWidth,t.imageHeight,t.rotated,t.smoothing);e.context.$filter=null}else for(;u<h;)e.context.drawImage(r,c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],t.imageWidth,t.imageHeight,t.rotated,t.smoothing);d&&e.context.setGlobalCompositeOperation(w),f==f&&(e.globalAlpha=s),p&&((l=e.globalMatrix).a=i.a,l.b=i.b,l.c=i.c,l.d=i.d,l.tx=i.tx,l.ty=i.ty,e.$offsetX=n,e.$offsetY=o,E.Matrix.release(i))}},e.prototype.renderMesh=function(t,e){var r,i,n,o,a,s,l=t.image,c=t.drawData,h=c.length,u=0,p=t.matrix,d=t.blendMode,f=t.alpha;if(p&&(r=E.Matrix.create(),o=e.globalMatrix,r.a=o.a,r.b=o.b,r.c=o.c,r.d=o.d,r.tx=o.tx,r.ty=o.ty,i=e.$offsetX,n=e.$offsetY,e.useOffset(),e.transform(p.a,p.b,p.c,p.d,p.tx,p.ty)),d&&e.context.setGlobalCompositeOperation($[d]),f==f&&(a=e.globalAlpha,e.globalAlpha*=f),t.filter){for(e.context.$filter=t.filter;u<h;)e.context.drawMesh(l,c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],t.imageWidth,t.imageHeight,t.uvs,t.vertices,t.indices,t.bounds,t.rotated,t.smoothing);e.context.$filter=null}else for(;u<h;)e.context.drawMesh(l,c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],c[u++],t.imageWidth,t.imageHeight,t.uvs,t.vertices,t.indices,t.bounds,t.rotated,t.smoothing);d&&e.context.setGlobalCompositeOperation(w),f==f&&(e.globalAlpha=a),p&&((s=e.globalMatrix).a=r.a,s.b=r.b,s.c=r.c,s.d=r.d,s.tx=r.tx,s.ty=r.ty,e.$offsetX=i,e.$offsetY=n,E.Matrix.release(r))},e.prototype.___renderText____=function(t,e){var r=t.width-t.x,i=t.height-t.y;if(!(r<=0||i<=0)&&r&&i&&0!==t.drawData.length){var n=E.sys.DisplayList.$canvasScaleX,o=E.sys.DisplayList.$canvasScaleY,a=e.context.$maxTextureSize;a<r*n&&(n*=a/(r*n)),a<i*o&&(o*=a/(i*o)),r*=n,i*=o;var s=t.x*n,l=t.y*o;t.$canvasScaleX===n&&t.$canvasScaleY===o||(t.$canvasScaleX=n,t.$canvasScaleY=o,t.dirtyRender=!0),(s||l)&&e.transform(1,0,0,1,s/n,l/o),t.dirtyRender&&C.TextAtlasRender.analysisTextNodeAndFlushDrawLabel(t);var c=t[C.property_drawLabel];if(c&&0<c.length){for(var h,u,p,d,f,g,m=e.$offsetX,y=e.$offsetY,v=0,_=c.length;v<_;++v){u=(h=c[v]).anchorX,p=h.anchorY,d=h.textBlocks,e.$offsetX=m+u;for(var b=0,T=d.length;b<T;++b)f=d[b],0<b&&(e.$offsetX-=f.canvasWidthOffset),e.$offsetY=y+p-(f.measureHeight+(f.stroke2?f.canvasHeightOffset:0))/2,g=f.line.page,e.context.drawTexture(g.webGLTexture,f.u,f.v,f.contentWidth,f.contentHeight,0,0,f.contentWidth,f.contentHeight,g.pageWidth,g.pageHeight),e.$offsetX+=f.contentWidth-f.canvasWidthOffset}e.$offsetX=m,e.$offsetY=y}(s||l)&&e.transform(1,0,0,1,-s/n,-l/o),t.dirtyRender=!1}},e.prototype.renderText=function(t,e){var r,i,n,o,a,s,l,c,h,u,p;C.textAtlasRenderEnable?this.___renderText____(t,e):(r=t.width-t.x,i=t.height-t.y,r<=0||i<=0||!r||!i||0==t.drawData.length||(n=E.sys.DisplayList.$canvasScaleX,o=E.sys.DisplayList.$canvasScaleY,(a=e.context.$maxTextureSize)<r*n&&(n*=a/(r*n)),a<i*o&&(o*=a/(i*o)),r*=n,i*=o,s=t.x*n,l=t.y*o,t.$canvasScaleX==n&&t.$canvasScaleY==o||(t.$canvasScaleX=n,t.$canvasScaleY=o,t.dirtyRender=!0),this.wxiOS10?(this.canvasRenderer||(this.canvasRenderer=new E.CanvasRenderer),t.dirtyRender&&(this.canvasRenderBuffer=new C.CanvasRenderBuffer(r,i))):this.canvasRenderBuffer&&this.canvasRenderBuffer.context?t.dirtyRender&&this.canvasRenderBuffer.resize(r,i):(this.canvasRenderer=new E.CanvasRenderer,this.canvasRenderBuffer=new C.CanvasRenderBuffer(r,i)),this.canvasRenderBuffer.context&&(1==n&&1==o||this.canvasRenderBuffer.context.setTransform(n,0,0,o,0,0),s||l?(t.dirtyRender&&this.canvasRenderBuffer.context.setTransform(n,0,0,o,-s,-l),e.transform(1,0,0,1,s/n,l/o)):1==n&&1==o||this.canvasRenderBuffer.context.setTransform(n,0,0,o,0,0),t.dirtyRender&&(c=this.canvasRenderBuffer.surface,this.canvasRenderer.renderText(t,this.canvasRenderBuffer.context),this.wxiOS10?(c.isCanvas=!0,t.$texture=c):(h=t.$texture)?e.context.updateTexture(h,c):(h=e.context.createTexture(c),t.$texture=h),t.$textureWidth=c.width,t.$textureHeight=c.height),u=t.$textureWidth,p=t.$textureHeight,e.context.drawTexture(t.$texture,0,0,u,p,0,0,u/n,p/o,u,p),(s||l)&&(t.dirtyRender&&this.canvasRenderBuffer.context.setTransform(n,0,0,o,0,0),e.transform(1,0,0,1,-s/n,-l/o)),t.dirtyRender=!1)))},e.prototype.renderGraphics=function(t,e,r){var i,n,o,a,s,l,c,h,u=t.width,p=t.height;u<=0||p<=0||!u||!p||0==t.drawData.length||(i=E.sys.DisplayList.$canvasScaleX,n=E.sys.DisplayList.$canvasScaleY,(u*i<1||p*n<1)&&(i=n=1),t.$canvasScaleX==i&&t.$canvasScaleY==n||(t.$canvasScaleX=i,t.$canvasScaleY=n,t.dirtyRender=!0),u*=i,p*=n,i*=(o=Math.ceil(u))/u,n*=(a=Math.ceil(p))/p,u=o,p=a,this.wxiOS10?(this.canvasRenderer||(this.canvasRenderer=new E.CanvasRenderer),t.dirtyRender&&(this.canvasRenderBuffer=new C.CanvasRenderBuffer(u,p))):this.canvasRenderBuffer&&this.canvasRenderBuffer.context?t.dirtyRender&&this.canvasRenderBuffer.resize(u,p):(this.canvasRenderer=new E.CanvasRenderer,this.canvasRenderBuffer=new C.CanvasRenderBuffer(u,p)),this.canvasRenderBuffer.context&&(1==i&&1==n||this.canvasRenderBuffer.context.setTransform(i,0,0,n,0,0),(t.x||t.y)&&((t.dirtyRender||r)&&this.canvasRenderBuffer.context.translate(-t.x,-t.y),e.transform(1,0,0,1,t.x,t.y)),s=this.canvasRenderBuffer.surface,r?(this.canvasRenderer.renderGraphics(t,this.canvasRenderBuffer.context,!0),l=void 0,l=this.wxiOS10?(s.isCanvas=!0,s):(E.WebGLUtils.deleteWebGLTexture(s),e.context.getWebGLTexture(s)),e.context.drawTexture(l,0,0,u,p,0,0,u,p,s.width,s.height)):(t.dirtyRender&&(this.canvasRenderer.renderGraphics(t,this.canvasRenderBuffer.context),this.wxiOS10?(s.isCanvas=!0,t.$texture=s):(l=t.$texture)?e.context.updateTexture(l,s):(l=e.context.createTexture(s),t.$texture=l),t.$textureWidth=s.width,t.$textureHeight=s.height),c=t.$textureWidth,h=t.$textureHeight,e.context.drawTexture(t.$texture,0,0,c,h,0,0,c/i,h/n,c,h)),(t.x||t.y)&&((t.dirtyRender||r)&&this.canvasRenderBuffer.context.translate(t.x,t.y),e.transform(1,0,0,1,-t.x,-t.y)),r||(t.dirtyRender=!1)))},e.prototype.renderGroup=function(t,e){var r,i,n,o,a=t.matrix;a&&(r=E.Matrix.create(),o=e.globalMatrix,r.a=o.a,r.b=o.b,r.c=o.c,r.d=o.d,r.tx=o.tx,r.ty=o.ty,i=e.$offsetX,n=e.$offsetY,e.useOffset(),e.transform(a.a,a.b,a.c,a.d,a.tx,a.ty));for(var s,l=t.drawData,c=l.length,h=0;h<c;h++){var u=l[h];this.renderNode(u,e,e.$offsetX,e.$offsetY)}a&&((s=e.globalMatrix).a=r.a,s.b=r.b,s.c=r.c,s.d=r.d,s.tx=r.tx,s.ty=r.ty,e.$offsetX=i,e.$offsetY=n,E.Matrix.release(r))},e.prototype.createRenderBuffer=function(t,e){var r=L.pop();return r?r.resize(t,e):(r=new C.WebGLRenderBuffer(t,e)).$computeDrawCall=!1,r},t=e,C.WebGLRenderer=t,__reflect(t.prototype,"egret.web.WebGLRenderer",["egret.sys.SystemRenderer"])}(egret=egret||{}),function(d){!function(t){var c,h=(c=d.HashObject,__extends(e,c),Object.defineProperty(e.prototype,"border",{get:function(){return this._border},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width+2*this.border},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height+2*this.border},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentWidth",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this.line?this.line.page:null},enumerable:!0,configurable:!0}),e.prototype.updateUV=function(){var t=this.line;return!!t&&(this.u=t.x+this.x+ +this.border,this.v=t.y+this.y+ +this.border,!0)},Object.defineProperty(e.prototype,"subImageOffsetX",{get:function(){var t=this.line;return t?t.x+this.x+this.border:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subImageOffsetY",{get:function(){var t=this.line;return t?t.y+this.y+this.border:0},enumerable:!0,configurable:!0}),e);function e(t,e,r,i,n,o,a,s){var l=c.call(this)||this;return l._width=0,l._height=0,l._border=0,l.line=null,l.x=0,l.y=0,l.u=0,l.v=0,l.tag="",l.measureWidth=0,l.measureHeight=0,l.canvasWidthOffset=0,l.canvasHeightOffset=0,l.stroke2=0,l._width=t,l._height=e,l._border=s,l.measureWidth=r,l.measureHeight=i,l.canvasWidthOffset=n,l.canvasHeightOffset=o,l.stroke2=a,l}t.TextBlock=h,__reflect(h.prototype,"egret.web.TextBlock");var r,u=(r=d.HashObject,__extends(i,r),i.prototype.isCapacityOf=function(t){if(!t)return!1;var e=0,r=this.lastTextBlock();return r&&(e=r.x+r.width,r.y),!(e+t.width>this.maxWidth||0<this.dynamicMaxHeight&&(t.height>this.dynamicMaxHeight||t.height/this.dynamicMaxHeight<.5))},i.prototype.lastTextBlock=function(){var t=this.textBlocks;return 0<t.length?t[t.length-1]:null},i.prototype.addTextBlock=function(t,e){if(!t)return!1;if(e&&!this.isCapacityOf(t))return!1;var r=0,i=0,n=this.lastTextBlock();return n&&(r=n.x+n.width,i=n.y),t.x=r,t.y=i,(t.line=this).textBlocks.push(t),this.dynamicMaxHeight=Math.max(this.dynamicMaxHeight,t.height),!0},i);function i(t){var e=r.call(this)||this;return e.page=null,e.textBlocks=[],e.dynamicMaxHeight=0,e.maxWidth=0,e.x=0,e.y=0,e.maxWidth=t,e}t.Line=u,__reflect(u.prototype,"egret.web.Line");var n,o=(n=d.HashObject,__extends(a,n),a.prototype.addLine=function(t){if(!t)return!1;var e,r=0,i=0,n=this.lines;return 0<n.length&&(r=(e=n[n.length-1]).x,i=e.y+e.dynamicMaxHeight),t.maxWidth>this.pageWidth?(console.error("line.maxWidth = "+t.maxWidth+", this.pageWidth = "+this.pageWidth),!1):!(i+t.dynamicMaxHeight>this.pageHeight||(t.x=r,t.y=i,(t.page=this).lines.push(t),0))},a);function a(t,e){var r=n.call(this)||this;return r.lines=[],r.pageWidth=0,r.pageHeight=0,r.webGLTexture=null,r.pageWidth=t,r.pageHeight=e,r}t.Page=o,__reflect(o.prototype,"egret.web.Page");var s,l=(s=d.HashObject,__extends(p,s),p.prototype.addTextBlock=function(t){var e=this._addTextBlock(t);if(!e)return!1;t.updateUV();for(var r=!1,i=e,n=this._sortLines,o=0,a=n;o<a.length;o++)if(a[o]===i[1]){r=!0;break}return r||n.push(i[1]),this.sort(),!0},p.prototype._addTextBlock=function(t){if(!t)return null;if(t.width>this._maxSize||t.height>this._maxSize)return null;for(var e=this._sortLines,r=0,i=e.length;r<i;++r){var n=e[r];if(n.isCapacityOf(t)&&n.addTextBlock(t,!1))return[n.page,n]}var o=new u(this._maxSize);if(!o.addTextBlock(t,!0))return console.error("_addTextBlock !newLine.addTextBlock(textBlock, true)"),null;for(var a=this._pages,r=0,s=a.length;r<s;++r){var l=a[r];if(l.addLine(o))return[l,o]}var c=this.createPage(this._maxSize,this._maxSize);return c.addLine(o)?[c,o]:(console.error("_addText newPage.addLine failed"),null)},p.prototype.createPage=function(t,e){var r=new o(t,e);return this._pages.push(r),r},p.prototype.sort=function(){this._sortLines.length<=1||(this._sortLines=this._sortLines.sort(function(t,e){return t.dynamicMaxHeight<e.dynamicMaxHeight?-1:1}))},p.prototype.createTextBlock=function(t,e,r,i,n,o,a,s){var l=new h(e,r,i,n,o,a,s,this._border);return this.addTextBlock(l)?(l.tag=t,l):null},p);function p(t,e){var r=s.call(this)||this;return r._pages=[],r._sortLines=[],r._maxSize=1024,r._border=1,r._maxSize=t,r._border=e,r}t.Book=l,__reflect(l.prototype,"egret.web.Book")}(d.web||(d.web={}))}(egret=egret||{}),function(v){!function(f){f.textAtlasRenderEnable=!1,f.__textAtlasRender__=null;f.property_drawLabel="DrawLabel";var e,g=(e=v.HashObject,__extends(i,e),i.prototype.clear=function(){this.anchorX=0,this.anchorY=0,this.textBlocks.length=0},i.create=function(){var t=i.pool;return 0===t.length&&t.push(new i),t.pop()},i.back=function(t,e){var r;t&&(r=i.pool,e&&0<=r.indexOf(t)?console.error("DrawLabel.back repeat"):(t.clear(),r.push(t)))},i.pool=[],i);function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.anchorX=0,t.anchorY=0,t.textBlocks=[],t}f.DrawLabel=g,__reflect(g.prototype,"egret.web.DrawLabel");var s,m=(s=v.HashObject,__extends(t,s),t);function t(t,e){var r=s.call(this)||this;r.format=null,r.textColor=t.textColor,r.strokeColor=t.strokeColor,r.size=t.size,r.stroke=t.stroke,r.bold=t.bold,r.italic=t.italic,r.fontFamily=t.fontFamily,r.format=e,r.font=v.getFontString(t,r.format);var i=e.textColor?e.textColor:t.textColor,n=e.strokeColor?e.strokeColor:t.strokeColor,o=e.stroke?e.stroke:t.stroke,a=e.size?e.size:t.size;return r.description=r.font+"-"+a,r.description+="-"+v.toColorString(i),r.description+="-"+v.toColorString(n),o&&(r.description+="-"+2*o),r}__reflect(m.prototype,"StyleInfo");var r,n=(r=v.HashObject,__extends(o,r),o.prototype.reset=function(t,e){return this.char=t,this.styleInfo=e,this.hashCodeString=t+":"+e.description,this.charWithStyleHashCode=v.NumberUtils.convertStringToHashCode(this.hashCodeString),this.canvasWidthOffset=0,this.canvasHeightOffset=0,this.stroke2=0,this},o.prototype.measureAndDraw=function(t){var e,r,i,n,o,a,s,l,c,h,u,p=t;p&&(e=this.char,i=(r=this.styleInfo.format).textColor?r.textColor:this.styleInfo.textColor,n=r.strokeColor?r.strokeColor:this.styleInfo.strokeColor,o=r.stroke?r.stroke:this.styleInfo.stroke,a=r.size?r.size:this.styleInfo.size,this.measureWidth=this.measure(e,this.styleInfo,a),this.measureHeight=a,s=this.measureWidth,l=this.measureHeight,0<(c=2*o)&&(s+=2*c,l+=2*c),this.stroke2=c,p.width=s=Math.ceil(s)+4,p.height=l=Math.ceil(l)+4,this.canvasWidthOffset=(p.width-this.measureWidth)/2,this.canvasHeightOffset=(p.height-this.measureHeight)/2,h=Math.pow(10,3),this.canvasWidthOffset=Math.floor(this.canvasWidthOffset*h)/h,this.canvasHeightOffset=Math.floor(this.canvasHeightOffset*h)/h,(u=v.sys.getContext2d(p)).save(),u.textAlign="center",u.textBaseline="middle",u.lineJoin="round",u.font=this.styleInfo.font,u.fillStyle=v.toColorString(i),u.strokeStyle=v.toColorString(n),u.clearRect(0,0,p.width,p.height),o&&(u.lineWidth=2*o,u.strokeText(e,p.width/2,p.height/2)),u.fillText(e,p.width/2,p.height/2),u.restore())},o.prototype.measure=function(t,e,r){var i=o.chineseCharactersRegExp.test(t);if(i&&o.chineseCharacterMeasureFastMap[e.font])return o.chineseCharacterMeasureFastMap[e.font];var n=v.sys.measureText(t,e.fontFamily,r||e.size,e.bold,e.italic);return i&&(o.chineseCharacterMeasureFastMap[e.font]=n),n},o.chineseCharactersRegExp=new RegExp("^[-]$"),o.chineseCharacterMeasureFastMap={},o);function o(){var t=null!==r&&r.apply(this,arguments)||this;return t.char="",t.styleInfo=null,t.hashCodeString="",t.charWithStyleHashCode=0,t.measureWidth=0,t.measureHeight=0,t.canvasWidthOffset=0,t.canvasHeightOffset=0,t.stroke2=0,t}__reflect(n.prototype,"CharImageRender");var a,l=(a=v.HashObject,__extends(y,a),y.analysisTextNodeAndFlushDrawLabel=function(t){if(t){var e;f.__textAtlasRender__||(e=v.web.WebGLRenderContext.getInstance(0,0),f.__textAtlasRender__=new y(e,512,1)),t[f.property_drawLabel]=t[f.property_drawLabel]||[];for(var r=t[f.property_drawLabel],i=0,n=r;i<n.length;i++){var o=n[i];g.back(o,!1)}r.length=0;for(var a=t.drawData,s=[],l=0,c=a.length;l<c;l+=4){var h=a[l+0],u=a[l+1],p=a[l+2],d=a[l+3]||{};s.length=0,f.__textAtlasRender__.convertLabelStringToTextAtlas(p,new m(t,d),s),(o=g.create()).anchorX=h,o.anchorY=u,o.textBlocks=[].concat(s),r.push(o)}}},y.prototype.convertLabelStringToTextAtlas=function(t,e,r){for(var i=this.canvas,n=this.charImageRender,o=this.textBlockMap,a=0,s=t;a<s.length;a++){var l,c,h,u=s[a];n.reset(u,e),o[n.charWithStyleHashCode]?r.push(o[n.charWithStyleHashCode]):(n.measureAndDraw(i),(l=this.book.createTextBlock(u,i.width,i.height,n.measureWidth,n.measureHeight,n.canvasWidthOffset,n.canvasHeightOffset,n.stroke2))&&(r.push(l),(c=(o[n.charWithStyleHashCode]=l).page).webGLTexture||(c.webGLTexture=this.createTextTextureAtlas(c.pageWidth,c.pageHeight,!1)),h=this.webglRenderContext.context,(c.webGLTexture[v.glContext]=h).bindTexture(h.TEXTURE_2D,c.webGLTexture),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),c.webGLTexture[v.UNPACK_PREMULTIPLY_ALPHA_WEBGL]=!0,h.texSubImage2D(h.TEXTURE_2D,0,l.subImageOffsetX,l.subImageOffsetY,h.RGBA,h.UNSIGNED_BYTE,i),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1)))}},y.prototype.createTextTextureAtlas=function(t,e,r){var i,n,o=null;return(o=r?(i=v.sys.createCanvas(t,t),(n=v.sys.getContext2d(i)).fillStyle="black",n.fillRect(0,0,t,t),v.sys.createTexture(this.webglRenderContext,i)):v.sys._createTexture(this.webglRenderContext,t,e,null))&&this.textAtlasTextureCache.push(o),o},Object.defineProperty(y.prototype,"canvas",{get:function(){return this._canvas||(this._canvas=v.sys.createCanvas(24,24)),this._canvas},enumerable:!0,configurable:!0}),y);function y(t,e,r){var i=a.call(this)||this;return i.book=null,i.charImageRender=new n,i.textBlockMap={},i._canvas=null,i.textAtlasTextureCache=[],i.webglRenderContext=null,i.webglRenderContext=t,i.book=new f.Book(e,r),i}f.TextAtlasRender=l,__reflect(l.prototype,"egret.web.TextAtlasRender")}(v.web||(v.web={}))}(egret=egret||{}),function(t){var e,r;function i(t,e,r){this.gl=t,this.name=r.name,this.type=r.type,this.size=r.size,this.location=t.getAttribLocation(e,this.name),this.count=0,this.initCount(t),this.format=t.FLOAT,this.initFormat(t)}e=t.web||(t.web={}),i.prototype.initCount=function(t){switch(this.type){case 5126:case 5120:case 5121:case 5123:this.count=1;break;case 35664:this.count=2;break;case 35665:this.count=3;break;case 35666:this.count=4}},i.prototype.initFormat=function(t){switch(this.type){case 5126:case 35664:case 35665:case 35666:this.format=t.FLOAT;break;case 5121:this.format=t.UNSIGNED_BYTE;break;case 5123:this.format=t.UNSIGNED_SHORT;break;case 5120:this.format=t.BYTE}},r=i,e.EgretWebGLAttribute=r,__reflect(r.prototype,"egret.web.EgretWebGLAttribute")}(egret=egret||{}),function(t){var l,e;function s(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)||(console.log("shader not compiled!"),console.log(t.getShaderInfoLog(i))),i}function n(t,e,r){var i,n,o,a;this.vshaderSource=e,this.fshaderSource=r,this.vertexShader=s(t,t.VERTEX_SHADER,this.vshaderSource),this.fragmentShader=s(t,t.FRAGMENT_SHADER,this.fshaderSource),this.id=(i=t,n=this.vertexShader,o=this.fragmentShader,a=i.createProgram(),i.attachShader(a,n),i.attachShader(a,o),i.linkProgram(a),a),this.uniforms=function(t,e){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var o=t.getActiveUniform(e,n),a=o.name,s=new l.EgretWebGLUniform(t,e,o);r[a]=s}return r}(t,this.id),this.attributes=function(t,e){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var o=t.getActiveAttrib(e,n),a=o.name,s=new l.EgretWebGLAttribute(t,e,o);r[a]=s}return r}(t,this.id)}l=t.web||(t.web={}),n.getProgram=function(t,e,r,i){return this.programCache[i]||(this.programCache[i]=new n(t,e,r)),this.programCache[i]},n.deleteProgram=function(t,e,r,i){},n.programCache={},e=n,l.EgretWebGLProgram=e,__reflect(e.prototype,"egret.web.EgretWebGLProgram")}(egret=egret||{}),function(t){var e,r;function i(t,e,r){this.gl=t,this.name=r.name,this.type=r.type,this.size=r.size,this.location=t.getUniformLocation(e,this.name),this.setDefaultValue(),this.generateSetValue(),this.generateUpload()}e=t.web||(t.web={}),i.prototype.setDefaultValue=function(){switch(this.type){case 5126:case 35678:case 35680:case 35670:case 5124:this.value=0;break;case 35664:case 35671:case 35667:this.value=[0,0];break;case 35665:case 35672:case 35668:this.value=[0,0,0];break;case 35666:case 35673:case 35669:this.value=[0,0,0,0];break;case 35674:this.value=new Float32Array([1,0,0,1]);break;case 35675:this.value=new Float32Array([1,0,0,0,1,0,0,0,1]);break;case 35676:this.value=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},i.prototype.generateSetValue=function(){switch(this.type){case 5126:case 35678:case 35680:case 35670:case 5124:this.setValue=function(t){var e=this.value!==t;this.value=t,e&&this.upload()};break;case 35664:case 35671:case 35667:this.setValue=function(t){var e=this.value[0]!==t.x||this.value[1]!==t.y;this.value[0]=t.x,this.value[1]=t.y,e&&this.upload()};break;case 35665:case 35672:case 35668:this.setValue=function(t){this.value[0]=t.x,this.value[1]=t.y,this.value[2]=t.z,this.upload()};break;case 35666:case 35673:case 35669:this.setValue=function(t){this.value[0]=t.x,this.value[1]=t.y,this.value[2]=t.z,this.value[3]=t.w,this.upload()};break;case 35674:case 35675:case 35676:this.setValue=function(t){this.value.set(t),this.upload()}}},i.prototype.generateUpload=function(){var e=this.gl,t=this.type,r=this.location;switch(t){case 5126:this.upload=function(){var t=this.value;e.uniform1f(r,t)};break;case 35664:this.upload=function(){var t=this.value;e.uniform2f(r,t[0],t[1])};break;case 35665:this.upload=function(){var t=this.value;e.uniform3f(r,t[0],t[1],t[2])};break;case 35666:this.upload=function(){var t=this.value;e.uniform4f(r,t[0],t[1],t[2],t[3])};break;case 35678:case 35680:case 35670:case 5124:this.upload=function(){var t=this.value;e.uniform1i(r,t)};break;case 35671:case 35667:this.upload=function(){var t=this.value;e.uniform2i(r,t[0],t[1])};break;case 35672:case 35668:this.upload=function(){var t=this.value;e.uniform3i(r,t[0],t[1],t[2])};break;case 35673:case 35669:this.upload=function(){var t=this.value;e.uniform4i(r,t[0],t[1],t[2],t[3])};break;case 35674:this.upload=function(){var t=this.value;e.uniformMatrix2fv(r,!1,t)};break;case 35675:this.upload=function(){var t=this.value;e.uniformMatrix3fv(r,!1,t)};break;case 35676:this.upload=function(){var t=this.value;e.uniformMatrix4fv(r,!1,t)}}},r=i,e.EgretWebGLUniform=r,__reflect(r.prototype,"egret.web.EgretWebGLUniform")}(egret=egret||{}),function(t){var e,r;function i(){}e=t.web||(t.web={}),i.blur_frag="precision mediump float;\r\nuniform vec2 blur;\r\nuniform sampler2D uSampler;\r\nvarying vec2 vTextureCoord;\r\nuniform vec2 uTextureSize;\r\nvoid main()\r\n{\r\n    const int sampleRadius = 5;\r\n    const int samples = sampleRadius * 2 + 1;\r\n    vec2 blurUv = blur / uTextureSize;\r\n    vec4 color = vec4(0, 0, 0, 0);\r\n    vec2 uv = vec2(0.0, 0.0);\r\n    blurUv /= float(sampleRadius);\r\n\r\n    for (int i = -sampleRadius; i <= sampleRadius; i++) {\r\n        uv.x = vTextureCoord.x + float(i) * blurUv.x;\r\n        uv.y = vTextureCoord.y + float(i) * blurUv.y;\r\n        color += texture2D(uSampler, uv);\r\n    }\r\n\r\n    color /= float(samples);\r\n    gl_FragColor = color;\r\n}",i.colorTransform_frag="precision mediump float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nuniform mat4 matrix;\r\nuniform vec4 colorAdd;\r\nuniform sampler2D uSampler;\r\n\r\nvoid main(void) {\r\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n    if(texColor.a > 0.) {\r\n        // alpha\r\n        texColor = vec4(texColor.rgb / texColor.a, texColor.a);\r\n    }\r\n    vec4 locColor = clamp(texColor * matrix + colorAdd, 0., 1.);\r\n    gl_FragColor = vColor * vec4(locColor.rgb * locColor.a, locColor.a);\r\n}",i.default_vert="attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nattribute vec4 aColor;\r\n\r\nuniform vec2 projectionVector;\r\n// uniform vec2 offsetVector;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nconst vec2 center = vec2(-1.0, 1.0);\r\n\r\nvoid main(void) {\r\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\r\n   vTextureCoord = aTextureCoord;\r\n   vColor = aColor;\r\n}",i.glow_frag="precision highp float;\r\nvarying vec2 vTextureCoord;\r\n\r\nuniform sampler2D uSampler;\r\n\r\nuniform float dist;\r\nuniform float angle;\r\nuniform vec4 color;\r\nuniform float alpha;\r\nuniform float blurX;\r\nuniform float blurY;\r\n// uniform vec4 quality;\r\nuniform float strength;\r\nuniform float inner;\r\nuniform float knockout;\r\nuniform float hideObject;\r\n\r\nuniform vec2 uTextureSize;\r\n\r\nfloat random(vec2 scale)\r\n{\r\n    return fract(sin(dot(gl_FragCoord.xy, scale)) * 43758.5453);\r\n}\r\n\r\nvoid main(void) {\r\n    vec2 px = vec2(1.0 / uTextureSize.x, 1.0 / uTextureSize.y);\r\n    // TODO \r\n    const float linearSamplingTimes = 7.0;\r\n    const float circleSamplingTimes = 12.0;\r\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\r\n    vec4 curColor;\r\n    float totalAlpha = 0.0;\r\n    float maxTotalAlpha = 0.0;\r\n    float curDistanceX = 0.0;\r\n    float curDistanceY = 0.0;\r\n    float offsetX = dist * cos(angle) * px.x;\r\n    float offsetY = dist * sin(angle) * px.y;\r\n\r\n    const float PI = 3.14159265358979323846264;\r\n    float cosAngle;\r\n    float sinAngle;\r\n    float offset = PI * 2.0 / circleSamplingTimes * random(vec2(12.9898, 78.233));\r\n    float stepX = blurX * px.x / linearSamplingTimes;\r\n    float stepY = blurY * px.y / linearSamplingTimes;\r\n    for (float a = 0.0; a <= PI * 2.0; a += PI * 2.0 / circleSamplingTimes) {\r\n        cosAngle = cos(a + offset);\r\n        sinAngle = sin(a + offset);\r\n        for (float i = 1.0; i <= linearSamplingTimes; i++) {\r\n            curDistanceX = i * stepX * cosAngle;\r\n            curDistanceY = i * stepY * sinAngle;\r\n            if (vTextureCoord.x + curDistanceX - offsetX >= 0.0 && vTextureCoord.y + curDistanceY + offsetY <= 1.0){\r\n                curColor = texture2D(uSampler, vec2(vTextureCoord.x + curDistanceX - offsetX, vTextureCoord.y + curDistanceY + offsetY));\r\n                totalAlpha += (linearSamplingTimes - i) * curColor.a;\r\n            }\r\n            maxTotalAlpha += (linearSamplingTimes - i);\r\n        }\r\n    }\r\n\r\n    ownColor.a = max(ownColor.a, 0.0001);\r\n    ownColor.rgb = ownColor.rgb / ownColor.a;\r\n\r\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha) * strength * alpha * (1. - inner) * max(min(hideObject, knockout), 1. - ownColor.a);\r\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * strength * alpha * inner * ownColor.a;\r\n\r\n    ownColor.a = max(ownColor.a * knockout * (1. - hideObject), 0.0001);\r\n    vec3 mix1 = mix(ownColor.rgb, color.rgb, innerGlowAlpha / (innerGlowAlpha + ownColor.a));\r\n    vec3 mix2 = mix(mix1, color.rgb, outerGlowAlpha / (innerGlowAlpha + ownColor.a + outerGlowAlpha));\r\n    float resultAlpha = min(ownColor.a + outerGlowAlpha + innerGlowAlpha, 1.);\r\n    gl_FragColor = vec4(mix2 * resultAlpha, resultAlpha);\r\n}",i.primitive_frag="precision lowp float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nvoid main(void) {\r\n    gl_FragColor = vColor;\r\n}",i.texture_frag="precision lowp float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nuniform sampler2D uSampler;\r\n\r\nvoid main(void) {\r\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;\r\n}",i.texture_etc_alphamask_frag="precision lowp float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nuniform sampler2D uSampler;\r\nuniform sampler2D uSamplerAlphaMask;\r\nvoid main(void) {\r\nfloat alpha = texture2D(uSamplerAlphaMask, vTextureCoord).r;\r\nif (alpha < 0.0039) { discard; }\r\nvec4 v4Color = texture2D(uSampler, vTextureCoord);\r\nv4Color.rgb = v4Color.rgb * alpha;\r\nv4Color.a = alpha;\r\ngl_FragColor = v4Color * vColor;\r\n}",i.colorTransform_frag_etc_alphamask_frag="precision mediump float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nuniform mat4 matrix;\r\nuniform vec4 colorAdd;\r\nuniform sampler2D uSampler;\r\nuniform sampler2D uSamplerAlphaMask;\r\n\r\nvoid main(void){\r\nfloat alpha = texture2D(uSamplerAlphaMask, vTextureCoord).r;\r\nif (alpha < 0.0039) { discard; }\r\nvec4 texColor = texture2D(uSampler, vTextureCoord);\r\nif(texColor.a > 0.0) {\r\n // alpha\r\ntexColor = vec4(texColor.rgb / texColor.a, texColor.a);\r\n}\r\nvec4 v4Color = clamp(texColor * matrix + colorAdd, 0.0, 1.0);\r\nv4Color.rgb = v4Color.rgb * alpha;\r\nv4Color.a = alpha;\r\ngl_FragColor = v4Color * vColor;\r\n}",r=i,e.EgretShaderLib=r,__reflect(r.prototype,"egret.web.EgretShaderLib")}(egret=egret||{});var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r},__awaiter=this&&this.__awaiter||function(o,a,s,l){return new(s=s||Promise)(function(t,e){function r(t){try{n(l.next(t))}catch(t){e(t)}}function i(t){try{n(l.throw(t))}catch(t){e(t)}}function n(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(r,i)}n((l=l.apply(o,a||[])).next())})},__generator=this&&this.__generator||function(r,i){var n,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(a=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(r,s)}catch(t){e=[6,t],o=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(a){var e,t=(e=eui.Component,__extends(r,e),r.prototype.onCreationComplete=function(t){this.initComponent(),this.isSkinLoaded=!0,this.initListener(),this.initData(),this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.onCreationComplete,this)},r.prototype.initUnpackRes=function(t){var e=t.numChildren;t instanceof eui.Component&&t.skin instanceof eui.Skin&&this.initStatesUnpackRes(t.skin,t);for(var r=0;r<e;r++){var i,n,o=t.getChildAt(r);o instanceof egret.DisplayObjectContainer?this.initUnpackRes(o):o instanceof eui.Image&&("string"!=typeof(i=o.source)||""==i||(n=RES.getResourceInfo(i))&&"unpack"==n.url.substr(0,6)&&this.addUnpackRef(i,o))}},r.prototype.initStatesUnpackRes=function(t,e){for(var r=t.currentState,i=0,n=t.states;i<n.length;i++){var o=n[i];if(o.name!=r)for(var a=0,s=o.overrides;a<s.length;a++){var l,c,h,u,p=s[a];p instanceof eui.SetProperty?"source"==p.name&&"string"==typeof(c=p.value)&&""!=c&&(!(h=RES.getResourceInfo(c))||"unpack"!=h.url.substr(0,6)||(l=e[p.target])instanceof eui.Image&&this.addUnpackRef(c,l)):p instanceof eui.AddItems&&(u=(u=e[p.target])||t[p.target])instanceof eui.Image&&"string"==typeof(c=u.source)&&""!=c&&(h=RES.getResourceInfo(c))&&"unpack"==h.url.substr(0,6)&&this.addUnpackRef(c,u)}}},r.prototype.addUnpackRef=function(t,e){var r=this._unpackDic[t];r?r.push(e):this._unpackDic[t]=[e]},r.prototype.addedToStage=function(t){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this)},r.prototype.removeFromStage=function(t){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this)},r.prototype.initComponent=function(){},r.prototype.initData=function(){this.onStageResize();var t=this._unpackDic;for(var e in t){if(!RES.getRes(e)){var r=t[e];if(r)for(var i=0,n=r;i<n.length;i++){var o=n[i];o.source=null,o.source=e}}a.LoaderManager.instance.addGroupRef(e)}},Object.defineProperty(r.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),r.prototype.initListener=function(){},r.prototype.onStageResize=function(){},r.prototype.registerNotify=function(t,e,r){void 0===r&&(r=null),r=r||this,this._notifyDic[t]={callBack:e,thisObject:r},a.NotifyManager.registerNotify(t,e,r)},r.prototype.unRegisterNotify=function(t,e,r){void 0===r&&(r=null),r=r||this;var i=this._notifyDic[t];i&&i.callback==e&&i.thisObject==r&&delete this._notifyDic[t],a.NotifyManager.unRegisterNotify(t,e,r)},r.prototype.unRegisterAllNotify=function(){var t,e=this._notifyDic;for(var r in e)(t=e[r])&&a.NotifyManager.unRegisterNotify(r,t.callBack,t.thisObject),delete e[r];this._notifyDic={}},r.prototype.dispatch=function(t,e){void 0===e&&(e=null),a.NotifyManager.sendNotification(t,e)},r.prototype.addEvent=function(t,e,r,i){void 0===i&&(i=null),i=i||this;var n={};n.target=t,n.type=e,n.callBack=r,n.thisObject=i,t&&(t.addEventListener(e,r,i),this._eventDic[t.hashCode+e]=n)},r.prototype.addClickEvent=function(t,e,r){void 0===r&&(r=null);var i,n,o=this,a=o._eventDic,s=1,l=1;r=r||o,t instanceof eui.Group&&(t.touchChildren=!1),t instanceof egret.DisplayObject&&(0==t.anchorOffsetX&&0==t.anchorOffsetY&&(i=t.width/2,n=t.height/2,t.anchorOffsetX=i,t.anchorOffsetY=n,t.x+=i,t.y+=n),s=t.scaleX,l=t.scaleY);var c={};c.target=t,c.scaleX=s,c.scaleY=l,c.type=egret.TouchEvent.TOUCH_BEGIN,c.thisObject=r,c.callFunc=o.onTouchBegin,c.thisCall=o,t&&(t.addEventListener(c.type,o.onTouchBegin,o),a[t.hashCode+c.type]=c);var h={};h.target=t,h.scaleX=s,h.scaleY=l,h.type=egret.TouchEvent.TOUCH_END,h.callBack=e,h.thisObject=r,h.callFunc=o.onTouchEnd,h.thisCall=o,t&&(t.addEventListener(h.type,o.onTouchEnd,o),a[t.hashCode+h.type]=h);var u={};u.target=t,u.scaleX=s,u.scaleY=l,u.type=egret.TouchEvent.TOUCH_TAP,u.callBack=e,u.thisObject=r,u.callFunc=o.onTouchEnd,u.thisCall=o,t&&(t.addEventListener(u.type,o.onTouchEnd,o),a[t.hashCode+u.type]=u);var p={};p.target=t,p.scaleX=s,p.scaleY=l,p.type=egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,p.thisObject=r,p.callFunc=o.onTouchReleaseOutSide,p.thisCall=o,t&&(t.addEventListener(p.type,o.onTouchReleaseOutSide,o),a[t.hashCode+p.type]=p);var d={};d.target=t,d.scaleX=s,d.scaleY=l,d.type=egret.TouchEvent.TOUCH_CANCEL,d.thisObject=r,d.callFunc=o.onTouchReleaseOutSide,d.thisCall=o,t&&(t.addEventListener(d.type,o.onTouchReleaseOutSide,o),a[t.hashCode+d.type]=p)},r.prototype.onTouchBegin=function(t){var e=t.target,r=e.hashCode,i=this._eventDic[r+t.type];this._touchBeginTaret=e,egret.Tween.removeTweens(e),egret.Tween.get(e).to({scaleX:.9*i.scaleX,scaleY:.9*i.scaleY},50),this.loadAndPlayEffect("SOUND_DIANJI")},r.prototype.onTouchEnd=function(t){var e,r,i,n=t.target,o=this._eventDic;this._touchBeginTaret==n&&(this._touchBeginTaret=null,r=(e=o[n.hashCode+t.type]).scaleX,i=e.scaleY,egret.Tween.get(n).to({scaleX:r,scaleY:i},50).call(function(){for(var t in o){var e=o[t];e.target==n&&e.type==egret.TouchEvent.TOUCH_END&&e.callBack.call(e.thisObject,n)}},this))},r.prototype.onTouchReleaseOutSide=function(t){var e;this._touchBeginTaret==t.target&&(this._touchBeginTaret=null,(e=this._eventDic[t.target.hashCode+t.type])&&(t.target.scaleX=e.scaleX,t.target.scaleY=e.scaleY))},r.prototype.removeAllEvent=function(){var t,e,r=this._eventDic;for(var i in r)null!=(e=(t=r[i]).target)&&(t.type!=egret.TouchEvent.TOUCH_TAP||e instanceof egret.Stage||(null!=t.scaleX&&(e.scaleX=t.scaleX),null!=t.scaleY&&(e.scaleY=t.scaleY)),e.removeEventListener(t.type,t.callBack,t.thisObject),e.removeEventListener(t.type,t.callFunc,t.thisCall)),delete r[i];this._eventDic={}},r.prototype.updateTitle=function(t,e){t||0<e?a.NotifyManager.sendNotification(a.NotifyConstLogin.UPDATE_MODULE_TITLE,{title:t,ruleId:e}):t||null!=e||a.NotifyManager.sendNotification(a.NotifyConstLogin.UPDATE_MODULE_TITLE,{ruleId:0})},r.prototype.loadAndPlayEffect=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1),a.SoundManager.getInstance().loadAndPlayEffect(t,e,r)},r.prototype.stopSoundEffect=function(t){a.SoundManager.getInstance().stopSoundEffect(t)},r.prototype.addUnpackRes=function(t){var e=this._unpackDynamic;if("string"==typeof t)e[t]||(e[t]=!0,a.LoaderManager.instance.addGroupRef(t));else for(var r=0,i=t;r<i.length;r++){var n=i[r];e[n]||(e[n]=!0,a.LoaderManager.instance.addGroupRef(n))}},r.prototype.destoryUnpackRes=function(){for(var t in this._unpackDic)a.LoaderManager.instance.destoryGroup(t);for(var t in this._unpackDynamic)a.LoaderManager.instance.destoryGroup(t);this._unpackDynamic={}},r.prototype.dispose=function(t){void 0===t&&(t=!1),this.destoryUnpackRes(),this.removeAllEvent(),this.unRegisterAllNotify(),this._touchBeginTaret=null,this._data=null,this.parent&&this.parent.removeChild(this),a.ModuleManager.openPanelFromBattle&&(a.ModuleManager.openPanelFromBattle=!1)},r);function r(){var t=e.call(this)||this;return t._eventDic={},t._notifyDic={},t._unpackDic={},t._unpackDynamic={},t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.onCreationComplete,t),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addedToStage,t),t}a.UIComponent=t,__reflect(t.prototype,"qmr.UIComponent")}(qmr=qmr||{}),function(i){var e,t=(e=i.UIComponent,__extends(r,e),Object.defineProperty(r.prototype,"groupName",{get:function(){return this._groupName},set:function(t){this._groupName=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"qmrSkinName",{set:function(t){this._qmrSkinName=t},enumerable:!0,configurable:!0}),r.prototype.initComponent=function(){e.prototype.initComponent.call(this),this.resetPos(),this.initUnpackRes(this)},r.prototype.updateGuide=function(){},r.prototype.resetPos=function(){(this.isPopupEffect||this.isCenter)&&(this.anchorOffsetX=this.width>>1,this.anchorOffsetY=(this.height>>1)+this.offsetY,this.x=i.StageUtil.stageWidth>>1,this.y=i.StageUtil.stageHeight>>1)},r.prototype.initListener=function(){this.numChildren,this.registerNotify(i.StageUtil.STAGE_RESIZE,this.onStageResize,this),e.prototype.initListener.call(this)},r.prototype.getEffective=function(t,e){return!!this.isShow||!(this.useTime&&t-this.useTime>=e)},r.prototype.onPageBgCloseView=function(){this.hide()},r.prototype.addedToStage=function(t){e.prototype.addedToStage.call(this,t),egret.callLater(this.popupEffect,this)},r.prototype.onStageResize=function(t){var e=this;e.isPopupEffect||e.isCenter||(e.width=i.StageUtil.stageWidth,1400<i.StageUtil.stageHeight&&e.needAdaptStatusBar?(e.height=i.StageUtil.stageHeight-50,e.y=50):(e.height=i.StageUtil.stageHeight,e.y=0)),e.resetPos(),e.layout(),e.maskSprite&&e.maskSprite.onStageResize()},r.prototype.show=function(t){this.data=t,this.isSkinLoaded?(this.initListener(),egret.callLater(this.initData,this)):this._qmrSkinName&&(this.skinName=this._qmrSkinName),this.isShow=!0},Object.defineProperty(r.prototype,"isShow",{get:function(){return this._isShow},set:function(t){this._isShow=t},enumerable:!0,configurable:!0}),r.prototype.layout=function(){},r.prototype.getComponentGlobalPoint=function(t){var e=this[t];return e?e.parent?e.parent.localToGlobal(e.x,e.y):e.localToGlobal(e.x,e.y):{x:0,y:0}},r.prototype.hide=function(){this.isPopupEffect?this.closeEffect():i.ModuleManager.hideModule(this)},r.prototype.popupEffect=function(){var t,e,r=this;r.isPopupEffect&&(r.alpha=.2,r.scaleX=.2,r.scaleY=.2,e=r.openPos?(t=r.openPos.x,r.openPos.y):(t=i.StageUtil.stageWidth>>1,i.StageUtil.stageHeight>>1),egret.Tween.get(r).to({scaleX:1,scaleY:1,alpha:1,x:t,y:e},200,egret.Ease.backOut).call(r.doOpenOver,r))},r.prototype.closeEffect=function(){var t=0,e=0,e=this._closePos?(t=this._closePos.x,this._closePos.y):(t=i.StageUtil.stageWidth>>1,i.StageUtil.stageHeight>>1);egret.Tween.get(this).to({scaleX:.3,scaleY:.3,alpha:0,x:t,y:e},180,egret.Ease.cubicOut).call(this.doCloseOver,this)},r.prototype.doOpenOver=function(){},r.prototype.doCloseOver=function(){i.ModuleManager.hideModule(this)},Object.defineProperty(r.prototype,"closePos",{get:function(){return this._closePos},set:function(t){this._closePos=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"openPos",{get:function(){return this._openPos},set:function(t){this._openPos=t},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){e.prototype.dispose.call(this),this.isShow=!1,this.useTime=egret.getTimer(),this.title&&this.updateTitle("",0);var t=this.groupName;null!=t&&""!=t&&i.LoaderManager.instance.destoryGroup(t)},r.prototype.closeView=function(){i.ModuleManager.hideModule(this)},r);function r(){var t=e.call(this)||this;return t.isClickHide=!0,t.isNeedMask=!1,t.isNeedAlpha0Mask=!1,t.isPopupEffect=!1,t.isCenter=!1,t.needAdaptStatusBar=!0,t._isShow=!1,t.offsetY=0,t}i.SuperBaseModule=t,__reflect(t.prototype,"qmr.SuperBaseModule")}(qmr=qmr||{}),function(l){var t=(Object.defineProperty(e.prototype,"canResizeStage",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.reqLogin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.setLoadingStatus("..."),console.log(""),[4,this.login()];case 1:return t.sent(),console.log(""),l.PlatformConfig.platformId!=l.PlatformEnum.P_SLOGAME_DEBUG&&l.MarkPointManager.loginBeforeSetPoint(l.PointEnum.SDK_LOGIN),[2]}})})},e.prototype.getPullServerListUrl=function(){var t=l.PlatformConfig.isTSVersion?1:0;return(l.PlatformConfig.isTSVersion?this.tsServerListServer:this.serverListServer)+"?account="+l.GlobalConfig.account+"&ts="+t+"&sid="+l.PlatformConfig.platformId},e.prototype.getCheckAccountValidityUrl=function(s){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a;return __generator(this,function(t){return e=l.GlobalConfig.account,r=l.GlobalConfig.token,i=(s/1e3|0)+"",n=l.GlobalConfig.sid,o=l.Md5Util.getInstance().hex_md5(encodeURI(e)+n+r+i+l.GlobalConfig.loginKey),a=l.WebBrowerUtil.model||"none",l.GlobalConfig.uid,[2,this.loginServerUrl+"?account="+e+"&token="+r+"&time="+i+"&serverId="+n+"&unverifysvr=0&sign="+o+"&clientVer="+l.GlobalConfig.appVersion+"&deviceUID="+a]})})},e.prototype.reqPay=function(r){var i=this,t=i.rechargeOrderIdServer+"?account="+l.GlobalConfig.uid+"&serverId="+l.GlobalConfig.sid;console.log(": "+t),l.HttpRequest.sendGet(t,function(t){console.log(": "+JSON.stringify(t));var e=JSON.parse(t);(i.orderResultData=e)&&0==e.ret&&(i.orderId=e.orderId,console.log(":"+i.orderId),i.pay(r))},i)},e.prototype.setLoadingProgress=function(t){},e.prototype.logout=function(){},e.prototype.reportRegister=function(){},e.prototype.reportLogin=function(){},e.prototype.reportUpLevel=function(){},e.prototype.reportFightPower=function(t){},e.prototype.shareGame=function(t,e,r){},e.prototype.onShareBack=function(){},e.prototype.share=function(){},e.prototype.addToDesk=function(){},e.prototype.reloadGame=function(t){window.location&&window.location.reload?window.location.reload():l.TipManagerCommon.getInstance().createCommonColorTip("")},e.prototype.setLoadingStatus=function(t){t=t||"";var e=window.showPreLoading;e&&e(t),t||this.firstLoadBgHide||!window.EgretSubPackageLoading||(this.firstLoadBgHide=!0,window.EgretSubPackageLoading.instance.removePreLoading())},e.prototype.chatDataPost=function(t,e,r,i,n,o,a){void 0===o&&(o=""),void 0===a&&(a=0)},e.prototype.initLoginServer=function(){this.loginServer=l.GlobalConfig.loginServer,this.updateLoginServer()},Object.defineProperty(e.prototype,"webSocketProtoco",{get:function(){return"https:"==this.httpProtoco?"wss":"ws"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markPointPort",{get:function(){return"https:"==this.httpProtoco?2231:2230},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpProtoco",{get:function(){var t=window.location.protocol;return t||"https:"},enumerable:!0,configurable:!0}),e.prototype.updateLoginServer=function(){this.loginServerUrl=this.joinParamsURL(l.PlatformUrlConsont.LOGIN_URL,this.loginServer),this.rechargeOrderIdServer=this.joinParamsURL(l.PlatformUrlConsont.ORDER_URL,this.loginServer)},Object.defineProperty(e.prototype,"reqRoute",{get:function(){return"android"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appIdNum",{get:function(){return l.Int64Util.getNumber(l.PlatformConfig.appIdStr)},enumerable:!0,configurable:!0}),e.prototype.initServerUrl=function(){var t=this;t.serverListServer=t.joinParamsURL(l.PlatformUrlConsont.SVRLISTOP_URL),t.lastLoginServerReqUrl=t.joinParamsURL(l.PlatformUrlConsont.LASTLOGIN_URL),t.tsServerListServer=t.joinParamsURL(l.PlatformUrlConsont.SVRLISTOP_URL,l.PlatformConfig.ts_serverDomain),t.tsLastLoginServerReqUrl=t.joinParamsURL(l.PlatformUrlConsont.LASTLOGIN_URL,l.PlatformConfig.ts_serverDomain),t.dirtyWordCheckUrl=t.joinParamsURL(l.PlatformUrlConsont.WORD_URL),t.NoticeUrl=t.joinParamsURL(l.PlatformUrlConsont.NOTICE_URL,l.PlatformConfig.ossDoamin),t.verifyUrl=t.joinParamsURL(l.PlatformUrlConsont.VERIFY_URL),t.initMarkPointUrl()},e.prototype.initMarkPointUrl=function(){this.markPointUrl=this.httpProtoco+"//"+l.PlatformConfig.markPointDomain+":"+this.markPointPort,this.markPointUrlBeforeLogin=this.httpProtoco+"//"+l.PlatformConfig.markPointDomain+":"+this.markPointPort+"/before"},e.prototype.joinParamsURL=function(t,e){void 0===e&&(e="");var r=this.httpProtoco;""==e&&(e=l.PlatformConfig.serverDomain);var i=this.reqRoute;return l.StringUtilsBase.getmsg(t,r,e,l.PlatformConfig.platformSign,i)},e);function e(){this.ltServerDomain="xyws-sdk.dyhyyx.com",this.initGetOption(),this.initServerUrl()}l.BasePlatform=t,__reflect(t.prototype,"qmr.BasePlatform")}(qmr=qmr||{}),function(h){var i,t=(i=egret.Bitmap,__extends(e,i),e.prototype.setIsDirLoad=function(t){this.isDirLoad=t},e.prototype.getIsDirLoad=function(){return this.isDirLoad},e.prototype.setActs=function(t){this.actList=t.split(",")},e.prototype.containsAct=function(t){var e=this.actList;if(0==e.length)return!0;for(var r=0,i=e;r<i.length;r++)if(i[r]==t)return!0;return!1},e.prototype.load=function(o,a,s){void 0===s&&(s=-1);var l=this,c=h.AnimateManager.getInstance();l.curFrame=0,"168_skill"!=a&&"168_skill2"!=a||(a="168_idle"),l.animateData&&l.resName&&c.dispos(l.resName),l.resName=l.isGray?a+"_g":a;var t,e,r,i=c.getAnimalData(l.resName,l.isDirLoad?-1:s);i?(l.animateData=i,l.callBack&&egret.callLater(l.callBack,l.thisObject,!0,a)):("20100_idle"==a&&(o=h.PlatformConfig.useCdnRes?h.PlatformConfig.webUrl+"resourceLogin/animation/":"resourceLogin/animation/"),t=function(i){function t(t,e){var r;t?(r=l.isGray?a+"_g":a,c.parseSpriteSheet(r,e,i,t,s),r==l.resName&&(l.animateData=c.getAnimalData(r,s)),l.callBack&&egret.callLater(l.callBack,l.thisObject,!1,a)):l.reset()}var e,r,n;i?(e=i.harf?"_f.png":".png",r=o+(l.isGray?a+"_g"+e:a+e),(n=RES.getRes(r))?(h.LoaderManager.instance.removeGroupRef(r),t(n,r)):h.ResManager.getRes(r,t,l,h.LoadPriority.IMMEDIATELY,RES.ResourceItem.TYPE_IMAGE)):l.reset()},l.isBody&&(l.texture=RES.getRes("preloading_defaultBody_png"),l.x=-l.texture.textureWidth/2,l.y=-l.texture.textureHeight),e=o+a+".json",(r=RES.getRes(e))?t(r):h.ResManager.getRes(e,t,l,h.LoadPriority.IMMEDIATELY,RES.ResourceItem.TYPE_JSON))},e.prototype.reset=function(){this.animateData&&(this.texture=null,this.animateData=null),this.curFrame=0},e.prototype.render=function(t){this.curFrame=t;var e,r,i,n=this,o=n.animateData;null!=o&&(e=n._scale,r=o.getOffset(t),i=o.getTextureByFrame(t),n.texture=i,r&&(n.x=r.x*e+n._offsetX,n.y=r.y*e+n._offsetY,o.halfTexture?(n.width=r.w,n.height=r.h):i&&(n.width=i.textureWidth,n.height=i.textureHeight)),0<n._effectWidth?o.halfTexture?n.scaleX=n._effectWidth/r.w:n.scaleX=n._effectWidth/i.textureWidth:n.scaleX=n.scaleY=e)},Object.defineProperty(e.prototype,"offsetX",{set:function(t){this._offsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{set:function(t){this._offsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{set:function(t){this._scale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectWidth",{get:function(){return this._effectWidth},set:function(t){this._effectWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstFrameHeight",{get:function(){var t=this.animateData;return t?t.getTextureByFrame(1).textureHeight:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalFrames",{get:function(){var t=this.animateData;return null!=t?t.totalFrames:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameRate",{get:function(){var t=this.animateData;return null!=t?t.frameRate:0},enumerable:!0,configurable:!0}),e.prototype.dispos=function(){this.curFrame=0,this.parent&&(this.reset(),h.AnimateManager.getInstance().dispos(this.resName),this.parent.removeChild(this))},e);function e(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=i.call(this)||this;return r._scale=1,r._offsetX=0,r._offsetY=0,r._effectWidth=0,r.callBack=t,r.thisObject=e,r.isDirLoad=!1,r.actList=[],r.isBody=!1,r.pixelHitTest=!0,r.offsetX=0,r.offsetY=0,r.curFrame=0,r}h.AnimateClip=t,__reflect(t.prototype,"qmr.AnimateClip")}(qmr=qmr||{}),function(t){var e=(r.prototype.merge=function(t,e){if(void 0===e&&(e=1),t&&t.hasOwnProperty("d")){var r=t.d;this.key||(this.key=t.key);var i=this.d;for(var n in i||(i=new Object,this.d=i),r){var o=r[n];"number"==typeof o?(i[n]||(i[n]=0),o=o||0,i[n]=parseFloat(i[n])+o*e):("string"==typeof o?(i[n]||(i[n]=""),o=o||""):"boolean"==typeof o&&(o=o||!1),i[n]=o)}}},r.prototype.setRate=function(t){var e=this.d;for(var r in e){var i=e[r];"number"==typeof i&&(i*=t,e[r]=i)}},r);function r(t){this.d=t}t.BaseBean=e,__reflect(e.prototype,"qmr.BaseBean")}(qmr=qmr||{}),function(t){var e,r=(e=t.SuperBaseModule,__extends(i,e),i);function i(){var t=e.call(this)||this;return t.qmrSkinName="LoginViewSkin",t}t.LoginViewUI=r,__reflect(r.prototype,"qmr.LoginViewUI")}(qmr=qmr||{}),function(t){var e,r=(e=t.SuperBaseModule,__extends(i,e),i);function i(){var t=e.call(this)||this;return t.qmrSkinName="ServerListViewSkin",t}t.ServerListSelectUI=r,__reflect(r.prototype,"qmr.ServerListSelectUI")}(qmr=qmr||{}),function(i){var t=(e.prototype.initListeners=function(){},e.prototype.dispatch=function(t,e){void 0===e&&(e=null),i.NotifyManager.sendNotification(t,e)},e.prototype.registerNotify=function(t,e,r){i.NotifyManager.registerNotify(t,e,r)},e.prototype.unRegisterNotify=function(t,e,r){i.NotifyManager.unRegisterNotify(t,e,r)},e);function e(){this.initListeners()}i.BaseNotify=t,__reflect(t.prototype,"qmr.BaseNotify")}(qmr=qmr||{}),function(l){var t=(e.prototype.initListeners=function(){},e.prototype.sendCmd=function(t,e,r){void 0===r&&(r=!1),l.Rpc.getInstance().sendCmd(t,e,r)},e.prototype.dispatch=function(t,e){void 0===e&&(e=null),l.NotifyManager.sendNotification(t,e)},e.prototype.registerNotify=function(t,e,r){l.NotifyManager.registerNotify(t,e,r)},e.prototype.unRegisterNotify=function(t,e,r){l.NotifyManager.unRegisterNotify(t,e,r)},e.prototype.rpc=function(t,e,r,i,n,o,a,s){void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=!1),l.Rpc.getInstance().rpcCMD(t,e,r,i,n,o,a,s)},e.prototype.addSocketListener=function(t,e,r,i){void 0===i&&(i=!1),l.Rpc.getInstance().addSocketListener(t,e,r,i)},e.prototype.removeSocketListener=function(t,e,r){l.Rpc.getInstance().removeSocketListener(t,e,r)},e.prototype.loadAndPlayEffect=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1),l.SoundManager.getInstance().loadAndPlayEffect(t,e,r)},e.prototype.checIsLock=function(t){if(!this._reqDic)return!1;var e=this._reqDic.has(t)?this._reqDic.get(t):0;return egret.getTimer()<e},e.prototype.setReqLock=function(t,e){void 0===e&&(e=15e3),this._reqDic||(this._reqDic=new l.Dictionary);var r=egret.getTimer()+e;this._reqDic.set(t,r)},e.prototype.resetLock=function(){this._reqDic&&this._reqDic.clear()},e.prototype.removeAllListener=function(){this.resetLock()},e);function e(){this.initListeners()}l.BaseController=t,__reflect(t.prototype,"qmr.BaseController")}(qmr=qmr||{}),function(t){var e=(Object.defineProperty(r.prototype,"values",{get:function(){return this._values},set:function(t){this._values=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"keys",{get:function(){return this._keys},set:function(t){this._keys=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t,e){var r=this.indexOf(t);0<=r?this._values[r]=e:(this._keys.push(t),this._values.push(e))},r.prototype.setConf=function(t,e){this._keys.push(t),this._values.push(e)},r.prototype.indexOf=function(t){var e=this._keys.indexOf(t);return 0<=e?e:(t=t instanceof String?Number(t):t instanceof Number?t.toString():t,this._keys.indexOf(t))},r.prototype.get=function(t){var e=this.indexOf(t);return e<0?null:this._values[e]},r.prototype.has=function(t){return 0<=this.indexOf(t)},Object.defineProperty(r.prototype,"length",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),r.prototype.remove=function(t){var e=this.indexOf(t);return 0<=e&&(this._keys.splice(e,1),this._values.splice(e,1),!0)},r.prototype.clear=function(){this._values.length=0,this._keys.length=0},r);function r(){this._values=[],this._keys=[]}t.Dictionary=e,__reflect(e.prototype,"qmr.Dictionary")}(qmr=qmr||{}),function(d){var a,t=(a=egret.DisplayObjectContainer,__extends(e,a),e.prototype.addToStage=function(){this.setIsStopped(!1),this.render()},e.prototype.removeToStage=function(){this.setIsStopped(!0)},Object.defineProperty(e.prototype,"isNoRendering",{get:function(){return this._isNoRendering},set:function(t){this._isNoRendering=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGray",{get:function(){return this._isGray},set:function(t){this._isGray=t},enumerable:!0,configurable:!0}),e.prototype.setIsDirLoad=function(t){this.isDirLoaded=t;var e=this.partDic;for(var r in e)e[r].setIsDirLoad(t)},e.prototype.addPartAt=function(t,e,r,i,n,o,a){void 0===r&&(r=-1),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===a&&(a=!0),e&&(this.addPartTo(t,e,r,i,n,o),t==d.ActorPart.BODY&&a&&(this.partDic[d.ActorPart.DEFAULT]||(this.addPartTo(d.ActorPart.DEFAULT,168,r,i,n,o),this.partDic[d.ActorPart.DEFAULT].offsetY=-85)))},e.prototype.addPartTo=function(t,e,r,i,n,o){void 0===r&&(r=-1),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===o&&(o=null);var a,s=this,l=s.act,c=s.partDic[t];s.partIdDic[t]=e,s.dir=i,c?(-1!=r?s.addChildAt(c,r):s.addChild(c),c.setIsDirLoad(n),c.containsAct(l)||(l=t==d.ActorPart.HORSE?d.Status.IDLE_RIDE:d.Status.IDLE)):(c=t==d.ActorPart.BODY?new d.AnimateClip(s.onLoaded,s):t==d.ActorPart.DEFAULT?new d.AnimateClip(s.onLoadedDefault,s):t==d.ActorPart.WING?new d.AnimateWing(s.onLoadedOther,s):new d.AnimateClip(s.onLoadedOther,s),-1!=r?s.addChildAt(c,r):s.addChild(c),c.containsAct(l)||(l=t==d.ActorPart.HORSE?d.Status.IDLE_RIDE:d.Status.IDLE),s.partDic[t]=c),a=d.ActorPartResourceDic.getInstance().partDic[t],c.isGray=s.isGray,c.load(a||s.resourcePath,e+"_"+l,d.DirUtil.getDir(i))},e.prototype.setPartVisible=function(t,e){this.partDic[t].visible=e},e.prototype.removePart=function(t){var e=this.partDic[t];e&&(e.dispos(),delete this.partDic[t],delete this.partIdDic[t])},e.prototype.getPart=function(t){return void 0===t&&(t=d.ActorPart.BODY),this.partDic[t]},e.prototype.setPartActs=function(t,e){var r,i=this.partDic;for(var n in i)parseInt(n)!=t||(r=i[t])&&r.setActs(e);-1<e.indexOf(",")?this.act=e.split(",")[0]:this.act=e},e.prototype.gotoAndPlay=function(t,e,r,i,n){void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=!1);var o=this;if(o.loopCallBack=r,o.loopThisObject=i,n||o.act!=t){o.actDic[t]=!1,o.act=t,o.dir=e,o.currentFrame=1;var a=Math.abs(o.scaleX);o.scaleX=e<=5?a:-a,o.act==d.Status.DEAD&&(e=-1);var s=o.partDic,l=o.partIdDic;for(var c in o.setIsStopped(!0),s){var h,u,p=s[c];p&&(h=o.act,p.containsAct(h)||(h=parseInt(c)==d.ActorPart.HORSE?d.Status.IDLE_RIDE:d.Status.IDLE),u=d.ActorPartResourceDic.getInstance().partDic[c]||o.resourcePath,p.load(u,l[c]+"_"+h,d.DirUtil.getDir(e)))}}},e.prototype.clearCallBack=function(){this.loopCallBack=null},e.prototype.changeDir=function(t){if(this.dir!=t){this.dir=t;var e=Math.abs(this.scaleX);this.scaleX=t<=5?e:-e;var r=this.partDic,i=this.partIdDic;for(var n in r){var o,a,s=r[n];s&&(o=this.act,s.containsAct(o)||(o=parseInt(n)==d.ActorPart.HORSE?d.Status.IDLE_RIDE:d.Status.IDLE),a=d.ActorPartResourceDic.getInstance().partDic[n]||this.resourcePath,s.load(a+i[n]+"/",i[n]+"_"+o,d.DirUtil.getDir(t)))}}},e.prototype.gotoAndStop=function(t){this.currentFrame=t,this.render(),this.setIsStopped(!0)},e.prototype.onLoadedDefault=function(t,e){var r=this.partDic[d.ActorPart.DEFAULT];r&&(this.totalFrame=r.totalFrames,this.frameRate=r.frameRate,this.setIsStopped(!1))},e.prototype.onLoadedOther=function(t){this.partDic[d.ActorPart.DEFAULT]&&(this.removePart(d.ActorPart.DEFAULT),this.totalFrame=1),t||this.changeDir(this.dir)},e.prototype.onLoaded=function(t,e){var r,i=this;i.removePart(d.ActorPart.DEFAULT),-1!=e.indexOf(i.act)&&((r=i.partDic[d.ActorPart.BODY])?(i.totalFrame=r.totalFrames,i.frameRate=r.frameRate):i.totalFrame=0,0<i.totalFrame?(i.actDic[i.act]=!0,1==i.totalFrame?i.gotoAndStop(1):i.setIsStopped(!1),i.loadCallBack&&i.loadCallBack.call(i.loadThisObject)):i.gotoAndPlay(i.act,i.dir))},Object.defineProperty(e.prototype,"firstBodyFrameHeight",{get:function(){var t=this.partDic[d.ActorPart.BODY];return t?t.firstFrameHeight:0},enumerable:!0,configurable:!0}),e.prototype.registerFrameEvent=function(t,e,r){this.eventDic[t]={callBack:e,thisObject:r}},e.prototype.unRegisterFrameEvent=function(t){var e=this.eventDic;e[t]&&(e[t]=null,delete e[t])},e.prototype.clearFrameEvent=function(){var t=this.eventDic;for(var e in t)t[e]=null,delete t[e]},e.prototype.advanceTime=function(t){var e=this;if(e.isNoRendering)return e.gotoAndStop(1),!1;var r=t-e.lastTime;e.lastTime=t;var i=e.frameIntervalTime,n=e.passedTime+r;e.passedTime=n%i;var o=n/i;if(o<1)return!1;for(e.render();1<=o;)o--,e.currentFrame++,e.actDic[e.act]&&e.checkFrameEvent();return!1},e.prototype.checkFrameEvent=function(){var t=this.eventDic[this.currentFrame];t&&t.callBack&&t.callBack.call(t.thisObject)},e.prototype.render=function(){var t=this;if(0<t.totalFrame&&(t.currentFrame>t.totalFrame&&(t.currentFrame=1,t.loopCallBack&&t.loopCallBack.call(t.loopThisObject)),1==t.totalFrame||t.stage)){var e=t.partDic,r=t.currentFrame;for(var i in e){var n=e[i];n&&n.render(r)}}},Object.defineProperty(e.prototype,"frameRate",{set:function(t){60<t&&(t=60),this._frameRate=t,this.frameIntervalTime=1e3/(t*this._timeScale)},enumerable:!0,configurable:!0}),e.prototype.getTotalFrame=function(){return this.totalFrame},Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._timeScale},set:function(t){t<=0&&(t=1),this._timeScale=t,this.frameIntervalTime=1e3/(this._frameRate*t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"act",{get:function(){return this._act},set:function(t){this._act=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourcePath",{get:function(){return this._resourcePath},set:function(t){this._resourcePath=t},enumerable:!0,configurable:!0}),e.prototype.setIsStopped=function(t){var e=this;e.isStopped!=t&&((e.isStopped=t)?egret.stopTick(e.advanceTime,e):1==e.totalFrame||e.isNoRendering?e.gotoAndStop(1):(e.lastTime=egret.getTimer(),egret.startTick(e.advanceTime,e)))},e.prototype.getDir=function(){return this.dir},e.prototype.clear=function(){this.setIsStopped(!0),this.clearFrameEvent(),this.parent&&this.parent.removeChild(this)},e.prototype.dispos=function(t){void 0===t&&(t=!0);var e=this;for(var r in e.setIsStopped(!0),e.clearFrameEvent(),e.removeEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,e.removeToStage,e),e.partDic)e.removePart(r);e.parent&&t&&e.parent.removeChild(e)},e);function e(t,e,r,i){void 0===i&&(i="idle");var n=a.call(this)||this,o=n;return o.resourcePath=t,o.loadCallBack=e,o.loadThisObject=r,o.currentFrame=1,o.totalFrame=0,o.isStopped=!0,o.isDirLoaded=!1,o.isNoRendering=!1,o.passedTime=0,o.lastTime=0,o._timeScale=1,o.act=i,o.frameRate=30,o.eventDic={},o.actDic={},o.partDic={},o.partIdDic={},o.addEventListener(egret.Event.ADDED_TO_STAGE,o.addToStage,o),o.addEventListener(egret.Event.REMOVED_FROM_STAGE,o.removeToStage,o),n}d.BaseActor=t,__reflect(t.prototype,"qmr.BaseActor")}(qmr=qmr||{}),function(t){var e=(r.IDLE="idle",r.ATTACK="attack",r.ATTACK2="attack2",r.MOVE="move",r.FLY="move",r.DEAD="death",r.SKILL="skill",r.SKILL2="skill2",r.IDLE_RIDE="idle_ride",r.MOVE_RIDE="move_ride",r.ATTACK_RIDE="attack_ride",r.JUMP="fly",r.JUMP_ATTACK="jump_attack",r.STAND="stand",r.PICK="pick",r.UI_SHOW="ui_show",r.UI_SHOW1="ui_show_1",r.UI_IDLE="ui_idle",r);function r(){}t.Status=e,__reflect(e.prototype,"qmr.Status")}(qmr=qmr||{});var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,r){qmr.ResManager.getRes(t,e,r,qmr.LoadPriority.IMMEDIATELY,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]),function(t){var e=(r.prototype.parseClip=function(t){var e=this.framesList;this._frameRate=parseInt(t.frameRate);for(var r=0,i=t.frames;r<i.length;r++){var n=i[r],o=parseInt(n.duration);isNaN(o)&&(o=1);for(var a=1;a<=o;a++)e.push(n)}if(this.autoParseTexture)for(var s=this.spriteSheet,l=this.autoHalfTexture,c=0,h=e;c<h.length;c++){var u,p=h[c];s.getTexture(p.res)||(u=this.resJson[p.res],l?s.createTexture(p.res,Math.ceil(u.x/2),Math.ceil(u.y/2),u.w>>1,u.h>>1):s.createTexture(p.res,u.x,u.y,u.w,u.h))}this._totalFrames=this.framesList.length},r.prototype.parseClipByStartAndEnd=function(t,e,r){var i=0,n=this.framesList;this._frameRate=parseInt(t.frameRate);for(var o=0,a=t.frames;o<a.length;o++){var s=a[o],l=parseInt(s.duration);isNaN(l)&&(l=1);for(var c=1;c<=l;c++)e<=(i+=1)&&i<=r&&n.push(s)}this._totalFrames=n.length},r.prototype.getTextureByFrame=function(t){var e;if(!(t<=this.framesList.length))return null;e=this.framesList[t-1];var r,i=this.spriteSheet.getTexture(e.res);return i||(r=this.resJson[e.res],i=this.spriteSheet.createTexture(e.res,r.x,r.y,r.w,r.h)),i},r.prototype.getOffset=function(t){var e=this.framesList,r=t<=e.length?e[t-1]:e[e.length-1];if(this.autoHalfTexture){var i=this.resJson[r.res],n=i.x%2?1:0,o=i.y%2?1:0;return{x:r.x+n,y:r.y+o,w:i.w>>1<<1,h:i.h>>1<<1}}return r},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"halfTexture",{get:function(){return this.autoHalfTexture},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"frameRate",{get:function(){return this._frameRate},enumerable:!0,configurable:!0}),r.prototype.dispos=function(){this.framesList.length=0,this.framesList=null},r);function r(t,e,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1),this.resJson=t,this.spriteSheet=e,this.autoHalfTexture=i,this.autoParseTexture=r,this.framesList=[]}t.AnimateData=e,__reflect(e.prototype,"qmr.AnimateData")}(qmr=qmr||{}),function(m){var t=(e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.parseSpriteSheet=function(t,e,r,i,n,o){var a;void 0===n&&(n=-1),void 0===o&&(o=!0);var s=new egret.SpriteSheet(i);for(var l in r.mc)if(null!=l&&0!=l.length){a=r.mc[l];break}if(a){var c=this.animaDic[t];c||(c={},this.animaDic[t]=c),c.url=e,c.sheet=s;var h=a.labels,u=r.harf;if(h&&1<h.length)for(var p=0,d=h;p<d.length;p++){var f,g=d[p];(f=new m.AnimateData(r.res,s,o,u)).parseClipByStartAndEnd(a,parseInt(g.frame),parseInt(g.end)),c[parseInt(g.name)]=f}else(f=new m.AnimateData(r.res,s,o,u)).parseClip(a),c.data=f}},e.prototype.getAnimalData=function(t,e){var r=this.animaDic[t];if(!r)return null;var i=r.count;return i?i+=1:i=1,r.count=i,r.useTime=egret.getTimer(),0<e&&-1==t.indexOf("death")?r[e]:r.data},e.prototype.dispos=function(t){var e,r;"168_idle"==t||(e=this.animaDic[t])&&((r=e.count)?--r:r=0,r<=0&&(r=0),e.count=r)},e.prototype.clear=function(t){var e=this.animaDic,r=this.maxAliveTime;for(var i in e){var n,o=e[i];0==o.count&&o.useTime&&t-o.useTime>r&&(o.sheet&&o.sheet.dispose(),n=RES.destroyRes(o.url),m.LogUtil.warn("AnimationManager.destroy url="+o.url+"  "+n),e[i]=null,delete e[i])}},e);function e(){this.maxAliveTime=1e4,this.animaDic={}}m.AnimateManager=t,__reflect(t.prototype,"qmr.AnimateManager")}(qmr=qmr||{}),function(t){var i,e=(i=t.AnimateClip,__extends(r,i),r.prototype.render=function(t){this._wingFrame!=t&&(this._wingFrame=t,this._wingFrameIndex++),t=1+this._wingFrameIndex%this.totalFrames,i.prototype.render.call(this,t)},r.prototype.reset=function(){i.prototype.reset.call(this),this._wingFrame=0,this._wingFrameIndex=0},r);function r(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=i.call(this,t,e)||this;return r._wingFrame=0,r._wingFrameIndex=0,r}t.AnimateWing=e,__reflect(e.prototype,"qmr.AnimateWing")}(qmr=qmr||{}),function(e){var r,t=(r=egret.DisplayObjectContainer,__extends(i,r),i.prototype.load=function(t,e,r,i,n){void 0===n&&(n=1),this.playeTimes=1,this.loopCallBack=r,this.thisObject=i,this.mainClip.load(t,e)},i.prototype.onLoaded=function(){this.totalFrame=this.mainClip.totalFrames,this.frameRate=this.mainClip.frameRate,this.currentFrame=1,this.render(),this.setIsStopped(!1),1==this.totalFrame&&this.gotoAndStop(1)},i.prototype.registerFrameEvent=function(t,e,r){this.eventDic[t]={callBack:e,thisObject:r}},i.prototype.unRegisterFrameEvent=function(t){this.eventDic[t]&&(this.eventDic[t]=null,delete this.eventDic[t])},i.prototype.advanceTime=function(t){var e=t-this.lastTime;this.lastTime=t;var r=this.frameIntervalTime,i=this.passedTime+e;this.passedTime=i%r;var n=i/r;if(n<1)return!1;for(this.render();1<=n;)n--,this.currentFrame++,this.checkFrameEvent();return!1},i.prototype.checkFrameEvent=function(){var t=this.eventDic[this.currentFrame];t&&t.callBack&&t.callBack.call(t.thisObject)},i.prototype.clearCallBack=function(){this.loopCallBack=null},i.prototype.render=function(){var t=this;0<t.totalFrame&&t.currentFrame>t.totalFrame&&(t.loopCallBack&&t.loopCallBack.call(t.thisObject),(t.currentFrame=1)==t.playeTimes)?t.setIsStopped(!0):t.mainClip.render(t.currentFrame)},Object.defineProperty(i.prototype,"frameRate",{set:function(t){60<t&&(t=60),this._frameRate=t,this.frameIntervalTime=1e3/(t*this._timeScale)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"timeScale",{set:function(t){isNaN(this.frameRate)||(this._timeScale=t,this.frameIntervalTime=1e3/(this._frameRate*t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"totalFrames",{get:function(){return this.totalFrame},enumerable:!0,configurable:!0}),i.prototype.gotoAndStop=function(t){this.mainClip.render(t),this.setIsStopped(!0)},i.prototype.setIsStopped=function(t){this.isStopped!=t&&((this.isStopped=t)?egret.stopTick(this.advanceTime,this):(this.lastTime=egret.getTimer(),egret.startTick(this.advanceTime,this)))},i.prototype.clear=function(){this.mainClip&&this.mainClip.reset()},i.prototype.dispos=function(){for(var t in this.mainClip&&this.mainClip.dispos(),this.setIsStopped(!0),this.eventDic)this.eventDic[t]=null,delete this.eventDic[t];this.parent&&this.parent.removeChild(this)},i);function i(){var t=r.call(this)||this;return t.currentFrame=1,t.totalFrame=0,t.isStopped=!0,t.passedTime=0,t.lastTime=0,t.frameRate=30,t.eventDic={},t._timeScale=1,t.mainClip=new e.AnimateClip(t.onLoaded,t),t.addChild(t.mainClip),t}e.MovieClip=t,__reflect(t.prototype,"qmr.MovieClip")}(qmr=qmr||{}),function(t){var e,r=(e=t.UIComponent,__extends(i,e),i.prototype.initComponent=function(){e.prototype.initComponent.call(this),this.iscompleted=!0},i.prototype.initData=function(){e.prototype.initData.call(this),this.setTip()},i.prototype.onStageResize=function(){e.prototype.onStageResize.call(this),this.x=(t.StageUtil.stageWidth-640)/2},i.prototype.showTip=function(t){this.data=t,this.iscompleted&&this.setTip()},i.prototype.setTip=function(){this.data&&(this.isSeted||(this.x=(t.StageUtil.stageWidth-640)/2,this.isSeted=!0,this.alpha=1,this.data.color?(this.lbl_tipMsg.text=this.data.mess,this.lbl_tipMsg.textColor=this.data.color):this.lbl_tipMsg.textFlow=t.HtmlUtil.getHtmlString(this.data.mess),this.data.itemcfg&&t.ImageUtil.setItemIcon(this.img_icon,this.data.itemcfg.icon,this.data.itemcfg.page),this.y=t.StageUtil.stageHeight/2-this.height/2+this.data.yPos,this.common_g.width=this.lbl_tipMsg.width+200,egret.Tween.get(this).to({y:t.StageUtil.stageHeight/3+50+this.data.yPos},1500).to({y:t.StageUtil.stageHeight/3+this.data.yPos,alpha:0},800).call(this.dispose,this)))},i.prototype.dispose=function(){this.data=null,this.isSeted=!1,this.lbl_tipMsg.text="",this.img_icon.source=null,egret.Tween.removeTweens(this),e.prototype.dispose.call(this),t.TipManagerCommon.getInstance().recycleCommonTip(this)},i);function i(){var t=e.call(this)||this;return t.iscompleted=!1,t.isSeted=!1,t.skinName="CommonTipSkin",t.touchEnabled=t.touchChildren=!1,t}t.CommonTip=r,__reflect(r.prototype,"qmr.CommonTip")}(qmr=qmr||{}),function(l){var t=(e.getCNValue=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=this.getBean(l.ConfigEnumBase.CLIENTCN).get(t);if(i){var n=i.value;return e&&0<e.length&&(e.unshift(n),n=l.StringUtils.getmsg.apply(l.StringUtils,e)),n}return""},e.getConf=function(t,e){var r=this.getBean(t);return r?r.get(e):null},e.getBean=function(t){var e=this.cfgDic.get(t);return e||(e=this.parseConfigFromZip(t),this.cfgDic.set(t,e),l.LogUtil.log("ConfigManagerBase.parseConfigFromZip:",t)),e},e.parseConfigFromZip=function(t){var i=this,n=new l.Dictionary,e=t.charAt(0).toLocaleUpperCase()+t.slice(1,t.length)+"Cfg",o=l[e],r=i.getZip(i.WHOLE_CONFIG_NAME);(r=r||i.getZip(i.BASE_CONFIG_NAME))||console.error("");var a=r.file(t+".json");a||l.LogUtil.warn("zip = "+t+" ");var s=JSON.parse(a.asText());return o&&(l.PlatformConfig.isShildTSV&&"Hero"==t&&l.TSHelper&&l.TSHelper.instance.handleHeroCfgJson(s),s.forEach(function(t){var e,r=new o(t);r.key?(e=i.getkey(r,t),n.setConf(e,r)):l.LogUtil.warn("key "+r)})),n},e.getZip=function(t){this.zipDic||(this.zipDic=new l.Dictionary);var e,r=this.zipDic.get(t);return r||(e=RES.getRes(t))&&(r=new JSZip(e),this.zipDic.set(t,r)),r},e.getkey=function(t,r){if(t.key){var e=t.key.split("_"),i="",n=e.length;return 1==n?i=r[t.key]:e.forEach(function(t,e){i+=e!=n-1?r[t]+"_":r[t]}),i}},e.cfgDic=new l.Dictionary,e.WHOLE_CONFIG_NAME="config_bin",e.BASE_CONFIG_NAME="configbase_bin",e);function e(){}l.ConfigManagerBase=t,__reflect(t.prototype,"qmr.ConfigManagerBase")}(qmr=qmr||{}),function(r){var t=(e.setup=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return r.WebBrowerUtil.initSysInfo(),[4,r.PlatformConfig.init()];case 1:return t.sent(),r.StageUtil.init(e),egret.ImageLoader.crossOrigin="anonymous",egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.registerVersionController(new r.VersionController),r.MessageIDLogin.init(),r.LayerManager.instance.setup(r.StageUtil.stage),r.ModuleManager.setupClass(),r.LoginController.instance,r.SystemController.instance,r.GameLifecycleManger.instance.init(),this.initLocalStorage(),[4,r.GameLoadManager.instance.loadBaseRes()];case 2:return t.sent(),[4,r.PlatformManager.instance.platform.reqLogin()];case 3:return t.sent(),[4,r.LoginManager.startCheck()];case 4:return t.sent(),[2]}})})},e.initLocalStorage=function(){var t="0"==egret.localStorage.getItem("bgSoundIsOpen"),e="0"==egret.localStorage.getItem("effectSoundIsOpen");console.log(""+t),console.log(""+e),r.SoundManager.getInstance().isMusicSoundOpen=!t,r.SoundManager.getInstance().isEffectSoundOpen=!e},e);function e(){}r.EntryLogin=t,__reflect(t.prototype,"qmr.EntryLogin")}(qmr=qmr||{}),function(t){var e=(r.PlayerName=!0,r.CodeCfg=!0,r.Music=!0,r.ClientCn=!0,r);function r(){}t.BaseConfigKeys=e,__reflect(e.prototype,"qmr.BaseConfigKeys")}(qmr=qmr||{}),function(t){var r,e=(r=t.BaseBean,__extends(i,r),Object.defineProperty(i.prototype,"id",{get:function(){return this.d.id},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name_xing",{get:function(){return this.d.name_xing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name_ming_nan",{get:function(){return this.d.name_ming_nan},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name_ming_nv",{get:function(){return this.d.name_ming_nv},enumerable:!0,configurable:!0}),i);function i(t){var e=r.call(this,t)||this;return e.key="id",e}t.PlayerNameCfg=e,__reflect(e.prototype,"qmr.PlayerNameCfg");var n,o=(n=t.BaseBean,__extends(a,n),Object.defineProperty(a.prototype,"id",{get:function(){return this.d.id},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"msg",{get:function(){return this.d.msg},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"type",{get:function(){return this.d.type},enumerable:!0,configurable:!0}),a);function a(t){var e=n.call(this,t)||this;return e.key="id",e}t.CodeCfgCfg=o,__reflect(o.prototype,"qmr.CodeCfgCfg");var s,l=(s=t.BaseBean,__extends(c,s),Object.defineProperty(c.prototype,"soundType",{get:function(){return this.d.soundType},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"soundName",{get:function(){return this.d.soundName},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isPlaySameTime",{get:function(){return this.d.isPlaySameTime},enumerable:!0,configurable:!0}),c);function c(t){var e=s.call(this,t)||this;return e.key="soundType",e}t.MusicCfg=l,__reflect(l.prototype,"qmr.MusicCfg");var h,u=(h=t.BaseBean,__extends(p,h),Object.defineProperty(p.prototype,"id",{get:function(){return this.d.id},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"value",{get:function(){return this.d.value},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"colerType",{get:function(){return this.d.colerType},enumerable:!0,configurable:!0}),p);function p(t){var e=h.call(this,t)||this;return e.key="id",e}t.ClientCnCfg=u,__reflect(u.prototype,"qmr.ClientCnCfg")}(qmr=qmr||{}),function(t){var e=(r.PLAYERNAME="PlayerName",r.CODECFG="CodeCfg",r.MUSIC="Music",r.CLIENTCN="ClientCn",r);function r(){}t.ConfigEnumBase=e,__reflect(e.prototype,"qmr.ConfigEnumBase")}(qmr=qmr||{}),function(t){var e,r;(e=t.BtnSkinType||(t.BtnSkinType={}))[e.Type_1=1]="Type_1",e[e.Type_2=2]="Type_2",(r=t.CHAT_CHANNELID||(t.CHAT_CHANNELID={}))[r.SYSTEM=1]="SYSTEM",r[r.WORLD=2]="WORLD",r[r.TEAM=3]="TEAM",r[r.SELF=4]="SELF",r[r.UNION=5]="UNION",r[r.CROSS=6]="CROSS"}(qmr=qmr||{}),function(t){var e,r,i,n,o;(e=t.MusicType||(t.MusicType={}))[e.BG_MUSIC=1]="BG_MUSIC",e[e.EFFECT_MUSIC=2]="EFFECT_MUSIC",(r=t.WarriorRole||(t.WarriorRole={}))[r.ROLE_MALE=101]="ROLE_MALE",r[r.ROLE_FEMALE=102]="ROLE_FEMALE",(i=t.ColorQualityConst||(t.ColorQualityConst={}))[i.COLOR_G=9067563]="COLOR_G",i[i.COLOR_GREEN=632328]="COLOR_GREEN",i[i.COLOR_BLUE=2197196]="COLOR_BLUE",i[i.COLOR_VIOLET=16722152]="COLOR_VIOLET",i[i.COLOR_CADMIUM=15095046]="COLOR_CADMIUM",i[i.COLOR_RED=14489856]="COLOR_RED",i[i.COLOR_DIAMOND=4758466]="COLOR_DIAMOND",(n=t.BagType||(t.BagType={}))[n.TIEM=0]="TIEM",n[n.HERO=1]="HERO",n[n.EQUIP=2]="EQUIP",(o=t.ActorSizeType||(t.ActorSizeType={}))[o.small=0]="small",o[o.mid=1]="mid",o[o.big=2]="big",o[o.UI=3]="UI"}(qmr=qmr||{}),function(){function t(){}(qmr||(qmr={})).NotifyConstBase=t,__reflect(t.prototype,"qmr.NotifyConstBase")}(),function(t){var e=(r.S_ERROR_CODE="S_ERROR_CODE",r.S_USER_LOGIN="S_USER_LOGIN",r.S_USER_LOGIN_REPEAT="S_USER_LOGIN_REPEAT",r.S_LOGIN_OFFLINE_HANGUP_PUSH="S_LOGIN_OFFLINE_HANGUP_PUSH",r.S_USER_LOGOUT="S_USER_LOGOUT",r.TAB_VIEW_ADDPAGE="TAB_VIEW_ADDPAGE",r.TAB_VIEW_REMOVEPAGE="TAB_VIEW_REMOVEPAGE",r.TAB_VIEW_CHANGE_TAB="TAB_VIEW_CHANGE_TAB",r.UPDATE_OPEN_TITLE="UPDATE_OPEN_TITLE",r.UPDATE_MODULE_TITLE="UPDATE_MODULE_TITLE",r.OPEN_PANEL_LAYER="OPEN_PANEL_LAYER",r.CLOSE_PANEL_LAYER="CLOSE_PANEL_LAYER",r.OPEN_PANEL_VIEW="OPEN_PANEL_VIEW",r.CLOSE_PANEL_VIEW="CLOSE_PANEL_VIEW",r.SCNY_ONE_SERVER_TIME="SCNY_ONE_SERVER_TIME",r.CROSS_DAY="CROSS_DAY",r.CHANGE_MODEL_VIEW="SHOW_OR_HIDE_GUIDE",r.TO_HIDE_VIP_VIEW="TO_HIDE_VIP_VIEW",r.TO_REQUEST_SHARE_REWARD="TO_REQUEST_SHARE_REWARD",r);function r(){}t.NotifyConstLogin=e,__reflect(e.prototype,"qmr.NotifyConstLogin")}(qmr=qmr||{}),function(t){var e=(n.prototype.setTo=function(t,e,r,i){return this._id=n._gid++,this.caller=t,this.method=e,this.args=r,this.once=i,this},n.prototype.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},n.prototype.runWith=function(t){if(null==this.method)return null;var e=this._id,r=this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t);return this._id===e&&this.once&&this.recover(),r},n.prototype.recover=function(){0<this._id&&(this._id=0,n._pool.push(this.clear()))},n.create=function(t,e,r,i){return void 0===r&&(r=null),void 0===i&&(i=!0),this._pool.length?this._pool.pop().setTo(t,e,r,i):new n(t,e,r,i)},n.prototype.clear=function(){return this.caller=null,this.method=null,this.args=null,this},n._pool=[],n._gid=1,n);function n(t,e,r,i){this._id=0,this.setTo(t,e,r,i)}t.Handler=e,__reflect(e.prototype,"qmr.Handler")}(qmr=qmr||{}),function(t){var e=(r.sendPost=function(t,e,r,i){var n="",o=0;for(var a in e)n+=0==o?a+"="+e[a]:"&"+a+"="+e[a],o++;var s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.open(t,egret.HttpMethod.POST),s.send(n),s.addEventListener(egret.Event.COMPLETE,function(t){r&&r.call(s.response)},this)},r.sendGet=function(t,e,r){var i=new egret.HttpRequest;i.timeout=1e4,i.responseType=egret.HttpResponseType.TEXT,i.open(t,egret.HttpMethod.GET),i.send(null),i.addEventListener(egret.Event.COMPLETE,function(t){e&&e.call(r,i.response)},this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){},this)},r);function r(){}t.HttpRequest=e,__reflect(e.prototype,"qmr.HttpRequest")}(qmr=qmr||{}),function(t){var e=(r.MAP_LAYER="mapLayer",r.FIGTH_UI="figthUI",r.TOOLBAR="toolbar",r.ACTIVITY_UI="activityUI",r.BASE_UI="baseUI",r.SECOND_PAGE_UI="secondUI",r.UI_EFFECT="uiEffect",r.ALERT="alert",r.TIP="tip",r.LOADING="loading",r.SYSTEM_UI="systemUI",r.GUIDE="guide",r.MASK_UI="maskUI",r.CHAT="chat",r.TOP="top",r);function r(){}t.LayerConst=e,__reflect(e.prototype,"qmr.LayerConst")}(qmr=qmr||{}),function(r){var i=egret.DisplayObjectContainer,t=(Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.setup=function(t){this._parent=t,this.layerIndex=this._parent.numChildren,this.addLayer(r.LayerConst.MAP_LAYER,!0),this.addLayer(r.LayerConst.FIGTH_UI,!0),this.addLayer(r.LayerConst.TOOLBAR,!0),this.addLayer(r.LayerConst.ACTIVITY_UI,!0),this.addLayer(r.LayerConst.BASE_UI,!0),this.addLayer(r.LayerConst.SECOND_PAGE_UI,!0),this.addLayer(r.LayerConst.UI_EFFECT,!1),this.addLayer(r.LayerConst.ALERT,!0),this.addLayer(r.LayerConst.SYSTEM_UI,!0),this.addLayer(r.LayerConst.MASK_UI,!0),this.addLayer(r.LayerConst.GUIDE,!0),this.addLayer(r.LayerConst.CHAT,!0),this.addLayer(r.LayerConst.TOP,!0),this.addLayer(r.LayerConst.TIP,!1),this.addLayer(r.LayerConst.LOADING,!1)},e.prototype.showOrHideFightMapAndToolbar=function(t){var e;t?(e=this.getLayer(r.LayerConst.MAP_LAYER),r.DisplayUtils.removeDisplay(e),e=this.getLayer(r.LayerConst.FIGTH_UI),r.DisplayUtils.removeDisplay(e),e=this.getLayer(r.LayerConst.TOOLBAR),r.DisplayUtils.removeDisplay(e)):(e=this.getLayer(r.LayerConst.MAP_LAYER),this._parent.addChildAt(e,this.layerIndex),e=this.getLayer(r.LayerConst.FIGTH_UI),this._parent.addChildAt(e,this.layerIndex+1),e=this.getLayer(r.LayerConst.TOOLBAR),this._parent.addChildAt(e,this.layerIndex+2)),this._isHideFight=t},Object.defineProperty(e.prototype,"isHideFight",{get:function(){return this._isHideFight},enumerable:!0,configurable:!0}),e.prototype.showLayer=function(t){var e=this.getLayer(t);e&&(e.x=0)},e.prototype.hideLayer=function(t){var e=this.getLayer(t);e&&(e.x=9999)},e.prototype.addLayer=function(t,e){var r;this._parent.getChildByName(t)||((r=new i).touchEnabled=r.touchChildren=e,r.name=t,this.layerList.push(r),this._parent.addChild(r),this.layerDic.set(t,r))},e.prototype.getLayer=function(t){return t?this.layerDic.get(t):null},e.prototype.addChild=function(t,e){var r=this.getLayer(e);return r&&r.addChild(t),t},e.prototype.addChildAt=function(t,e,r){void 0===r&&(r=0);var i=this.getLayer(e);return i&&i.addChildAt(t,0),t},e.prototype.removeChild=function(t){return t&&t.parent&&t.parent.removeChild(t),t},e.prototype.setCenter=function(t){t&&(t.x=Math.floor((r.StageUtil.stageWidth-t.width)/2),t.y=Math.floor((r.StageUtil.stageHeight-t.height)/2))},Object.defineProperty(e.prototype,"layersVisible",{set:function(t){for(var e=0,r=this.layerList;e<r.length;e++){var i=r[e];if(i.visible==t)break;i.visible=t}},enumerable:!0,configurable:!0}),e.prototype.addDisplay=function(t,e,r){var i=this.getLayer(e);r?i.addChildAt(t,999):i.addChild(t)},e);function e(){this.layerList=new Array,this.layerDic=new r.Dictionary}r.LayerManager=t,__reflect(t.prototype,"qmr.LayerManager")}(qmr=qmr||{}),function(u){var p,t,e=(d.loadGroup=function(t,e,r,i,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===i&&(i=0),void 0===n&&(n=null),d.addLoader(t,e,r,i,null,!0,n)},d.getRes=function(t,e,r,i,n){if(void 0===i&&(i=0),void 0===n&&(n=null),t){if(RES.hasRes(t)){var o=RES.getRes(t);if(o)return a=o,void(e&&e.call(r,a,t))}var a;d.addLoader(t,e,r,i,n)}},d.addLoader=function(t,e,r,i,n,o,a){void 0===i&&(i=0),void 0===n&&(n=null),void 0===o&&(o=!1),void 0===a&&(a=null);var s=f.get();s.init(d.loaderCompleted,t,e,r,n,i,o,a);var l=d._sameResInfoDic;l||(l=new u.Dictionary,d._sameResInfoDic=l);var c,h=l.get(t);h?(h.push(s),d.checkSameLoaderPriority(t,i)):(h=[],l.set(t,h),i>=p.IMMEDIATELY?d.startLoader(s):((c=d._loaderQueue)||(d._loaderQueue=c=[]),c.push(s),d.checkToLoadNext()))},d.checkSameLoaderPriority=function(t,e){var r=d._loaderQueue;if(r)for(var i=r.length,n=0;n<i;n++){var o=r[n];if(o.source==t){o.priority<e&&((o.priority=e)==p.IMMEDIATELY?(r.splice(n,1),d.startLoader(o)):d.checkToLoadNext());break}}},d.checkToLoadNext=function(){var t,e,r,i=d._loaderQueue;!i||0<(t=i.length)&&(r=!1,(e=i[t-1]).priority>=p.HIGH?d._loadingCount<d.HIGH_PRIORITY_MAX_COUNT&&(r=!0):e.priority<=p.LOW&&d._loadingCount<d.LOW_PRIORITY_MAX_COUNT&&(r=!0),r&&(e=i.pop(),d.startLoader(e)))},d.startLoader=function(t){d._loadingCount++,t.load()},d.loaderCompleted=function(t,e,r){try{if(e){d.callbackLoader(t,r);var i=d._loaderQueue;if(i&&0<i.length)for(var n=i.length-1;0<=n;n--){var o,a=i[n];!RES.hasRes(a.source)||(o=RES.getRes(a.source))&&(d.callbackLoader(a,o),i.splice(n,1),f.recycle(a))}}var s,l=d._sameResInfoDic.get(t.source);if(l&&(d._sameResInfoDic.remove(t.source),e))for(s=l.length,n=0;n<s;n++){var c=l[n];d.startLoader(c)}f.recycle(t)}catch(t){u.LogUtil.log("ResManager.loaderCompleted error"+t)}finally{d._loadingCount--,d.checkToLoadNext()}},d.callbackLoader=function(t,e){t.compFunc&&(e?t.compFunc.call(t.thisObject,e,t.source):t.compFunc.call(t.thisObject))},d.LOW_PRIORITY_MAX_COUNT=1,d.HIGH_PRIORITY_MAX_COUNT=4,d._loadingCount=0,d);function d(){}u.ResManager=e,__reflect(e.prototype,"qmr.ResManager"),(t=p=u.LoadPriority||(u.LoadPriority={}))[t.LOW=-1]="LOW",t[t.HIGH=0]="HIGH",t[t.IMMEDIATELY=1]="IMMEDIATELY";var f=(r.getPool=function(){var t=r._pool;return t||(r._pool=t=[]),t},r.get=function(){var t=r.getPool(),e=0<t.length?t.pop():new i;return e},r.recycle=function(t){t.reset(),r.getPool().push(t)},r);function r(){}__reflect(f.prototype,"LoaderPool");var i=(n.prototype.init=function(t,e,r,i,n,o,a,s){void 0===o&&(o=0),void 0===a&&(a=!1),void 0===s&&(s=null),this.callbackMananger=t,this.source=e,this.compFunc=r,this.thisObject=i,this.type=this.type,this.priority=o,this.isGroup=a,this.progFunc=s,this.loadCount=0},n.prototype.load=function(){if(this.loadCount++,this.isGroup)this.loadCount<=1&&(RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onGroupProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onGroupLoadCompleted,this)),RES.loadGroup(this.source);else{var t=!1;if(RES.hasRes(this.source)){t=!0;var e=RES.getRes(this.source);if(e)return void this.onGetResSuccess(e)}this.loadCount<=1&&RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),t?RES.getResAsync(this.source,this.onGetResSuccess,this):RES.getResByUrl(this.source,this.onGetResSuccess,this,this.type)}},n.prototype.reset=function(){this.isGroup?(RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onGroupProgress,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onGroupLoadCompleted,this)):RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.callbackMananger=null,this.source=null,this.compFunc=null,this.thisObject=null,this.type=null,this.priority=null,this.isGroup=!1,this.progFunc=null,this.loadCount=0},n.prototype.onGetResSuccess=function(t){this.callbackMananger&&this.callbackMananger(this,!0,t)},n.prototype.onItemLoadError=function(t){this.source==t.resItem.url&&(u.LogUtil.log("onItemLoadError",this.source),this.callbackMananger&&this.callbackMananger(this,!1))},n.prototype.onGroupLoadCompleted=function(t){this.source==t.groupName&&this.callbackMananger&&this.callbackMananger(this,!0)},n.prototype.onGroupLoadError=function(t){this.source==t.groupName&&this.callbackMananger&&this.callbackMananger(this,!1)},n.prototype.onGroupProgress=function(t){this.source==t.groupName&&this.progFunc&&this.progFunc(t.itemsLoaded/t.itemsTotal)},n);function n(){}__reflect(i.prototype,"Loader")}(qmr=qmr||{}),function(t){var e=(Object.defineProperty(r,"instance",{get:function(){return null==this._instance&&(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r.prototype.init=function(){var t=this;egret.lifecycle.onPause=function(){t.onPause()},egret.lifecycle.onResume=function(){t.onResume()}},r.prototype.onResume=function(){t.LogUtil.log(""),t.SoundManager.getInstance().isMusicSoundOpen=r.bgSoundIsOpen,t.SoundManager.getInstance().isEffectSoundOpen=r.effectSoundIsOpen,t.PlatformManager.instance.platform.onShareBack()},r.prototype.onPause=function(){t.LogUtil.log(""),r.instance.onHideCount++,r.bgSoundIsOpen=t.SoundManager.getInstance().isMusicSoundOpen,r.effectSoundIsOpen=t.SoundManager.getInstance().isEffectSoundOpen,t.SoundManager.getInstance().isMusicSoundOpen=!1,t.SoundManager.getInstance().isEffectSoundOpen=!1},r.bgSoundIsOpen=!0,r.effectSoundIsOpen=!0,r);function r(){this.onHideCount=0}t.GameLifecycleManger=e,__reflect(e.prototype,"qmr.GameLifecycleManger")}(qmr=qmr||{}),function(c){var t,e=(t=c.BaseNotify,__extends(r,t),r.prototype.loadBaseRes=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return c.PlatformManager.instance.platform.setLoadingStatus("..."),[4,this.loadResJson("login.res.json","resourceLogin/")];case 1:return t.sent(),[4,this.loadThmJson("login.thm.json")];case 2:return t.sent(),[4,this.loadPreloadingGroup()];case 3:return t.sent(),[4,this.loadLoginBaseAnimation()];case 4:return t.sent(),c.PlatformManager.instance.platform.setLoadingProgress(50),[2]}})})},r.prototype.loadcreateRoleGroup=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResJson("createrole.res.json")];case 1:return t.sent(),[4,this.loadThmJson("createrole.thm.json")];case 2:return t.sent(),[4,this.loadCreateRoleThmJs()];case 3:return t.sent(),[2,new Promise(function(t,e){function r(){2<=++i&&t()}var i=0;c.ResManager.loadGroup("createrole",r,n,c.LoadPriority.IMMEDIATELY),c.ResManager.getRes(c.GlobalConfig.getBgName(),r,n,c.LoadPriority.IMMEDIATELY)})]}})})},r.prototype.loadLoginViewRes=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return c.PlatformManager.instance.platform.setLoadingStatus(""),[2,new Promise(function(t,e){function r(){2<=++i&&t()}var i=0;c.ResManager.loadGroup("login",r,n,c.LoadPriority.IMMEDIATELY),c.ResManager.getRes("serverlist_loginBg_jpg",r,n,c.LoadPriority.IMMEDIATELY)})]})})},r.prototype.loadGameResAfterLogin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return!c.VersionManager.isGameVersionReady||this.isGameResAfterLoginLoading?[2]:(this.isGameResAfterLoginLoading=!0,this.isGameResAfterLoginLoaded=!1,c.MarkPointManager.setPoint(c.PointEnum.POINT_7),[4,this.loadLoadingViewRes()]);case 1:return t.sent(),this.setLoadingViewParams("...",!0,.05,.1,!1),c.MarkPointManager.loginSetPoint(c.PointEnum.LOAD_DEFAULT_RES),c.MarkPointManager.setPoint(c.PointEnum.POINT_WX_LOAD_SKIN),this.setLoadingViewParams("...",!0,.1,.2,!0),[4,this.loadResJson("default.res.json")];case 2:return t.sent(),[4,this.loadDefaultThmJs()];case 3:return t.sent(),[4,this.loadThmJson("default.thm.json")];case 4:return t.sent(),c.MarkPointManager.setPoint(c.PointEnum.POINT_WX_LOAD_CONFIG),this.setLoadingViewParams("...",!0,.2,.5,!0),[4,this.loadConfigGroup()];case 5:return t.sent(),this.setLoadingViewParams("...",!0,.5,.9,!0),c.MarkPointManager.loginSetPoint(c.PointEnum.LOAD_COMMON_RES),c.MarkPointManager.setPoint(c.PointEnum.POINT_WX_LOAD_COMMON_RES),[4,this.loadCommonGroup()];case 6:return t.sent(),[4,this.loadBaseAnimation()];case 7:return t.sent(),c.GlobalConfig.isCreatRoleEnterGame?(this.setLoadingViewParams("...",!0,.9,.99,!0),[4,this.loadResNeedByNewRole()]):[3,9];case 8:t.sent(),t.label=9;case 9:return c.MarkPointManager.setPoint(c.PointEnum.POINT_WX_LOAD_COMPLETED),this.isGameResAfterLoginLoaded=!0,this.gameResAfterLoginLoadedCall&&this.gameResAfterLoginLoadedCall.call(this),[2]}})})},r.prototype.waiGameResAfterLoginLoaded=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},r.prototype.waitGameResLoaded=function(){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(t){return i=this,[2,new Promise(function(e,t){function r(){i.setLoadingViewParams("...",!0,.99,.99,!0);var t=new egret.Timer(30,1);t.addEventListener(egret.TimerEvent.TIMER,function(){i.loadPreModel(),e()},i),t.start()}i.isGameResAfterLoginLoaded?(i.showLoadingView(),r()):(i.gameResAfterLoginLoadedCall=r,i.showLoadingView())})]})})},r.prototype.loadLoadingViewRes=function(){return __awaiter(this,void 0,void 0,function(){var i=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=0;c.ResManager.getRes(c.GameLoadingView.getBgName(),function(){1<=++r&&t()},i,c.LoadPriority.IMMEDIATELY)})]})})},r.prototype.setLoadingViewParams=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.loadingViewparams=t,this.gameResAfterLoginLoadedCall&&this.showLoadingView()},r.prototype.showLoadingView=function(){this.loadingViewparams&&c.GameLoadingView.getInstance().showSelf(this.loadingViewparams[0],this.loadingViewparams[1],this.loadingViewparams[2],this.loadingViewparams[3],this.loadingViewparams[4])},r.prototype.updateTotalProgress=function(t){c.ModuleManager.isShowModule(c.ModuleNameLogin.GAME_LOADING_VIEW)&&c.GameLoadingView.getInstance().updateTotalProgress(t,!0)},r.prototype.loadPreloadingGroup=function(){return __awaiter(this,void 0,void 0,function(){var r,i=this;return __generator(this,function(t){return r=this,[2,new Promise(function(t,e){c.ResManager.loadGroup("preloading1",function(){t()},i,c.LoadPriority.IMMEDIATELY,r.updateTotalProgress)})]})})},r.prototype.loadLoginBaseAnimation=function(){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=[];r.push({path:c.SystemPath.defaultPath,res:"168_idle"});var i=r.length,n=0;o.loaderSilentResource(r,function(){i<=++n&&t()},c.LoadPriority.IMMEDIATELY)})]})})},r.prototype.loadCreateRoleThmJs=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,e){window.onScriptLoadedCallBack=function(){t()},window.onScriptLoadingProgressCallBack=function(t){},window.loadJsForEgretGame?window.loadJsForEgretGame("createrole",c.VersionManager.getPathWithGameVersion):t()})]})})},r.prototype.loadDefaultThmJs=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,e){window.onScriptLoadedCallBack=function(){t()},window.onScriptLoadingProgressCallBack=function(t){},window.loadJsForEgretGame?window.loadJsForEgretGame("game",c.VersionManager.getPathWithGameVersion):window.loadSub2?window.loadSub2():t()})]})})},r.prototype.loadResJson=function(o,a){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=function(){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,r,this),t()};RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,r,n),a=a||c.PlatformConfig.baseRoot;var i="",i=c.PlatformConfig.useCdnRes?c.PlatformConfig.webUrl+a:a;RES.loadConfig(i+o,i)})]})})},r.prototype.loadThmJson=function(a,s){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(t){return[2,new Promise(function(t,e){s=s||c.PlatformConfig.baseRoot;var r="",r=c.PlatformConfig.useCdnRes?c.PlatformConfig.webUrl+s:s,i=new eui.Theme(r+a,c.StageUtil.stage),n=function(){i.removeEventListener(eui.UIEvent.COMPLETE,n,this),t()};i.addEventListener(eui.UIEvent.COMPLETE,n,o)})]})})},r.prototype.loadConfigGroup=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=n,i=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,i,r),t()};RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,i,r),c.ResManager.loadGroup("config",i,n,c.LoadPriority.IMMEDIATELY,r.updateTotalProgress)})]})})},r.prototype.loadCommonGroup=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=n,i=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,i,r),t()};RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,i,r),c.ResManager.loadGroup("common",i,n,c.LoadPriority.IMMEDIATELY,r.updateTotalProgress)})]})})},r.prototype.loadBaseAnimation=function(){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=[];r.push({path:c.SystemPath.rolePath,res:"50_idle"}),o.loadFristMap(r);var i=r.length,n=0;o.loaderSilentResource(r,function(){i<=++n&&t()},c.LoadPriority.IMMEDIATELY)})]})})},r.prototype.loadResNeedByNewRole=function(){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=[];r.push({path:"ui_dlhl_dengluhaoli_png",type:RES.ResourceItem.TYPE_IMAGE}),r.push({path:"lijilingqu_png",type:RES.ResourceItem.TYPE_IMAGE});var i=r.length,n=0;o.loaderSilentResource(r,function(){i<=++n&&t()},c.LoadPriority.IMMEDIATELY)})]})})},r.prototype.loadPreModel=function(){var t=[],e=[],r=c.SystemPath.effectPath,i=c.GlobalConfig.registerAccountHeroId;i==c.WarriorRole.ROLE_MALE?(t.push({path:c.SystemPath.rolePath,res:"1003_idle"}),e.push({path:r,res:"7110_effect",harf:!0}),e.push({path:r,res:"7107_effect"}),e.push({path:r,res:"7089_effect"}),e.push({path:r,res:"7090_effect",harf:!0}),e.push({path:r,res:"7091_effect"}),e.push({path:r,res:"7092_effect"}),e.push({path:r,res:"7093_effect",harf:!0}),e.push({path:r,res:"7094_effect"})):i==c.WarriorRole.ROLE_FEMALE&&(t.push({path:c.SystemPath.rolePath,res:"2003_idle"}),e.push({path:r,res:"7001_effect",harf:!0}),e.push({path:r,res:"7061_effect"}),e.push({path:r,res:"7062_effect",harf:!0}),e.push({path:r,res:"7095_effect"}),e.push({path:r,res:"7096_effect",harf:!0}),e.push({path:r,res:"7097_effect",harf:!0}),e.push({path:r,res:"7098_effect",harf:!0}),e.push({path:r,res:"7099_effect"})),this.loaderSilentResource(t,null,c.LoadPriority.IMMEDIATELY),this.loaderSilentResource(e,null,c.LoadPriority.LOW)},r.prototype.preLoadAnimation=function(t,e,r,i,n,o){void 0===r&&(r=0),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1);var a,s,l=e;o&&(l+="_f"),i?(s=a=!1,c.ResManager.getRes(t+e+".json",function(t){a=!0,s&&i&&i.call(n)},this,r,RES.ResourceItem.TYPE_JSON),c.ResManager.getRes(t+l+".png",function(t){s=!0,a&&i&&i.call(n)},this,r,RES.ResourceItem.TYPE_IMAGE)):(c.ResManager.getRes(t+e+".json",null,null,r,RES.ResourceItem.TYPE_JSON),c.ResManager.getRes(t+l+".png",null,null,r,RES.ResourceItem.TYPE_IMAGE))},r.prototype.loaderSilentResource=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=0);for(var i,n=null,o=0,a=t;o<a.length;o++){var s=a[o],n=s.path;s.type?c.ResManager.getRes(n,e,this,r,s.type):(i=s.res,this.preLoadAnimation(s.path,i,r,e,this,s.harf),n=s.path+i+".png",c.LoaderManager.instance.addGroupRef(n))}},r.prototype.loadFristMap=function(e){var r,i;["_hang_top.jpg","_hang_middle.png","_hang_down.png"].forEach(function(t){r=1001+t,i=c.ResPathUtil.getHangMapUrl(r),e.push({path:i,type:RES.ResourceItem.TYPE_IMAGE})})},Object.defineProperty(r,"instance",{get:function(){return this._instance||(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r);function r(){return t.call(this)||this}c.GameLoadManager=e,__reflect(e.prototype,"qmr.GameLoadManager")}(qmr=qmr||{}),function(e){var t=(r.getInstance=function(){return null==r.instance&&(r.instance=new r).parseNameJson(),r.instance},r.prototype.getRandomName=function(t){var e=this.name_xing.length,r=this.name_ming_nan.length,i=this.name_ming_nv.length,n=this.name_xing[Math.floor(Math.random()*e)],o=0==t?this.name_ming_nan[Math.floor(Math.random()*r)]:this.name_ming_nv[Math.floor(Math.random()*i)];return n+o},r.prototype.parseNameJson=function(){var t=e.ConfigManagerBase.getConf(e.ConfigEnumBase.PLAYERNAME,1);t&&(this.name_xing=t.name_xing?t.name_xing.toString().split(";"):null,this.name_ming_nan=t.name_ming_nan?t.name_ming_nan.toString().split(";"):null,this.name_ming_nv=t.name_ming_nv?t.name_ming_nv.toString().split(";"):null)},r);function r(){this.jsonDic={}}e.JsonDataManager=t,__reflect(t.prototype,"qmr.JsonDataManager")}(qmr=qmr||{}),function(i){var t=(e.getLayerMaskSprite=function(){return i.Pool.getItemByClass("LayerMaskSprite",e)},e.recovryLayerMaskSprite=function(t){i.Pool.recover("LayerMaskSprite",t)},e.prototype.addMask=function(t,e){void 0===e&&(e=!1),this._isAlpha0=e,this.mask||(this.mask=new egret.Sprite),this.onStageResize(),this.mask.touchEnabled=!0,this.mask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMaskHandler,this),i.LayerManager.instance.getLayer(t).addChild(this.mask),e||this.tweenAddMask()},e.prototype.onClickMaskHandler=function(t){var e,r;this.mask&&this.mask.parent&&1<(e=this.mask.parent.numChildren)&&(r=this.mask.parent.getChildAt(e-1))instanceof i.SuperBaseModule&&r.isClickHide&&r.hide()},e.prototype.tweenAddMask=function(){this.mask&&this.mask.parent&&(egret.Tween.resumeTweens(this.mask),egret.Tween.get(this.mask).to({alpha:1},120))},e.prototype.tweenRemoveMask=function(){var t=this.mask;t&&t.parent&&(0<t.alpha?(t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMaskHandler,this),egret.Tween.resumeTweens(t),egret.Tween.get(t).to({alpha:0},100).call(this.removeMask,this)):this.removeMask())},e.prototype.onStageResize=function(){var t=this.stageWidth,e=this.stageHeight;this.mask.graphics.clear(),this.mask.graphics.beginFill(0,this._isAlpha0?0:.6),this.mask.graphics.drawRect(0,0,t,e),this.mask.graphics.endFill(),this.mask.width=t,this.mask.height=e},e.prototype.removeMask=function(){var t=this.mask;t&&t.parent&&(t.graphics.clear(),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMaskHandler,this),t.parent.removeChild(t)),this.dispose()},Object.defineProperty(e.prototype,"stageWidth",{get:function(){return i.StageUtil.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stageHeight",{get:function(){return i.StageUtil.stageHeight},enumerable:!0,configurable:!0}),e.prototype.reset=function(){},e.prototype.dispose=function(){this.reset(),e.recovryLayerMaskSprite(this)},e);function e(){this.mask=new egret.Sprite}i.LayerMaskSprite=t,__reflect(t.prototype,"qmr.LayerMaskSprite")}(qmr=qmr||{}),function(a){var t=(Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.addGroupRef=function(t){var e,r;-1==this._noCountGroupNames.indexOf(t)&&((e=this.groupNameDic[t])||(this.groupNameDic[t]=e={}),(r=e.count)?r+=1:r=1,e.count=r,a.LogUtil.log("LoaderManager.addGroupRef:",t,r))},e.prototype.removeGroupRef=function(t){t in this.groupNameDic&&delete this.groupNameDic[t]},e.prototype.destoryGroup=function(t,e){void 0===e&&(e=!1);var r,i,n=this.groupNameDic[t];n&&((r=n.count)?--r:r=0,r<=0&&(r=0),n.count=r,a.LogUtil.log("LoaderManager.destoryGroup:",t,r),0==r&&(n.livingTime=egret.getTimer(),e&&(i=RES.destroyRes(t),a.LogUtil.warn(" "+t+"  "+i),this.groupNameDic[t]=null,delete this.groupNameDic[t])))},e.prototype.clearGroupTick=function(){var t=egret.getTimer(),e=this.groupNameDic,r=this.maxLivingTime;for(var i in e){var n,o=e[i];0==o.count&&o.livingTime&&t-o.livingTime>r&&(n=RES.destroyRes(i),a.LogUtil.warn("RES.destroyRes res:"+i+"  "+n),e[i]=null,delete e[i])}a.ModuleManager.clearModuleTick(t,r),a.AnimateManager.getInstance().clear(t)},e);function e(){this.maxLivingTime=12e4,this._noCountGroupNames=["common","mainC","common_beijing_png"];this.groupNameDic={},a.Ticker.getInstance().registerTick(this.clearGroupTick,this,6e4)}a.LoaderManager=t,__reflect(t.prototype,"qmr.LoaderManager")}(qmr=qmr||{}),function(a){var t=(o.startCheck=function(){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(t){switch(t.label){case 0:return e=this,a.PlatformManager.instance.isOutNetPlatForm?[3,2]:(r=a.Handler.create(e,e.pullServerList),[4,a.GameLoadManager.instance.loadLoginViewRes()]);case 1:return t.sent(),a.ModuleManager.showModule(a.ModuleNameLogin.LOGIN_VIEW,r),[3,3];case 2:e.pullServerList(),t.label=3;case 3:return[2]}})})},o.reqConnectGameServer=function(){var t=this;a.GameLoading.getInstance().setLoadingTip("..."),a.Rpc.getInstance().connect(a.GlobalConfig.loginServer,a.GlobalConfig.loginPort,function(){a.MarkPointManager.setPoint(a.PointEnum.POINT_4),t.checkAccountValidity(a.Handler.create(t,function(){return __awaiter(this,void 0,void 0,function(){var e,r,i;return __generator(this,function(t){return(e=a.ServerListModel.instance.getServerVo(parseInt(a.GlobalConfig.sid)))&&(a.GlobalConfig.sName=e.serverName),r=a.ServerListModel.instance.sid,i=a.GlobalConfig.uid+"",console.log("account:"+a.GlobalConfig.account+" ---- userName:"+i),a.GlobalConfig.account?(a.MarkPointManager.setPoint(a.PointEnum.POINT_5),a.LoginController.instance.reqLogin(a.GlobalConfig.account,r)):a.ModuleManager.showModule(a.ModuleNameLogin.DISCONNECT_VIEW,{msg:"",code:-1},a.LayerConst.TIP,!0,!1),[2]})})}))},t)},o.pullServerList=function(){return __awaiter(this,void 0,void 0,function(){var n,e;return __generator(this,function(t){return n=this,a.GlobalConfig.account&&""!=a.GlobalConfig.account?(a.MarkPointManager.loginBeforeSetPoint(a.PointEnum.GET_SERVER_LIST),e=a.PlatformManager.instance.platform.getPullServerListUrl(),console.log(": "+e),a.HttpRequest.sendGet(e,function(i){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),e=JSON.parse(i),console.log(":"+JSON.stringify(i)),a.GlobalConfig.serverList=e.sl,a.GlobalConfig.recentLoginServerList=e.my,a.ServerListController.instance.parseServerList(a.GlobalConfig.serverList),a.PlatformConfig.platformId!=a.PlatformEnum.P_6kwAndriod&&a.PlatformManager.instance.isOutNetPlatForm?[3,2]:[4,n.showLoginView()];case 1:return t.sent(),[3,3];case 2:n.pullRecentlyServerList(),t.label=3;case 3:return[3,5];case 4:return r=t.sent(),console.log(":"+r),[3,5];case 5:return[2]}})})},n)):(console.error(""),a.TipManagerCommon.getInstance().createCommonColorTip("")),[2]})})},o.checkAccountValidity=function(i){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(t){switch(t.label){case 0:return e=this,[4,a.PlatformManager.instance.platform.getCheckAccountValidityUrl(a.TimeUtil.serverTime)];case 1:return r=t.sent(),console.log(": "+r),a.HttpRequest.sendGet(r,function(t){var e=JSON.parse(t);console.log(":"+JSON.stringify(t)),e&&0==e.ret&&(console.log("",e.sparam),a.PlatformManager.instance.platform.isVerify=!0,a.GlobalConfig.cdata=e.cdata,a.GlobalConfig.sparam=e.sparam,a.GlobalConfig.logintime=e.sparam.time,e.sparam&&e.sparam.clientip&&(a.GlobalConfig.clientIp=e.sparam.clientip,a.PlatformConfig.channelId=e.sparam.ChannelId),e.sparam&&e.sparam.account&&(a.GlobalConfig.account=String(e.sparam.account),console.log(":"+e.sparam.account)),i&&i.run())},e),[2]}})})},o.showLoginView=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return a.PlatformManager.instance.platform.setLoadingProgress(100),[4,a.GameLoadManager.instance.loadLoginViewRes()];case 1:return t.sent(),a.ModuleManager.showModule(a.ModuleNameLogin.LOGIN_VIEW),a.MarkPointManager.loginBeforeSetPoint(a.PointEnum.SHOW_SELECT_SERVER_VIEW),[2]}})})},o.pullRecentlyServerList=function(){var o=this;a.ServerListController.instance.pullMyLoginServerList(a.Handler.create(this,function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n;return __generator(this,function(t){switch(t.label){case 0:if(e="",(r=a.ServerListModel.instance.recentLoginServerlist)&&0<r.length)for(n=0;n<r.length;n++)i=r[n],e+="ip="+i.ip+",serverId="+i.serverId+",serverName="+i.serverName+",serverIndex="+i.serverIndex+";";return console.log("==="+e),0<a.ServerListModel.instance.recentLoginServerlist.length?(a.GlobalConfig.isFirstNewUser=!1,[4,o.showLoginView()]):[3,2];case 1:return t.sent(),a.MarkPointManager.loginBeforeSetPoint(a.PointEnum.SHOW_SELECT_SERVER_VIEW),a.ModuleManager.popModule(a.ModuleNameLogin.GONGGAO_VIEW),[3,3];case 2:a.GlobalConfig.isFirstNewUser=!0,o.firstLoginByNewUser(),t.label=3;case 3:return[2]}})})}))},o.firstLoginByNewUser=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n;return __generator(this,function(t){return a.MarkPointManager.setPoint(a.PointEnum.POINT_2),e=null,e=a.ServerListModel.instance.recommendServer,console.log("",e&&JSON.stringify(e)),e||(e=a.ServerListModel.instance.defaultServer,console.log("",e&&JSON.stringify(e))),e?e.isWh?a.TipManagerCommon.getInstance().createCommonColorTip(""):(a.GlobalConfig.sid=e.serverId+"",r=e.ip,i=e.port,(n=new a.LoginInfoVo).loginServerIP=r,n.loginServerPort=i+"",egret.localStorage.setItem("testUserid",a.GlobalConfig.account),egret.localStorage.setItem("serverId",a.GlobalConfig.sid),a.PlatformManager.instance.platform.setLoadingProgress(100),a.PlatformManager.instance.platform.setLoadingStatus(""),a.MarkPointManager.setPoint(a.PointEnum.POINT_3),a.LoginModel.instance.setLoginIninfo(n),o.reqConnectGameServer()):a.TipManagerCommon.getInstance().createCommonColorTip(""),[2]})})},o);function o(){}a.LoginManager=t,__reflect(t.prototype,"qmr.LoginManager")}(qmr=qmr||{}),function(m){var t,e=(r.setPoint=function(t,e){void 0===e&&(e=!1),m.PlatformConfig.platformId==m.PlatformEnum.P_WX&&m.GlobalConfig.isFirstNewUser&&(this.MarkedPoints[t]||(this.MarkedPoints[t]=!0,m.PlatformConfig.platformId==m.PlatformEnum.P_WX&&aladin.AladinSDK.reportAnalytics(m.PlatformConfig.appIdStr+"",t),console.log(":"+t+"\t"+egret.getTimer()+"ms")))},r.loginBeforeSetPoint=function(t,e){var r,i,n,o,a,s,l,c,h,u,p;e=e||"",m.PlatformConfig.isNeedMarkPoint&&((r=m.PlatformManager.instance).isGetPlatformInfo?this.markedPoint[t]||(i=encodeURI(m.PlatformConfig.platform),n=encodeURI(m.GlobalConfig.account),o=encodeURI(m.PlatformConfig.channelId),a=t,s=encodeURI(m.WebBrowerUtil.model),l=encodeURI(m.GlobalConfig.appVersion),c=encodeURI(m.GlobalConfig.clientIp),h=(new Date).getTime()/1e3|0,u=encodeURI(m.Md5Util.getInstance().hex_md5(""+i+n+c+a+h+m.GlobalConfig.qosKey)),p=r.platform.markPointUrlBeforeLogin+"?platform="+i+"&account="+n+"&channel="+o+"&type="+a+"&subtype="+e+"&device="+s+"&clientver="+l+"&clientip="+c+"&time="+h+"&sign="+u,console.log(": "+p),m.HttpRequest.sendGet(p,function(t){console.log(""+t)},this),this.markedPoint[t]=!0):console.log("sdk,..."))},r.loginSetPoint=function(t,e,r){var i,n,o,a,s,l,c,h,u,p,d,f,g;void 0===e&&(e=!0),r=r||"",e&&!m.GlobalConfig.isCreatRoleEnterGame||m.PlatformConfig.isNeedMarkPoint&&((i=m.GlobalConfig.cdata)&&i.qosurl?(n=m.PlatformManager.instance).isGetPlatformInfo?this.markedPoint[t]||(o=encodeURI(m.PlatformConfig.platform),a=encodeURI(m.GlobalConfig.sid),s=encodeURI(m.PlatformConfig.channelId),l=encodeURI(m.GlobalConfig.account),c=t,h=encodeURI(m.WebBrowerUtil.model),u=encodeURI(m.GlobalConfig.appVersion),p=encodeURI(m.GlobalConfig.clientIp),d=(new Date).getTime()/1e3|0,f=encodeURI(m.Md5Util.getInstance().hex_md5(""+o+l+a+p+c+d+m.GlobalConfig.qosKey)),g=n.platform.markPointUrl+"?platform="+o+"&serverid="+a+"&channel="+s+"&account="+l+"&type="+c+"&subtype="+r+"&device="+h+"&clientver="+u+"&clientip="+p+"&time="+d+"&sign="+f,console.log(""+g),m.HttpRequest.sendGet(g,function(t){console.log(""+t)},this),this.markedPoint[t]=!0):console.log("sdk,..."):console.log(" point:",t))},r.markedPoint={},r.MarkedPoints={},r);function r(){}m.MarkPointManager=e,__reflect(e.prototype,"qmr.MarkPointManager"),(t=m.PointEnum||(m.PointEnum={}))[t.SDK_LOGIN=100]="SDK_LOGIN",t[t.GET_SERVER_LIST=101]="GET_SERVER_LIST",t[t.SHOW_SELECT_SERVER_VIEW=102]="SHOW_SELECT_SERVER_VIEW",t[t.START_GAME=103]="START_GAME",t[t.SHOW_CREAT_ROLE_VIEW=301]="SHOW_CREAT_ROLE_VIEW",t[t.CREAT_SUCCESS=302]="CREAT_SUCCESS",t[t.CREAT_FAIL=303]="CREAT_FAIL",t[t.LOAD_DEFAULT_RES=304]="LOAD_DEFAULT_RES",t[t.LOAD_COMMON_RES=305]="LOAD_COMMON_RES",t[t.FIRST_ENTER_GAME=401]="FIRST_ENTER_GAME",t[t.EVERY_ENTER_GAME=402]="EVERY_ENTER_GAME",t[t.POINT_2=2]="POINT_2",t[t.POINT_3=3]="POINT_3",t[t.POINT_4=4]="POINT_4",t[t.POINT_5=5]="POINT_5",t[t.POINT_6=6]="POINT_6",t[t.POINT_7=7]="POINT_7",t[t.POINT_8=8]="POINT_8",t[t.POINT_9=9]="POINT_9",t[t.POINT_10=10]="POINT_10",t[t.POINT_11=11]="POINT_11",t[t.POINT_12=12]="POINT_12",t[t.POINT_WX_LOAD_SKIN=13]="POINT_WX_LOAD_SKIN",t[t.POINT_WX_LOAD_CONFIG=14]="POINT_WX_LOAD_CONFIG",t[t.POINT_WX_LOAD_COMMON_RES=15]="POINT_WX_LOAD_COMMON_RES",t[t.POINT_WX_LOAD_COMPLETED=16]="POINT_WX_LOAD_COMPLETED",t[t.POINT_WX_CLICK_START_BTN=17]="POINT_WX_CLICK_START_BTN",t[t.POINT_WX_CLICK_RANDOM_BTN=18]="POINT_WX_CLICK_RANDOM_BTN",t[t.POINT_WX_CLICK_INPUTTEXT=19]="POINT_WX_CLICK_INPUTTEXT"}(qmr=qmr||{}),function(i){var e,t=(e=i.BaseController,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return null==this._instance&&(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r.prototype.initListeners=function(){this.addSocketListener(i.MessageIDLogin.S_SYNC_TIME,this.onRecsynSystem,this),this.addSocketListener(i.MessageIDLogin.S_EXCEPTION_MSG,this.onRecExceptionMsg,this,!0)},r.prototype.startHeart=function(){this.isStartSysn||(this.isStartSysn=!0,this.timeFlag=Date.now(),this.timeKey=egret.setInterval(this.reqgetSystemTime,this,8e3),this.reqgetSystemTime())},r.prototype.clearHeart=function(){this.isStartSysn=!1,-1!=this.timeKey&&(egret.clearInterval(this.timeKey),this.timeKey=-1)},r.prototype.reqgetSystemTime=function(){var t=new com.message.C_SYNC_TIME;this.sendCmd(t,i.MessageIDLogin.C_SYNC_TIME)},r.prototype.onRecsynSystem=function(t){i.TimeUtil.syncServerTime(parseInt(t.time.toString())),this.isSyncOne||(this.isSyncOne=!0,this.dispatch(i.NotifyConstLogin.SCNY_ONE_SERVER_TIME)),i.GlobalConfig.loginInitFinish&&!i.ServerClock.getInstance().isClockStart&&i.ServerClock.getInstance().startClock()},r.prototype.onRecExceptionMsg=function(t){var e=t.code;i.LogUtil.log("[: "+e+"]");var r=i.ConfigManagerBase.getConf(i.ConfigEnumBase.CODECFG,e);r&&(1217==e?(i.Rpc.getInstance().close(),i.GameLoading.getInstance().close(),i.TipManagerCommon.getInstance().createCommonColorTip(r.msg)):1171==e?(this.dispatch(i.NotifyConstLogin.S_USER_LOGIN_REPEAT),i.TipManagerCommon.getInstance().createCommonColorTip(r.msg)):this.dispatch(i.NotifyConstLogin.S_ERROR_CODE,e)),!i.GlobalConfig.isCreatRoleEnterGame||1171!=e&&1172!=e&&1173!=e||i.MarkPointManager.loginSetPoint(i.PointEnum.CREAT_FAIL)},r);function r(){var t=e.call(this)||this;return t.timeKey=-1,t}i.SystemController=t,__reflect(t.prototype,"qmr.SystemController")}(qmr=qmr||{}),function(o){var t=(e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.createCommonTip=function(t,e,r,i){void 0===e&&(e=16777215),void 0===r&&(r=0),void 0===i&&(i=null);for(var n=!1,o=0,a=this.commonMessInfo;o<a.length;o++)if(a[o].mess==t){n=!0;break}n||this.commonMessInfo.push({mess:t,color:e,yPos:r,itemcfg:i}),this.isConmmoning||(this.isConmmoning=!0,this.showCommonTip())},e.prototype.createCommonColorTip=function(t,e,r,i){void 0===e&&(e=!1),void 0===r&&(r=0),void 0===i&&(i=null),this.createCommonTip(t,e?632328:16711680,r,i)},e.prototype.createCNTip=function(t,e,r){void 0===e&&(e=16777215),void 0===r&&(r=0);var i,n=o.ConfigManagerBase.getConf(o.ConfigEnumBase.CLIENTCN,t);n&&(0<=(i=n.colerType)&&(e=o.ColorUtil.getTipColorByType(i)),this.createCommonTip(n.value,e,r,null))},e.prototype.recycleCommonTip=function(t){this.commonTips.push(t)},e.prototype.showCommonTip=function(){var t,e,r=this;!this.isConmmoning||(t=this.commonMessInfo.shift())&&(e=(e=this.commonTips.shift())||new o.CommonTip,o.LayerManager.instance.addDisplay(e,o.LayerConst.TIP),e.showTip(t),egret.setTimeout(function(){r.commonMessInfo.length?r.showCommonTip():r.isConmmoning=!1},this,this.commonTipCdTime))},e.prototype.createCommonTipCanRepeat=function(t,e,r,i){void 0===e&&(e=16777215),void 0===r&&(r=0),void 0===i&&(i=null),this.commonMessInfoCanRepeat.push({mess:t,color:e,yPos:r,itemcfg:i}),this.isConmmoningCanRepeat||(this.isConmmoningCanRepeat=!0,this.showCommonTipCanRepeat())},e.prototype.createCommonColorTipCanRepeat=function(t,e,r,i){void 0===e&&(e=!1),void 0===r&&(r=0),void 0===i&&(i=null),this.createCommonTipCanRepeat(t,e?632328:16711680,r,i)},e.prototype.showCommonTipCanRepeat=function(){var t,e,r=this;!this.isConmmoningCanRepeat||(t=this.commonMessInfoCanRepeat.shift())&&(e=(e=this.commonTips.shift())||new o.CommonTip,o.LayerManager.instance.addDisplay(e,o.LayerConst.TIP),e.showTip(t),egret.setTimeout(function(){r.commonMessInfoCanRepeat.length?r.showCommonTipCanRepeat():r.isConmmoningCanRepeat=!1},this,this.commonTipCdTime))},e);function e(){this.commonTipCdTime=500,this.commonMessInfo=[],this.commonMessInfoCanRepeat=[],this.isConmmoning=!1,this.isConmmoningCanRepeat=!1,this.commonTips=[]}o.TipManagerCommon=t,__reflect(t.prototype,"qmr.TipManagerCommon")}(qmr=qmr||{}),function(s){var n=(o.initGameVersion=function(a){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o;return __generator(this,function(t){switch(t.label){case 0:return s.PlatformConfig.useCdnRes?a?1!=(e=a.split("&")).length?[3,2]:(r=void 0,r=e[0],i=r.split(":"),n=void 0,n=1==i.length?i[0]:i[1],o=n.split("/"),this.gameVersionDir=o[0],this.gameVersionNumber=o[1],this.isGameVersionReady=!0,[4,this.parseGameVersionList()]):(console.log("gameVersion undefined"),[2]):(this.isGameVersionReady=!0,[2]);case 1:return t.sent(),[3,3];case 2:this.isGameVersionReady=!1,t.label=3;case 3:return[2]}})})},o.initGameVersionByServer=function(e,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.isGameVersionReady?[2]:(this.parseGameVersion(e,r),this.isGameVersionReady=!0,[4,this.parseGameVersionList()]);case 1:return t.sent(),[2]}})})},o.parseGameVersionList=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return this.updateAppVersion(),[2,new Promise(function(i,t){var e=s.PlatformConfig.webUrl+o.gameVersionDir+"/"+o.gameVersionNumber+"/version.json";s.LogUtil.log(""+e);var r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.TEXT,r.open(e,egret.HttpMethod.GET),r.send(),r.addEventListener(egret.Event.COMPLETE,function(t){var e=t.currentTarget,r=JSON.parse(e.response);n.versionConfig=r.verDic,n.defaultVer=r.defaultVer,i()},n),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){egret.log("post error : "+event),t()},n)})]})})},o.parseGameVersion=function(t,e){if(e){for(var r,i,n,o=e.split("&"),a="ver",s="1",l=o.length,c=0;c<l;c++){var h,u=!1,p=(h=(1==(r=o[c].split(":")).length?(u=!0,i=null,r[0]):(i=r[0],r[1])).split("/"))[0],d=h[1];if(u&&(a=p,s=d),i)for(var f=0,g=i.split(",");f<g.length;f++)if(1==(n=g[f].split("-").map(Number)).length){if(t==n[0])return this.gameVersionDir=p,void(this.gameVersionNumber=d)}else if(t>=n[0]&&t<=n[1])return this.gameVersionDir=p,void(this.gameVersionNumber=d)}this.gameVersionDir=a,this.gameVersionNumber=s,console.log("game module ver : serverId="+t+" ver="+this.gameVersionDir+" "+this.gameVersionNumber)}else console.log("gameVersion undefined")},o.updateAppVersion=function(){var t=this.gameVersionDir.replace(/[^0-9]/gi,"");""==t&&(t="1"),s.GlobalConfig.appVersion=s.PlatformConfig.loginVersion+"."+t+"."+this.gameVersionNumber,console.log("appVersion:",s.GlobalConfig.appVersion)},o.parseLoginResVersion=function(t){var e;t&&(e=t.split("."),this.loginResVersion=e[1]),console.log("login module res ver = "+this.loginResVersion)},o.getPathWithGameVersion=function(t){var e=o.defaultVer;return o.versionConfig&&o.versionConfig[t]&&(e=o.versionConfig[t]),t=s.PlatformConfig.webUrl+o.gameVersionDir+"/"+e+"/"+t},o.loginResVersion="1",o.isGameVersionReady=!1,o);function o(){}s.VersionManager=n,__reflect(n.prototype,"qmr.VersionManager");var t=(e.prototype.init=function(){return Promise.resolve()},e.prototype.getVirtualUrl=function(t){return s.PlatformConfig.useCdnRes?this.getResUrlByVersion(t):t+"?v="+(new Date).getTime()},e.prototype.getResUrlByVersion=function(t){if(-1!=t.indexOf("eui_skins"))return t;if(0<=t.indexOf("resourceLogin/"))return t.replace("resourceLogin/","login/resourceLogin/"+n.loginResVersion+"/");var e=t.indexOf(s.PlatformConfig.baseRoot);if(-1==e)return t;var r=t.indexOf("?v="),i=-1!=r?t.slice(e,r):t.slice(e);return i=n.getPathWithGameVersion(i)},e);function e(){}s.VersionController=t,__reflect(t.prototype,"qmr.VersionController",["RES.IVersionController"])}(qmr=qmr||{}),function(u){var t=(o.clearModuleTick=function(t,e){for(var r=this._cacheAppMap,i=0,n=r.keys;i<n.length;i++){var o=n[i],a=r.get(o);a?a.getEffective(t,e)||(r.remove(o),u.LogUtil.warn("ModuleManager.clear "+o)):u.LogUtil.error("ModuleManager.cacheAppMap "+o)}},o.popModule=function(t,e,r,i,n){void 0===e&&(e=null),void 0===r&&(r=u.LayerConst.ALERT),void 0===i&&(i=!1),void 0===n&&(n=!0),o.showModule(t,e,r,i,n),u.SoundManager.getInstance().loadAndPlayEffect("SOUND_TANCHU")},o.showModule=function(t,e,r,i,n,o,a,s){void 0===e&&(e=null),void 0===r&&(r=u.LayerConst.BASE_UI),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===o&&(o=""),void 0===a&&(a=null),void 0===s&&(s=null);var l=this;if(u.GlobalConfig.isHideRecharge&&-1!=l.NO_RECHARGE_HIDE_VIEW.indexOf(t))return l.closeCurrentModule(),void u.TipManagerCommon.getInstance().createCommonColorTip("");var c=l.getAppByClass(t);if(c){if(c.preModule=s,c.name=t,c.closeOpenPanel=o,c.closeOpenPanelData=a,n&&c.isShow)return-1!=l._NO_TRIGGER_MODULE.indexOf(t)?void c.show(e):void l.hideModule(t);i&&l.closeAllWindow(),c.show(e),((l._currView=c).isNeedMask||c.isNeedAlpha0Mask)&&(r=u.LayerConst.MASK_UI,c.maskSprite||(c.maskSprite=l.addMask(r,c.isNeedAlpha0Mask)));var h=c.groupName;null!=h&&""!=h&&(h.match("_json")?u.ResManager.getRes(h,null,l):u.ResManager.loadGroup(h),u.LoaderManager.instance.addGroupRef(h)),c.layer=r,u.LayerManager.instance.getLayer(r).addChild(c),c.title&&c.updateTitle(c.title,c.ruleId),u.LogUtil.log("[openModule:"+t+"]"),u.NotifyManager.sendNotification(u.NotifyConstLogin.OPEN_PANEL_VIEW,t),u.NotifyManager.sendNotification(u.NotifyConstLogin.OPEN_PANEL_LAYER,r)}l.sendToTop()},o.isShowModule=function(t){var e=this._cacheAppMap.get(t);return!!e&&e.isShow},o.hideModule=function(t,e){void 0===e&&(e=!1);var r,i=t;if(t instanceof u.SuperBaseModule?i=(r=t).name:r=this._cacheAppMap.get(t),r){if(!r.isShow)return;e?r.hide():this.disposWin(r),r.closeOpenPanel&&this.showModule(r.closeOpenPanel,r.closeOpenPanelData)}u.NotifyManager.sendNotification(u.NotifyConstLogin.CLOSE_PANEL_VIEW,i)},o.closeAllWindow=function(){for(var t,e=u.LayerManager.instance.getLayer(u.LayerConst.BASE_UI);e.numChildren;)t=e.getChildAt(0),this.disposWin(t);for(e=u.LayerManager.instance.getLayer(u.LayerConst.MASK_UI);e.numChildren;)t=e.getChildAt(0),this.disposWin(t);for(e=u.LayerManager.instance.getLayer(u.LayerConst.SECOND_PAGE_UI);e.numChildren;)t=e.getChildAt(0),this.disposWin(t);for(e=u.LayerManager.instance.getLayer(u.LayerConst.ALERT);e.numChildren;)t=e.getChildAt(0),this.disposWin(t)},o.getCurrentView=function(){return this._currView},o.closeCurrentModule=function(){this._currView&&this.disposWin(this._currView)},o.getAppByClass=function(t){if(null==t)return null;var e=egret.getTimer(),r=this._cacheAppMap.get(t),i=u.LoaderManager.instance.maxLivingTime;return null!=r&&r.getEffective(e,i)||(r=new(this.getClassName(t)),this._cacheAppMap.set(t,r)),r},o.getSuperBaseModuleByClass=function(t){var e=this._cacheAppMap.get(t);return e&&e.stage?e:null},o.getComponentGlobalPoint=function(t,e){var r=this._cacheAppMap.get(t);return r?r.getComponentGlobalPoint(e):{x:0,y:0}},o.addMask=function(t,e){void 0===e&&(e=!1);var r=u.LayerMaskSprite.getLayerMaskSprite();return r.addMask(t,e),r},o.disposWin=function(t){t instanceof u.SuperBaseModule?(t.dispose(),t.maskSprite&&(t.maskSprite.tweenRemoveMask(),t.maskSprite=null),t.preModule&&t.preModule.parent&&(t.updateGuide(),t.preModule=null)):u.DisplayUtils.removeDisplay(t),this.sendToTop()},o.sendToTop=function(){var t=u.LayerManager.instance.getLayer(u.LayerConst.BASE_UI);u.NotifyManager.sendNotification(u.NotifyConstLogin.CLOSE_PANEL_LAYER,t.numChildren),this.sendToTopEvent()},o.sendToTopEvent=function(){u.NotifyManager.sendNotification(u.NotifyConstLogin.CHANGE_MODEL_VIEW)},o.deleteModule=function(t){this._cacheAppMap.remove(t)},o.setupClass=function(){this.registerClass(u.ModuleNameLogin.LOGIN_VIEW,u.LoginView),this.registerClass(u.ModuleNameLogin.SELECT_SEVER_LIST_VIEW,u.ServerListSelectView),this.registerClass(u.ModuleNameLogin.DISCONNECT_VIEW,u.DisConnectView),this.registerClass(u.ModuleNameLogin.DISCONNECT_VIEW,u.DisConnectView),this.registerClass(u.ModuleNameLogin.GONGGAO_VIEW,u.GonggaoView),this.registerClass(u.ModuleNameLogin.GAME_LOADING_VIEW,u.GameLoadingView)},o.registerClass=function(t,e){this._classAppMap[t]=e},o.getClassName=function(t){return this._classAppMap[t]},o._classAppMap={},o._cacheAppMap=new u.Dictionary,o._NO_TRIGGER_MODULE=[],o.NO_RECHARGE_HIDE_VIEW=[],o.openPanelFromBattle=!1,o);function o(){}u.ModuleManager=t,__reflect(t.prototype,"qmr.ModuleManager")}(qmr=qmr||{}),function(t){var e=(r.LOGIN_VIEW="qmr.LoginView",r.SELECT_SEVER_LIST_VIEW="qmr.ServerListSelectView",r.DISCONNECT_VIEW="qmr.DisConnectView",r.GONGGAO_VIEW="qmr.GonggaoView",r.CREATEROLE_VIEW="qmr.CreateRoleView",r.GAME_LOADING_VIEW="qmr.GameLoadingView",r.RECHARGE_GUILD="qmr.RechargeGuildView",r.FIRST_RECHARGE_VIEW="qmr.FirstRechargetView",r);function r(){}t.ModuleNameLogin=e,__reflect(e.prototype,"qmr.ModuleNameLogin")}(qmr=qmr||{}),function(e){var t=(Object.defineProperty(r,"isOpenRecharge",{get:function(){return!this.cdata||1==this.cdata.charge},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isHideRecharge",{get:function(){return!!r.checkHideRechargeFunc&&r.checkHideRechargeFunc()},enumerable:!0,configurable:!0}),r.getBgName=function(){if(!r._bgName){r._bgName="cjbg1_jpg";var t=window.createRoleBgCover;if(t)switch(Number(t)){case 2:r._bgName="cjbg2_jpg";break;case 3:r._bgName="cjbg3_jpg"}}return r._bgName},Object.defineProperty(r,"isSysIos",{get:function(){return"IOS"==egret.Capabilities.os.toUpperCase()},enumerable:!0,configurable:!0}),r.saveNewUser=function(){var t=r.account;t&&egret.localStorage.setItem(t,t),e.LogUtil.log(""+t)},r.reportLogData={},r.reportLogUrl="http://testmt.housepig.cn/xyws/",r.bIsShowSlowLog=!1,r.loginInitFinish=!1,r.isDebugF=!1,r.userId=0,r.signature="",r.unverifysvr=0,r.platLoginTime="",r.recentLoginServerList=[],r.loginProxyServer="h5liutingting7000.cn",r.isSDKLogout=!1,r.registerAccountHeroId=0,r.account="",r.token="",r.sid="1",r.loginKey="^SOLaMeMOBILE#2019!COMMONKEY24@^$^%(*9183098abcdhghhde",r.qosKey="SolGAmE2019QOSSecReTkeY#RewaRdSecRet^Ket%",r.loginServer="",r.isFirstNewUser=!1,r.appVersion="",r.clientIp="127.0.0.1",r.logintime=0,r);function r(){}e.GlobalConfig=t,__reflect(t.prototype,"qmr.GlobalConfig")}(qmr=qmr||{});var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]),function(t){var e,r=(e=t.SuperBaseModule,__extends(i,e),i.prototype.initListener=function(){e.prototype.initListener.call(this),this.addEvent(this.btn_refresh,egret.TouchEvent.TOUCH_TAP,this.onRefresh,this)},i.prototype.onRefresh=function(){t.GameLoadingView.getInstance().closeVitureProgress(),t.PlatformManager.instance.platform.reloadGame()},i.prototype.initData=function(){e.prototype.initData.call(this);var t=this.data;t?(this.txt_tip.text=t.msg+"",this.txt_code.visible=!1,-1!=t.code&&(this.txt_code.text=": "+t.code,this.txt_code.visible=!0)):(this.txt_tip.text="",this.txt_code.text="")},i.prototype.dispose=function(){t.LogUtil.log("DisConnectView"),e.prototype.dispose.call(this)},i);function i(){var t=e.call(this)||this;return t.qmrSkinName="DisConnectSkin",t.isNeedMask=!0,t.isClickHide=!1,t.isCenter=!0,t}t.DisConnectView=r,__reflect(r.prototype,"qmr.DisConnectView")}(qmr=qmr||{}),function(i){var n,t=(n=i.SuperBaseModule,__extends(e,n),e.prototype.initListener=function(){n.prototype.initListener.call(this),this.addClickEvent(this.btnClose,this.hide,this)},e.prototype.show=function(t){var r=this;n.prototype.show.call(this,t),this.labContent.textFlow=i.HtmlUtil.getHtmlString("...");var e=i.PlatformManager.instance.platform.NoticeUrl+"?platform="+i.PlatformConfig.platform;console.log("gonggao url=",e),i.HttpRequest.sendGet(e,function(t){var e;t&&(i.LogUtil.log("gonggao typeof res=",typeof t),i.LogUtil.log("gonggao res=",t),e=JSON.parse(t),i.LogUtil.log("gonggao json=",e),e.data?r.labContent.textFlow=i.HtmlUtil.getHtmlString(e.data):r.labContent.textFlow=i.HtmlUtil.getHtmlString(""))},this)},e);function e(){var t=n.call(this)||this;return t.qmrSkinName="GonggaoViewSkin",t.isNeedMask=!0,t}i.GonggaoView=t,__reflect(t.prototype,"qmr.GonggaoView")}(qmr=qmr||{}),function(r){var i,t=(i=eui.Group,__extends(e,i),e.prototype.onTouch=function(t){t.stopImmediatePropagation()},e.prototype.runLoading=function(t){this._loadingRun&&(this._loadingRun.rotation+=3)},e.getInstance=function(){return null==e.inttance&&(e.inttance=new e),e.inttance},e.prototype.createChildren=function(){i.prototype.createChildren.call(this),this.rect=new eui.Rect,this.rect.fillColor=0,this.rect.fillAlpha=.2,this.addChild(this.rect),this.rect.touchEnabled=!0,this.rect.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this._loadingRun=new eui.Image(RES.getRes("preloading_loading_png")),this.addChild(this._loadingRun),this._txProgress=new eui.Label,this.addChild(this._txProgress),this.updateSize()},e.prototype.updateSize=function(){this._loadingRun.verticalCenter=0,this._loadingRun.horizontalCenter=0,this._txProgress.verticalCenter=0,this._txProgress.horizontalCenter=0,this._txProgress.size=20,this.rect.width=r.StageUtil.stageWidth,this.rect.height=r.StageUtil.stageHeight},e.prototype.setProgress=function(t,e){r.LayerManager.instance.addDisplay(this,r.LayerConst.TOP),this._txProgress&&(this._txProgress.text=Math.round(t/e*100)+"%",0==t?(this.vitureCount=1,r.Ticker.getInstance().registerTick(this.onTimer,this,50)):r.Ticker.getInstance().unRegisterTick(this.onTimer,this))},e.prototype.onTimer=function(){this.vitureCount++,this.vitureCount<100&&(this._txProgress.text=Math.round(this.vitureCount)+"%")},e.prototype.setLoadingTip=function(t){r.Ticker.getInstance().unRegisterTick(this.onTimer,this),r.NotifyManager.registerNotify(r.StageUtil.STAGE_RESIZE,this.updateSize,this),r.LayerManager.instance.addDisplay(this,r.LayerConst.TOP),this._txProgress&&(this._txProgress.text=t)},e.prototype.close=function(){r.NotifyManager.unRegisterNotify(r.StageUtil.STAGE_RESIZE,this.updateSize,this),r.Ticker.getInstance().unRegisterTick(this.onTimer,this),this.parent&&this.parent.removeChild(this)},e);function e(){var t=i.call(this)||this;t.vitureCount=0;var e=t;return e.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(){e.hasEventListener(egret.Event.ENTER_FRAME)&&e.removeEventListener(egret.Event.ENTER_FRAME,e.runLoading,e)},e),e.addEventListener(egret.Event.ADDED_TO_STAGE,function(){e.setProgress(0,1),e.addEventListener(egret.Event.ENTER_FRAME,e.runLoading,e)},e),e.touchEnabled=!0,t}r.GameLoading=t,__reflect(t.prototype,"qmr.GameLoading")}(qmr=qmr||{}),function(t){var e,r=(e=eui.Component,__extends(i,e),i.prototype.showProgressRate=function(t,e){void 0===e&&(e=!1);var r=t;r<=0&&(r=0),1<=r&&(r=1);var i=528*r;egret.Tween.removeTweens(this.imgProgress),e?egret.Tween.get(this.imgProgress).to({width:i},300):this.imgProgress.width=i,this.imgCloud.x=i},i.prototype.setLoadingTip=function(t){this.labHint.text=t},i.prototype.dispose=function(){egret.Tween.removeTweens(this.imgProgress)},i);function i(){var t=e.call(this)||this;return t.skinName="GameLoadingProgressBarSkin",t.touchEnabled=t.touchChildren=!1,t}t.GameLoadingProgressBar=r,__reflect(r.prototype,"qmr.GameLoadingProgressBar")}(qmr=qmr||{}),function(o){var i,t=(i=o.SuperBaseModule,__extends(e,i),e.getInstance=function(){return e._instance||(e._instance=o.ModuleManager.getAppByClass(o.ModuleNameLogin.GAME_LOADING_VIEW)),e._instance},e.getBgName=function(){return e.bgName||(.5<=Math.random()?e.bgName=e.bgArray[0]:e.bgName=e.bgArray[1]),e.bgName},e.prototype.initComponent=function(){i.prototype.initComponent.call(this);var t=" ";o.PlatformManager.instance.platform.canClearResCache&&(t=" ");var e=o.HtmlUtil.getHtmlTextElement("",16777215),r=o.HtmlUtil.getHtmlTextElement(t,3276588,!0,this.HREF,1918992,1);this.labRefresh.textFlow=e.concat(r),this.labRefresh.touchEnabled=!0},e.prototype.initListener=function(){i.prototype.initListener.call(this),this.addEvent(this.labRefresh,egret.TextEvent.LINK,this.onRefresh,this)},e.prototype.addedToStage=function(t){i.prototype.addedToStage.call(this,t),this.imgBg.source=e.getBgName()},e.prototype.showSelf=function(t,e,r,i,n){void 0===e&&(e=!0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=!0),o.ModuleManager.isShowModule(o.ModuleNameLogin.GAME_LOADING_VIEW)||o.ModuleManager.showModule(o.ModuleNameLogin.GAME_LOADING_VIEW,null,o.LayerConst.MASK_UI,!1),this.setPrelMessage(t),.99<=this.fromProgressTotal&&(n=e=!1),e?this.showVitureProgress():this.closeVitureProgress(),this.fromProgressTotal=r,this.dProgressTotal=i-r,this.updateTotalProgress(0,n)},e.prototype.hideSelf=function(){this.currentProgress=0,o.ModuleManager.isShowModule(o.ModuleNameLogin.GAME_LOADING_VIEW)&&o.ModuleManager.hideModule(o.ModuleNameLogin.GAME_LOADING_VIEW)},e.prototype.updateTotalProgress=function(t,e){void 0===e&&(e=!1),this.isShow&&(.99<=this.fromProgressTotal&&(this.closeVitureProgress(),e=!1),this.showTotalProgress(this.fromProgressTotal+t*this.dProgressTotal,e))},e.prototype.showVitureProgress=function(){var t=this;this.tid||(this.tid=setInterval(function(){t.updateAutoLoading()},50),this.updateAutoLoading())},e.prototype.closeVitureProgress=function(){this.tid&&(clearInterval(this.tid),this.tid=null),this.showPreProgress(1)},e.prototype.updateAutoLoading=function(){this.currentProgress<this.maxProgress?this.currentProgress+=10:this.currentProgress=0,this.showPreProgress(this.currentProgress/this.maxProgress)},e.prototype.onRefresh=function(t){o.PlatformManager.instance.platform.reloadGame(o.PlatformManager.instance.platform.canClearResCache)},e.prototype.setPrelMessage=function(t){this.progressBar1.setLoadingTip(t)},e.prototype.setTotalMessage=function(t){this.progressBar2.setLoadingTip(t)},e.prototype.showTotalProgress=function(t,e){void 0===e&&(e=!1),this.progressBar2.showProgressRate(t,e)},e.prototype.showPreProgress=function(t,e){void 0===e&&(e=!1),this.progressBar1.showProgressRate(t,e)},e.prototype.dispose=function(){this.currentProgress=0,this.closeVitureProgress(),i.prototype.dispose.call(this),o.LoaderManager.instance.destoryGroup("serverlist_loginBg_jpg")},e.bgArray=["loadingNiu_jpg","loadingYu_jpg"],e);function e(){var t=i.call(this)||this;return t.currentProgress=0,t.maxProgress=100,t.fromProgressTotal=0,t.dProgressTotal=1,t.HREF="event_refresh_game",t.needAdaptStatusBar=!1,t.skinName="GameLoadingViewSkin",t.progressBar1.visible=!0,t.progressBar2.visible=!0,t}o.GameLoadingView=t,__reflect(t.prototype,"qmr.GameLoadingView")}(qmr=qmr||{}),function(a){var t,e=(t=a.BaseController,__extends(r,t),Object.defineProperty(r,"instance",{get:function(){return null==this._instance&&(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r.prototype.initListeners=function(){this.addSocketListener(a.MessageIDLogin.S_USER_LOGIN,this.onRecLoginSuccess,this,!0),this.addSocketListener(a.MessageIDLogin.S_USER_LOGOUT,this.onRecUseLoginOut,this,!0),this.addSocketListener(a.MessageIDLogin.S_SEND_SDK_DATA,this.onSdkReportResponse,this,!0)},r.prototype.reqLogin=function(t,e){void 0===e&&(e="1"),egret.log(":"+t,":"+e);var r=new com.message.C_USER_LOGIN;r.username=t,r.gameSite=e;var i=a.GlobalConfig.sparam;i&&(r.sparam=JSON.stringify(i)),this.sendCmd(r,a.MessageIDLogin.C_USER_LOGIN,!0)},r.prototype.reqLoginRegister=function(t,e,r,i){a.GlobalConfig.saveNewUser();var n=new com.message.C_LOGIN_REGISTER;n.username=t,n.gameSite=e,n.nickname=r,n.heroId=i;var o=a.GlobalConfig.sparam;o&&(n.sparam=JSON.stringify(o)),this.sendCmd(n,a.MessageIDLogin.C_LOGIN_REGISTER)},r.prototype.onRecLoginSuccess=function(t){a.SystemController.instance,a.LoginModel.instance.isReconnect?(a.SystemController.instance.startHeart(),a.GameLoading.getInstance().close(),a.PbGlobalCounter.maxReconnectCount=3,a.LogUtil.log("")):(a.LoginModel.instance.onRecLoginSuccess(t),this.dispatch(a.NotifyConstLogin.S_USER_LOGIN))},r.prototype.reqUserLogout=function(t){var e=new com.message.C_USER_LOGOUT;e.playerId=t,this.sendCmd(e,a.MessageIDLogin.C_USER_LOGOUT,!0)},r.prototype.onRecUseLoginOut=function(t){t.beKickOut?a.LoginModel.instance.isInstead=!0:a.LoginModel.instance.isDisconnect=!0,this.dispatch(a.NotifyConstLogin.S_USER_LOGOUT)},r.prototype.reqReconnect=function(){var t;a.PlatformManager.instance.platform.isVerify&&(a.LoginModel.instance.isReconnect=!0,t=a.ServerListModel.instance.sid,this.reqLogin(a.GlobalConfig.account,t))},r.prototype.reqRelogin=function(){var t;a.PlatformManager.instance.platform.isVerify&&(a.LoginModel.instance.isReconnect=!1,t=a.ServerListModel.instance.sid,this.reqLogin(a.GlobalConfig.account,t))},r.prototype.reportSdkPortRequest=function(t,e){var r=new com.message.C_SEND_SDK_DATA;r.reportStr=e,r.reportUrl=t,this.sendCmd(r,a.MessageIDLogin.C_SEND_SDK_DATA,!0)},r.prototype.onSdkReportResponse=function(t){console.log("sdk"+t.canUse)},r);function r(){return t.call(this)||this}a.LoginController=e,__reflect(e.prototype,"qmr.LoginController")}(qmr=qmr||{}),function(r){var t=(Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.onRecLoginSuccess=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return r.SystemController.instance.startHeart(),r.GlobalConfig.userId=parseFloat(e.playerId.toString()),[4,r.VersionManager.initGameVersionByServer(parseInt(r.GlobalConfig.sid),r.PlatformConfig.gameVersion)];case 1:return t.sent(),0<r.GlobalConfig.userId?(r.GlobalConfig.isCreatRoleEnterGame?(r.MarkPointManager.setPoint(r.PointEnum.POINT_9),r.MarkPointManager.loginSetPoint(r.PointEnum.CREAT_SUCCESS)):r.GlobalConfig.isFirstNewUser=!1,r.GameLoading.getInstance().close(),this.isEnterGame=!0,this.destoryLoginRes(),r.GameLoadManager.instance.loadGameResAfterLogin(),[4,r.GameLoadManager.instance.waitGameResLoaded()]):[3,3];case 2:return t.sent(),r.EntryAfterLogin.setup(),[3,5];case 3:return[4,r.GameLoadManager.instance.loadcreateRoleGroup()];case 4:t.sent(),r.EntryCreateRole.setup(),r.ModuleManager.showModule(r.ModuleNameLogin.CREATEROLE_VIEW),t.label=5;case 5:return[2]}})})},e.prototype.setLoginIninfo=function(t){r.GlobalConfig.loginProxyServer=t.proxyServer,r.GlobalConfig.loginPort=parseInt(t.loginServerPort+""),r.GlobalConfig.loginServer=t.loginServerIP,r.PlatformManager.instance.platform.initLoginServer()},e.prototype.destoryLoginRes=function(){var t=document.getElementById("preLoadBg");t&&t.parentNode&&t.parentNode.removeChild(t),r.ModuleManager.hideModule(r.ModuleNameLogin.GONGGAO_VIEW,!0),r.ModuleManager.hideModule(r.ModuleNameLogin.SELECT_SEVER_LIST_VIEW,!0),r.ModuleManager.hideModule(r.ModuleNameLogin.LOGIN_VIEW,!0),r.ModuleManager.hideModule(r.ModuleNameLogin.CREATEROLE_VIEW,!0)},e);function e(){}r.LoginModel=t,__reflect(t.prototype,"qmr.LoginModel")}(qmr=qmr||{}),function(a){var n,t=(n=a.LoginViewUI,__extends(e,n),e.prototype.initListener=function(){n.prototype.initListener.call(this),this.addClickEvent(this.btn_login,this.onStartLogin,this),this.addClickEvent(this.group_gonggao,this.onShowGonggao,this),this.addClickEvent(this.groupSwitchSDKAccount,this.onSwitchAccount,this),this.addEvent(this.g_select,egret.TouchEvent.TOUCH_TAP,this.onSelectServerList,this),a.LabelUtil.addInputListener(this.txt_account,this)},e.prototype.onSwitchAccount=function(){},e.prototype.addedToStage=function(t){n.prototype.addedToStage.call(this,t),this.groupSwitchSDKAccount.visible=!1,this.addEffect();var e=document.getElementById("gameLoading");e&&e.parentNode&&e.parentNode.removeChild(e);var r,i=document.getElementById("style");i&&i.parentNode&&i.parentNode.removeChild(i),a.PlatformConfig.platformId==a.PlatformEnum.P_6kwAndriod||(r=document.getElementById("preIndexBg"))&&r.parentNode&&r.parentNode.removeChild(r),a.PlatformManager.instance.platform.setLoadingStatus(""),this.imgBg.source="serverlist_loginBg_jpg",this.imgBg.addEventListener(egret.Event.COMPLETE,this.onBgResBack,this),this.group_gonggao.visible=a.PlatformConfig.isShowNotice,a.GameLoadManager.instance.loadGameResAfterLogin()},e.prototype.onBgResBack=function(){a.LogUtil.log("onBgResBack"),document&&document.getElementById("loaingMyBg")&&(document.getElementById("loaingMyBg").style.display="none")},e.prototype.addWindEffect=function(){this.imgWindSlow.x=this.stage.stageWidth,this.imgWindFast.x=this.stage.stageWidth,this.imgWindMiddle.x=this.stage.stageWidth;var t=-this.imgWindSlow.width;a.LogUtil.log("this.imgWindSlow.width",this.imgWindSlow.width),egret.Tween.get(this.imgWindSlow,{loop:!0}).to({x:t},7e3),egret.Tween.get(this.imgWindFast,{loop:!0}).to({x:t},7e3/1.5),egret.Tween.get(this.imgWindMiddle,{loop:!0}).to({x:t},7e3/1.3)},e.prototype.createAvatar=function(){this.avatar=new a.BaseActor(a.SystemPath.roleUiPath,null,this,a.Status.IDLE),this.groupRoleMonkey.addChild(this.avatar),this.avatar.addPartAt(a.ActorPart.BODY,20100,0,-1)},e.prototype.addEffect=function(){this.createAvatar(),this.groupMonkey.y=0,egret.Tween.get(this.groupMonkey,{loop:!0}).to({y:40},4e3).to({y:0},4e3),this.addWindEffect()},e.prototype.onShowGonggao=function(){a.ModuleManager.popModule(a.ModuleNameLogin.GONGGAO_VIEW)},e.prototype.initData=function(){var t,e;n.prototype.initData.call(this),this.handler=this.data,this.btn_login.enabled=!0,this.lbl_ver.text=a.GlobalConfig.appVersion,this.isOutNetPlatForm=a.PlatformManager.instance.isOutNetPlatForm,this.isOutNetPlatForm||!this.isOutNetPlatForm&&a.GlobalConfig.account?(e=null,(e=a.ServerListModel.instance.recommendServer)&&(this.txt_severmax.text=e.serverName),this.isOutNetPlatForm?(e=a.ServerListModel.instance.defaultServer)&&(a.GlobalConfig.sid=e.serverId+""):(t="",t=egret.localStorage.getItem("serverId")||"1",a.GlobalConfig.sid=t,e=a.ServerListModel.instance.getServerVo(parseInt(t))),e&&(this.txt_severname.text=e.serverName),this.currentState="publish",this.txt_severname.touchEnabled=!1,this.g_select.touchChildren=!1):(this.currentState="beforeLogin",this.txt_account.text=egret.localStorage.getItem("testUserid"))},e.prototype.onStartLogin=function(t){if(void 0===t&&(t=!0),a.PlatformConfig.platformId==a.PlatformEnum.P_6kwAndriod&&a.GlobalConfig.isSDKLogout)a.TipManagerCommon.getInstance().createCommonColorTip("");else{if(!this.isOutNetPlatForm&&!a.GlobalConfig.account){var e=this.txt_account.text.trim();return 0==e.length?void a.TipManagerCommon.getInstance().createCommonColorTip(""):(a.GlobalConfig.account=e,a.MarkPointManager.loginBeforeSetPoint(a.PointEnum.SDK_LOGIN),this.handler&&(this.handler.run(),this.handler=null),void this.hide())}var r,i,n,o;this.btn_login.enabled&&(a.MarkPointManager.loginBeforeSetPoint(a.PointEnum.START_GAME),this._isLogin=t,(r=a.ServerListModel.instance.getServerVo(parseInt(a.GlobalConfig.sid)))?(i=r.ip,n=r.port,(o=new a.LoginInfoVo).loginServerIP=i,o.loginServerPort=n+"",egret.localStorage.setItem("testUserid",a.GlobalConfig.account),egret.localStorage.setItem("serverId",a.GlobalConfig.sid),this.connectLoginServer(o)):a.TipManagerCommon.getInstance().createCommonColorTip(""))}},e.prototype.onSelectServerList=function(){a.ModuleManager.popModule(a.ModuleNameLogin.SELECT_SEVER_LIST_VIEW,this)},e.prototype.selectHandler=function(t){this.txt_severname.text=t},e.prototype.connectLoginServer=function(t){a.ServerListModel.instance.getServerVo(parseInt(a.GlobalConfig.sid)).isWh?a.TipManagerCommon.getInstance().createCommonColorTip(""):(a.LoginModel.instance.setLoginIninfo(t),this.lockBtn(),a.LoginManager.reqConnectGameServer())},e.prototype.lockBtn=function(){var t=this;this.btn_login.enabled=!1,this.timeId=setTimeout(function(){t.btn_login.enabled=!0},3e3)},e.prototype.dispose=function(){n.prototype.dispose.call(this),a.LabelUtil.removeInputListener(this.txt_account,this),this.timeId&&(clearTimeout(this.timeId),this.timeId=null),egret.Tween.removeTweens(this.imgWindSlow),egret.Tween.removeTweens(this.imgWindFast),egret.Tween.removeTweens(this.imgWindMiddle),egret.Tween.removeTweens(this.groupMonkey),this.avatar&&this.avatar.dispos(),a.ModuleManager.deleteModule(a.ModuleNameLogin.GONGGAO_VIEW),a.ModuleManager.deleteModule(a.ModuleNameLogin.LOGIN_VIEW),a.ModuleManager.deleteModule(a.ModuleNameLogin.SELECT_SEVER_LIST_VIEW);var t=RES.destroyRes("login");a.LogUtil.log("RES.destroyRes,login=",t)},e);function e(){var t=n.call(this)||this;return t._isLogin=!1,t.needAdaptStatusBar=!1,t.groupName="login",t}a.LoginView=t,__reflect(t.prototype,"qmr.LoginView")}(qmr=qmr||{});var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),qmr.EntryLogin.setup(this.stage)},e.frame=0,e.currentIndex=0,e}(eui.UILayer);__reflect(Main.prototype,"Main"),function(){function t(){}(qmr||(qmr={})).LoginInfoVo=t,__reflect(t.prototype,"qmr.LoginInfoVo")}(),function(a){var t=(e.prototype.parseServerList=function(t){a.ServerListModel.instance.parseServerList(t)},e.prototype.pullMyLoginServerList=function(r){var t=a.PlatformManager.instance.platform;if(t){if(a.ServerListModel.isHasGetRecentLogin)return void(r&&r.run());a.PlatformConfig.isTSVersion;var e=a.PlatformConfig.isTSVersion?t.tsLastLoginServerReqUrl:t.lastLoginServerReqUrl,i=(new Date).getTime(),n=a.Md5Util.getInstance().hex_md5(""+a.GlobalConfig.account+i+a.GlobalConfig.loginKey),o=e+"?account="+a.GlobalConfig.account+"&time="+i+"&sign="+n;console.log(""+o),a.HttpRequest.sendGet(o,function(t){var e=JSON.parse(t);console.log(""+JSON.stringify(t)),0==e.ret?e&&e.sl&&(a.ServerListModel.isHasGetRecentLogin=!0,a.ServerListModel.instance.parseMyRecentLogin(e.sl),r&&r.run()):r&&r.run()},this)}},Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e)},enumerable:!0,configurable:!0}),e);function e(){}a.ServerListController=t,__reflect(t.prototype,"qmr.ServerListController")}(qmr=qmr||{}),function(a){var t,e=(s.prototype.parseServerList=function(t){var r,i,n,o=this,e=t;this._serverTabDic.clear(),e.forEach(function(t,e){(r=new a.ServerVo).parseData(t,e+1),i=e/s.tabServerNum|0,e+=1,(n=o._serverTabDic.get(i))||(n=[],o._serverTabDic.set(i,n)),n.push(r),o._serverVoDic.set(r.serverId,r)})},s.prototype.parseMyRecentLogin=function(t){var e,r,i=this;t&&(e=this,t.forEach(function(t){(r=e.getServerVo(t.id))&&i._recentLoginServerlist.push(r)}))},s.prototype.getTabServerList=function(t){return this._serverTabDic.get(t)},Object.defineProperty(s.prototype,"serverTabDic",{get:function(){return this._serverTabDic},enumerable:!0,configurable:!0}),s.prototype.getServerVo=function(t){return this._serverVoDic.get(t)},s.prototype.getServerName=function(t){var e=s.instance.getServerVo(parseInt(a.GlobalConfig.sid));return e?e.serverName:""},Object.defineProperty(s.prototype,"recentLoginServerlist",{get:function(){return this._recentLoginServerlist},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"defaultServer",{get:function(){var t=this.recentLoginServerlist[0];if(t)return t;var e=egret.localStorage.getItem("serverId");return(t=this.getServerVo(parseInt(e)))||this.recommendServer},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"recommendServer",{get:function(){var t=this._serverVoDic.values;return t[t.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sid",{get:function(){return a.GlobalConfig.sid},enumerable:!0,configurable:!0}),Object.defineProperty(s,"instance",{get:function(){return this._instance||(this._instance=new s)},enumerable:!0,configurable:!0}),s.tabServerNum=10,s.isHasGetRecentLogin=!1,s);function s(){this._serverVoDic=new a.Dictionary,this._serverTabDic=new a.Dictionary,this._recentLoginServerlist=[]}a.ServerListModel=e,__reflect(e.prototype,"qmr.ServerListModel"),(t=a.ServerStateEnum||(a.ServerStateEnum={}))[t.STATE1=1]="STATE1",t[t.STATE2=2]="STATE2",t[t.STATE3=3]="STATE3"}(qmr=qmr||{}),function(o){var e,t=(e=o.ServerListSelectUI,__extends(r,e),r.prototype.initComponent=function(){e.prototype.initComponent.call(this),this.listServer.itemRenderer=o.ServerRender,this.collect=new eui.ArrayCollection,this.listServer.dataProvider=this.collect,this.tabCollect=new eui.ArrayCollection,this.updateTab()},r.prototype.initListener=function(){e.prototype.initListener.call(this),this.addEvent(this.tab_server,egret.Event.CHANGE,this.onTabarChanage,this),this.addEvent(this.listServer,eui.ItemTapEvent.ITEM_TAP,this.onClickItem,this),this.addClickEvent(this.btnClose,this.hide,this)},r.prototype.initData=function(){e.prototype.initData.call(this),this.tab_server.selectedIndex=0,this.onTabarChanage()},r.prototype.updateTab=function(){var t=this.convertData();this.tab_server.dataProvider=this.tabCollect,this.tabCollect.source=t},r.prototype.onTabarChanage=function(){var t;0==this.tab_server.selectedIndex?(this.collect.source=null,this.reqMyLoginServerList()):t=o.ServerListModel.instance.getTabServerList(this.tab_server.selectedIndex-1),t&&(this.collect.source=t)},r.prototype.reqMyLoginServerList=function(){o.ServerListController.instance.pullMyLoginServerList(o.Handler.create(this,function(){this.collect.source=o.ServerListModel.instance.recentLoginServerlist}))},r.prototype.onClickItem=function(t){var e=t.item;o.GlobalConfig.sid=e.serverId+"";var r=e.serverName,i=this.data;i&&i.selectHandler(r),this.hide()},r.prototype.convertData=function(){var i=[],n=o.ServerListModel.instance.serverTabDic;return i.push({label:""}),n.keys.sort(function(t,e){return e-t}).forEach(function(t){var e,r;n.get(t)&&(r=(e=t*o.ServerListModel.tabServerNum+1)+"-"+(e+(o.ServerListModel.tabServerNum-1))+"",i.push({label:r}))}),i},r);function r(){var t=e.call(this)||this;return t.isNeedMask=!0,t}o.ServerListSelectView=t,__reflect(t.prototype,"qmr.ServerListSelectView")}(qmr=qmr||{}),function(t){var e,r=(e=eui.ItemRenderer,__extends(i,e),i.prototype.dataChanged=function(){this.imgMark.visible=!1;var t=this.data;this.imgState.source=this.getStateIcon(),this.labServerNum.text=this.data.serverIndex+"",this.labServerName.text=t.serverName,t.isNewServer?(this.imgMark.visible=!0,this.imgMark.source="serverlist_biao_png"):t.isHot&&(this.imgMark.visible=!0,this.imgMark.source="serverlist_biao2_png")},i.prototype.getStateIcon=function(){return this.data.isWh?"serverlist_ui_fwq_wh_png":this.data.isNewServer?"serverlist_ui_ty_ld_png":"serverlist_common_dian_png"},i);function i(){var t=e.call(this)||this;return t.skinName="ServerItemSkin",t}t.ServerRender=r,__reflect(r.prototype,"qmr.ServerRender")}(qmr=qmr||{});var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform),function(t){var e=(r.prototype.parseData=function(t,e){this._serverId=t.id,this.serverIndex=e,this._ip=t.ip,this._port=t.pp,this._serverName=t.nm,this._openServerTime=t.tm,t.xf&&(this._isNewServer=1==t.xf),this._isWh=1==t.wh,this._isHot=1==t.hr},Object.defineProperty(r.prototype,"serverId",{get:function(){return this._serverId},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ip",{get:function(){return this._ip},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"port",{get:function(){return this._port},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"serverName",{get:function(){return this._serverName},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"openServerTime",{get:function(){return this._openServerTime},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isNewServer",{get:function(){return this._isNewServer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isWh",{get:function(){return this._isWh},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isHot",{get:function(){return this._isHot},enumerable:!0,configurable:!0}),r);function r(){}t.ServerVo=e,__reflect(e.prototype,"qmr.ServerVo")}(qmr=qmr||{}),function(t){var e=(r.init=function(){var t;for(var e in this)t=this[e],this.MSG_KEYS.set(t,e)},r.getMsgNameById=function(t){return r.MSG_KEYS.get(t)},r.MSG_KEYS=new t.Dictionary,r.S_EXCEPTION_MSG=900,r.C_USER_LOGIN=1001,r.S_USER_LOGIN=1002,r.C_LOGIN_REGISTER=1005,r.C_USER_LOGOUT=1007,r.S_USER_LOGOUT=1008,r.C_SYNC_TIME=2101,r.S_SYNC_TIME=2102,r.C_SEND_SDK_DATA=1032,r.S_SEND_SDK_DATA=1033,r);function r(){}t.MessageIDLogin=e,__reflect(e.prototype,"qmr.MessageIDLogin")}(qmr=qmr||{}),function(t){var e=(Object.defineProperty(r,"instance",{get:function(){return null==this._instance&&(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r);function r(){this.msgIdMap={},this.msgIdMap[t.MessageIDLogin.S_EXCEPTION_MSG]=com.message.S_EXCEPTION_MSG,this.msgIdMap[t.MessageIDLogin.S_USER_LOGIN]=com.message.S_USER_LOGIN,this.msgIdMap[t.MessageIDLogin.S_USER_LOGOUT]=com.message.S_USER_LOGOUT,this.msgIdMap[t.MessageIDLogin.C_SYNC_TIME]=com.message.C_SYNC_TIME,this.msgIdMap[t.MessageIDLogin.S_SYNC_TIME]=com.message.S_SYNC_TIME,this.msgIdMap[t.MessageIDLogin.C_SEND_SDK_DATA]=com.message.C_SEND_SDK_DATA,this.msgIdMap[t.MessageIDLogin.S_SEND_SDK_DATA]=com.message.S_SEND_SDK_DATA}t.ProtoMsgIdMapLogin=e,__reflect(e.prototype,"qmr.ProtoMsgIdMapLogin")}(qmr=qmr||{});var aladin,ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(r,i,n,o){var t,e,a=this;"undefined"!=typeof generateEUI?(qmr.LogUtil.log("[url:"+r+"]"),egret.callLater(function(){i.call(o,generateEUI)},this)):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(t,e){window.JSONParseClass.setData(t),egret.callLater(function(){i.call(o,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON):"undefined"!=typeof generateJSON?-1<r.indexOf(".exml")?((t=r.split("/")).pop(),e=t.join("/")+"_EUI.json",generateJSON.paths[r]?egret.callLater(function(){i.call(o,generateJSON.paths[r])},this):RES.getResByUrl(e,function(t){window.JSONParseClass.setData(t),egret.callLater(function(){i.call(o,generateJSON.paths[r])},a)},this,RES.ResourceItem.TYPE_JSON)):egret.callLater(function(){i.call(o,generateJSON)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,function t(e){e.resItem.url==r&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,t,null),n.call(o))},null),RES.getResByUrl(r,function(t){i.call(o,t)},this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]),function(t){var e=(c.registerNotify=function(t,e,r){var i=c.typeDic,n=i[t];if(n){for(var o=!1,a=0,s=n;a<s.length;a++){var l=s[a];if(l.callback==e&&l.thisObject==r){o=!0;break}}o||(n.push({callback:e,thisObject:r}),i[t]=n)}else i[t]=[{callback:e,thisObject:r}]},c.unRegisterNotify=function(t,e,r){var i=c.typeDic[t];if(i){for(var n=0,o=i;n<o.length;n++){var a=o[n];if(a.callback==e&&a.thisObject==r){var s=i.indexOf(a);-1!=s&&i.splice(s,1);break}}0==i.length?delete c.typeDic[t]:c.typeDic[t]=i}},c.unRegisterNotifyByType=function(t){delete c.typeDic[t]},c.hasNotification=function(t){var e=c.typeDic[t];return!!e&&0<e.length},c.sendNotification=function(t,e){void 0===e&&(e=null);var r=c.typeDic[t];if(r)for(var i=void 0,n=r.length-1;0<=n;n--)(i=r[n])&&i.callback&&i.callback.call(i.thisObject,e)},c.sendNotificationSplit=function(t,e){void 0===e&&(e=null);var r=c.typeDic[t],i=[];if(r){for(var n,o=r.length-1;0<=o;o--)(n=r[o])&&n.callback&&(i[o]||(i[o]={}),i[o].callback=n.callback,i[o].thisObject=n.thisObject,i[o].params=n.params);c.splitTypeDic.push(i)}},c.removeThisObjectNofity=function(t){var e=c.typeDic;for(var r in e){for(var i=e[r],n=i.length-1;0<=n;n--)i[n].thisObject==t&&i.splice(n,1);0==i.length?delete e[r]:e[r]=i}},c.test=function(){console.warn("NotifyManager.typeDic=======================================================>"),console.warn(c.typeDic),console.warn("egret.ticker=======================================================>"),console.warn(egret.ticker)},c.typeDic={},c.splitTypeDic=[],c.logDic={},c);function c(){}t.NotifyManager=e,__reflect(e.prototype,"qmr.NotifyManager")}(qmr=qmr||{}),function(t){var e=(Object.defineProperty(r,"instance",{get:function(){return this._instance||(this._instance=new r)},enumerable:!0,configurable:!0}),r.prototype.setModel=function(t,e){this._guildModel=t,this._heroModel=e},Object.defineProperty(r.prototype,"ownGuildId",{get:function(){var t=0;return this._guildModel&&(t=this._guildModel.ownGuildId),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"guildName",{get:function(){var t="";return this._guildModel&&(t=this._guildModel.guildName),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"playerId",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.playerId),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){var t="";return this._heroModel&&(t=this._heroModel.name),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"money",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.money),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"level",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.level),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"diamond",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.diamond),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"vipLevel",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.vipLevel),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"createTime",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.createTime),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fightVal",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.fightVal),t},enumerable:!0,configurable:!0}),r);function r(){}t.ClientHelper=e,__reflect(e.prototype,"qmr.ClientHelper")}(qmr=qmr||{}),function(r){var t=(i.init=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if(!(e=window.GAME_CONFIG))throw new Error("platfrom config is not define");return this.GAME_CONFIG=e,this.platformId=Number(e.platformId),this.channelId=e.channelId,this.isNeedMarkPoint=e.isMarkPoint,this.isTSVersion=!!Number(e.isTSVersion),e.isWSS&&(this.isWSS=!!Number(e.isWSS)),this.isShildTSV=!!Number(e.isShildTSV),this.isShieldIOSBusiness=!!Number(e.isShieldIOSBusiness),this.isOpenGM=!!Number(Number(e.isOpenGM)),this.loginVersion=e.loginVersion,this.gameVersion=e.gameVersion,this.isDebug=!!Number(e.isDebug),this.extendsParams=e.extendsParams,this.platformClassType=e.platformClassType,this.useCdnRes=!!Number(e.isPublish),this.baseRoot=e.basePath,this.webUrl=e.resPath,this.webRoot=this.webUrl+this.baseRoot,e.isShowNotice&&(this.isShowNotice=!!Number(e.isShowNotice)),e.max_hw_ratio&&(r.StageUtil.MAX_HW_RATIO=Math.min(r.StageUtil.MAX_HW_RATIO,e.max_hw_ratio)),e.min_hw_ratio&&(r.StageUtil.MIN_HW_RATIO=Math.max(r.StageUtil.MIN_HW_RATIO,e.min_hw_ratio)),this.appIdStr=e.appId,this.appKey=e.appKey,this.platform=e.platform,this.platformSign=e.platformSign,this.serverDomain=e.serverDomain,this.ts_serverDomain=e.ts_serverDomain,this.markPointDomain=e.markPointServer,this.ossDoamin=e.ossServer,r.GlobalConfig.appVersion=i.loginVersion,r.VersionManager.parseLoginResVersion(this.loginVersion),[4,r.VersionManager.initGameVersion(this.gameVersion)];case 1:return t.sent(),[2]}})})},i.GAME_CONFIG=null,i.platformId=0,i.channelId="0",i.isNeedMarkPoint=!0,i.isTSVersion=!1,i.isShildTSV=!1,i.isShieldIOSBusiness=!1,i.isOpenGM=!1,i.isShowNotice=!0,i.isWSS=!0,i.extendsParams="",i.useCdnRes=!1,i.baseRoot="",i.webUrl="",i.webRoot="",i);function i(){}r.PlatformConfig=t,__reflect(t.prototype,"qmr.PlatformConfig")}(qmr=qmr||{}),function(t){var e;(e=t.PlatformEnum||(t.PlatformEnum={}))[e.P_SLOGAME_DEBUG=0]="P_SLOGAME_DEBUG",e[e.P_SLOGAME_WEB=100]="P_SLOGAME_WEB",e[e.P_DYHY_IOS=6]="P_DYHY_IOS",e[e.P_DYHY_QUICK=7]="P_DYHY_QUICK",e[e.P_DYHY_MK=8]="P_DYHY_MK",e[e.P_XIYOU_SQQ=9]="P_XIYOU_SQQ",e[e.P_DYHY_IOS_WEB=10]="P_DYHY_IOS_WEB",e[e.P_WX=11]="P_WX",e[e.P_DYHY_IOS_WEB_crown=120]="P_DYHY_IOS_WEB_crown",e[e.P_6kwAndriod=130]="P_6kwAndriod",e[e.P_9377=12]="P_9377",e[e.P_7477=13]="P_7477",e[e.P_XIYOU_H5=14]="P_XIYOU_H5",e[e.P_YMXK=15]="P_YMXK",e[e.P_OPPO=16]="P_OPPO",e[e.L_CAT=1e3]="L_CAT"}(qmr=qmr||{}),function(r){var t=(e.creatPlatform=function(t){var e;switch(t){case r.PlatformEnum.P_SLOGAME_DEBUG:case r.PlatformEnum.P_DYHY_IOS:case r.PlatformEnum.P_DYHY_QUICK:case r.PlatformEnum.P_DYHY_MK:case r.PlatformEnum.P_DYHY_IOS_WEB:case r.PlatformEnum.L_CAT:e=new r.SolGamePlatform;break;case r.PlatformEnum.P_XIYOU_SQQ:e=new r.XiyouSQQPlatform;break;case r.PlatformEnum.P_WX:e=new r.XiyouXWPlatform;break;case r.PlatformEnum.P_9377:e=new r.Pf9377Platform;break;case r.PlatformEnum.P_7477:e=new r.Pf7477Platform;break;case r.PlatformEnum.P_XIYOU_H5:e="apk"==r.PlatformConfig.platformClassType?new r.XiyouApkPlatform:new r.XiyouH5Platform;break;case r.PlatformEnum.P_YMXK:e=new r.PlatformYMXK;break;case r.PlatformEnum.P_OPPO:e=new r.PlatformOppo;break;default:throw new Error("platform not case at PlatformFactory.creatPlatform")}return e},e);function e(){}r.PlatformFactory=t,__reflect(t.prototype,"qmr.PlatformFactory")}(qmr=qmr||{}),function(e){var t=(r.prototype.reportRegister=function(){this.platform.reportRegister()},r.prototype.reportLogin=function(){this.platform.reportLogin()},r.prototype.reqPay=function(t){e.GlobalConfig.isOpenRecharge?this.platform.reqPay(t):e.TipManagerCommon.getInstance().createCommonColorTip("")},r.prototype.reportUpLevel=function(){this.platform.reportUpLevel()},r.prototype.shareGame=function(t,e,r){this.platform.shareGame(t,e,r)},Object.defineProperty(r.prototype,"platform",{get:function(){return this._platform},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isOutNetPlatForm",{get:function(){return e.PlatformConfig.platformId!=e.PlatformEnum.P_SLOGAME_DEBUG},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isGetPlatformInfo",{get:function(){return this.platform.isGetPlatformInfo},enumerable:!0,configurable:!0}),Object.defineProperty(r,"instance",{get:function(){return this._instance||(this._instance=new r)},enumerable:!0,configurable:!0}),r);function r(){this._platform=e.PlatformFactory.creatPlatform(e.PlatformConfig.platformId)}e.PlatformManager=t,__reflect(t.prototype,"qmr.PlatformManager")}(qmr=qmr||{}),function(t){var e=(r.ORDER_URL="{0}//{1}/api/{2}.orderid_{3}.php",r.SVRLISTOP_URL="{0}//{1}/api/{2}.svrlist_{3}.php",r.TS_SVRLISTOP_URL="{0}//{1}/api/{2}.svrlist_{3}_ts.php",r.QUERY_URL="{0}//{1}/api/{2}.query_{3}.php",r.FORBIDDEN_URL="{0}//{1}/api/{2}.forbidden_{3}.php",r.LASTLOGIN_URL="{0}//{1}/api/{2}.lastlogin_{3}.php",r.LOGIN_URL="{0}//{1}/api/{2}.login_{3}.php",r.WORD_URL="{0}//{1}/api/dirtycli.php",r.NOTICE_URL="{0}//{1}/api/gm/getserver_notice.php",r.VERIFY_URL="{0}//{1}/api/{2}.validation.php",r);function r(){}t.PlatformUrlConsont=e,__reflect(e.prototype,"qmr.PlatformUrlConsont")}(qmr=qmr||{}),function(p){var e,t=(e=p.BasePlatform,__extends(r,e),r.prototype.initGetOption=function(){var t=this;t.uid=decodeURI(p.JsUtil.getQueryStringByName("uid")),p.PlatformConfig.appIdStr=p.JsUtil.getQueryStringByName("appid"),t.username=decodeURI(p.JsUtil.getQueryStringByName("username")),t.serverid=decodeURI(p.JsUtil.getQueryStringByName("serverid")),t.isadult=decodeURI(p.JsUtil.getQueryStringByName("isadult")),t.time=p.JsUtil.getQueryStringByName("time"),t.sign=p.JsUtil.getQueryStringByName("sign"),t.pf=p.JsUtil.getQueryStringByName("platform"),console.log(""+location.search),t.platformSing2=p.JsUtil.getValueFromParams("platformSing2",p.PlatformConfig.extendsParams),console.log(""+t.uid,t.username,p.PlatformConfig.appIdStr,t.serverid,t.platformSing2,t.sign),t.pf&&(t.platformSing2=t.pf),p.GlobalConfig.account=t.username,p.GlobalConfig.uid=t.uid},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var u;return __generator(this,function(t){return egret.log(""),u=this,[2,new Promise(function(r,t){var e=u.uid,i=encodeURI(u.username),n=p.PlatformConfig.appIdStr,o=u.sign,a=u.pf,s=u.serverid,l=u.isadult,c=u.time,h=u.verifyUrl+"?uid="+e+"&account="+i+"&appid="+n+"&sign="+o+"&platform="+a+"&serverId="+s+"&isadult="+l+"&time="+c;console.log("sdk"+h),p.HttpRequest.sendGet(h,function(t){var e=JSON.parse(t);console.log("sdk"+e),0==e.ret?(this.isGetPlatformInfo=!0,egret.log("sdk:"+status)):p.TipManagerCommon.getInstance().createCommonColorTip("sdk"+e.msg),r()},u)})]})})},r.prototype.logout=function(){},r.prototype.getCheckAccountValidityUrl=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a,s,l,c,h,u;return __generator(this,function(t){return e=p.GlobalConfig.account,r=this.time,i=r,n=p.GlobalConfig.sid,o=p.Md5Util.getInstance().hex_md5(encodeURI(e)+n+i+r+p.GlobalConfig.loginKey),a=p.WebBrowerUtil.model||"none",s=this.uid,l=this.sign,c=p.PlatformConfig.appIdStr,h=this.platformSing2,u=this.isadult,[2,this.loginServerUrl+"?account="+e+"&token="+i+"&time="+r+"&serverId="+n+"&unverifysvr=0&sign="+o+"&clientVer="+p.GlobalConfig.appVersion+"&deviceUID="+a+"&uid="+s+"&appid="+c+"&psign="+l+"&pplatform="+h+"&isadult="+u]})})},r.prototype.reportRegister=function(){this.reportUpLevel(),this.reportEnterRole()},r.prototype.reportLogin=function(){this.reportEnterRole()},r.prototype.reportUpLevel=function(){var t={uid:this.uid,username:this.username,role:p.ClientHelper.instance.name,platform:this.platformSing2,appid:p.PlatformConfig.appIdStr,sid:this.serverid,level:p.ClientHelper.instance.level},e=JSON.stringify(t);p.LoginController.instance.reportSdkPortRequest("https://m.7477.com/wap/openapi/update_role",e)},r.prototype.reportEnterRole=function(){},r.prototype.reqPay=function(r){var i=this,t=p.GlobalConfig.account,e=p.GlobalConfig.sid,n=p.PlatformConfig.channelId,o=r.id,a=p.GlobalConfig.uid,s=Math.round(p.TimeUtil.serverTime/1e3),l=p.PlatformConfig.appIdStr,c=i.platformSing2,h=p.Md5Util.getInstance().hex_md5(encodeURI(t)+e+n+s+o+p.GlobalConfig.loginKey),u=i.rechargeOrderIdServer+"?account="+t+"&serverId="+e+"&channelId="+n+"&productId="+o+"&time="+s+"&uid="+a+"&appid="+l+"&pplatform="+c+"&sign="+h;console.log(": "+u),p.HttpRequest.sendGet(u,function(t){console.log(": "+JSON.stringify(t));var e=JSON.parse(t);(i.orderResultData=e)&&0==e.ret&&(i.orderId=e.orderId,console.log(":"+i.orderId),i.pay(r))},i)},r.prototype.pay=function(s){return __awaiter(this,void 0,void 0,function(){var a=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=a;p.Md5Util.getInstance().hex_md5(p.PlatformConfig.appIdStr+p.ClientHelper.instance.level+r.platformSing2+r.time+r.uid+r.username+p.PlatformConfig.appKey),s.level,console.log("======================7477json"+JSON.stringify(r.orderResultData.content));var i=r.orderResultData.content,n=p.PlatformConfig.channelId+"@"+s.id+"@@"+i.out_orderid+"@"+i.serverid;console.log("=============================9377"+i);var o="https://m.7477.com/wap/pay?uid="+i.uid+"&username="+i.username+"&paymoney="+i.paymoney+"&appid="+i.appid+"&serverid="+i.serverid+"&platform="+i.platform+"&time="+i.time+"&out_orderid="+i.out_orderid+"&goods_name="+encodeURI(s.name)+"&param="+n+"&sign="+i.sign;console.log("============================================7477"+o),window.tc_iframe&&window.tc_iframe(o)})]})})},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,t}p.Pf7477Platform=t,__reflect(t.prototype,"qmr.Pf7477Platform")}(qmr=qmr||{}),function(g){var e,t=(e=g.BasePlatform,__extends(r,e),r.prototype.initGetOption=function(){var t=this;g.PlatformConfig.platformSign=g.PlatformConfig.platform+"",t.packName=g.JsUtil.getValueFromParams("packName",g.PlatformConfig.extendsParams),t.username=decodeURI(g.JsUtil.getQueryStringByName("username")),t.adult=decodeURI(g.JsUtil.getQueryStringByName("adult")),t.timestamp=g.JsUtil.getQueryStringByName("timestamp"),t.sign=g.JsUtil.getQueryStringByName("sign");var e=g.JsUtil.getQueryStringByName("gameid");e&&(g.PlatformConfig.appIdStr=e),window.addEventListener("message",function(t){console.log(""+t.origin,t.source,t.data)},!1),g.GlobalConfig.account=g.GlobalConfig.uid=t.username;var r=g.Md5Util.getInstance().hex_md5("gameid=44044&type=1&uid="+g.GlobalConfig.account+"&key=a25959454254c4501bb316ba4cec3859"),i="https://s.9377.com/h5/union_platform/report.php?platformId=10138&event_type=aiweiyou_chat&uid="+g.GlobalConfig.account+"&touid=&type=1&gameid=44044&sign="+r;g.HttpRequest.sendGet(i,t.getPlatUid,t),console.log(""+t.username,t.adult,t.timestamp,t.sign)},r.prototype.getPlatUid=function(t){var e=JSON.parse(t);console.log(""+e),e&&e.gameid&&(this.uid=e.uid,this.touid=e.touid,this.gameId=e.gameid,this.gameSign=e.sign)},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var r=this;return __generator(this,function(t){return egret.log(""),[2,new Promise(function(t,e){r.isGetPlatformInfo=!0,egret.log(":"+status),t()})]})})},r.prototype.logout=function(){},r.prototype.getPullServerListUrl=function(){return(g.PlatformConfig.isTSVersion?this.tsServerListServer:this.serverListServer)+"?account="+g.GlobalConfig.account},r.prototype.getCheckAccountValidityUrl=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a;return __generator(this,function(t){return e=g.GlobalConfig.account,r=this.timestamp,i=r,n=g.GlobalConfig.sid,o=g.Md5Util.getInstance().hex_md5(encodeURI(e)+n+i+r+g.GlobalConfig.loginKey),a=g.WebBrowerUtil.model||"none",[2,this.loginServerUrl+"?account="+e+"&token="+i+"&time="+r+"&serverId="+n+"&unverifysvr=0&sign="+o+"&clientVer="+g.GlobalConfig.appVersion+"&deviceUID="+a]})})},r.prototype.reportRegister=function(){this.reportRoleInfo()},r.prototype.reportLogin=function(){var t={event:"enter_role",id:g.ClientHelper.instance.playerId,name:g.ClientHelper.instance.name,level:g.ClientHelper.instance.level,server_name:g.GlobalConfig.sName,_sid:g.GlobalConfig.sid},e=JSON.stringify(t);window.parent.postMessage(e,"*"),console.log(""+e)},r.prototype.reportUpLevel=function(){this.reportRoleInfo()},r.prototype.reportRoleInfo=function(){var t={event:"role",id:g.ClientHelper.instance.playerId,name:g.ClientHelper.instance.name,level:g.ClientHelper.instance.level,server_name:g.GlobalConfig.sName,_sid:g.GlobalConfig.sid},e=JSON.stringify(t);window.parent.postMessage(e,"*"),console.log(""+e)},r.prototype.reqPay=function(r){var i=this,t=g.GlobalConfig.account,e=g.GlobalConfig.sid,n=g.PlatformConfig.channelId,o=r.id,a=Math.round(g.TimeUtil.serverTime/1e3),s=g.Md5Util.getInstance().hex_md5(encodeURI(t)+e+n+a+o+g.GlobalConfig.loginKey),l=i.rechargeOrderIdServer+"?account="+t+"&serverId="+e+"&channelId="+n+"&productId="+o+"&time="+a+"&sign="+s;console.log(": "+l),g.HttpRequest.sendGet(l,function(t){console.log(": "+JSON.stringify(t));var e=JSON.parse(t);(i.orderResultData=e)&&0==e.ret&&(i.orderId=e.orderId,console.log(":"+i.orderId),i.pay(r))},i)},r.prototype.pay=function(l){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(t){return s=this,[2,new Promise(function(t,e){var r=l.level,i=(Math.round(g.TimeUtil.serverTime/1e3),s.reqRoute+"@"+l.id+"@@"+s.orderResultData.orderId+"@"+g.GlobalConfig.sid);console.log(""+i);var n=l.id;l.product_id&&(n=l.product_id);var o={event:"pay",gid:g.PlatformConfig.appIdStr,username:s.username,amount:r,product:l.name,product_id:n,extra_info:i,role:g.ClientHelper.instance.name,_sid:g.GlobalConfig.sid,_server_name:g.GlobalConfig.sName,server_name:g.GlobalConfig.sName,id:g.ClientHelper.instance.playerId,name:g.ClientHelper.instance.name,level:g.ClientHelper.instance.level},a=JSON.stringify(o);console.log(""+typeof a),console.log(""+a),window.parent.postMessage(a,"*"),g.NotifyManager.sendNotification(g.NotifyConstLogin.TO_HIDE_VIP_VIEW)})]})})},r.prototype.chatDataPost=function(t,e,r,i,n,o,a){void 0===o&&(o=""),void 0===a&&(a=0);var s=this.getChannelId(t),l="gameid="+this.gameId+"&type="+s+"&uid="+this.uid+"&key=fSaLpB242wChFJK6SJAOnKOFl1VyGcld",c=g.Md5Util.getInstance().hex_md5(l),h=1==s?a+"":"",u=1==s?"":"",p=1==s?"1":"",d="&type="+s+"&gameid="+this.gameId+"&serverid="+g.GlobalConfig.sid+"&uid="+this.uid+"&nick="+g.ClientHelper.instance.name+"&fromch=&touid="+p+"&tonick="+h+"&toch="+u+"&msg="+e+"&ip=&sign="+c,f="https://chat-monitor.11h5.com/chat/?cmd=record"+d;g.HttpRequest.sendGet(f,this.chatPostReturn,this),console.log(""+d)},r.prototype.chatPostReturn=function(t){console.log(""+t)},r.prototype.getChannelId=function(t){switch(t){case 2:return 4;case 3:return 2;case 4:return 1;case 5:return 5}return 3},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,t}g.Pf9377Platform=t,__reflect(t.prototype,"qmr.Pf9377Platform")}(qmr=qmr||{}),function(c){var e,t=(e=c.BasePlatform,__extends(r,e),Object.defineProperty(r.prototype,"canResizeStage",{get:function(){return!1},enumerable:!0,configurable:!0}),r.prototype.setLoadingProgress=function(t){C9377SDK.Global.setLoadingProgress(t),console.log("",t)},r.prototype.getPullServerListUrl=function(){var t=c.PlatformConfig.isTSVersion?1:0,e=c.PlatformConfig.isTSVersion?this.tsServerListServer:this.serverListServer,r=c.PlatformConfig.isTSVersion?9e3:0;return e+"?account="+c.GlobalConfig.account+"&ts="+t+"&sid="+r},r.prototype.getCheckAccountValidityUrl=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a,s;return __generator(this,function(t){return e=c.GlobalConfig.account,r=c.TimeUtil.serverTime/1e3|0,n=i=r+"",o=c.GlobalConfig.sid,a=c.Md5Util.getInstance().hex_md5(encodeURI(e)+o+n+i+c.GlobalConfig.loginKey),s=c.WebBrowerUtil.model||"none",[2,this.loginServerUrl+"?account="+e+"&token="+n+"&time="+i+"&serverId="+o+"&unverifysvr=0&sign="+a+"&clientVer="+c.GlobalConfig.appVersion+"&deviceUID="+s]})})},r.prototype.reqPay=function(r){var i=this,t=c.GlobalConfig.account,e=c.GlobalConfig.sid,n=c.PlatformConfig.channelId,o=r.id,a=Math.round(c.TimeUtil.serverTime/1e3),s=c.Md5Util.getInstance().hex_md5(encodeURI(t)+e+n+a+o+c.GlobalConfig.loginKey),l=i.rechargeOrderIdServer+"?account="+t+"&serverId="+e+"&channelId="+n+"&productId="+o+"&time="+a+"&sign="+s;console.log(": "+l),c.HttpRequest.sendGet(l,function(t){console.log(": "+JSON.stringify(t));var e=JSON.parse(t);(i.orderResultData=e)&&0==e.ret&&(i.orderId=e.orderId,console.log("SDK :"+i.orderId),i.pay(r))},i)},r.prototype.reportLogin=function(){window.qg.reportMonitor?(window.qg.reportMonitor("game_scene",0),console.log("")):console.log("")},r.prototype.reportFightPower=function(t){(new C9377SDK.SDKReport).pushRank(t),console.log("",t)},r.prototype.initGetOption=function(){},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return[2,new Promise(function(i,t){(new C9377SDK.SDKLogin).login({logined:function(t,e,r){c.GlobalConfig.account=r.getUsername(),n.isGetPlatformInfo=!0,console.log("sdk",c.GlobalConfig.account),i()}})})]})})},r.prototype.pay=function(s){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(t){return a=this,[2,new Promise(function(t,e){var r=s.level,i=s.name,n=parseFloat(c.GlobalConfig.sid),o=a.reqRoute+"@"+s.id+"@@"+a.orderId+"@"+c.GlobalConfig.sid;(new C9377SDK.SDKPay).toPay(r,i,n,o,null,null),t()})]})})},r.prototype.reloadGame=function(t){var e,r="";t&&(this.setLoadingStatus("..."),egret.localStorage.clear(),(e=window.clear_res_cache)&&e(),r=""),r+="",window.qg&&window.qg.exitApplication?(this.setLoadingStatus(""),window.qg.showModal({content:r,showCancel:!1,complete:function(){window.qg.exitApplication({})}})):c.TipManagerCommon.getInstance().createCommonColorTip("")},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,t}c.PlatformOppo=t,__reflect(t.prototype,"qmr.PlatformOppo")}(qmr=qmr||{}),function(h){var e,t=(e=h.BasePlatform,__extends(r,e),r.prototype.getPullServerListUrl=function(){return(h.PlatformConfig.isTSVersion?this.tsServerListServer:this.serverListServer)+"?account="+h.GlobalConfig.account},r.prototype.getCheckAccountValidityUrl=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a,s;return __generator(this,function(t){return e=h.GlobalConfig.account,r=this.timestamp,i=r,n=h.GlobalConfig.sid,o=h.Md5Util.getInstance().hex_md5(encodeURI(e)+n+i+r+h.GlobalConfig.loginKey),a=h.WebBrowerUtil.model||"none",s=h.PlatformConfig.channelId,[2,this.loginServerUrl+"?account="+e+"&token="+i+"&time="+r+"&serverId="+n+"&unverifysvr=0&sign="+o+"&clientVer="+h.GlobalConfig.appVersion+"&deviceUID="+a+"&channelId="+s]})})},r.prototype.reqPay=function(r){var i=this;console.log("GlobalConfig.account",h.GlobalConfig.account);var t=h.GlobalConfig.account,e=h.GlobalConfig.sid,n=h.PlatformConfig.channelId,o=r.id,a=Math.round(h.TimeUtil.serverTime/1e3),s=h.Md5Util.getInstance().hex_md5(encodeURI(t)+e+n+a+o+h.GlobalConfig.loginKey),l=i.rechargeOrderIdServer+"?account="+t+"&serverId="+e+"&channelId="+n+"&productId="+o+"&time="+a+"&sign="+s;console.log(": "+l),h.HttpRequest.sendGet(l,function(t){console.log(": "+JSON.stringify(t));var e=JSON.parse(t);(i.orderResultData=e)&&0==e.ret&&(i.orderId=e.orderId,console.log(":"+i.orderId),i.pay(r))},i)},r.prototype.reportRegister=function(){this.reportRoleInfo()},r.prototype.reportLogin=function(){var t={event:"enter_role",id:h.ClientHelper.instance.playerId,name:h.ClientHelper.instance.name,level:h.ClientHelper.instance.level,server_name:h.GlobalConfig.sName,_sid:h.GlobalConfig.sid},e=JSON.stringify(t);window.parent.postMessage(e,"*"),console.log(""+e)},r.prototype.reportUpLevel=function(){this.reportRoleInfo()},r.prototype.chatDataPost=function(t,e,r,i,n,o,a){void 0===o&&(o=""),void 0===a&&(a=0);var s=""+t;switch(t){case h.CHAT_CHANNELID.CROSS:s="9";break;case h.CHAT_CHANNELID.SELF:s="1";break;case h.CHAT_CHANNELID.TEAM:s="7";break;case h.CHAT_CHANNELID.UNION:s="6";break;case h.CHAT_CHANNELID.WORLD:s="4";break;default:return}var l={event:"chat_message",fromUserId:i,toUserId:o,type:s,content:e,time:""+r/1e3,serverId:n,serverName:h.ServerListModel.instance.getServerName(parseInt(n))},c=JSON.stringify(l);window.parent.postMessage(c,"*"),console.log(""+c)},r.prototype.initGetOption=function(){this.username=decodeURI(h.JsUtil.getQueryStringByName("username")),h.GlobalConfig.account=h.GlobalConfig.uid=this.username,this.adult=decodeURI(h.JsUtil.getQueryStringByName("adult")),this.timestamp=h.JsUtil.getQueryStringByName("timestamp"),this.avatar=h.JsUtil.getQueryStringByName("avatar"),this.sign=h.JsUtil.getQueryStringByName("sign"),this.age=h.JsUtil.getQueryStringByName("age"),h.PlatformConfig.appIdStr=h.JsUtil.getQueryStringByName("gameid"),h.PlatformConfig.channelId=h.PlatformConfig.appIdStr},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var r=this;return __generator(this,function(t){return[2,new Promise(function(t,e){r.isGetPlatformInfo=!0,t()})]})})},r.prototype.pay=function(l){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(t){return s=this,[2,new Promise(function(t,e){var r=l.level,i=(Math.round(h.TimeUtil.serverTime/1e3),h.PlatformConfig.channelId+"@"+l.id+"@@"+s.orderResultData.orderId+"@"+h.GlobalConfig.sid);console.log(""+i);var n=l.id;l.product_id&&(n=l.product_id);var o={event:"pay",gid:h.PlatformConfig.appIdStr,username:s.username,_sid:h.GlobalConfig.sid,amount:r,product:l.name,product_id:n,extra_info:i,role:h.ClientHelper.instance.name,_server_name:h.GlobalConfig.sName,server_name:h.GlobalConfig.sName,id:h.ClientHelper.instance.playerId,name:h.ClientHelper.instance.name,level:h.ClientHelper.instance.level},a=JSON.stringify(o);console.log(""+typeof a),console.log(""+a),window.parent.postMessage(a,"*"),h.NotifyManager.sendNotification(h.NotifyConstLogin.TO_HIDE_VIP_VIEW),t()})]})})},r.prototype.reportRoleInfo=function(){var t={event:"role",id:h.ClientHelper.instance.playerId,name:h.ClientHelper.instance.name,level:h.ClientHelper.instance.level,server_name:h.GlobalConfig.sName,_sid:h.GlobalConfig.sid},e=JSON.stringify(t);window.parent.postMessage(e,"*"),console.log(""+e)},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,console.log("PlatformYMXK created"),t}h.PlatformYMXK=t,__reflect(t.prototype,"qmr.PlatformYMXK")}(qmr=qmr||{}),function(i){var e,t=(e=i.BasePlatform,__extends(r,e),r.prototype.initGetOption=function(){i.PlatformConfig.platformSign=i.PlatformConfig.platform+"",this.isGetPlatformInfo=!0},r.prototype.initLoginServer=function(){this.updateLoginServer()},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var r=this;return __generator(this,function(t){return egret.log(""),[2,new Promise(function(t,e){i.GlobalConfig.token="2322232",r.isGetPlatformInfo=!0,t(),egret.log(":"+status)})]})})},r.prototype.reqPay=function(t){},r.prototype.pay=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,t}i.SolGamePlatform=t,__reflect(t.prototype,"qmr.SolGamePlatform")}(qmr=qmr||{}),function(g){var e,t=(e=g.BasePlatform,__extends(r,e),r.prototype.reqPay=function(t){var r=this,e=t.id+"@"+g.PlatformConfig.channelId,i=String(r.packageId),n=g.GlobalConfig.account,o=g.GlobalConfig.sid,a=g.GlobalConfig.uid,s=g.ClientHelper.instance.name,l=g.ClientHelper.instance.level+"",c=String(t.id),h=t.cumulVal,u=t.name,p=t.name,d=(g.GlobalConfig.loginKey,g.Md5Util.getInstance().hex_md5(""+i+encodeURI(n)+o+a+l+c+h+g.GlobalConfig.loginKey)),f=r.rechargeOrderIdServer+"?pid="+r.packageId+"&account="+n+"&serverId="+o+"&roleId="+a+"&roleName="+s+"&roleLevel="+l+"&productId="+c+"&productName="+u+"&productDesc="+p+"&price="+h+"&extension="+e+"&sign="+d+"&time="+g.TimeUtil.serverTime;console.log(": "+f),g.HttpRequest.sendGet(f,function(t){console.log(": "+JSON.stringify(t));var e=JSON.parse(t);e&&0==e.ret&&r.pay(e.data)},r)},r.prototype.reloadGame=function(t){this.logout()},r.prototype.setLoadingStatus=function(t){t=t||"hide",console.log("js setLoadingStatus",t),egret.ExternalInterface.call("setLoadingStatus",t)},r.prototype.reportRegister=function(){this.uploadGameRoleInfo(2)},r.prototype.reportLogin=function(){this.uploadGameRoleInfo(1)},r.prototype.reportUpLevel=function(){this.uploadGameRoleInfo(3)},r.prototype.logout=function(){this.uploadGameRoleInfo(4),egret.ExternalInterface.call("loginOutXiyouGameSDK","loginOutXiyouGameSDK message from JS")},r.prototype.initGetOption=function(){},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(t){return i=this,[2,new Promise(function(r,t){egret.ExternalInterface.addCallback("onExitResultXiyouGameSDK",function(t){i.uploadGameRoleInfo(4),egret.ExternalInterface.call("exitXiyouGameSDK","exitXiyouGameSDK message from JS")}),egret.ExternalInterface.addCallback("logoutXiyouGameSDKComplete",function(t){JSON.parse(t).success?(console.log("sdk",t),window.location&&window.location.reload?window.location.reload():g.TipManagerCommon.getInstance().createCommonColorTip(""),r()):(console.log("sdk",t),g.TipManagerCommon.getInstance().createCommonColorTip(""))}),egret.ExternalInterface.addCallback("onUserAuthXiyouGameSDKComplete",function(t){console.log("",JSON.stringify(t)),JSON.parse(t).age_scope}),egret.ExternalInterface.addCallback("initXiyouGameSDKComplete",function(t){var e=JSON.parse(t);e.success?(console.log("sdk",t),i.packageId=e.pid,egret.ExternalInterface.call("loginXiyouGameSDK","loginXiyouGameSDK message from JS")):console.log("sdk",t)}),egret.ExternalInterface.addCallback("loginXiyouGameSDKComplete",function(t){var e=JSON.parse(t);e.success?(console.log("sdk",t),g.GlobalConfig.uid=e.sUniqueUserId,g.GlobalConfig.token=e.sAuthToken,g.GlobalConfig.account=g.GlobalConfig.uid,i.isGetPlatformInfo=!0,r()):console.log("sdk",t)}),egret.ExternalInterface.call("initXiyouGameSDK","initXiyouGameSDK message from JS")})]})})},r.prototype.pay=function(n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,e){var r={fixedPay:!0};r.productId=n.productId,r.productName=n.productName,r.productDesc=n.productName,r.ration=n.ration,r.coinName="",r.price=n.price,r.buyNum=n.buyNum,r.roleId=""+g.ClientHelper.instance.playerId,r.roleName=g.ClientHelper.instance.name,r.roleLevel=g.ClientHelper.instance.level,r.serverId=g.GlobalConfig.sid,r.serverName=g.GlobalConfig.sName,r.orderId=n.orderId,r.extension=n.extension;var i=JSON.stringify(r);console.log("sdk:",i),egret.ExternalInterface.call("payXiyouGameSDK",i)})]})})},r.prototype.uploadGameRoleInfo=function(t){var e=new Object;e.dataType=t,e.serverId=g.GlobalConfig.sid,e.serverName=g.GlobalConfig.sName,e.roleId=""+g.ClientHelper.instance.playerId,e.roleName=g.ClientHelper.instance.name,e.roleLevel=""+g.ClientHelper.instance.level;var r=Math.round(g.TimeUtil.serverTime/1e3);e.roleCTime=g.ClientHelper.instance.createTime,e.roleLevelIMTime=r,e.moneyNum=""+g.ClientHelper.instance.diamond,e.vip=""+g.ClientHelper.instance.vipLevel,e.power=""+g.ClientHelper.instance.fightVal;var i=JSON.stringify(e);console.log(":",i),egret.ExternalInterface.call("reportXiyouGameSDK",i)},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,egret.registerFontMapping("specialGameFont","./font/specialFont.ttf"),t}g.XiyouApkPlatform=t,__reflect(t.prototype,"qmr.XiyouApkPlatform")}(qmr=qmr||{}),function(g){var e,t=(e=g.BasePlatform,__extends(r,e),r.prototype.reqPay=function(t){var r=this,e=t.id+"@"+g.PlatformConfig.channelId,i=String(r.packageId),n=g.GlobalConfig.account,o=g.GlobalConfig.sid,a=g.GlobalConfig.uid,s=g.ClientHelper.instance.name,l=g.ClientHelper.instance.level+"",c=String(t.id),h=t.cumulVal,u=t.name,p=t.name,d=(g.GlobalConfig.loginKey,g.Md5Util.getInstance().hex_md5(""+i+encodeURI(n)+o+a+l+c+h+g.GlobalConfig.loginKey)),f=r.rechargeOrderIdServer+"?pid="+r.packageId+"&account="+n+"&serverId="+o+"&roleId="+a+"&roleName="+s+"&roleLevel="+l+"&productId="+c+"&productName="+u+"&productDesc="+p+"&price="+h+"&extension="+e+"&sign="+d;console.log(": "+f),g.HttpRequest.sendGet(f,function(t){console.log(": "+JSON.stringify(t));var e=JSON.parse(t);e&&0==e.ret&&r.pay(e.data)},r)},r.prototype.reportRegister=function(){this.uploadGameRoleInfo(2)},r.prototype.reportLogin=function(){this.uploadGameRoleInfo(1)},r.prototype.reportUpLevel=function(){this.uploadGameRoleInfo(3)},r.prototype.logout=function(){this.uploadGameRoleInfo(4)},r.prototype.initGetOption=function(){},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(t){return n=this,[2,new Promise(function(i,t){if(n.sdk=window.XiYouSDK,!n.sdk)throw new Error("XiYouSDK not found");var e={debugState:!0};e.appId=g.PlatformConfig.appIdStr,e.appKey=g.PlatformConfig.appKey,e.appVersion=g.GlobalConfig.appVersion;var r={onInit:function(t){1===t.state?(console.log("sdk",JSON.stringify(t)),n.packageId=t.data.pid,n.sdk.login()):console.log("sdk",JSON.stringify(t))},onLogin:function(t){var e,r;1===t.state?(console.log("sdk",JSON.stringify(t)),e=t.data.userId,g.GlobalConfig.uid=e,r=t.data.token,g.GlobalConfig.token=r,g.GlobalConfig.account=g.GlobalConfig.uid,n.isGetPlatformInfo=!0,egret.log("sdk"),n.sdk.getUserAuth(),i()):console.log("sdk",JSON.stringify(t))},onPay:function(t){1===t.state?console.log("",JSON.stringify(t)):console.log("",JSON.stringify(t))},onServers:function(t){},onUserAuth:function(t){if(console.log("",JSON.stringify(t)),1===t.state)switch(t.data.age_scope){case"1":case"2":case"3":case"4":break;default:n.sdk.setUserAuth(2,!0)}else t.state},onLogout:function(t){1===t.state?console.log("",JSON.stringify(t)):console.log("",JSON.stringify(t))},onExit:function(t){1===t.state?console.log("",JSON.stringify(t)):console.log("",JSON.stringify(t))}};egret.log("sdk"),n.sdk.init(e,r)})]})})},r.prototype.pay=function(o){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r,i=n;i.sdk&&((r={fixedPay:!0}).productId=o.productId,r.productName=o.productName,r.productDesc=o.productName,r.ration=o.ration,r.coinName="",r.price=o.price,r.buyNum=o.buyNum,r.orderId=o.orderId,r.extension=o.extension,r.serverId=g.GlobalConfig.sid,r.serverName=g.GlobalConfig.sName,console.log("sdk:",JSON.stringify(r)),i.sdk.pay(r))})]})})},r.prototype.uploadGameRoleInfo=function(t){var e,r;this.sdk&&((e=new Object).dataType=t,e.serverId=g.GlobalConfig.sid,e.serverName=g.GlobalConfig.sName,e.roleId=g.GlobalConfig.uid,e.roleName=g.ClientHelper.instance.name,e.roleLevel=""+g.ClientHelper.instance.level,r=Math.round(g.TimeUtil.serverTime/1e3),e.roleCTime=g.ClientHelper.instance.createTime,e.roleLevelIMTime=r,e.moneyNum=""+g.ClientHelper.instance.diamond,e.vip=""+g.ClientHelper.instance.vipLevel,e.power=""+g.ClientHelper.instance.fightVal,console.log(":"+JSON.stringify(e)),this.sdk.dataSubmit(e))},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,t}g.XiyouH5Platform=t,__reflect(t.prototype,"qmr.XiyouH5Platform")}(qmr=qmr||{}),function(g){var e,t=(e=g.BasePlatform,__extends(r,e),r.prototype.initGetOption=function(){g.PlatformConfig.platformSign=g.PlatformConfig.platform+"",this.masterId=g.JsUtil.getValueFromParams("masterId",g.PlatformConfig.extendsParams),this.packageId=g.JsUtil.getValueFromParams("packageId",g.PlatformConfig.extendsParams),this.packageName=g.JsUtil.getValueFromParams("packageName",g.PlatformConfig.extendsParams),this.isGetPlatformInfo=!0,window.onShareSucess=this.onShareSucess},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var e,i=this;return __generator(this,function(t){return egret.log(""),e=this,[2,new Promise(function(r,t){if(!window.XYqqSdk)throw new Error("XYqqSdk init faild");if(e.sdk=window.XYqqSdk,!window.isInitSDK)throw new Error("XYqqSdk init faild");i.sdk&&i.sdk.doLogin(function(t,e){t?egret.error("sdk:"+t):(i.data=e,g.GlobalConfig.uid=String(e.userId),g.GlobalConfig.token=String(e.token),g.GlobalConfig.account=g.GlobalConfig.uid,egret.log("sdk:"+g.GlobalConfig.account),r())})})]})})},r.prototype.uploadGameRoleInfo=function(t){var e,r,i;!this.isGetPlatformInfo||this.sdk&&((e=new Object).dataType=t,e.serverId=g.GlobalConfig.sid,e.serverName=g.GlobalConfig.sName,e.roleId=g.GlobalConfig.uid,e.roleName=g.ClientHelper.instance.name,e.roleLevel=g.ClientHelper.instance.level,r=Math.round(g.TimeUtil.serverTime/1e3),e.roleCTime=0<g.GlobalConfig.logintime?g.GlobalConfig.logintime:"0",e.roleLevelIMTime=r,e.moneyNum=g.ClientHelper.instance.money,e.vip=g.ClientHelper.instance.vipLevel,e.power="0",i=JSON.stringify(e),egret.log(":"+i),this.sdk.doSubmit(e))},Object.defineProperty(r.prototype,"canResizeStage",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"httpProtoco",{get:function(){return"https:"},enumerable:!0,configurable:!0}),r.prototype.reportRegister=function(){this.uploadGameRoleInfo(2)},r.prototype.reportLogin=function(){this.uploadGameRoleInfo(1)},r.prototype.reportUpLevel=function(){this.uploadGameRoleInfo(3)},r.prototype.logout=function(){this.uploadGameRoleInfo(4)},r.prototype.reqPay=function(r){var i=this,t=r.id+"@"+g.PlatformConfig.channelId,e=i.packageId,n=g.GlobalConfig.account,o=g.GlobalConfig.sid,a=g.GlobalConfig.uid,s=g.ClientHelper.instance.name,l=g.ClientHelper.instance.level+"",c=r.id,h=r.name,u=r.name,p=r.cumulVal,d=(g.GlobalConfig.loginKey,g.Md5Util.getInstance().hex_md5(""+e+encodeURI(n)+o+a+l+c+p+g.GlobalConfig.loginKey)),f=i.rechargeOrderIdServer+"?pid="+e+"&account="+n+"&serverId="+o+"&roleId="+a+"&roleName="+s+"&roleLevel="+l+"&productId="+c+"&productName="+h+"&productDesc="+u+"&price="+p+"&extension="+t+"&sign="+d;console.log(": "+f),g.HttpRequest.sendGet(f,function(t){console.log(": "+JSON.stringify(t));var e=JSON.parse(t);i.orderResultData=e.data,e&&0==e.ret&&(i.orderId=i.orderResultData.orderId,console.log(":"+i.orderId),i.pay(r))},i)},r.prototype.pay=function(s){return __awaiter(this,void 0,void 0,function(){var a=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r,i,n=a,o=s.level;n.sdk&&((r=new Object).productId=s.id,r.productName=s.name,r.productDesc=s.name,r.ration="100",r.coinName="",r.price=o,r.buyNum="1",r.orderId=a.orderResultData.orderId,r.zoneid=g.GlobalConfig.sid,r.extension=a.orderResultData.extension,i=JSON.stringify(r),egret.log("sdk:"+i),n.sdk.doPay(r))})]})})},r.prototype.onScreenShow=function(){console.log(""),this.__isShareGame&&(this.__isShareGame=!1,2e3<egret.getTimer()-this.lastTime?(console.log("2"),g.NotifyManager.sendNotification(g.NotifyConstLogin.TO_REQUEST_SHARE_REWARD)):console.log("2"))},r.prototype.onScreenHide=function(){console.log("")},r.prototype.onShareBack=function(){this.__isShareGame&&(this.__isShareGame=!1,2e3<egret.getTimer()-this.lastTime&&g.NotifyManager.sendNotification(g.NotifyConstLogin.TO_REQUEST_SHARE_REWARD))},r.prototype.onShareSucess=function(){this.__isShareGame&&(this.__isShareGame=!1,g.NotifyManager.sendNotification(g.NotifyConstLogin.TO_REQUEST_SHARE_REWARD))},r.prototype.shareGame=function(t,e,r){t-e<=0?g.TipManagerCommon.getInstance().createCommonColorTip(""):0<r&&r>egret.getTimer()?g.TipManagerCommon.getInstance().createCommonColorTip("CD"):(this.lastTime=egret.getTimer(),this.__isShareGame=!0,this.sdk&&this.sdk.doShare())},r.prototype.reloadGame=function(t){console.log("reloadGame",t,window.clear_res_cache);var e,r="";t&&(this.setLoadingStatus("..."),egret.localStorage.clear(),(e=window.clear_res_cache)&&e(),r=""),r+="",window.qq&&window.qq.exitMiniProgram?(this.setLoadingStatus(""),window.qq.showModal({content:r,showCancel:!1,complete:function(){}})):g.TipManagerCommon.getInstance().createCommonColorTip("")},r);function r(){var t=e.call(this)||this;t.canClearResCache=!0,t.lastTime=0,t.__isShareGame=!1;return t}g.XiyouSQQPlatform=t,__reflect(t.prototype,"qmr.XiyouSQQPlatform")}(qmr=qmr||{}),function(c){var e,t=(e=c.BasePlatform,__extends(n,e),n.prototype.initGetOption=function(){c.PlatformConfig.platformSign=c.PlatformConfig.platform+"";var t=c.JsUtil.getValueFromParams("limit",c.PlatformConfig.extendsParams),e=null==t?0:Number(t),r=c.JsUtil.getValueFromParams("h5limit",c.PlatformConfig.extendsParams),i=null==r?0:Number(r);n.limit=e,n.h5limit=i,this.isGetPlatformInfo=!0,aladin.AladinSDK.initSdk(),aladin.AladinSDK.init2(c.PlatformConfig.appIdStr,c.GlobalConfig.appVersion,null,this.aladinSdkInitComplete),aladin.AladinSDK.allowDebug(!1),window.showPayGuild=this.showPayGuild},n.prototype.aladinSdkInitComplete=function(){},Object.defineProperty(n.prototype,"canResizeStage",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"httpProtoco",{get:function(){return"https:"},enumerable:!0,configurable:!0}),n.prototype.getCode=function(){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(t){switch(t.label){case 0:return(e=this).sdk?[4,e.sdk.getCode()]:[3,2];case 1:return r=t.sent(),console.log("code"+r),[2,new Promise(function(t,e){t(r)})];case 2:return[2]}})})},n.prototype.reportOpenId=function(){aladin.AladinSDK.reportOpenId(c.GlobalConfig.uid),console.log("openid"+c.GlobalConfig.uid)},Object.defineProperty(n.prototype,"reqRoute",{get:function(){return"IOS"==egret.Capabilities.os.toUpperCase()?"ios":"android"},enumerable:!0,configurable:!0}),n.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(t){switch(t.label){case 0:return e=this,console.log(""),window.wxplatform?(e.sdk=window.wxplatform,e.sdk?(e.sdk.init(),[4,e.sdk.login()]):[3,2]):[3,2];case 1:return r=t.sent(),e.data=r,c.GlobalConfig.uid=r.openid,c.GlobalConfig.token=r.token,c.GlobalConfig.account=c.GlobalConfig.uid,console.log("openid"+c.GlobalConfig.uid+"   code: "+c.GlobalConfig.token),[2,new Promise(function(t,e){t()})];case 2:return[2]}})})},n.prototype.getPullServerListUrl=function(){var t=c.PlatformConfig.isTSVersion?1:0,e=(c.PlatformConfig.isTSVersion?this.tsServerListServer:this.serverListServer,c.PlatformConfig.isTSVersion?9e3:c.PlatformConfig.platformId);return this.serverListServer+"?account="+c.GlobalConfig.account+"&ts="+t+"&sid="+e},n.prototype.getCheckAccountValidityUrl=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a,s,l;return __generator(this,function(t){switch(t.label){case 0:return e=c.GlobalConfig.account,[4,this.getCode()];case 1:return r=t.sent(),i=r.token,console.log("code:"+i),n=c.TimeUtil.serverTime/1e3|0,o=n+"",a=c.GlobalConfig.sid,s=c.Md5Util.getInstance().hex_md5(encodeURI(e)+a+i+o+c.GlobalConfig.loginKey),l=c.WebBrowerUtil.model||"none",[2,this.loginServerUrl+"?account="+e+"&token="+i+"&time="+o+"&serverId="+a+"&unverifysvr=0&sign="+s+"&clientVer="+c.GlobalConfig.appVersion+"&deviceUID="+l]}})})},n.prototype.tryOrder=function(t){console.log("");var e=Math.round(t/1e3),r={account:c.GlobalConfig.account,serverId:c.GlobalConfig.sid,channelId:c.PlatformConfig.channelId,pf:"android",time:e,roleId:c.GlobalConfig.uid,roleName:c.ClientHelper.instance.name,roleLevel:c.ClientHelper.instance.level,rechargeUrl:this.rechargeOrderIdServer};console.log(":"+r),this.sdk&&this.sdk.tryOrder(r)},n.prototype.reportCreateRoleView=function(){console.log("=================================================================="),aladin.AladinSDK&&aladin.AladinSDK.reportWithAppId(c.PlatformConfig.appIdStr,"15_1","")},n.prototype.reportUpLevel=function(){aladin.AladinSDK.reportWithAppId(c.PlatformConfig.appIdStr,"16_1",c.ClientHelper.instance.level+""),console.log("=============================="+c.ClientHelper.instance.level),10==c.ClientHelper.instance.level&&"ANDROID"==egret.Capabilities.os.toUpperCase()&&c.ModuleManager.popModule(c.ModuleNameLogin.FIRST_RECHARGE_VIEW,!1)},n.prototype.showPayGuild=function(){var t=c.ClientHelper.instance.playerId+"";egret.localStorage.getItem(t)==t?(console.log("==========================="),window.startH5PayCall&&(window.startH5PayCall(),console.log("==========================="))):(console.log("==========================="),egret.localStorage.setItem(t.toString(),t.toString()),c.ModuleManager.showModule(c.ModuleNameLogin.RECHARGE_GUILD))},n.prototype.startH5PayCall=function(){console.log("==========================="+window.startH5PayCall),window.startH5PayCall&&(console.log("==========================="),window.startH5PayCall())},n.prototype.reqPay=function(t){this.pay(t)},n.prototype.pay=function(a){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(t){return o=this,[2,new Promise(function(t,e){var r,i=100*a.level,n=Math.round(c.TimeUtil.serverTime/1e3);o.sdk&&(r={account:c.GlobalConfig.account,serverId:c.GlobalConfig.sid,channelId:c.PlatformConfig.channelId,time:n,pf:"android",productId:a.id,productName:a.name,roleId:c.GlobalConfig.uid,roleName:c.ClientHelper.instance.name,roleLevel:c.ClientHelper.instance.level,price:i,rechargeUrl:o.rechargeOrderIdServer},console.log(":"+r),o.sdk.pay(r))})]})})},n.prototype.onScreenShow=function(){console.log("=============================================================================================="),this.__isShareGame&&(this.__isShareGame=!1,2e3<egret.getTimer()-this.lastTime?(console.log("===============================================2==============================================="),c.NotifyManager.sendNotification(c.NotifyConstLogin.TO_REQUEST_SHARE_REWARD)):console.log("===============================================2==============================================="))},n.prototype.onScreenHide=function(){console.log("==============================================================================================")},n.prototype.onShareBack=function(){this.__isShareGame&&(this.__isShareGame=!1,2e3<egret.getTimer()-this.lastTime&&c.NotifyManager.sendNotification(c.NotifyConstLogin.TO_REQUEST_SHARE_REWARD))},n.prototype.onShareSucess=function(){this.__isShareGame&&(this.__isShareGame=!1,c.NotifyManager.sendNotification(c.NotifyConstLogin.TO_REQUEST_SHARE_REWARD))},n.prototype.shareGame=function(t,e,r){console.log("======================================="),t-e<=0?c.TipManagerCommon.getInstance().createCommonColorTip(""):0<r&&r>egret.getTimer()?c.TipManagerCommon.getInstance().createCommonColorTip("CD"):(this.lastTime=egret.getTimer(),this.__isShareGame=!0,this.sdk&&(console.log("==================SDK====================="),this.sdk.doShare()))},n.prototype.reloadGame=function(t){var e,r="";t&&(this.setLoadingStatus("..."),egret.localStorage.clear(),(e=window.clear_res_cache)&&e(),r=""),r+="",window.wx&&window.wx.exitMiniProgram?(this.setLoadingStatus(""),window.wx.showModal({content:r,showCancel:!1,complete:function(){window.wx.exitMiniProgram()}})):c.TipManagerCommon.getInstance().createCommonColorTip("")},n.limit=0,n.h5limit=0,n);function n(){var t=e.call(this)||this;t.canClearResCache=!0,t.lastTime=0,t.__isShareGame=!1;return t}c.XiyouXWPlatform=t,__reflect(t.prototype,"qmr.XiyouXWPlatform")}(qmr=qmr||{}),function(n){var t=(e.allowDebug=function(t){n.ALUtil.DEBUG=t},e.readAppidList=function(e){n.ALData.appIdListStr?e(n.ALData.appIdListStr):n.ALUtil.readAppIDList().then(function(t){n.ALData.appIdListStr=t,e(n.ALData.appIdListStr),n.ALUtil.LOG("AladinSDK readAppIDList",t)})},e.initSdk=function(){n.UserInfoData.InitUserinfo(),n.ALReport.init(),n.ALIntercept.init()},e.init2=function(t,e,r,i){n.ALSDK.init2(t,e,r,i)},e.reportOpenId=function(t,e){n.ALUtil.LOG("[OPENID]:",t),n.ALReport.report(n.REPORT_TYPE_OPEN_ID,t)},e.reportAnalytics=function(t,e){n.ALReport.reportAnalytics(t,e)},e.reportWithAppId=function(t,e,r){void 0===r&&(r=""),n.ALConfig.appId=t,n.ALReport.report(e,r)},e.clickToMiniProgram=function(t,e,r){void 0===r&&(r=""),e===this.ClickTypes.ICONS_CLICK?n.ALSDK.toMiniProgram(t,this.ClickTypes.ICONS_CLICK,n.SDK_MODULE_ICONS_CLICK,r||"icons"):e===this.ClickTypes.BANNER_CLICK?n.ALSDK.toMiniProgram(t,this.ClickTypes.BANNER_CLICK,n.SDK_MODULE_BANNER_CLICK,r||"banner"):n.ALSDK.toMiniProgram(t,this.ClickTypes.ICONS_CLICK,n.SDK_MODULE_ICONS_CLICK,r)},e.getFavoData=function(t){n.ALSDK.requestModuleData(n.SDK_MODULE_LIKE,t)},e.ClickTypes={ICONS_CLICK:"0_11",BANNER_CLICK:"0_12"},e.ReportTypes={SHOW:"1_1",LOGIN:"1_2",OPEN_ID:"1_3",AUTH:"1_4",SHARE:"1_5",LIKE_CLICK:"1_6",DRAWER_CLICK:"1_7",LIKE_SHOW:"1_8",DRAWER_SHOW:"1_9",SHARE_Ready:"1_10",PAY_MENT:"6_1",PAY_MENT_STAR:"6_2",PAY_MENT_INTER:"6_3",PAY_MENT_FAIL:"6_4",MORE_SHOW:"2_0",MORE_FOLD:"2_1",MORE_CLICK:"2_2",MORE_LONG_CLICK:"2_3",VIDEO_OPEN:"2_4",VIDEO_WATCH_FAIL:"2_5",VIDEO_WATCH_NORMAL:"2_6",GAME_BOX_SHOW:"8_1",GAME_BOX_CLICK:"8_2",GAME_BOX_BANNER_CLICK:"8_3",VIDEO_BTN_SHOW:"5_6",VIDEO_CLICK:"5_7",SHARE_BTN_SHOW:"5_8",SHARE_CLICK:"5_9"},e);function e(){}n.AladinSDK=t,__reflect(t.prototype,"aladin.AladinSDK")}(aladin=aladin||{}),function(t){var e=(r.sdkVersion="1.2.0",r.envVersion="release",r.appId="",r.version="1.0.0",r.openId="",r.unionId="",r.ReportMarketDomain="https://mprogram.boomegg.cn",r.ReportDataDomain="https://distribute-stats.boomegg.cn",r.ImgDomain="https://ad-static.boomegg.cn",r);function r(){}t.ALConfig=e,__reflect(e.prototype,"aladin.ALConfig")}(aladin=aladin||{}),function(t){var e=(r.opts=null,r.scene=0,r.shareScene=0,r.topInviter="0",r.inviter="0",r.level=1,r.score=1,r.isVertical=!1,r.isTSA=!1,r.allowShare=!1,r.appIdListStr="",r.sdkData=null,r.moreData=null,r.iconData=null,r);function r(){}t.ALData=e,__reflect(e.prototype,"aladin.ALData");var i=(n.InitUserinfo=function(){var e;t.ALUtil.wxqqExist()&&(e=t.ALUtil.wxExist()?wx:qq).getUserInfo({complete:function(t){t&&t.userInfo&&(n.NickName=t.userInfo.nickName||"",n.AvatarUrl=t.userInfo.avatarUrl||"",n.Country=t.userInfo.country||"",n.Gender=void 0!==t.userInfo.gender?t.userInfo.gender:0,n.Language=t.userInfo.language||"",n.Province=t.userInfo.province||"");try{e.getSystemInfo({success:function(t){n.Model=t.model}})}catch(t){}}})},n.NickName="",n.AvatarUrl="",n.Country="",n.Gender=0,n.Language="",n.Province="",n.Model="",n);function n(){}t.UserInfoData=i,__reflect(i.prototype,"aladin.UserInfoData")}(aladin=aladin||{}),function(u){var t=(o.EmptyFn=function(){u.ALUtil.LOG("empty fn")},o.init=function(){this._inited||(this._inited=!0,u.ALUtil.LOG("ALIntercept init "),u.ALUtil.wxqqNotExist()||(this._pay(),this._shareApp(),this._execShowHide(),this._onShareApp(),this._rewardedVideoAd(),u.ALUtil.LOG("ALIntercept init success ")))},o._execShowHide=function(){o.TimeShow=Date.now(),o.Params={type:"duration",sub_type:u.REPORT_TYPE_GAME_DURATION,diff_key:"",extra:""};var t=u.ALUtil.wxExist()?wx:qq;t.onShow(function(t){o.TimeShow=Date.now(),u.ALUtil.LOG("ALIntercept wxQQ.onShow")}),t.onHide(function(t){var e=Math.ceil((Date.now()-o.TimeShow)/1e3);2<e&&(o.Params.diff_key=e.toString(),o.Params.extra=u.ALReport.getAdsPos(),u.ALReport.reportDataToMarket(o.Params)),u.ALUtil.LOG("ALIntercept wxQQ.onHide")})},o._rewardedVideoAd=function(){var t=u.ALUtil.wxExist()?wx:qq,i=t.createRewardedVideoAd;Object.defineProperty(t,"createRewardedVideoAd",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=i.apply(this,arguments);if(o.VideoId=(arguments[0]||{}).adUnitId,t.isIntercept)return t;t.isIntercept=!0;var e=t.show;Object.defineProperty(t,"show",{configurable:!0,enumerable:!0,writable:!0,value:function(){return u.ALUtil.LOG("ALIntercept _rewardedVideoAd show ---"),u.ALReport.report(u.REPORT_TYPE_VIDEO_OPEN,o.VideoId),e.apply(this,arguments)}}),t.onClose(o.VideoClose);var r=t.offClose;return Object.defineProperty(t,"offClose",{configurable:!0,enumerable:!0,writable:!0,value:function(){u.ALUtil.LOG("ALIntercept _rewardedVideoAd offClose!!!"),r.apply(this,arguments)}}),t}}),o._rewardedVideoAd=o.EmptyFn},o.VideoClose=function(t){u.ALUtil.LOG("ALIntercept _rewardedVideoAd VideoClose--- ",t),void 0===t||t&&t.isEnded?u.ALReport.report(u.REPORT_TYPE_VIDEO_WATCH_NORMAL,o.VideoId):u.ALReport.report(u.REPORT_TYPE_VIDEO_WATCH_FAIL,o.VideoId)},o._pay=function(){var t=u.ALUtil.qqExist()?qq:wx,n=t.requestMidasPayment;Object.defineProperty(t,"requestMidasPayment",{configurable:!0,enumerable:!0,writable:!0,value:function(){u.ALReport.report(u.REPORT_TYPE_PAY_MENT_START);var t=arguments[0]||{},e="0",e=u.ALUtil.qqExist()?t.starCurrency:t.buyQuantity,r=t.success||null;t.success=function(t){u.ALUtil.LOG("ALIntercept _pay success --- ",t),e+="|1",u.ALReport.reportPay(e),r&&r(t)};var i=t.fail||null;return t.fail=function(t){u.ALUtil.LOG("ALIntercept _pay fail --- ",t),e+="|0",u.ALReport.reportPay(e),i&&i(t)},n.apply(this,arguments)}}),o._pay=o.EmptyFn},o._execOnShareApp=function(){var t;o.InfoGot=!0,o.ShareParamFunc&&((t=u.ALUtil.wxExist()?wx:qq).offShareAppMessage(o.ShareParamFunc),t.onShareAppMessage(o.ShareParamFunc))},o._shareApp=function(){var t=u.ALUtil.wxExist()?wx:qq,e=t.shareAppMessage;Object.defineProperty(t,"shareAppMessage",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=arguments[0]||{};return o._handleShareParam(t),t.query=t.query+("&a_inviter="+u.ALData.inviter+"&a_level="+u.ALData.level+"&a_top_inviter="+u.ALData.topInviter),u.ALUtil.LOG("ALIntercept shareAppMessage query ",t.query),e.apply(this,arguments)}}),o._shareApp=o.EmptyFn},o._onShareApp=function(){var t=u.ALUtil.wxExist()?wx:qq,r=t.onShareAppMessage;Object.defineProperty(t,"onShareAppMessage",{configurable:!0,enumerable:!0,writable:!0,value:function(){u.ALUtil.LOG("_onShareApp");var e=arguments[0];return e?o.InfoGot?(u.ALUtil.LOG("ALIntercept onShareAppMessage _infoExist"),arguments[0]=function(){var t=e();return o._handleShareParam(t,!1),t.query=t.query+("&a_inviter="+u.ALData.inviter+"&a_level="+u.ALData.level+"&a_top_inviter="+u.ALData.topInviter),u.ALUtil.LOG("ALIntercept onShareAppMessage query ",t.query),{title:t.title,imageUrl:t.imageUrl,imageUrlId:t.imageUrlId,query:t.query}}):(o.ShareParamFunc=e,u.ALUtil.LOG("ALIntercept onShareAppMessage _infoExist not")):u.ALUtil.LOG("ALIntercept onShareAppMessage argument0F empty"),r.apply(this,arguments)}});var e=t.offShareAppMessage;Object.defineProperty(t,"offShareAppMessage",{configurable:!0,enumerable:!0,writable:!0,value:function(){e.apply(this,arguments),u.ALUtil.LOG("ALIntercept offShareAppMessage !!!")}}),o._onShareApp=o.EmptyFn},o._handleShareParam=function(t,e){void 0===e&&(e=!0);var r=t.query||"",i=t.imageUrl,n=t.imageUrlId,o=u.ALUtil._parseQueryString(r);u.ALUtil.LOG("ALIntercept _handleShareParam queryObj ",o),u.ALData.shareScene=o.shareScene||0;var a,s,l,c,h="default";o.Ads||(u.ALData.sdkData&&u.ALData.sdkData.shares&&0<u.ALData.sdkData.shares.length?(a=Math.floor(Math.random()*u.ALData.sdkData.shares.length),s=u.ALData.sdkData.shares[a],t.imageUrl=s.url,t.title=s.desc,h=s.shareid):n?h=n:i&&(l=u.ALUtil.getUrlFileName(i),u.ALUtil.LOG("ALIntercept _handleShareParam ",i,l),h=0!==i.indexOf("http")&&-1===l.indexOf(".")?"screenShot":l.replace(".","_")),c="&Ads=a_Share&AdsPos="+h,u.ALUtil.LOG("ALIntercept _handleShareParam ads_str ",c),t.query=r+c),e&&u.ALReport.report(u.REPORT_TYPE_SHARE_READY,h)},o._inited=!1,o.TimeShow=null,o.Params=null,o.VideoId=null,o.InfoGot=!1,o.ShareParamFunc=null,o);function o(){}u.ALIntercept=t,__reflect(t.prototype,"aladin.ALIntercept")}(aladin=aladin||{}),function(l){var t=(i.getAdsPos=function(){return this.Ads+"|"+this.AdsPos},i.init=function(){this._inited||(this._inited=!0,l.ALUtil.LOG("ALReport init "),l.ALUtil.wxqqNotExist()||(this.initStartTime(),this._initAdsPos(),this._initReportData(),l.ALUtil.LOG("ALReport init success")))},i.initStartTime=function(){i.startTime=(new Date).getTime(),l.ALUtil.LOG("",i.startTime)},i.reportTime=function(t){var e,r;0!=i.startTime&&(e=(new Date).getTime(),r={type:"loadtime",sub_type:l.REPORT_TYPE_TIME,data:t,now:e,start:i.startTime,extra:e-i.startTime},this.reportDataToMarket(r))},i.reportAnalytics=function(t,e){var r,i;isNaN(e)?l.ALUtil.LOG("ALReport step error --- ",e):(this._inited||(l.ALConfig.appId=t,this.init()),this._initReportData(),r=this.reportPrefix+this._getCurrentDate()+"|"+this._getTimeStamp()+"|"+this.reportDevice2Sence+l.ALData.level+"|0|"+l.ALConfig.openId+"|10|"+e+"||||"+l.ALData.topInviter+"|"+l.UserInfoData.Gender,l.ALUtil.LOG("ALReport reportAnalytics str --- ",r),i=l.StringUtil.base64encode(r),l.HttpUtil.POST(l.ALConfig.ReportDataDomain+"/report",{info:i},function(t){t.isSucc||l.ALUtil.LOG("ALReport reportAnalytics fail --- ",t.reason)}))},i.report=function(t,e){if(this._inited||this.init(),t!=l.REPORT_TYPE_TIME){var r=t.split("_");if(r.length<2)console.warn("ALReport ");else{var i=e||"";if(t===l.REPORT_TYPE_OPEN_ID)return l.ALConfig.openId=e,window.ALOpenId=e,this.reportOpenId(),void this._initLevelData();var n=r[0],o=r[1];this._initReportData();var a=this.reportPrefix+this._getCurrentDate()+"|"+this._getTimeStamp()+"|"+this.reportDevice2Sence+l.ALData.level+"|0|"+l.ALConfig.openId+"|"+n+"|"+o+"|0|"+i+"||"+l.ALData.topInviter+"|"+l.UserInfoData.Gender;l.ALUtil.LOG("ALReport _report str --- ",a);var s=l.StringUtil.base64encode(a);l.HttpUtil.POST(l.ALConfig.ReportDataDomain+"/report",{info:s},function(t){t.isSucc||l.ALUtil.LOG("ALReport _report fail --- ",t.reason)})}}else this.reportTime(e)},i.reportOpenId=function(){var e,r={type:"openId",sub_type:l.REPORT_TYPE_OPEN_ID,extra:this.getAdsPos()};l.UserInfoData.InitUserinfo(),l.ALUtil.wxqqExist()?(e=l.ALUtil.wxExist()?wx:qq).getUserInfo({complete:function(t){t&&t.userInfo&&(r.nickName=t.userInfo.nickName||"",r.avatarUrl=t.userInfo.avatarUrl||"",r.country=t.userInfo.country||"",r.gender=void 0!==t.userInfo.gender?t.userInfo.gender:0,r.language=t.userInfo.language||"",r.province=t.userInfo.province||"");try{e.getSystemInfo({success:function(t){r.model=t.model},complete:function(){e.getNetworkType({success:function(t){r.networkType=t.networkType},complete:function(){i.reportDataToMarket(r)}})}})}catch(t){i.reportDataToMarket(r)}l.UserInfoData.InitUserinfo()}}):i.reportDataToMarket(r)},i.reportPay=function(t){l.ALUtil.LOG("",t);var e={type:"pay",sub_type:l.REPORT_TYPE_PAY_MENT_ENTER,extra:t};this.reportDataToMarket(e)},i.reportShareState=function(t){var e=t?"1":"2",r={type:"share",sub_type:l.REPORT_TYPE_SHARE_SUCCESS,diff_key:e};this.reportDataToMarket(r)},i.reportDataToMarket=function(t){t.id=l.ALConfig.appId,t.openid=l.ALConfig.openId,l.ALUtil.LOG("reportDataToMarket param --- ",t),l.HttpUtil.POST(l.ALConfig.ReportMarketDomain+"/box/stats_sdk",t,function(t){t.isSucc||l.ALUtil.LOG("ALReport reportServer fail --- ",t.reason)})},i._initAdsPos=function(){var t="",e="";try{var r,i,n,o=(l.ALUtil.wxExist()?wx:qq).getLaunchOptionsSync();l.ALUtil.LOG("ALReport opts --- ",o),l.ALData.opts=o,l.ALData.scene=o.scene,(r=o.query).scene?(t=(i=decodeURIComponent(r.scene).split(","))[1],e=i[2]):r.Ads||r.AdsPos?(t=r.Ads?r.Ads:"",e=r.AdsPos?r.AdsPos:""):o.referrerInfo&&o.referrerInfo.extraData&&(t=(n=o.referrerInfo.extraData).Ads?n.Ads:"",e=n.AdsPos?n.AdsPos:""),""===t&&(e="1037"==o.scene?(t="fromMini",o.referrerInfo.appId||"0"):(t=l.ALUtil.qqExist()?"qq":"weixin",o.scene||"0"))}catch(t){console.log("ALReport _initAdSource catch--- ",t)}this.Ads=t,this.AdsPos=e,1044!=l.ALData.scene&&1007!=l.ALData.scene&&1036!=l.ALData.scene&&1008!=l.ALData.scene||(r=l.ALData.opts.query,l.ALData.topInviter=r.a_top_inviter||"0",l.ALData.level=r.a_level||1)},i._initLevelData=function(){var t,e=null;e=1044==l.ALData.scene||1007==l.ALData.scene||1036==l.ALData.scene||1008==l.ALData.scene?(t=l.ALData.opts.query,{appid:l.ALConfig.appId,openid:l.ALConfig.openId,level:t.a_level||"",inviter:t.a_inviter||"",top_inviter:t.a_top_inviter||""}):{appid:l.ALConfig.appId,openid:l.ALConfig.openId},l.HttpUtil.GET(l.ALConfig.ReportMarketDomain+"/box/accountinfo",e,function(t){var e;t.isSucc?(e=t.data.info,l.ALUtil.LOG("ALReport _initLevelData data --- ",t.data),l.ALUtil.LOG("",e),l.ALData.topInviter=e.top_inviter||"0",l.ALData.inviter=l.ALConfig.openId,l.ALData.level=e.share_level?parseInt(e.share_level)+1:1,l.ALData.score=e.score?parseInt(e.score):0,l.ALIntercept._execOnShareApp()):l.ALUtil.LOG("ALReport _initLevelData fail --- ",t.reason)})},i._initReportData=function(){var t="",e="",r="",i="",n="";try{var o=(l.ALUtil.wxExist()?wx:qq).getSystemInfoSync(),t=o.platform,e=o.model,r=o.system,i=o.language,n=o.version}catch(t){console.warn("ALReport _initParam error--- ",t)}e&&"unknown"!==e?-1==e.toLowerCase().indexOf("iphone")&&-1==e.toLowerCase().indexOf("ipad")||(e="ios"):e="android",this.reportPrefix="t_event|distribute_all|",this.reportDevice2Sence=t+"|"+e+"|"+l.ALConfig.version+"|"+r+"||0.0.0.0||"+i+"||"+n+"|"+l.ALConfig.appId+"|"+this.Ads+"|"+this.AdsPos+"|"},i._getCurrentDate=function(){var t=new Date,e=t.getFullYear().toString(),r=(t.getMonth()+1).toString(),i=t.getDate().toString();return 1===r.length&&(r="0"+r),1===i.length&&(i="0"+i),e+r+i},i._getTimeStamp=function(){return Math.round(Date.now()/1e3)},i.Ads="",i.AdsPos="",i.reportPrefix="",i.reportDevice2Sence="",i._inited=!1,i.startTime=0,i);function i(){}l.ALReport=t,__reflect(t.prototype,"aladin.ALReport"),l.REPORT_TYPE_SHOW="1_1",l.REPORT_TYPE_LOGIN="1_2",l.REPORT_TYPE_OPEN_ID="1_3",l.REPORT_TYPE_AUTH="1_4",l.REPORT_TYPE_LIKE_CLICK="1_6",l.REPORT_TYPE_LIKE_SHOW="1_8",l.REPORT_TYPE_DRAWER_CLICK="1_7",l.REPORT_TYPE_DRAWER_SHOW="1_9",l.REPORT_TYPE_CLICK_SUCCESS="3_1",l.REPORT_TYPE_SHARE_READY="1_10",l.REPORT_TYPE_SHARE_SUCCESS="1_5",l.REPORT_TYPE_GAME_DURATION="1_12",l.REPORT_TYPE_SCENE_CLICK="1_13",l.REPORT_TYPE_SCENE_CLICK_SUCCESS="1_14",l.REPORT_TYPE_PAY_MENT="6_0",l.REPORT_TYPE_PAY_MENT_START="6_2",l.REPORT_TYPE_PAY_MENT_ENTER="6_3",l.REPORT_TYPE_MORE_SHOW="2_0",l.REPORT_TYPE_MORE_CLICK="2_1",l.REPORT_TYPE_MORE_CLICK_O="2_2",l.REPORT_TYPE_MORE_LONG_CLICK_O="2_3",l.REPORT_TYPE_VIDEO_OPEN="2_4",l.REPORT_TYPE_VIDEO_WATCH_FAIL="2_5",l.REPORT_TYPE_VIDEO_WATCH_NORMAL="2_6",l.REPORT_TYPE_GAME_BOX_SHOW="8_1",l.REPORT_TYPE_GAME_BOX_CLICK="8_2",l.REPORT_TYPE_GAME_BOX_BANNER_CLICK="8_3",l.REPORT_TYPE_VIDEO_BTN_SHOW="5_6",l.REPORT_TYPE_VIDEO_CLICK="5_7",l.REPORT_TYPE_SHARE_BTN_SHOW="5_8",l.REPORT_TYPE_SHARE_CLICK="5_9",l.REPORT_TYPE_TIME="15_1"}(aladin=aladin||{}),function(h){var t=(u.init2=function(t,e,r,i){this._inited||(this._inited=!0,h.ALConfig.appId=t,h.ALConfig.version=e)},u.toMiniProgram=function(t,e,r,i){var n,o,a=h.ALUtil.parseNavigateParam(t),s=t[14]||t[4],l={appid:a.target_appid,type:"click",sub_type:e,diff_key:s,extra:r,scene:i},c={appid:a.target_appid,type:"jump",sub_type:h.REPORT_TYPE_SCENE_CLICK_SUCCESS,extra:r,scene:i};h.ALUtil.LOG("[aladinsdk] ",t),h.ALUtil.LOG("[aladinsdk] data.appId:>>",a.appId),h.ALUtil.LOG("[aladinsdk] data.path:>>",a.path),h.ALUtil.LOG("[aladinsdk] data.extraData:>>",a.extraData),h.ALUtil.LOG("[aladinsdk] Data.conf.envVersion:>>",h.ALConfig.envVersion),h.ALUtil.wxqqNotExist()||(n=t[6]||null,o=h.ALUtil.qqExist()?qq:wx,h.ALReport.reportDataToMarket(l),n||!o.navigateToMiniProgram?u._preview(n,c):o.navigateToMiniProgram({appId:a.appId,path:a.path,extraData:a.extraData,envVersion:h.ALConfig.envVersion,success:function(t){h.ALReport.reportDataToMarket(c)},fail:function(t){h.ALUtil.LOG("ALSDK navigateToMiniProgram fail ",t),t&&t.errMsg&&-1===t.errMsg.indexOf("cancel")&&n&&u._preview(n,c)}}))},u._preview=function(t,e){(h.ALUtil.qqExist()?qq:wx).previewImage({urls:[t],success:function(){h.ALUtil.LOG("ALSDK _preview success "),h.ALReport.reportDataToMarket(e)},fail:function(t){console.warn("ALSDK _preview error ",t)}})},u.requestModuleData=function(i,n){h.ALUtil.readAppIDList().then(function(t){var e={id:h.ALConfig.appId,module:i,appidList:t,openid:h.ALConfig.openId,nickName:h.UserInfoData.NickName,avatarUrl:h.UserInfoData.AvatarUrl,country:h.UserInfoData.Country,gender:h.UserInfoData.Gender,language:h.UserInfoData.Language,province:h.UserInfoData.Province},r="Icon"===i?h.ALData.iconData:h.ALData.moreData;r?n(r):h.HttpUtil.GET(h.ALConfig.ReportMarketDomain+"/box/sdk/module",e,function(t){var e;t.isSucc?(e=u.handleHttpData(t),"Icon"===i?h.ALData.iconData=e:"more"===i&&(h.ALData.moreData=e),n(e)):console.warn("ALSDK requestModuleData fail !!!",t.reason,i)})})},u.handleHttpData=function(t){var e=t.data.values||[],r=t.data.base;if(r&&0<e.length)for(var i=0,n=e.length;i<n;i++){var o=e[i];o[4]=r+o[4]}return e},u._inited=!1,u);function u(){}h.ALSDK=t,__reflect(t.prototype,"aladin.ALSDK"),h.SDK_MODULE_LIKE="Icon",h.SDK_MODULE_ICONS_CLICK="ICONS_CLICK",h.SDK_MODULE_BANNER_CLICK="BANNER_CLICK"}(aladin=aladin||{}),function(r){var t=(o.LOG=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.DEBUG&&console.log("[AladinSDK]",t,e)},o.wxNotExist=function(){return"undefined"==typeof wx},o.wxExist=function(){return"undefined"!=typeof wx},o.qqNotExist=function(){return"undefined"==typeof qq},o.qqExist=function(){return"undefined"!=typeof qq},o.wxqqExist=function(){return"undefined"!=typeof wx||"undefined"!=typeof qq},o.wxqqNotExist=function(){return"undefined"==typeof wx&&"undefined"==typeof qq},o.readAppIDList=function(){return new Promise(function(n,t){var e=o.qqExist()?qq:wx,r="devtools"===e.getSystemInfoSync().platform?"game.json":"app-config.json";e.getFileSystemManager().readFile({filePath:r,encoding:"utf-8",success:function(t){var e=t.data,r=JSON.parse(e).navigateToMiniProgramAppIdList,i="";r&&(i=r.join(",")),o.LOG("ALSDK readAppIDList appIdListStr ",i),n(i)},fail:function(t){o.LOG("ALSDK readAppIDList error ",t),n("")}})})},o.getUrlFileName=function(t){return t.split("/").pop().split("?")[0].split("#")[0]},o.getUrlReportName=function(t){var e=t.split(r.ALConfig.ImgDomain);return 1<e.length?e[1].toString():e[0].toString()},o._buildQueryString=function(t){var e=new Array;for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return e.join("&")},o._mergeParams=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},o._parseQueryString=function(t){var e={};if(!t)return e;for(var r,i=t.split("&"),n=0,o=i.length;n<o;n++)e[(r=i[n].split("="))[0]]=r[1];return e},o.parseNavigateParam=function(t){var e,r,i=t[0],n=t[1],o=t[2]||"pages/index/index",a=this._parseQueryString(t[3]);return-1<o.indexOf("?")&&(e=o.split("?"),r=this._parseQueryString(e[1]),this._mergeParams(a,r)),a.tgt=t[1],{appId:i,path:o+="?"+this._buildQueryString(a),extraData:a,target_appid:n}},o.DEBUG=!0,o);function o(){}r.ALUtil=t,__reflect(t.prototype,"aladin.ALUtil")}(aladin=aladin||{}),function(l){l.METHOD_GET="GET",l.METHOD_POST="POST";var t=(e.GET=function(t,e,r,i){this._request(t,l.METHOD_GET,e,r,i)},e.POST=function(t,e,r,i){this._request(t,l.METHOD_POST,e,r,i)},e._request=function(t,e,r,i,n){var o,a,s;l.ALUtil.LOG("[param]",r),"undefined"!=typeof wx||"undefined"!=typeof qq?("GET"==e&&r&&(t+=encodeURI("?"+this.objParam2PostString(r))),l.ALUtil.LOG("HttpUtil url ----- ",t),o={url:t,method:e,success:function(t){l.ALUtil.LOG("HttpUtil responseText---",t);try{var e=t.data;return e&&0!==e.code&&0!==e.ret?(l.ALUtil.LOG("HttpUtil json---"),void i({isSucc:!1,reason:e.msg})):void i({isSucc:!0,data:e?e.data:null})}catch(t){return l.ALUtil.LOG("HttpUtil parse---",t),void i({isSucc:!1,reason:"json_parse_error"})}},fail:function(t){l.ALUtil.LOG("HttpUtil fail---",t),i({isSucc:!1,reason:"network_error"})}},this.Authorization?o.header={"content-type":"application/x-www-form-urlencoded",Authorization:this.Authorization}:o.header={"content-type":"application/x-www-form-urlencoded"},r&&(o.data=r),(l.ALUtil.wxExist()?wx:qq).request(o)):(a=new XMLHttpRequest,s=null,"GET"==e?r&&(t+=encodeURI("?"+this.objParam2PostString(r))):s=null==r?null:encodeURI(this.objParam2PostString(r)),a.open(e,t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.Authorization&&a.setRequestHeader("Authorization",this.Authorization),a.onreadystatechange=function(){if(4===a.readyState&&199<a.status&&a.status<400){l.ALUtil.LOG("HttpUtil responseText---",a.responseText);try{var t=a.responseText?JSON.parse(a.responseText):null;return t&&0!==t.code&&0!==t.ret?(l.ALUtil.LOG("HttpUtil json---"),void i({isSucc:!1,reason:t.msg})):void i({isSucc:!0,data:t?t.data:null})}catch(t){return l.ALUtil.LOG("HttpUtil parse---",t),void i({isSucc:!1,reason:"json_parse_error"})}}},a.onerror=function(t){l.ALUtil.LOG("HttpUtil onerror---",t),i({isSucc:!1,reason:"network_error"})},a.ontimeout=function(t){l.ALUtil.LOG("HttpUtil ontimeout---",t),i({isSucc:!1,reason:"timeout_error"})},a.send(s))},e.objParam2PostString=function(t){var e="";for(var r in t)e+=r+"="+t[r],e+="&";return""!=e&&(e=e.slice(0,e.length-1)),e},e.Authorization=null,e);function e(){}l.HttpUtil=t,__reflect(t.prototype,"aladin.HttpUtil")}(aladin=aladin||{}),function(t){var e=(r.base64encode=function(t){for(var e,r,i,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=t.length,a=0,s="";a<o;){if(e=255&t.charCodeAt(a++),a==o){s+=n.charAt(e>>2),s+=n.charAt((3&e)<<4),s+="==";break}if(r=t.charCodeAt(a++),a==o){s+=n.charAt(e>>2),s+=n.charAt((3&e)<<4|(240&r)>>4),s+=n.charAt((15&r)<<2),s+="=";break}i=t.charCodeAt(a++),s+=n.charAt(e>>2),s+=n.charAt((3&e)<<4|(240&r)>>4),s+=n.charAt((15&r)<<2|(192&i)>>6),s+=n.charAt(63&i)}return s},r);function r(){}t.StringUtil=e,__reflect(e.prototype,"aladin.StringUtil")}(aladin=aladin||{}),function(t){var e=(r.BODY=0,r.WEAPON=1,r.WING=2,r.HORSE=4,r.HORSE_UP=5,r.SHIELD=6,r.DEFAULT=7,r);function r(){}t.ActorPart=e,__reflect(e.prototype,"qmr.ActorPart")}(qmr=qmr||{}),function(c){var t=(h.parseMsg=function(t){var e=t.readInt()-h.ADD_L,r=t.readInt(),i=c.ByteArrayPool.getInstance().createByte();t.readBytes(i,0,e);var n=this.decryptForDis(i);c.ByteArrayPool.getInstance().recycleByte(i),c.Rpc.getInstance().onDataIn(r,n),c.ByteArrayPool.getInstance().recycleByte(n)},h.getSendMsg=function(t,e,r){void 0===r&&(r=!1);var i,n=c.MessageIDLogin.getMsgNameById(e);c.MessageID&&c.MessageID.getMsgNameById&&(i=c.MessageID.getMsgNameById(e))&&(n=i);var o=com.message[n].encode(t).finish(),a=o.byteLength;if(null==n||null==e)return c.LogUtil.log("[send:error:"+t+"]"),s;r&&c.PlatformConfig.isDebug&&c.LogUtil.log("[C_S:"+e+" "+n+"] msgLength:"+a);var s,l=this.encryptForDis(o,a);return(s=c.ByteArrayPool.getInstance().createByte()).writeInt(a+h.ADD_L),s.writeInt(e),s.writeBytes(l),c.ByteArrayPool.getInstance().recycleByte(l),s},h.encryptForDis=function(t,e){var r,i=c.ByteArrayPool.getInstance().createByte();i._writeUint8Array(t);for(var n=i.bytes,o=0;o<e&&!(e-1<o+3);o+=5)r=~n[o+2],n[o+2]=n[o+3],n[o+3]=r;return i},h.decryptForDis=function(t){var e,r=c.ByteArrayPool.getInstance().createByte();r.writeBytes(t);for(var i=r.bytes,n=i.byteLength,o=0;o<n&&!(n-1<o+3);o+=5)e=i[o+2],i[o+2]=~i[o+3],i[o+3]=e;return r},h.KEY="",h.ADD_L=4,h);function h(){}c.BufferGid=t,__reflect(t.prototype,"qmr.BufferGid")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return null==r._instance&&(r._instance=new r),r._instance},r.prototype.createByte=function(){if(0<this.byteList.length)return this.byteList.shift();var t=new egret.ByteArray;return t.endian=egret.Endian.BIG_ENDIAN,t},r.prototype.recycleByte=function(t){t.clear(),this.byteList.push(t)},r);function r(){this.byteList=[];for(var t=0;t<20;t++){var e=new egret.ByteArray;e.endian=egret.Endian.BIG_ENDIAN,this.byteList.push(e)}}t.ByteArrayPool=e,__reflect(e.prototype,"qmr.ByteArrayPool")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.prototype.getCountter=function(){return this._counter+=1,this._counter},r.prototype.resetCounter=function(){this._counter=-1},r.maxReconnectCount=3,r);function r(){this._counter=-1}t.PbGlobalCounter=e,__reflect(e.prototype,"qmr.PbGlobalCounter")}(qmr=qmr||{}),function(){function t(){}(qmr||(qmr={})).RequestHandler=t,__reflect(t.prototype,"qmr.RequestHandler")}(),function(c){var t=(e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.addSocketListener=function(t,e,r,i){var n;void 0===i&&(i=!1),null==this.eventPool[t]?((n=new c.RequestHandler).callBack=e,n.thisObject=r,n.isRpc=!1,n.isLog=i,this.eventPool[t]=n):c.LogUtil.error("[error = addSocketListener  msgId="+t+"]")},e.prototype.removeSocketListener=function(t,e,r){this.eventPool[t]&&delete this.eventPool[t]},e.prototype.connect=function(t,e,r,i){this.close(),this.loginSocket=new c.WebSocket,this.loginSocket.connect(t,e,function(){r.call(i)},this.onConnectClose,this.onConnectClose,this)},e.prototype.sendCmd=function(t,e,r){void 0===r&&(r=!1),this.loginSocket&&this.loginSocket.sendCmd(t,e,r)},e.prototype.rpcCMD=function(t,e,r,i,n,o,a,s){var l;void 0===o&&(o=null),void 0===a&&(a=10),void 0===s&&(s=!1),null==this.callbackPool[t]?((l=new c.RequestHandler).callBack=i,l.thisObject=n,l.timeOutCallBack=o,l.timeOut=a,l.isRpc=!0,l.isLog=s,l.sendTime=Date.now(),this.callbackPool[t]=l,this.sendCmd(e,r,s),c.Ticker.getInstance().unRegisterTick(this.checkTimeOut,this),c.Ticker.getInstance().registerTick(this.checkTimeOut,this,1e3)):c.LogUtil.warn("[error = rpcCMD  eventMsgId="+t+"]")},e.prototype.onDataIn=function(t,e){var r=c.ProtoMsgIdMapLogin.instance.msgIdMap;c.ProtoMsgIdMap&&c.ProtoMsgIdMap.instance&&c.ProtoMsgIdMap.instance.msgIdMap&&(r=c.ProtoMsgIdMap.instance.msgIdMap);var i,n,o,a,s,l=r[t];null!=l?(i=e.buffer,n=new Uint8Array(i),o=l.decode(n),(a=this.eventPool[t])?(a.isLog&&c.LogUtil.log("[S_C:"+t+" "+l.name+"]"),a.clientData?a.callBack.call(a.thisObject,o,a.clientData):a.callBack.call(a.thisObject,o),a=null):c.LogUtil.error("[ [msgId="+t+"]"),(s=this.callbackPool[t])&&s.callBack&&(delete this.callbackPool[t],s.clientData?s.callBack.call(s.thisObject,o,s.clientData):s.callBack.call(s.thisObject,o),s=null)):c.LogUtil.error("[ ProtoMsgIdMap.instance.msgIdMap["+t+"] = null]")},Object.defineProperty(e.prototype,"isconnect",{get:function(){return!this.loginSocket||this.loginSocket.isconnected},enumerable:!0,configurable:!0}),e.prototype.onConnectClose=function(){c.PbGlobalCounter.getInstance().resetCounter(),c.SystemController.instance.clearHeart(),c.LoginModel.instance.isInstead?this.showDisConnectView(""):c.LoginModel.instance.isDisconnect?this.showDisConnectView(""):0<c.PbGlobalCounter.maxReconnectCount?(c.PbGlobalCounter.maxReconnectCount--,e.getInstance().close(),c.LoginModel.instance.isEnterGame?(c.GameLoading.getInstance().setLoadingTip("..."),egret.setTimeout(function(){e.getInstance().startReConnect()},this,2e3)):egret.setTimeout(function(){e.getInstance().startReLogin()},this,2e3)):c.LoginModel.instance.isEnterGame?this.showDisConnectView("!"):(c.PbGlobalCounter.maxReconnectCount=3,e.getInstance().close(),c.GameLoading.getInstance().close(),c.TipManagerCommon.getInstance().createCommonColorTip("",!1))},e.prototype.showDisConnectView=function(t){c.GameLoading.getInstance().close(),c.ModuleManager.showModule(c.ModuleNameLogin.DISCONNECT_VIEW,{msg:t,code:-1},c.LayerConst.TIP,!0,!1)},e.prototype.startReConnect=function(){this.connect(c.GlobalConfig.loginServer,c.GlobalConfig.loginPort,this.onGameServerConnect,this)},e.prototype.onGameServerConnect=function(){c.GameLoading.getInstance().setLoadingTip("..."),c.LoginController.instance.reqReconnect()},e.prototype.startReLogin=function(){this.connect(c.GlobalConfig.loginServer,c.GlobalConfig.loginPort,this.onGameLoginServerConnect,this)},e.prototype.onGameLoginServerConnect=function(){c.GameLoading.getInstance().setLoadingTip("..."),c.LoginController.instance.reqRelogin()},e.prototype.onConnnectError=function(){c.PbGlobalCounter.getInstance().resetCounter(),c.LogUtil.log("ioerror")},e.prototype.close=function(){this.loginSocket&&(this.loginSocket.dispos(),this.loginSocket=null)},e.prototype.fnErrorTrap=function(){},e.prototype.checkTimeOut=function(){var t=this.callbackPool;for(var e in t){var r=t[e];r&&r.isRpc&&Date.now()-r.sendTime>1e3*r.timeOut&&delete t[e]}},e);function e(){this.eventPool={},this.callbackPool={}}c.Rpc=t,__reflect(t.prototype,"qmr.Rpc")}(qmr=qmr||{}),function(c){var t=(e.prototype.connect=function(t,e,r,i,n,o){this.connectCallBack=r,this.connectCloseBack=i,this.connectErrorBack=n,this.thisObject=o;var a=c.PlatformManager.instance,s=a.platform.webSocketProtoco,l="";a.isOutNetPlatForm?(l=s+"://"+t+"/s"+c.GlobalConfig.sid,c.PlatformConfig.isWSS&&(l="wss://"+t+"/s"+c.GlobalConfig.sid)):l="ws://"+t+":"+e+this.WEB_KEY,this.websocket.connectByUrl(l),this.clearConTimeout(),this.tid=egret.setTimeout(this.onTimeOut,this,1e4),c.LogUtil.log(":"+l)},e.prototype.onTimeOut=function(){this.clearConTimeout(),this.connectCloseBack&&this.connectCloseBack.call(this.thisObject),c.LogUtil.log("10")},e.prototype.onSocketConnected=function(t){this._isConnect=!0,this.clearConTimeout(),this.connectCallBack&&this.connectCallBack.call(this.thisObject),c.LogUtil.log("")},e.prototype.onSocketClose=function(t){this._isConnect=!1,this.clearConTimeout(),this.connectCloseBack&&this.connectCloseBack.call(this.thisObject),c.LogUtil.log("")},e.prototype.onDataIn=function(t){if(this.websocket){var e=c.ByteArrayPool.getInstance().createByte();for(this.websocket.readBytes(e);e.bytesAvailable;)c.BufferGid.parseMsg(e);c.ByteArrayPool.getInstance().recycleByte(e)}},e.prototype.onIoError=function(t){this._isConnect=!1,this.clearConTimeout(),this.connectErrorBack&&this.connectErrorBack.call(this.thisObject),c.LogUtil.log("")},e.prototype.sendCmd=function(t,e,r){var i;void 0===r&&(r=!1),this.isconnected&&((i=c.BufferGid.getSendMsg(t,e,r))&&(this.websocket.writeBytes(i),this.websocket.flush(),c.ByteArrayPool.getInstance().recycleByte(i)),t=null)},Object.defineProperty(e.prototype,"isconnected",{get:function(){return this._isConnect&&this.websocket&&this.websocket.connected},enumerable:!0,configurable:!0}),e.prototype.clearConTimeout=function(){this.tid&&(egret.clearTimeout(this.tid),this.tid=0)},e.prototype.dispos=function(){var t=this;t.clearConTimeout(),null!=t.websocket&&(t.websocket.removeEventListener(egret.Event.CONNECT,t.onSocketConnected,t),t.websocket.removeEventListener(egret.Event.CLOSE,t.onSocketClose,t),t.websocket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,t.onDataIn,t),t.websocket.removeEventListener(egret.IOErrorEvent.IO_ERROR,t.onIoError,t),t.isconnected&&(t._isConnect=!1,t.websocket.close()),t.websocket=null),t.connectCallBack=null,t.connectCloseBack=null,t.connectErrorBack=null,t.thisObject=null},e);function e(){this.WEB_KEY="/ws",this.websocket=new egret.WebSocket,this.websocket.type=egret.WebSocket.TYPE_BINARY,this.websocket.addEventListener(egret.Event.CONNECT,this.onSocketConnected,this),this.websocket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.websocket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onDataIn,this),this.websocket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIoError,this)}c.WebSocket=t,__reflect(t.prototype,"qmr.WebSocket")}(qmr=qmr||{}),function(t){var e=(r.prototype.play=function(t,e){void 0===e&&(e=0),null!=this.sound&&(this.isPlay=!0,this.soundChannel=this.sound.play(t,e),this.soundChannel.once(egret.Event.SOUND_COMPLETE,this.onPlayerEnd,this),this.sound.type==egret.Sound.MUSIC&&(this.soundChannel.volume=.7))},r.prototype.onPlayerEnd=function(){this.isPlay=!1},r.prototype.stop=function(){null!=this.sound&&(this.isPlay=!1,null!=this.soundChannel&&this.soundChannel.stop())},Object.defineProperty(r.prototype,"position",{get:function(){return this.soundChannel?this.soundChannel.position:0},enumerable:!0,configurable:!0}),r);function r(t,e){void 0===t&&(t=null),void 0===e&&(e=egret.Sound.EFFECT),this.sound=t,this.isPlay=!1,this.type=e,null!=t&&(this.sound.type=e)}t.SoundItem=e,__reflect(e.prototype,"qmr.SoundItem")}(qmr=qmr||{}),function(c){var t=(n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},Object.defineProperty(n.prototype,"soundPool",{get:function(){return this._soundPool},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEffectSoundOpen",{get:function(){return this._isEffectSoundOpen},set:function(t){if(!(this._isEffectSoundOpen=t))for(var e in this._soundPool){var r=this._soundPool[e];null!=r&&null!=r.sound&&r.sound.type==egret.Sound.EFFECT&&r.stop()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isMusicSoundOpen",{get:function(){return this._isMusicSoundOpen},set:function(t){(this._isMusicSoundOpen=t)?(null!=this._bgSoundItem&&this._bgSoundItem.stop(),""!=this._musicName&&(this._bgSoundItem=this._soundPool[this._musicName],this._bgSoundItem?(this._lastMusicName=this._musicName,this._lastMusicPosition=0,this._bgSoundItem.play(0)):this.loadBgMusic(this._musicName))):null!=this._bgSoundItem&&(this._lastMusicPosition=this._bgSoundItem.position,this._bgSoundItem.stop())},enumerable:!0,configurable:!0}),n.prototype.loadAndPlayEffect=function(t,r,i){if(void 0===r&&(r=1),void 0===i&&(i=!1),this._isMusicLifecycleOpen&&this._isEffectSoundOpen){var n=this._soundPool,e=this.getSoundCfg(t);if(!e)return void c.LogUtil.log(""+t);var o=e.soundName;if(null==o||""==o)return;var a,s=n[o],l=0<e.isPlaySameTime;null==s?(a=RES.getRes(o+"_mp3"))?(n[o]||(s=new c.SoundItem(a),n[o]=s),(l&&!i||!s.isPlay&&s.position<=0)&&s.play(0,r)):c.ResManager.getRes(c.SystemPath.getEffect_musicUrl(o),function(t){var e;n[o]||(e=new c.SoundItem(t),n[o]=e,(l&&!i||!e.isPlay&&e.position<=0)&&e.play(0,r))},this,c.LoadPriority.HIGH,RES.ResourceItem.TYPE_SOUND):(l&&!i||!s.isPlay&&s.position<=0)&&s.play(0,r)}},n.prototype.stopSoundEffect=function(t){var e,r=this.getMusicName(t);null!=r&&""!=r&&(!this._isEffectSoundOpen||null!=(e=this._soundPool[r])&&e.stop())},n.prototype.loadAndPlayMusic=function(t){null!=(this._musicName=t)&&""!=t&&this._isMusicLifecycleOpen&&this._isMusicSoundOpen&&(null!=this._bgSoundItem?this._lastMusicName==t?this._bgSoundItem.position<=0&&(this._bgSoundItem.stop(),this._bgSoundItem.play(0)):(this._bgSoundItem&&this._bgSoundItem.stop(),this._bgSoundItem=this._soundPool[t],this._bgSoundItem?(this._lastMusicName=t,this._lastMusicPosition=0,n.getInstance().isMusicSoundOpen&&this._bgSoundItem.play(0)):this.loadBgMusic(t)):this.loadBgMusic(t))},n.prototype.getMusicName=function(t){var e=this.getSoundCfg(t);return e?e.soundName:(c.LogUtil.log(""+t),"")},n.prototype.getMusicIsPlaySameTime=function(t){var e=this.getSoundCfg(t);return e?e.isPlaySameTime:(c.LogUtil.log(""+t),0)},n.prototype.getSoundCfg=function(t){if(this._soundCfgDic.has(t))return this._soundCfgDic.get(t);var e=c.ConfigManagerBase.getConf(c.ConfigEnumBase.MUSIC,t);return e&&this._soundCfgDic.set(t,e),e},n.prototype.loadBgMusic=function(r){var i,t=this.getMusicName(r);null!=t&&""!=t&&(this._lastMusicName=t,i=this,c.ResManager.getRes(c.SystemPath.bg_music+t+".mp3",function(t){var e=new c.SoundItem(t,egret.Sound.MUSIC);i._soundPool[r]=e,i._bgSoundItem&&i._bgSoundItem.stop(),i._bgSoundItem=e,i._lastMusicPosition=0,n.getInstance().isMusicSoundOpen&&i._bgSoundItem.play(0)},this,c.LoadPriority.LOW,RES.ResourceItem.TYPE_SOUND))},n.prototype.stopMusic=function(){var t=this._bgSoundItem;null!=t&&t.isPlay&&t.stop(),this._isMusicLifecycleOpen=!1},n.prototype.reStartMusic=function(){this._isMusicLifecycleOpen||(this._isMusicLifecycleOpen=!0,this.loadAndPlayMusic(this._lastMusicName))},n);function n(){this._isEffectSoundOpen=!0,this._isMusicSoundOpen=!0,this._isMusicLifecycleOpen=!0,this._soundCfgDic=new c.Dictionary,this._lastMusicPosition=0,this._lastMusicName="",this._musicName="",this._soundPool={},this._isMusicSoundOpen=!c.SettingUtil.getInstance().getForbidState(c.MusicType.BG_MUSIC),this._isEffectSoundOpen=!c.SettingUtil.getInstance().getForbidState(c.MusicType.EFFECT_MUSIC)}c.SoundManager=t,__reflect(t.prototype,"qmr.SoundManager")}(qmr=qmr||{}),function(t){var e=(Object.defineProperty(r,"instance",{get:function(){return null==this._instance&&(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r.prototype.start=function(){if(!this._running){for(var t=0,e=this.eventList;t<e.length;t++){var r=e[t];r&&(r.lastCount=r.updateInterval,r.lastTimeStamp=egret.getTimer())}egret.startTick(this.update,this),this._running=!0}},r.prototype.update=function(t){for(var e=0,r=this.eventList;e<r.length;e++){var i=r[e];if(i){var n=t-i.lastTimeStamp;if((n*=this.scale)>=i.delay){var o,a=Math.floor(n/i.delay);for(4<a&&(a=4);0<a;)a--,0==i.repeatCount?i.callBack&&(i.params?i.callBack.call(i.thisObject,i.params):i.callBack.call(i.thisObject)):(i.currentCount++,0<i.repeatCount&&i.currentCount>=i.repeatCount&&(i.callBack&&(i.params?i.callBack.call(i.thisObject,i.params):i.callBack.call(i.thisObject)),-1!=(o=this.eventList.indexOf(i))&&this.eventList.splice(o,1)));i.lastTimeStamp=t,i.lastCount=i.updateInterval}else{if(i.lastCount-=1e3*this.scale,0<i.lastCount)continue;i.lastCount+=i.updateInterval,i.lastTimeStamp=t,i.currentCount++,0==i.repeatCount?i.callBack&&(i.params?i.callBack.call(i.thisObject,i.params):i.callBack.call(i.thisObject)):0<i.repeatCount&&i.currentCount>=i.repeatCount&&(i.callBack&&(i.params?i.callBack.call(i.thisObject,i.params):i.callBack.call(i.thisObject)),-1!=(o=this.eventList.indexOf(i))&&this.eventList.splice(o,1))}}}return!1},r.prototype.stop=function(){this._running&&(egret.stopTick(this.update,this),this._running=!1)},Object.defineProperty(r.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),r.prototype.registerTick=function(t,e,r,i,n){void 0===r&&(r=1e3),void 0===i&&(i=0),void 0===n&&(n=null);for(var o,a=!0,s=0,l=this.eventList;s<l.length;s++){var c=l[s];if(c.callBack==t&&c.thisObject==e){c.update(r,i),c.params=n,a=!1;break}}a&&((o=new h(r,i)).callBack=t,o.params=n,o.thisObject=e,this.eventList.push(o))},r.prototype.unRegisterTick=function(t,e){for(var r=0,i=this.eventList;r<i.length;r++){var n=i[r];if(n.callBack==t&&n.thisObject==e){var o=this.eventList.indexOf(n);-1!=o&&this.eventList.splice(o,1);break}}},r.prototype.clearAllTick=function(){this.eventList.length=0},r.prototype.test=function(){console.warn("FightTicker:eventList.length...............................",this.eventList.length),console.warn(this.eventList)},r);function r(){this.scale=1,this.eventList=[],this._running=!1,this.start()}t.FightTimer=e,__reflect(e.prototype,"qmr.FightTimer");var h=(i.prototype.update=function(t,e){void 0===e&&(e=0),this.currentCount=0,t<1&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t),this.lastTimeStamp=egret.getTimer(),this._repeatCount=0|+e)},Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"repeatCount",{get:function(){return this._repeatCount},enumerable:!0,configurable:!0}),i);function i(t,e){void 0===e&&(e=0),this.lastTimeStamp=0,this.currentCount=0,this.update(t,e)}__reflect(h.prototype,"TickParams")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return null==this.instance&&(this.instance=new r),this.instance},r.prototype.start=function(){if(!this._running){for(var t=0,e=this.eventList;t<e.length;t++){var r=e[t];r&&(r.lastCount=r.updateInterval,r.lastTimeStamp=egret.getTimer())}egret.startTick(this.update,this),this._running=!0}},r.prototype.update=function(t){for(var e=0,r=this.eventList;e<r.length;e++){var i=r[e];if(i){var n=t-i.lastTimeStamp;if(n>=i.delay){var o,a=Math.floor(n/i.delay);for(4<a&&(a=4);0<a;)a--,0==i.repeatCount?i.callBack&&i.callBack.call(i.thisObject):(i.currentCount++,0<i.repeatCount&&i.currentCount>=i.repeatCount&&(i.callBack&&i.callBack.call(i.thisObject),-1!=(o=this.eventList.indexOf(i))&&this.eventList.splice(o,1)));i.lastTimeStamp=t,i.lastCount=i.updateInterval}else{if(i.lastCount-=1e3,0<i.lastCount)continue;i.lastCount+=i.updateInterval,i.lastTimeStamp=t,i.currentCount++,0==i.repeatCount?i.callBack&&i.callBack.call(i.thisObject):0<i.repeatCount&&i.currentCount>=i.repeatCount&&(i.callBack&&i.callBack.call(i.thisObject),-1!=(o=this.eventList.indexOf(i))&&this.eventList.splice(o,1))}}}return!1},r.prototype.stop=function(){this._running&&(egret.stopTick(this.update,this),this._running=!1)},Object.defineProperty(r.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),r.prototype.registerTick=function(t,e,r,i){void 0===r&&(r=1e3),void 0===i&&(i=0);for(var n,o=!0,a=this.eventList,s=0,l=a;s<l.length;s++){var c=l[s];if(c.callBack==t&&c.thisObject==e){c.update(r,i),o=!1;break}}o&&((n=new h(r,i)).callBack=t,n.thisObject=e,a.push(n))},r.prototype.unRegisterTick=function(t,e){for(var r=this.eventList,i=0,n=r;i<n.length;i++){var o=n[i];if(o.callBack==t&&o.thisObject==e){var a=r.indexOf(o);-1!=a&&r.splice(a,1);break}}},r.prototype.test=function(){console.warn("Ticker info......................................................",this.eventList.length),console.warn(this.eventList)},r);function r(){this.eventList=[],this._running=!1,this.start()}t.Ticker=e,__reflect(e.prototype,"qmr.Ticker");var h=(i.prototype.update=function(t,e){void 0===e&&(e=0),this.currentCount=0,t<1&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t),this.lastTimeStamp=egret.getTimer(),this._repeatCount=0|+e)},Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"repeatCount",{get:function(){return this._repeatCount},enumerable:!0,configurable:!0}),i);function i(t,e){void 0===e&&(e=0),this.lastTimeStamp=0,this.currentCount=0,this.update(t,e)}__reflect(h.prototype,"TickParams")}(qmr=qmr||{}),function(t){var e=(r.checkAvalibe=function(t,e){return 1==(t>>e-1&1)},r.changeBit=function(t,e,r){var i=Math.pow(2,e-1);return t&i?r||(t-=i):r&&(t+=i),t},r.inToBytes=function(t){var e=[];return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e},r);function r(){}t.BitUtil=e,__reflect(e.prototype,"qmr.BitUtil")}(qmr=qmr||{}),function(t){var e=(r.loadScript=function(t,e,r){var i=window.document.createElement("script");i.type="text/javascript",i.src=e?decodeURIComponent(t):t,window.document.head.appendChild(i),i.onload=function(){i.onload=null,r()}},r);function r(){}t.ChannelUtil=e,__reflect(e.prototype,"qmr.ChannelUtil")}(qmr=qmr||{}),function(e){var t=(r.getColorByQuality=function(t){switch(t){case 1:return e.ColorQualityConst.COLOR_G;case 2:return e.ColorQualityConst.COLOR_GREEN;case 3:return e.ColorQualityConst.COLOR_BLUE;case 4:return e.ColorQualityConst.COLOR_VIOLET;case 5:return e.ColorQualityConst.COLOR_CADMIUM;case 6:return e.ColorQualityConst.COLOR_RED;case 7:return e.ColorQualityConst.COLOR_DIAMOND}return e.ColorQualityConst.COLOR_G},r.getColorBySubType=function(t){switch(t){case 2:return e.ColorQualityConst.COLOR_GREEN;case 3:return e.ColorQualityConst.COLOR_BLUE;case 4:return e.ColorQualityConst.COLOR_VIOLET;case 5:return e.ColorQualityConst.COLOR_CADMIUM;case 6:return e.ColorQualityConst.COLOR_RED}return e.ColorQualityConst.COLOR_G},r.getTipColorByType=function(t){switch(t){case 0:return 16711680;case 1:return 632328}return 16777215},r);function r(){}e.ColorUtil=t,__reflect(t.prototype,"qmr.ColorUtil")}(qmr=qmr||{}),function(t){var e=(r.getMsg=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();for(var i in t)var n=t[i],r=r.replace(/\{\d+\}/,n);return r},r);function r(){}t.CommonTool=e,__reflect(e.prototype,"qmr.CommonTool")}(qmr=qmr||{}),function(e){var t=(r.getInstance=function(){return null==r._instance&&(r._instance=new r),r._instance},r);function r(){var t={};t[e.ActorPart.WEAPON]=e.SystemPath.weaponPath,t[e.ActorPart.WING]=e.SystemPath.wingPath,t[e.ActorPart.HORSE]=e.SystemPath.horsePath,t[e.ActorPart.HORSE_UP]=e.SystemPath.horsePath,t[e.ActorPart.DEFAULT]=e.SystemPath.defaultPath,this.partDic=t}e.ActorPartResourceDic=t,__reflect(t.prototype,"qmr.ActorPartResourceDic")}(qmr=qmr||{}),function(s){var t=(e.hasDirtywords=function(t,i,n){var e=(new Date).getTime()/1e3|0,r=encodeURI(t),o=encodeURI(s.Md5Util.getInstance().hex_md5(t+e+s.GlobalConfig.loginKey)),a=s.PlatformManager.instance.platform.dirtyWordCheckUrl+"?time="+e+"&content="+r+"&sign="+o;s.LogUtil.log("url=",a),s.HttpRequest.sendGet(a,function(t){s.LogUtil.log("dirtywords",t);var e,r=!0;!t||(e=JSON.parse(t))&&1==e.ret&&(r=!1),i&&i.call(n,r,t.content)},this)},e);function e(){}s.DirtyWordsUtils=t,__reflect(t.prototype,"qmr.DirtyWordsUtils")}(qmr=qmr||{}),function(t){var e=(r.getDir=function(t){return t<=5?t:6==t?r.RIGHT_DOWN:7==t?r.RIGHT:8==t?r.RIGHT_UP:void 0},r.UP=1,r.RIGHT_UP=2,r.RIGHT=3,r.RIGHT_DOWN=4,r.DOWN=5,r.LEFT_DOWN=6,r.LEFT=7,r.LEFT_UP=8,r);function r(){}t.DirUtil=e,__reflect(e.prototype,"qmr.DirUtil")}(qmr=qmr||{}),function(n){var t=(o.removeAllChild=function(t){if(t)for(;t.numChildren;)t.removeChildAt(0)},o.removeDisplay=function(t,e){void 0===e&&(e=null),t&&(e=e||t.parent)&&e.removeChild(t)},o.addDisplayToTop=function(t,e){void 0===e&&(e=null),t&&(e=e||t.parent)&&e.addChild(t)},o.removeClick=function(t){var e;for(var r in this.eventDic)if((e=this.eventDic[r]).target==t){e.target.removeEventListener(e.type,e.callBack,e.thisObject),e.target.removeEventListener(e.type,e.callFunc,e.thisCall),delete this.eventDic[r];break}},o.removeAllEvent=function(t){var e=t.hashCode;delete this.eventDic[e+egret.TouchEvent.TOUCH_BEGIN],delete this.eventDic[e+egret.TouchEvent.TOUCH_END],delete this.eventDic[e+egret.TouchEvent.TOUCH_CANCEL],delete this.eventDic[e+egret.TouchEvent.TOUCH_RELEASE_OUTSIDE]},o.addClick=function(t,e,r,i){var n,o,a,s;void 0===i&&(i=null),t&&(null==this.eventDic&&(this.eventDic={}),t instanceof eui.Group&&(t.touchChildren=!1),(n={}).target=t,n.type=egret.TouchEvent.TOUCH_BEGIN,n.thisObject=r,n.callFunc=this.onTouchBegin,n.longPressCallBack=i,n.thisCall=this,t&&!this.eventDic[t.hashCode+n.type]&&(t.addEventListener(n.type,this.onTouchBegin,this),this.eventDic[t.hashCode+n.type]=n),(o={}).target=t,o.type=egret.TouchEvent.TOUCH_END,o.callBack=e,o.thisObject=r,o.callFunc=this.onTouchEnd,o.thisCall=this,t&&!this.eventDic[t.hashCode+o.type]&&(t.addEventListener(o.type,this.onTouchEnd,this),this.eventDic[t.hashCode+o.type]=o),(a={}).target=t,a.type=egret.TouchEvent.TOUCH_CANCEL,a.callBack=e,a.thisObject=r,a.callFunc=this.onTouchReleaseCancel,a.thisCall=this,t&&!this.eventDic[t.hashCode+a.type]&&(t.addEventListener(a.type,this.onTouchReleaseCancel,this),this.eventDic[t.hashCode+a.type]=a),(s={}).target=t,s.type=egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,s.thisObject=r,s.callFunc=this.onTouchReleaseOutSide,s.thisCall=this,t&&!this.eventDic[t.hashCode+s.type]&&(t.addEventListener(s.type,this.onTouchReleaseOutSide,this),this.eventDic[t.hashCode+s.type]=s))},o.onTouchBegin=function(t){this.touchBeginTaret&&this.touchBeginTaret==t.target||egret.getTimer()-this.lastTime<300||(this.touchBeginTaret=t.target,this.lastTime=egret.getTimer(),egret.Tween.get(t.target).to({scaleX:1.1,scaleY:1.1},50),n.Ticker.getInstance().registerTick(this.longPress,this,300))},o.onTouchEnd=function(t){var r=this,i=t.target;this.touchBeginTaret==i&&(this.touchBeginTaret=null,egret.Tween.get(i).to({scaleX:1,scaleY:1},50).call(function(){for(var t in r.eventDic){var e=r.eventDic[t];e.target==i&&e.type==egret.TouchEvent.TOUCH_END&&e.callBack.call(e.thisObject)}},this),n.Ticker.getInstance().unRegisterTick(this.longPress,this))},o.onTouchReleaseCancel=function(t){this.touchBeginTaret==t.currentTarget&&(this.touchBeginTaret&&egret.Tween.removeTweens(this.touchBeginTaret),this.touchBeginTaret=null,t.currentTarget.scaleX=1,t.currentTarget.scaleY=1)},o.onTouchReleaseOutSide=function(t){this.touchBeginTaret==t.target&&(this.touchBeginTaret&&egret.Tween.removeTweens(this.touchBeginTaret),this.touchBeginTaret=null,t.target.scaleX=1,t.target.scaleY=1)},o.longPress=function(){for(var t in this.eventDic){var e=this.eventDic[t];e.target==this.touchBeginTaret&&e.longPressCallBack&&e.longPressCallBack.call(e.thisObject)}},o.setGlow=function(t,e){e?t.filters&&0!=t.filters.length||(t.filters=[n.FilterUtil.glowFilter]):t.filters=[]},o.setGrey=function(t,e,r){void 0===r&&(r=!0),t instanceof eui.Button&&r?t.enabled=!e:e?(t.filters&&0!=t.filters.length||(t.filters=[n.FilterUtil.grayFilter]),r&&(t.touchEnabled=!1)):(t.filters=[],r&&(t.touchEnabled=!0))},o.setBtnGray=function(t,e,r,i){void 0===r&&(r=!0),void 0===i&&(i=1),e?r?(t.currentState="disabled",t.touchEnabled=!1):t.skinName=o.getBtnSkin(i,e):(r?t.currentState="up":t.skinName=o.getBtnSkin(i,e),t.touchEnabled=!0)},o.getBtnSkin=function(t,e){var r="ButtonYellowSkin";switch(t){case n.BtnSkinType.Type_1:r=e?"ButtonYellowDisabledSkin":"ButtonYellowSkin";break;case n.BtnSkinType.Type_2:r=e?"ButtonYellowDisabledSkin1":"ButtonYellowSkin1"}return r},o.setGreyGoup=function(t,e){var r=this;t.forEach(function(t){r.setGrey(t,e)})},o.setDisable=function(t,e){this.setGrey(t,e),t.touchEnabled=!e},o.LoadResByNameAndWH=function(t,e,r,i,n,o){return void 0===n&&(n=50),void 0===o&&(o=50),t.width=r,t.height=i,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=e.width/100*n,t.y=e.height/100*o,t},o.updateStar=function(t,e){for(var r=t.numChildren,i=0;i<r;i++)t.getChildAt(i).imgStar.visible=i<e},o.getGlobelPoint=function(t){return t.parent?t.parent.localToGlobal(t.x,t.y):null},o);function o(){}n.DisplayUtils=t,__reflect(t.prototype,"qmr.DisplayUtils")}(qmr=qmr||{}),function(t){var e=(r.grayFilter=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),r.glowFilter=new egret.GlowFilter(16773632,.8,35,35,2,3,!1,!1),r);function r(){}t.FilterUtil=e,__reflect(e.prototype,"qmr.FilterUtil")}(qmr=qmr||{}),function(n){var t=(s.getHtmlString=function(t){if(-1<t.indexOf("\\n")){var e=t.split("\\n").join("\n");return s.htmlParse.parse(e)}return s.htmlParse.parse(t)},s.getHtmlTextElement=function(t,e,r,i,n,o){void 0===r&&(r=!1);var a="<font color="+e;return i&&(a+=" href=event:"+i),r&&(a+=" u='true'"),n&&(a+=" strokecolor="+n),o&&(a+=" stroke="+o),s.getHtmlString(a+=">"+t+"</font>")},s.getHtmlText=function(t,e,r,i){return void 0===r&&(r=!1),i&&r?"<font color="+e+" href=event:"+i+" u='true'>"+t+"</font>":i?"<font color="+e+" href=event:"+i+">"+t+"</font>":r?"<font color="+e+" u='true'>"+t+"</font>":"<font color="+e+">"+t+"</font>"},s.getColorSize=function(t,e,r){return r?"<font color="+e+" size="+r+">"+t+"</font>":"<font color="+e+">"+t+"</font>"},s.getHtmlTexts=function(t){for(var e=[],r=0;r<t.length;r++)e.push(this.getHtmlText(t[r][1],t[r][0],t[r][2],t[r][3]));return e.join("")},s.getItemHtmlText=function(t,e){return""},s.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r="args:";for(var i in t){if(!n.PlatformConfig.isDebug||!t)return;r+=t[i]+"\n"}return r},s.htmlParse=new egret.HtmlTextParser,s);function s(){}n.HtmlUtil=t,__reflect(t.prototype,"qmr.HtmlUtil")}(qmr=qmr||{}),function(o){var t=(e.setItemIcon=function(e,t,r,i){var n;void 0===i&&(i=!1),t&&""!=t&&(e.source=null,1==i&&(t+="_g"),n=r==o.BagType.HERO?o.SystemPath.cardHeadIcon:o.SystemPath.itemIcon,o.ResManager.getRes(n+t+".png",function(t){e&&(e.source=t)},this,o.LoadPriority.HIGH,RES.ResourceItem.TYPE_IMAGE))},e.setBmpIcon=function(e,t){o.ResManager.getRes(t,function(t){e&&(e.texture=t)},this,o.LoadPriority.HIGH,RES.ResourceItem.TYPE_IMAGE)},e.decoratePathForGray=function(t){return t=t.split(".png")[0]+"_g.png"},e.setImageIcon=function(e,t){""!=t&&null!=t&&null!=e&&e.source!=t&&(e.source=null,o.ResManager.getRes(t,function(t){e&&(e.source=t)},this,o.LoadPriority.HIGH,RES.ResourceItem.TYPE_IMAGE))},e.setFilter=function(t){for(var e=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),r=0;r<t.length;r++)t[r].filters=[e]},e.setTitleIcon=function(e,t,r,i){void 0===r&&(r=null),void 0===i&&(i=null),o.ResManager.getRes(o.SystemPath.titlePath+t+".png",function(t){e&&(e.texture=t,r&&r.call(i))},this,o.LoadPriority.HIGH,RES.ResourceItem.TYPE_IMAGE)},e.setSkillIcon=function(t,e,r){var i;void 0===r&&(r=!1),t&&(i=1==r?"_g.png":".png",t.source=o.SystemPath.skillIcon+e+i)},e);function e(){}o.ImageUtil=t,__reflect(t.prototype,"qmr.ImageUtil")}(qmr=qmr||{}),function(t){var e=(n.getNumber=function(t){return null==t||""==t||isNaN(t)?0:"number"==typeof t?t:parseFloat(t.toString())},n.getNumberArr=function(t){var e=new Array;if(t)for(var r,i=0;i<t.length;i++)r=n.getNumber(t[i]),e.push(r);return e},n);function n(){}function r(t){return null==t?0:"number"==typeof t?t:parseFloat(t.toString())}function i(t){return t%1e4}t.Int64Util=e,__reflect(e.prototype,"qmr.Int64Util"),t.getNumber=r,t.getServerNumber=i,t.getServerNickName=function(t,e){return"S"+i(r(t))+"."+e}}(qmr=qmr||{}),function(t){var e=(n.getQueryString=function(){for(var t=location.search.match(new RegExp("[?&][^?&]+=[^?&]+","g")),e=0;e<t.length;e++)t[e]=t[e].substring(1);return t},n.getQueryStringByName=function(t){var e=location.search.match(new RegExp("[?&]"+t+"=([^&]+)","i"));return null==e||e.length<1?"":e[1]},n.getQueryStringByIndex=function(t){if(null==t)return"";var e=n.getQueryString();if(t>=e.length)return"";var r=e[t],i=r.indexOf("=")+1;return r=r.substring(i)},n.getValueFromParams=function(t,e){var r=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i");if(e){var i=e.match(r);if(i)return decodeURIComponent(i[2])}return null},n);function n(){}t.JsUtil=e,__reflect(e.prototype,"qmr.JsUtil")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return r.instance||(r.instance=new r),r.instance},r);function r(){}t.LabelTip=e,__reflect(e.prototype,"qmr.LabelTip")}(qmr=qmr||{}),function(l){var t=(r.setLabelText=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=l.ConfigManagerBase.getCNValue(e);r&&0<r.length&&(r.unshift(n),n=l.StringUtils.getmsg.apply(l.StringUtils,r)),t.textFlow=l.HtmlUtil.htmlParse.parser(n)},r.setLabel=function(t,e,r){if(void 0===r&&(r=!1),e){e=l.StringUtils.getSectionMsg(e);var i=l.HtmlUtil.htmlParse.parser(e);if(r)for(var n=i.length,o=0;o<n;o++){var a=i[o];a.style?a.style.textColor=7891039:a.style={textColor:7891039}}t.textFlow=i}else t.text=""},r.setLabelCount=function(t,e,r,i){void 0===i&&(i=!1);var n="<font color='"+(0<r?l.ColorQualityConst.COLOR_GREEN:l.ColorQualityConst.COLOR_RED)+"'>"+r+"</font>";t.textFlow=l.HtmlUtil.htmlParse.parser(i?n+e:e+n)},r.setLabelCount2=function(t,e,r,i){void 0===i&&(i=!1);var n="<font color='"+(0<r?l.ColorQualityConst.COLOR_RED:l.ColorQualityConst.COLOR_GREEN)+"'>"+r+"</font>";t.textFlow=l.HtmlUtil.htmlParse.parser(i?n+e:e+n)},r.addLabelEvent=function(t,e,r,i){void 0===i&&(i="");for(var n=[],o=4;o<arguments.length;o++)n[o-4]=arguments[o];var a,s="";null!=n&&0!=n.length||(a="<u>"+t.text+"</u>",n=[t.hashCode,a]),""==i&&(i="CN_119"),s=l.ConfigManagerBase.getCNValue(i),n&&0<n.length&&(n.unshift(s),s=l.StringUtils.getmsg.apply(l.StringUtils,n)),t.textFlow=l.HtmlUtil.htmlParse.parser(s),t.hasEventListener(egret.TextEvent.LINK)||e&&t.addEventListener(egret.TextEvent.LINK,e,r)},r.removeLabelEvent=function(t,e,r){t&&(t.name="",t.removeEventListener(egret.TextEvent.LINK,e,r))},r.addInputListener=function(t,e){t.addEventListener(egret.FocusEvent.FOCUS_IN,r.focusInTxtHandler,e),t.addEventListener(egret.FocusEvent.FOCUS_OUT,r.focusInTxtHandler,e)},r.removeInputListener=function(t,e){t.addEventListener(egret.FocusEvent.FOCUS_IN,r.focusInTxtHandler,e),t.addEventListener(egret.FocusEvent.FOCUS_OUT,r.focusInTxtHandler,e)},r.focusInTxtHandler=function(){document&&document.body&&setTimeout(function(){window.scrollTo&&window.scrollTo(0,document.body.clientHeight)},400)},r);function r(){}l.LabelUtil=t,__reflect(t.prototype,"qmr.LabelUtil")}(qmr=qmr||{}),function(t){var e=(r.prototype.append=function(t){var e,r=new i(t);if(this._head){for(e=this._head;e.next;)e=e.next;e.next=r}else this._head=r;this.nodeLen+=1},r.prototype.indexOf=function(t){if(!this._head)return-1;for(var e=-1,r=this._head;r;){if(e+=1,r.current===t)return e;r=r.next}return-1},r.prototype.removeAt=function(t){var e,r;this._head&&-1<t&&t<this.size&&(0==t?this._head=this._head.next:(e=this.getNodeAt(t),r=this.getNodeAt(t-1),e&&r&&(r.next=e.next)),--this.nodeLen)},r.prototype.getNodeAt=function(t){if(!this._head)return null;for(var e=this._head,r=-1;e;){if((r+=1)===t)return e;e=e.next}return null},Object.defineProperty(r.prototype,"head",{get:function(){return this._head},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this.nodeLen},enumerable:!0,configurable:!0}),r);function r(){this.nodeLen=0}t.LinkedList=e,__reflect(e.prototype,"qmr.LinkedList");var i=function(t){this.current=t};t.LinkNode=i,__reflect(i.prototype,"qmr.LinkNode")}(qmr=qmr||{}),function(i){var t=(r.log=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];i.PlatformConfig.isDebug&&console.log.apply(console,[t].concat(e))},r.saveLogAndShowLog=function(t,e){r.reportLogData.logKey=e,egret.log(e)},r.logF=function(t){i.GlobalConfig.isDebugF&&egret.log(t)},r.warn=function(t){i.PlatformConfig.isDebug&&egret.warn(t)},r.error=function(t){i.PlatformConfig.isDebug&&egret.error(t)},r.slowLog=function(t){i.GlobalConfig.bIsShowSlowLog&&console.log(t)},r.errorLogUrl="v1/artisan/uploadlog",r.reportLogData={},r.reportLogUrl="http://testmt.housepig.cn/xyws/",r);function r(){}i.LogUtil=t,__reflect(t.prototype,"qmr.LogUtil")}(qmr=qmr||{}),function(r){var t=(e.manhattan=function(t,e,r,i){return 100*((r<t?t-r:r-t)+(i<e?e-i:i-e))},e.distance=function(t,e){return e&&t?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},e.getAngle=function(t,e){var r=e.x-t.x,i=e.y-t.y;return 180*Math.atan2(i,r)/Math.PI},e.equal=function(t,e){if(t&&e)if(t.high&&e.high){if(t.high==e.high&&t.low==e.low)return!0}else if(1e3*t/1e3==1e3*e/1e3)return!0;return!1},e.randomCount=function(t,e){return t+Math.round(Math.random()*(e-t))},e.dir=function(t,e){return e?Math.abs(e.y-t.y)<10?e.x>t.x?r.DirUtil.RIGHT:r.DirUtil.LEFT:e.y<t.y?Math.abs(e.x-t.x)<10?r.DirUtil.UP:e.x>t.x?r.DirUtil.RIGHT_UP:r.DirUtil.LEFT_UP:Math.abs(e.x-t.x)<10?r.DirUtil.DOWN:e.x>t.x?r.DirUtil.RIGHT_DOWN:r.DirUtil.LEFT_DOWN:1},e.getRodomPos=function(t){var e=1==t?[[1040,1122],[997,1283],[870,1033],[1124,969],[1216,1407]]:[[1470,1260],[1394,1068],[1432,1241],[1537,1035],[1473,1308]],r=Math.round(Math.random()*(e.length-1));return{x:e[r][0],y:e[r][1]}},e.getGaussianPoint=function(t,e){var r=new egret.Point;return r.x=Math.random()*(t/2)+Math.random()*(t/2),r.y=Math.random()*(e/2)+Math.random()*(e/2),r},e);function e(){}r.MathUtil=t,__reflect(t.prototype,"qmr.MathUtil")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},r.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},r.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},r.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},r.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},r.prototype.any_hmac_md5=function(t,e,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),r)},r.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},r.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},r.prototype.rstr_hmac_md5=function(t,e){var r=this.rstr2binl(t);16<r.length&&(r=this.binl_md5(r,8*t.length));for(var i=Array(16),n=Array(16),o=0;o<16;o++)i[o]=909522486^r[o],n[o]=1549556828^r[o];var a=this.binl_md5(i.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(n.concat(a),640))},r.prototype.rstr2hex=function(t){try{this.hexcase}catch(t){this.hexcase=0}for(var e,r=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",n=0;n<t.length;n++)e=t.charCodeAt(n),i+=r.charAt(e>>>4&15)+r.charAt(15&e);return i},r.prototype.rstr2b64=function(t){try{this.b64pad}catch(t){this.b64pad=""}for(var e="",r=t.length,i=0;i<r;i+=3)for(var n=t.charCodeAt(i)<<16|(i+1<r?t.charCodeAt(i+1)<<8:0)|(i+2<r?t.charCodeAt(i+2):0),o=0;o<4;o++)8*i+6*o>8*t.length?e+=this.b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>>6*(3-o)&63);return e},r.prototype.rstr2any=function(t,e){for(var r,i,n,o=e.length,a=Array(Math.ceil(t.length/2)),s=0;s<a.length;s++)a[s]=t.charCodeAt(2*s)<<8|t.charCodeAt(2*s+1);for(var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(l),h=0;h<l;h++){for(n=Array(),s=i=0;s<a.length;s++)i=(i<<16)+a[s],i-=(r=Math.floor(i/o))*o,(0<n.length||0<r)&&(n[n.length]=r);c[h]=i,a=n}var u="";for(s=c.length-1;0<=s;s--)u+=e.charAt(c[s]);return u},r.prototype.str2rstr_utf8=function(t){for(var e,r,i="",n=-1;++n<t.length;)e=t.charCodeAt(n),r=n+1<t.length?t.charCodeAt(n+1):0,55296<=e&&e<=56319&&56320<=r&&r<=57343&&(e=65536+((1023&e)<<10)+(1023&r),n++),e<=127?i+=String.fromCharCode(e):e<=2047?i+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i},r.prototype.str2rstr_utf16le=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r),t.charCodeAt(r)>>>8&255);return e},r.prototype.str2rstr_utf16be=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t.charCodeAt(r)>>>8&255,255&t.charCodeAt(r));return e},r.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),r=0;r<e.length;r++)e[r]=0;for(r=0;r<8*t.length;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e},r.prototype.binl2rstr=function(t){for(var e="",r=0;r<32*t.length;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e},r.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var r=1732584193,i=-271733879,n=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=r,l=i,c=n,h=o,r=this.md5_ff(r,i,n,o,t[a+0],7,-680876936),o=this.md5_ff(o,r,i,n,t[a+1],12,-389564586),n=this.md5_ff(n,o,r,i,t[a+2],17,606105819),i=this.md5_ff(i,n,o,r,t[a+3],22,-1044525330);r=this.md5_ff(r,i,n,o,t[a+4],7,-176418897),o=this.md5_ff(o,r,i,n,t[a+5],12,1200080426),n=this.md5_ff(n,o,r,i,t[a+6],17,-1473231341),i=this.md5_ff(i,n,o,r,t[a+7],22,-45705983),r=this.md5_ff(r,i,n,o,t[a+8],7,1770035416),o=this.md5_ff(o,r,i,n,t[a+9],12,-1958414417),n=this.md5_ff(n,o,r,i,t[a+10],17,-42063),i=this.md5_ff(i,n,o,r,t[a+11],22,-1990404162),r=this.md5_ff(r,i,n,o,t[a+12],7,1804603682),o=this.md5_ff(o,r,i,n,t[a+13],12,-40341101),n=this.md5_ff(n,o,r,i,t[a+14],17,-1502002290),i=this.md5_ff(i,n,o,r,t[a+15],22,1236535329),r=this.md5_gg(r,i,n,o,t[a+1],5,-165796510),o=this.md5_gg(o,r,i,n,t[a+6],9,-1069501632),n=this.md5_gg(n,o,r,i,t[a+11],14,643717713),i=this.md5_gg(i,n,o,r,t[a+0],20,-373897302),r=this.md5_gg(r,i,n,o,t[a+5],5,-701558691),o=this.md5_gg(o,r,i,n,t[a+10],9,38016083),n=this.md5_gg(n,o,r,i,t[a+15],14,-660478335),i=this.md5_gg(i,n,o,r,t[a+4],20,-405537848),r=this.md5_gg(r,i,n,o,t[a+9],5,568446438),o=this.md5_gg(o,r,i,n,t[a+14],9,-1019803690),n=this.md5_gg(n,o,r,i,t[a+3],14,-187363961),i=this.md5_gg(i,n,o,r,t[a+8],20,1163531501),r=this.md5_gg(r,i,n,o,t[a+13],5,-1444681467),o=this.md5_gg(o,r,i,n,t[a+2],9,-51403784),n=this.md5_gg(n,o,r,i,t[a+7],14,1735328473),i=this.md5_gg(i,n,o,r,t[a+12],20,-1926607734),r=this.md5_hh(r,i,n,o,t[a+5],4,-378558),o=this.md5_hh(o,r,i,n,t[a+8],11,-2022574463),n=this.md5_hh(n,o,r,i,t[a+11],16,1839030562),i=this.md5_hh(i,n,o,r,t[a+14],23,-35309556),r=this.md5_hh(r,i,n,o,t[a+1],4,-1530992060),o=this.md5_hh(o,r,i,n,t[a+4],11,1272893353),n=this.md5_hh(n,o,r,i,t[a+7],16,-155497632),i=this.md5_hh(i,n,o,r,t[a+10],23,-1094730640),r=this.md5_hh(r,i,n,o,t[a+13],4,681279174),o=this.md5_hh(o,r,i,n,t[a+0],11,-358537222),n=this.md5_hh(n,o,r,i,t[a+3],16,-722521979),i=this.md5_hh(i,n,o,r,t[a+6],23,76029189),r=this.md5_hh(r,i,n,o,t[a+9],4,-640364487),o=this.md5_hh(o,r,i,n,t[a+12],11,-421815835),n=this.md5_hh(n,o,r,i,t[a+15],16,530742520),i=this.md5_hh(i,n,o,r,t[a+2],23,-995338651),r=this.md5_ii(r,i,n,o,t[a+0],6,-198630844),o=this.md5_ii(o,r,i,n,t[a+7],10,1126891415),n=this.md5_ii(n,o,r,i,t[a+14],15,-1416354905),i=this.md5_ii(i,n,o,r,t[a+5],21,-57434055),r=this.md5_ii(r,i,n,o,t[a+12],6,1700485571),o=this.md5_ii(o,r,i,n,t[a+3],10,-1894986606),n=this.md5_ii(n,o,r,i,t[a+10],15,-1051523),i=this.md5_ii(i,n,o,r,t[a+1],21,-2054922799),r=this.md5_ii(r,i,n,o,t[a+8],6,1873313359),o=this.md5_ii(o,r,i,n,t[a+15],10,-30611744),n=this.md5_ii(n,o,r,i,t[a+6],15,-1560198380),i=this.md5_ii(i,n,o,r,t[a+13],21,1309151649),r=this.md5_ii(r,i,n,o,t[a+4],6,-145523070),o=this.md5_ii(o,r,i,n,t[a+11],10,-1120210379),n=this.md5_ii(n,o,r,i,t[a+2],15,718787259),i=this.md5_ii(i,n,o,r,t[a+9],21,-343485551),r=this.safe_add(r,s),i=this.safe_add(i,l),n=this.safe_add(n,c),o=this.safe_add(o,h)}return[r,i,n,o]},r.prototype.md5_cmn=function(t,e,r,i,n,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,o)),n),r)},r.prototype.md5_ff=function(t,e,r,i,n,o,a){return this.md5_cmn(e&r|~e&i,t,e,n,o,a)},r.prototype.md5_gg=function(t,e,r,i,n,o,a){return this.md5_cmn(e&i|r&~i,t,e,n,o,a)},r.prototype.md5_hh=function(t,e,r,i,n,o,a){return this.md5_cmn(e^r^i,t,e,n,o,a)},r.prototype.md5_ii=function(t,e,r,i,n,o,a){return this.md5_cmn(r^(e|~i),t,e,n,o,a)},r.prototype.safe_add=function(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r},r.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},r);function r(){this.hexcase=0,this.b64pad=""}t.Md5Util=e,__reflect(e.prototype,"qmr.Md5Util")}(qmr=qmr||{}),function(t){var e=(r.getPoolBySign=function(t){return r._poolDic[t]||(r._poolDic[t]=[])},r.clearBySign=function(t){r._poolDic[t]&&(r._poolDic[t].length=0)},r._getClassSign=function(t){var e=t.name;return""!=e&&null!=e||(t.name=e=this.getGID()+""),e},r.getItemByClass=function(t,e){if(!this._poolDic[t])return new e;var r,i=this.getPoolBySign(t);return i&&i.length?(r=i.pop())[this.POOLSIGN]=!1:r=new e,r},r.recover=function(t,e){e&&(e[this.POOLSIGN]||(e[this.POOLSIGN]=!0,this.getPoolBySign(t).push(e)))},r.isInPool=function(t){return!(!t||!t[this.POOLSIGN])},r.getItemByCreateFun=function(t,e,r){void 0===r&&(r=null);var i=this.getPoolBySign(t),n=i.length?i.pop():e.call(r);return n[this.POOLSIGN]=!1,n},r.getItem=function(t){var e=this.getPoolBySign(t),r=e.length?e.pop():null;return r&&(r[this.POOLSIGN]=!1),r},r.getGID=function(){return this._gid++},r.POOLSIGN="__InPool",r._poolDic={},r._gid=1,r);function r(){}t.Pool=e,__reflect(e.prototype,"qmr.Pool")}(qmr=qmr||{}),function(i){var t=(e.getQualityUrl=function(t,e){var r;switch(void 0===e&&(e=i.ActorSizeType.small),e){case i.ActorSizeType.small:r="S";break;case i.ActorSizeType.mid:r="M";break;case i.ActorSizeType.big:r="L";break;default:r="S",console.error("sizeType,id:",t)}return i.SystemPath.qualityPath+r+"/"+t+".png"},e.getQualityTypeUrl=function(t,e){var r;switch(void 0===e&&(e=i.ActorSizeType.small),e){case i.ActorSizeType.small:r="S";break;case i.ActorSizeType.mid:case i.ActorSizeType.big:r="M"}return i.SystemPath.qualityPath+r+"/"+t+".png"},e.getBgUrl=function(t){return i.SystemPath.bgPath+t+".png"},e.getHeroTypeUrl=function(t){return i.SystemPath.cardTypeIcon+t+".png"},e.getHeroCardUrl=function(t){return i.SystemPath.rolePath+"png/"+t+".png"},e.getMonsterCardUrl=function(t){return i.SystemPath.monsterPath+"png/"+t+".png"},e.getHeroHeadUrl=function(t){return i.SystemPath.cardHeadIcon+t+".png"},e.getEmbattleQualityUrl=function(t){return i.SystemPath.buzhenPath+"pz_"+t+".png"},e.getMapUrl=function(t){return i.SystemPath.mapPath+t+".jpg"},e.getHangMapUrl=function(t){return i.SystemPath.hangMapPath+t},e.getItemQualityUrl=function(t){return i.SystemPath.qualityPath+"itemQ"+t+".png"},e.getEquipPosImg=function(t){return i.SystemPath.equipPosPath+"equipPos"+t+".png"},e.getForgeEquipPosPath=function(t,e){void 0===e&&(e=!1);var r=e?"y"+t:t+"";return i.SystemPath.forgeEquipPosPath+"equipPos"+r+".png"},e.getItemIconUrl=function(t){return i.SystemPath.itemIcon+t+".png"},e.getBossHeadIconUrl=function(t){return i.SystemPath.bossHeadPath+"headIcon/"+t+".png"},e.getBossRenderBgUrl=function(t){return"ui_grbs_bg"+t+"_png"},e.getShopPromotionIconUrl=function(t){return"ui_shangcheng_"+t+"_png"},e.getShopPromotionIconUrl2=function(t){return"shop"+t+"_png"},e.getBossVipMenuImgUrl=function(t){return"ui_boss_"+t+"_png"},e.getGuildBossImgUrl=function(t){return"guild_"+t+"_png"},e.getWelfareBanner=function(t){return i.SystemPath.welfarePath+t+".png"},e.monthCardPathBanner=function(t,e){return i.SystemPath.monthCardPath+t+"."+e},e.getSkillIcon=function(t,e){return void 0===e&&(e=!1),1==e&&(t+="_g"),i.SystemPath.skillIcon+t+".png"},e.getMainCityImg=function(t){return i.SystemPath.mainCityPath+t+".png"},e.getDanIcon=function(t){return i.SystemPath.danIcon+"dan_"+t+".png"},e.getFaBaoIcon=function(t){return i.SystemPath.fabao+t+".png"},e.getBossBg=function(t){return t+"_png"},e.getRankIcon=function(t){return"rank"+t+"_png"},e.getActForecastIcon=function(t){return i.SystemPath.actForecastPath+t+".png"},e.getFunOpenIcon=function(t){return i.SystemPath.funOpenPath+t+".png"},e.getChoukaHeroNameImg=function(t){return i.SystemPath.icon_heroName+"name/ui_hero_name_"+t+".png"},e.getJibanHeroNameImg=function(t){return i.SystemPath.icon_heroName+"jibanSkillName/ui_hero_skill_"+t+".png"},e.getMonsterSoulLevelImg=function(t){return i.SystemPath.monsterSoulPath+"stage"+t+".png"},e.getGemIcon=function(t){return i.SystemPath.gemIconPath+t+".png"},e.festivalcelebrationBanner=function(t){return"festival_banner"+t+"_png"},e.getHeroPuzzleUrl=function(t,e){return i.SystemPath.heroPuzzlePath+t+"/p"+e+".png"},e.getXiangmoluShowIconUrl=function(t){return i.SystemPath.xiangmoluPath+t+".png"},e);function e(){}i.ResPathUtil=t,__reflect(t.prototype,"qmr.ResPathUtil")}(qmr=qmr||{}),function(d){var t=(e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.startClock=function(){this.isClockStart=!0,d.Ticker.getInstance().registerTick(this.onTimer,this,1e3*this.CLOCK_INTERVAL)},e.prototype.onTimer=function(){this.isOverDay()&&(this.onOverDay(),d.NotifyManager.sendNotification(d.NotifyConstLogin.CROSS_DAY));for(var t=this._weekAffairsTodo,e=this._weekAffairsDone,r=this._dailyAffairsTodo,i=this._dailyAffairsDone,n=this._dayAfterServerStartAffairsTodo,o=this._dayAppointTimeAffairsTodo,a=this._dayAppointTimeStampAffairsTodo,s=r.length-1;0<=s;s--)l=r[s],this.isTimeIn(l.t)&&(l.c.run(),r.splice(s,1),i.push(l));for(s=n.length-1;0<=s;s--){var l=n[s];new Date(d.TimeUtil.serverTime).getDate()==l.r&&this.checkIsStartNow(l.ta[0],l.ta[1],l.d)&&(l.c.run(),n.splice(s,1))}for(s=t.length-1;0<=s;s--)l=t[s],this.isTimeIn(l.t)&&(l.c.run(),t.splice(s,1),e.push(l));for(s=o.length-1;0<=s;s--)l=o[s],this.checkAppointTimeIsTimeIn(l)&&(l.c.run(),o.splice(s,1));for(s=a.length-1;0<=s;s--)l=a[s],this.checkAppointTimeStampIsTimeIn(l)&&(l.c.run(),a.splice(s,1))},e.prototype.checkAppointTimeIsTimeIn=function(t){var e=d.TimeUtil.getTimeStamp2(t.s.month,t.s.day,t.s.hour,t.s.minute),r=d.TimeUtil.getTimeStamp2(t.e.month,t.e.day,t.e.hour,t.e.minute);return d.TimeUtil.serverTime>=e&&d.TimeUtil.serverTime<=r},e.prototype.checkAppointTimeStampIsTimeIn=function(t){var e=t.s;return d.TimeUtil.serverTime>=e},e.prototype.isTimeIn=function(t){var e=d.TimeUtil.serverTime,r=this.getDailyTimeArrByTimeStamp(e,this.helpTimeArr),i=3600*r[0]+60*r[1]+r[2];return 3600*t[0]+60*t[1]+t[2]<=i},e.prototype.checkIsStartNow=function(t,e,r){var i=d.TimeUtil.changeServerTimeToSeconds(d.TimeUtil.serverTime),n=3600*t+60*e;return n<i&&i<n+r},e.prototype.onOverDay=function(){var e=this;this._dailyAffairsTodo=this._dailyAffairsDone.concat(),this._dailyAffairsDone=[],this._weekAffairsTodo=this._weekAffairsDone.concat(),this._weekAffairsDone=[];var r=[];this._weekAffairsTodo.forEach(function(t){r.push(t)}),this._weekAffairsTodo=[],r.forEach(function(t){e.registerWeekAlarmClock(t.w,t.tl,t.o,t.d,t.c,t.to)})},e.prototype.registerDailyAlarmClock=function(t,e,r){var i,n=this.getDailyTimeArrByTimeOffset(e,r);this.isExist(t,t.args,n)?d.LogUtil.warn(" -- > registerDailyAlarmClock"):(i={c:t,p:t.args,t:n},this.isTimeOut(n)?this._dailyAffairsDone.push(i):this._dailyAffairsTodo.push(i))},e.prototype.registerDailyAlarmClock2=function(t,e,r,i){void 0===i&&(i=0);var n,o=e[0],a=e[1],s=this.getDailyTimeArrByTimeOffset(d.TimeUtil.timeToMilSeconds(o,a,0),i);this.isExist(t,t.args,s)?d.LogUtil.warn(" -- > registerDailyAlarmClock"):(n={c:t,p:t.args,t:s},this.checkIsStartNow(o,a,r)&&n.c.run(),this.isTimeOut(s)?this._dailyAffairsDone.push(n):this._dailyAffairsTodo.push(n))},e.prototype.registerWeekAlarmClock=function(t,e,r,i,n,o){for(var a=this.getCurDay(),s=0,l=t.length;s<l;){if(a==t[s]){var c=e[0],h=e[1],u=this.getDailyTimeArrByTimeOffset(d.TimeUtil.timeToMilSeconds(c,h,0),o),p={c:n,p:n.args,t:u,o:r,d:i,tl:e,w:t,to:o};this.checkIsStartNow(c,h,i)&&p.c.run(),this.isTimeOut(u)?this._weekAffairsDone.push(p):this._weekAffairsTodo.push(p);break}s++}},e.prototype.registerDayAfterServerStartAlarmClock=function(t,e,r,i,n,o){var a=e+(i-1)*this.oneDayMileSeconds,s=new Date(a).getDate(),l=this.getDailyTimeArrByTimeOffset(n,o),c={c:t,p:t.args,s:e,d:r,r:s,a:n,t:o,ta:l};this._dayAfterServerStartAffairsTodo.push(c)},e.prototype.registerAppointTimeAlarmClock=function(t,e,r){var i,n=d.TimeUtil.getTimeStamp2(r.month,r.day,r.hour,r.minute);d.TimeUtil.serverTime>n?d.LogUtil.warn(", -- > registerAppointTimeAlarmClock"):(i={c:t,p:t.args,s:e,e:r},this._dayAppointTimeAffairsTodo.push(i))},e.prototype.registerAppointTimeStampAlarmClock=function(t,e){var r;d.TimeUtil.serverTime>e?d.LogUtil.warn(", -- > registerAppointTimeAlarmClock"):(r={c:t,p:t.args,s:e},this._dayAppointTimeStampAffairsTodo.push(r))},e.prototype.unRegisterAppointTimeStampAlarmClock=function(t){for(var e=this._dayAppointTimeStampAffairsTodo,r=e.length-1;0<=r;r--)e[r].c==t&&e.splice(r,1)},e.prototype.isExistDayAfterServerStart=function(t,e,r,i){for(var n=0,o=this._dayAfterServerStartAffairsTodo;n<o.length;n++){var a=o[n];if(a.s==t&&a.r==e&&a.a==r&&a.t==i)return!0}return!1},e.prototype.isExist=function(t,e,r){for(var i,n=this._dailyAffairsTodo,o=this._dailyAffairsDone,a=n.length,s=0;s<a;s++)if((i=n[s]).c==t&&this.equalArray(i.p,e)&&this.equalArray(i.t,r))return!0;a=o.length;for(var l=0;l<a;l++)if((i=o[l]).c==t&&this.equalArray(i.p,e)&&this.equalArray(i.t,r))return!0;return!1},e.prototype.equalArray=function(t,e){if(t==e)return!0;if(null==t)return!1;if(null==e)return!1;if(t.length!=e.length)return!1;for(var r=t.length,i=!0,n=0;n<r;n++)if(t[n]!=e[n]){i=!1;break}return i},e.prototype.getDailyTimeArrByTimeOffset=function(t,e,r){void 0===r&&(r=null);var i=new Date(d.TimeUtil.serverTime),n=3600*i.getHours(),o=60*i.getMinutes(),a=i.getSeconds(),s=i.getMilliseconds(),l=1e3*(n+o+a),c=d.TimeUtil.serverTime-l+s+t,h=this.getDailyTimeArrByTimeStamp(c,r),u=this.getDailyTimeArrByTimeStamp(c+e,r);return 0<e?h.concat(u):u.concat(h)},e.prototype.getDailyTimeArrByTimeStamp=function(t,e){var r=this.helperDate1;return r.setTime(t),null==e&&(e=[]),e[0]=r.getHours(),e[1]=r.getMinutes(),e[2]=r.getSeconds(),e},e.prototype.isTimeOut=function(t){var e=d.TimeUtil.serverTime,r=this.getDailyTimeArrByTimeStamp(e,this.helpTimeArr),i=3600*r[0]+60*r[1]+r[2];return 3600*t[3]+60*t[4]+t[5]<=i},e.prototype.isOverDay=function(){var t=d.TimeUtil.serverTime;return this.helperDate1.setTime(t),this.helperDate2.setTime(t-1e3*this.CLOCK_INTERVAL),this.helperDate2.getDate()!=this.helperDate1.getDate()},e.prototype.getCurDay=function(){this.helperDate1.setTime(d.TimeUtil.serverTime);var t=this.helperDate1.getDay();return 0==t&&(t=7),t},e);function e(){this.CLOCK_INTERVAL=3,this._dailyAffairsTodo=[],this._dailyAffairsDone=[],this._dayAfterServerStartAffairsTodo=[],this._dayAppointTimeAffairsTodo=[],this._dayAppointTimeStampAffairsTodo=[],this._weekAffairsTodo=[],this._weekAffairsDone=[],this.oneDayMileSeconds=864e5,this.helperDate1=new Date,this.helperDate2=new Date,this.helpTimeArr=[],this.isClockStart=!1}d.ServerClock=t,__reflect(t.prototype,"qmr.ServerClock")}(qmr=qmr||{}),function(r){var t=(e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.getForbidState=function(t){return r.BitUtil.checkAvalibe(this.sVariantType,t)},e.prototype.setForbidState=function(t,e){this.sVariantType=r.BitUtil.changeBit(this.sVariantType,t,e),egret.localStorage.setItem(r.PlatformConfig.channelId+"zgmrsetting"+r.GlobalConfig.userId,this.sVariantType+"")},e);function e(){this.sVariantType=0;var t=egret.localStorage.getItem(r.PlatformConfig.channelId+"zgmrsetting"+r.GlobalConfig.userId);t&&"undefined"!=t&&(this.sVariantType=parseInt(t))}r.SettingUtil=t,__reflect(t.prototype,"qmr.SettingUtil")}(qmr=qmr||{}),function(o){var t=(Object.defineProperty(a,"stageWidth",{get:function(){return a.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(a,"stageHeight",{get:function(){return a.stage.stageHeight},enumerable:!0,configurable:!0}),a.setStageFrameRate=function(t){a.stage.frameRate=t},a.getStageFrameRate=function(){return a.stage.frameRate},a.init=function(t){a.stage=t;var e=a;e.maxStageWidth=Math.floor(e.DESIGN_HEIGHT/e.MIN_HW_RATIO),e.maxStageHeight=Math.floor(e.DESIGN_WIDTH*e.MAX_HW_RATIO),e.setStageFrameRate(e.FRAME_RATE),o.PlatformManager.instance.platform.canResizeStage&&(e.changeStageSize(),window.addEventListener("resize",e.changeStageSize))},a.changeStageSize=function(){function t(){var t="",e=0,r=0,i=window.innerHeight/window.innerWidth,r=i>=n.MAX_HW_RATIO?(t=egret.StageScaleMode.SHOW_ALL,e=n.DESIGN_WIDTH,n.maxStageHeight):(e=i>=n.STANDARD_RATIO?(t=egret.StageScaleMode.FIXED_WIDTH,n.DESIGN_WIDTH):i>n.MIN_HW_RATIO?(t=egret.StageScaleMode.FIXED_HEIGHT,n.DESIGN_WIDTH):(t=egret.StageScaleMode.SHOW_ALL,n.maxStageWidth),n.DESIGN_HEIGHT);n.stage.scaleMode=t,n.stage.setContentSize(e,r),o.NotifyManager.sendNotification(a.STAGE_RESIZE)}var n=a;t(),"IOS"==egret.Capabilities.os.toUpperCase()&&egret.setTimeout(t,this,100)},a.stageEnable=function(t){this.stage&&(this.stage.touchChildren=t)},a.isPC=function(){for(var t=navigator.userAgent.toString(),e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],r=!0,i=0;i<e.length;i++)if(0<t.indexOf(e[i])){r=!1;break}return r},a.FRAME_RATE=60,a.STAGE_RESIZE="stage_resize",a.STAGE_ACTIVE="stage_active",a.STAGE_DEACTIVATE="stage_deactivate",a.DESIGN_WIDTH=750,a.DESIGN_HEIGHT=1334,a.STANDARD_RATIO=1.78,a.MAX_HW_RATIO=2.16,a.MIN_HW_RATIO=1.333,a.maxStageWidth=0,a.maxStageHeight=0,a);function a(){}o.StageUtil=t,__reflect(t.prototype,"qmr.StageUtil")}(qmr=qmr||{}),function(i){var t=(o.getmsg=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();for(var i in t)var n=t[i],r=r.replace(/\{\d+\}/,n);return r},o.getmsg2=function(t,e){for(var r=0;r<e.length;r++){var i=e[r];t=t.replace(/\{\d+\}/,i)}return t},o.getCharLength=function(t){for(var e,r=0,i=t.length,n=0;n<i;n++)r+=0<=(e=t.charCodeAt(n))&&e<=128?1:2;return r},o.getChineseNumber=function(t,e){void 0===e&&(e=!1);var r="";if(0==t)return e?"":r;var i=t+"";if(100<t){r+=o.getChineseNumber(parseInt(i.charAt(0))),r+="";var n=parseInt(i.charAt(1));return 0<n?(r+=o.getChineseNumber(n),r+=""):r+="",r+=o.getChineseNumber(parseInt(i.charAt(2)))}if(100==t)return r+=o.getChineseNumber(parseInt(i.charAt(0))),r+="";if(19<t)return r+=o.getChineseNumber(parseInt(i.charAt(0))),r+="",r+=o.getChineseNumber(parseInt(i.charAt(1)));if(10<t)return r+="",r+=o.getChineseNumber(parseInt(i.charAt(1)));switch(t){case 1:r="";break;case 2:r="";break;case 3:r="";break;case 4:r="";break;case 5:r="";break;case 6:r="";break;case 7:r="";break;case 8:r="";break;case 9:r="";break;case 10:r=""}return r},o.getStepStr=function(t){return o.getLevelStr(t)+"j"},o.getFightToWanStr=function(t){return t/=1e4,(t=Math.floor(100*t)/100).toString()},o.getLevelStr=function(t){var e=""+t;return 0==t?e="z":10==t?e="0":10<t&&t<20?e="0"+(t-10):20<t&&t%10!=0&&(e=e.slice(0,1)+"0"+e.slice(1)),e},o.getRedOrGreenNum=function(t,e){var r=e?i.ColorQualityConst.COLOR_RED:i.ColorQualityConst.COLOR_GREEN;return i.HtmlUtil.getHtmlTexts([[r,""+t]])},o.getSectionMsg=function(t){return t.replace(/\\n/g,"\n")},o.padLeft=function(t,e){if("number"==typeof e)return Array(e+1).join(" ")+t;if("string"==typeof e)return e+t;throw new Error("Expected string or number, got '"+e+"'.")},o.copyClipBoard=function(t){var e;i.PlatformConfig.platformId==i.PlatformEnum.P_WX?window.wx.setClipboardData({data:t,success:function(t){window.wx.getClipboardData({success:function(t){}})}}):i.PlatformConfig.platformId==i.PlatformEnum.P_XIYOU_SQQ?window.qq.setClipboardData({data:t,success:function(t){window.qq.getClipboardData({success:function(t){i.TipManagerCommon.getInstance().createCommonColorTip("",!0)}})}}):i.PlatformConfig.platformId==i.PlatformEnum.P_OPPO?window.qg.setClipboardData({data:t,success:function(t){i.TipManagerCommon.getInstance().createCommonColorTip("",!0)}}):((e=document.createElement("input")).value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e),i.TipManagerCommon.getInstance().createCommonColorTip("",!0))},o);function o(){}i.StringUtils=t,__reflect(t.prototype,"qmr.StringUtils")}(qmr=qmr||{}),function(t){var e=(r.getmsg=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();for(var i in t)var n=t[i],r=r.replace(/\{\d+\}/,n);return r},r);function r(){}t.StringUtilsBase=e,__reflect(e.prototype,"qmr.StringUtilsBase")}(qmr=qmr||{}),function(r){var t=(Object.defineProperty(e,"mapPath",{get:function(){return r.PlatformConfig.webRoot+"map/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"hangMapPath",{get:function(){return r.PlatformConfig.webRoot+"hangMap/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"effectPath",{get:function(){return r.PlatformConfig.webRoot+"animation/effect/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"minePath",{get:function(){return r.PlatformConfig.webRoot+"animation/xianmai/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"uieffect",{get:function(){return r.PlatformConfig.webRoot+"animation/uieffect/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"fabao",{get:function(){return r.PlatformConfig.webRoot+"animation/fabao/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"monsterPath",{get:function(){return r.PlatformConfig.webRoot+"animation/monster/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"rolePath",{get:function(){return r.PlatformConfig.webRoot+"animation/role/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultPath",{get:function(){return r.PlatformConfig.useCdnRes?r.PlatformConfig.webUrl+"resourceLogin/animation/":"resourceLogin/animation/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"roleUiPath",{get:function(){return r.PlatformConfig.webRoot+"animation/role/UI/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"horsePath",{get:function(){return r.PlatformConfig.webRoot+"animation/horse/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"wingPath",{get:function(){return r.PlatformConfig.webRoot+"animation/wing/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ShugoPath",{get:function(){return r.PlatformConfig.webRoot+"animation/bow/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GuangHuanPath",{get:function(){return r.PlatformConfig.webRoot+"animation/guanghuan/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tortoisePath",{get:function(){return r.PlatformConfig.webRoot+"animation/tortoise/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"weaponPath",{get:function(){return r.PlatformConfig.webRoot+"animation/weapon/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bigSkillPath",{get:function(){return r.PlatformConfig.webRoot+"animation/ultimateSkill/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"itemIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/item/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"warriorIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/warrior/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"qualityPath",{get:function(){return r.PlatformConfig.webRoot+"icon/quality/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cardTypeIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/hero/type/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cardHeadIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/hero/head/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buff_icon",{get:function(){return r.PlatformConfig.webRoot+"icon/buff/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"skillIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/skill/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"danIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/duanwei/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"jinjie_level_icon",{get:function(){return r.PlatformConfig.webRoot+"icon/jinjielevel/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buzhenPath",{get:function(){return r.PlatformConfig.webRoot+"icon/quality/buzhen/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"equipPosPath",{get:function(){return r.PlatformConfig.webRoot+"icon/equipPos/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"forgeEquipPosPath",{get:function(){return r.PlatformConfig.webRoot+"icon/forgeEquipPos/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bossHeadPath",{get:function(){return r.PlatformConfig.webRoot+"icon/boss/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"actForecastPath",{get:function(){return r.PlatformConfig.webRoot+"icon/actForecast/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"funOpenPath",{get:function(){return r.PlatformConfig.webRoot+"icon/funOpen/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"rankPath",{get:function(){return r.PlatformConfig.webRoot+"icon/rank/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"gemIconPath",{get:function(){return r.PlatformConfig.webRoot+"icon/gemIcon/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"monsterSoulPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/monsterSoul/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bg_music",{get:function(){return r.PlatformConfig.webRoot+"sound/music/"},enumerable:!0,configurable:!0}),e.getEffect_musicUrl=function(t){var e=r.PlatformConfig.webRoot+"sound/effect/";return"dianji"!=t&&"tanchu"!=t||(e=r.PlatformConfig.useCdnRes?r.PlatformConfig.webUrl+"resourceLogin/sound/":"resourceLogin/sound/"),e+t+".mp3"},Object.defineProperty(e,"titlePath",{get:function(){return r.PlatformConfig.webRoot+"animation/title/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"icon_heroName",{get:function(){return r.PlatformConfig.webRoot+"icon/hero/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"heroPuzzlePath",{get:function(){return r.PlatformConfig.webRoot+"icon/heroPuzzle/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"xiangmoluPath",{get:function(){return r.PlatformConfig.webRoot+"icon/xiagnmolu/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"actHallPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/actHall/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bossPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/boss/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unpack_battle",{get:function(){return r.PlatformConfig.webRoot+"unpack/battle/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"shopPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/shop/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"welfarePath",{get:function(){return r.PlatformConfig.webRoot+"unpack/welfare/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"mainCityPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/mainCity/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"monthCardPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/monthCard/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bgPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/bg/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"textureMergerPath",{get:function(){return r.PlatformConfig.webRoot+"textureMerger/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"icon_headBg",{get:function(){return r.PlatformConfig.webRoot+"icon/headBg/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"icon_chatBg",{get:function(){return r.PlatformConfig.webRoot+"icon/chatBubble/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"config",{get:function(){return r.PlatformConfig.webRoot+"config/"},enumerable:!0,configurable:!0}),e);function e(){}r.SystemPath=t,__reflect(t.prototype,"qmr.SystemPath")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return null==this._instance&&(this._instance=new r),this._instance},r.prototype.strlen=function(t){for(var e=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);1<=i&&i<=126||65376<=i&&i<=65439?e++:e+=2}return e},r.prototype.fixTextBox=function(t,e){if(e.textWidth>t){var r=t/e.textWidth;return e.width=Math.ceil(e.textWidth),e.scaleX=r,!0}return!1},r);function r(){}t.TextFixWidthUtil=e,__reflect(e.prototype,"qmr.TextFixWidthUtil")}(qmr=qmr||{}),function(r){var t=(e.prototype.setDes=function(t){this.des=t},e.prototype.startTick=function(t,e){void 0===e&&(e=1e3),this.runing=!0,this.count=t,r.Ticker.getInstance().registerTick(this.tick,this,e),this.showMsg()},e.prototype.tick=function(){if(this.count--<1)return this.stopTick(),void(this.backFun&&this.backFun.call(this.thisObj));this.updateFun&&this.updateFun.call(this.thisObj),this.showMsg()},e.prototype.showMsg=function(){this.label&&this.des&&(this.label.text=r.CommonTool.getMsg(this.des,this.count)),this.btn&&this.des&&(this.btn.label=r.CommonTool.getMsg(this.des,this.count))},e.prototype.stopTick=function(){this.runing&&(this.runing=!1,r.Ticker.getInstance().unRegisterTick(this.tick,this))},e);function e(t,e,r){void 0===t&&(t=null),void 0===e&&(e=null),this.label=t,this.des=e,this.thisObj=r}r.TickTool=t,__reflect(t.prototype,"qmr.TickTool")}(qmr=qmr||{}),function(t){var e=(s.getServerSecond=function(){return Math.floor((egret.getTimer()+this.tickOffset)/1e3)},Object.defineProperty(s,"serverTime",{get:function(){return egret.getTimer()+this.tickOffset},enumerable:!0,configurable:!0}),s.getSeverDate=function(){return new Date(1e3*this.getServerSecond())},s.getZoneOffsetSeverDate=function(){return new Date(1e3*this.getZoneOffsetSeverSecond())},s.getZoneOffsetSeverSecond=function(){return this.getServerSecond()},s.syncServerTime=function(t){this.tickOffset=t-egret.getTimer()},s.getTimeBySecond=function(t){var e="";return 60<=t&&(e=this.dateStringFillZero(Math.floor(t/60))+":"),e+=this.dateStringFillZero(Math.floor(t%60))},s.getDateByTimer=function(t){s.date||(s.date=new Date),s.date.setTime(t);var e=s.date.getFullYear(),r=s.date.getMonth()+1,i=s.date.getDate(),n=s.date.getHours(),o=s.date.getMinutes(),a=s.date.getSeconds();return r<10||r.toString(),i<10||i.toString(),e+"-"+r+"-"+i+" "+(n<10?"0"+n:n.toString())+":"+(o<10?"0"+o:o.toString())+":"+(a<10?"0"+a:a.toString())},s.getDateByTimerSecond=function(t){return s.getDateByTimer(1e3*t)},s.getDayOverTime=function(){var t=this.getSeverDate();return(new Date(t.getFullYear(),t.getMonth(),t.getDate()+1).getTime()-t.getTime())/1e3},s.getDayTime=function(){var t=this.getSeverDate(),e=new Date(t.getFullYear(),t.getMonth(),t.getDate());return(t.getTime()-e.getTime())/1e3},s.getTimeToNow=function(t){var e=new Date(t),r=new Date(e.getFullYear(),e.getMonth(),e.getDate());return(e.getTime()-r.getTime())/1e3},s.formatDate=function(t){var e=t.getHours(),r=t.getMinutes(),i=t.getMilliseconds();return(e<10?"0"+e:e.toString())+":"+(r<10?"0"+r:r.toString())+":"+(i<10?"0"+i:i.toString())},s.formatTime=function(t){var e=Math.floor(t/60/60)%24,r=Math.floor(t/60)%60,i=Math.floor(t%60);return(e<10?"0"+e:e.toString())+":"+(r<10?"0"+r:r.toString())+":"+(i<10?"0"+i:i.toString())},s.formatTime1=function(t){var e=Math.floor(t/60/60),r=Math.floor(t/60)%60,i=Math.floor(t%60);return(e<10?"0"+e:e.toString())+":"+(r<10?"0"+r:r.toString())+":"+(i<10?"0"+i:i.toString())},s.formatTime4=function(t){var e=Math.floor(t/60/60)%24,r=Math.floor(t/60)%60,i=e<10?""+e:e.toString(),n=r<10?""+r:r.toString();return i+this.CN_HOUR+n+this.CN_MIN},s.formatTime5=function(t){var e=Math.floor(t/60/60)%24,r=Math.floor(t/60)%60,i=Math.floor(t%60),n=e<10?"0"+e:e.toString(),o=r<10?"0"+r:r.toString(),a=i<10?"0"+i:i.toString();return 0<e?n+this.CN_HOUR+o+this.CN_MIN+a+this.CN_SEC:o+this.CN_MIN+" "+a+this.CN_SEC},s.formatTime2=function(t){var e=Math.floor(t/60)%60,r=Math.floor(t%60);return(e<10?"0"+e:e.toString())+":"+(r<10?"0"+r:r.toString())},s.formatTime3=function(t){var e=Math.floor(t/60/60/24),r=Math.floor(t/60/60)%24+24*e,i=Math.floor(t/60)%60,n=Math.floor(t%60);return(r<10?"0"+r:r.toString())+":"+(i<10?"0"+i:i.toString())+":"+(n<10?"0"+n:n.toString())},s.formatTime6=function(t){var e=Math.floor(t/60)%60,r=Math.floor(t%60);return(e<10?"0"+e:e.toString())+""+(r<10?"0"+r:r.toString())+""},s.formatTime7=function(t){var e=new Date(t),r=e.getMinutes(),i=e.getHours();return(i<10?"0"+i:i.toString())+":"+(r<10?"0"+r:r.toString())},s.formatColumnDate=function(t){var e="";return e+=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<10?"0":"")+t.getDate()+" ",e+=(t.getHours()<10?"0":"")+t.getHours(),e+=":",e+=(t.getMinutes()<10?"0":"")+t.getMinutes()},s.formatDate1=function(t){return t.getFullYear().toString()+"/"+(t.getMonth()+1<10?"0":"")+(t.getMonth()+1)+"/"+(t.getDate()<10?"0":"")+t.getDate()+" "+(t.getHours()<10?"0"+t.getHours():t.getHours().toString())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes().toString())},s.formatYMD=function(t){return t.getFullYear()+this.CN_YEAR+(t.getMonth()+1)+this.CN_MONTH+t.getDate()+this.CN_SUN},s.formatYMDForEn=function(t){return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()},s.formatYMD1=function(t){return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+"/"},s.formatRemain=function(t){var e=Math.floor(t/60/60/24),r=Math.floor(t/60/60)%24,i=Math.floor(t/60)%60,n=Math.floor(t%60);return e+this.CN_DAY+" "+r+this.CN_HOUR+" "+i+this.CN_MIN+" "+n+this.CN_SEC},s.formatRemain1=function(t){var e=Math.floor(t/60/60/24),r=Math.floor(t/60/60)%24,i=Math.floor(t/60)%60;return e+this.CN_DAY+r+this.CN_HOUR+i+this.CN_MIN},s.formatRemain3=function(t){var e=Math.floor(t/60/60)%24,r=Math.floor(t/60)%60;return e+" "+this.CN_HOUR+" "+r+" "+this.CN_MIN},s.formatRemain2=function(t){var e=Math.floor(t/60/60/24),r=Math.floor(t/60/60)%24,i=Math.floor(t/60)%60;return Math.floor(t%60),[e,r,i]},s.formatRemain4=function(t){var e="",r=s.getZeroize,i=Math.floor(t/60/60/24);0!=i&&(e+=r(i)+this.CN_DAY);var n=Math.floor(t/60/60)%24;0!=n&&(e+=r(n)+this.CN_HOUR);var o=Math.floor(t/60)%60;0!=o&&(e+=r(o)+this.CN_MIN);var a=Math.floor(t%60);return 0!=a&&(e+=r(a)+this.CN_SEC),e},s.formatRemain5=function(t){var e=Math.floor(t/60/60/24);if(0!=e)return e+"d";var r=Math.floor(t/60/60)%24;if(0!=r)return r+"h";var i=Math.floor(t/60)%60;if(0!=i)return i+"m";var n=Math.floor(t%60);return 0!=n?n+"s":""},s.formatRemain6=function(t){var e="",r=s.getZeroize,i=Math.floor(t/60/60/24);0!=i&&(e+=i+this.CN_DAY+" ");var n=Math.floor(t/60/60)%24;e+=0!=n?r(n)+":":"00:";var o=Math.floor(t/60)%60;e+=0!=o?r(o)+":":"00:";var a=Math.floor(t%60);return e+=0!=a?r(a):"00"},s.formatRemain7=function(t){var e="",r=s.getZeroize,i=Math.floor(t/60/60/24);0!=i&&(e+=i+this.CN_DAY+" ");var n=Math.floor(t/60/60)%24;0!=n&&(e+=r(n)+":");var o=Math.floor(t/60)%60;e+=0!=o?r(o)+":":"00:";var a=Math.floor(t%60);return e+=0!=a?r(a):"00"},s.formatRemain8=function(t){var e="",r=Math.floor(t/60/60/24);0!=r&&(e+=r+this.CN_DAY);var i=Math.floor(t/60/60)%24;0!=i&&(e+=i+this.CN_HOUR);var n=Math.floor(t/60)%60;0!=n&&(e+=n+this.CN_MIN+"");var o=Math.floor(t%60);return 0!=o&&(e+=o+this.CN_SEC),e},s.formatRemainForEn=function(t){var e=24*Math.floor(t/60/60/24)+Math.floor(t/60/60)%24,r=Math.floor(t/60)%60,i=Math.floor(t%60);return(e<10?"0"+e:e.toString())+":"+(r<10?"0"+r:r.toString())+":"+(i<10?"0"+i:i.toString())},s.getTimeDifference=function(t,e){var r=[0,0,0,0],i=e-t;return r[0]=Math.floor(i/864e5),r[1]=Math.floor(i%864e5/36e5),r[2]=Math.floor(i%864e5%36e5/6e4),r[3]=Math.floor(i%864e5%36e5%6e4/1e3),r},s.prototype.timeStrToDate=function(t){var e=t.split(" "),r=e[0].split("-"),i=e[1].split("-");return new Date(r[0],r[1],r[2],i[0],i[1],i[2])},s.dateStringFillZero=function(t){return(10<=t?(.1*t>>0).toString():"0")+(t%10).toString()},s.gettodayTimeByHour=function(t){var e=this.getZoneOffsetSeverDate();return e.setHours(t),e.setMinutes(0),e.setSeconds(0),e.getTime()/1e3},s.changeServerTimeToSeconds=function(t){var e=new Date(t);return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds()},s.timeToMilSeconds=function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),1e3*(3600*t+60*e+r)},s.getTimeStamp2=function(t,e,r,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=new Date(s.serverTime);return o.setMonth(t-1),o.setDate(e),o.setHours(r),o.setMinutes(i),o.setSeconds(n),o.setMilliseconds(0),o.getTime()},s.getTimeStamp3=function(t,e,r,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var a=new Date;return a.setFullYear(t),a.setMonth(e-1),a.setDate(r),a.setHours(i),a.setMinutes(n),a.setSeconds(o),a.setMilliseconds(0),a.getTime()},s.getCurDay=function(){var t=new Date(s.serverTime).getDay();return 0==t&&(t=7),t},s.getTimeStamp=function(t,e){var r=new Date(s.serverTime);return r.setHours(t),r.setMinutes(e),r.setSeconds(0),r.setMilliseconds(0),r.getTime()},s.getDayTimeStamp=function(t){return s.serverTime+24*t*60*60*1e3},s.getTimeStampByTime=function(t,e,r){var i=new Date(t);return i.setHours(e),i.setMinutes(r),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},s.getBetweenDays=function(t,e){return this.getTotalDaysByTime(t)-this.getTotalDaysByTime(e)},s.getTotalDays=function(t){return Math.floor(t.getTime()- -288e5)/864e5},s.getTotalDaysByTime=function(t){return Math.floor((t- -288e5)/864e5)},s.getTimeNoHourSecond=function(t){var e=new Date(t);return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()},s.getZeroize=function(t){return t<10?"0"+t:t+""},s.getTodayStartTime=function(){return s.getTimeNoHourSecond(s.serverTime)},s.getTimesplit=function(t){var e={},r=t.split(" "),i=r[0],n=r[1],o=i.split("-");e.year=parseInt(o[0]),e.month=parseInt(o[1]),e.day=parseInt(o[2]);var a=n.split(":");return e.hour=parseInt(a[0]),e.minute=parseInt(a[1]),e.second=parseInt(a[2]),e},s.fun10=function(){var t=new Date;return t.getTime()-60*t.getHours()*60*1e3-60*t.getMinutes()*1e3-1e3*t.getSeconds()-t.getMilliseconds()},s.getWeekByTime=function(t,e,r){return 1!=e&&2!=e||(e+=12,--t),(r+2*e+Math.floor(3*(e+1)/5)+t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)+1)%7},s.getWeekByTimeStr=function(t,e,r){var i="";switch(s.getWeekByTime(t,e,r)){case 1:i="";break;case 2:i="";break;case 3:i="";break;case 4:i="";break;case 5:i="";break;case 6:i="";break;case 0:i=""}return i},s.DAY_MICRO_SECONDS=864e5,s.HOUR_MICRO_SECONDS=36e5,s.MINUTE_MICRO_SECONDS=6e4,s.SECOND_MICRO_SECONDS=1e3,s.CN_YEAR="",s.CN_MONTH="",s.CN_SUN="",s.CN_DAY="",s.CN_HOUR="",s.CN_MIN="",s.CN_SEC="",s.tickOffset=0,s);function s(){}t.TimeUtil=e,__reflect(e.prototype,"qmr.TimeUtil")}(qmr=qmr||{});var qmr,TimeUtil=qmr.TimeUtil;!function(t){var e=(r.initSysInfo=function(){this.initMd()},r.initMd=function(){console.log(":"+egret.Capabilities.os);var t,e,r,i,n,o,a=window.MobileDetect;a&&(o="","iOS"==(r=(e=new a(t=navigator.userAgent)).os())?o=e.mobile():"AndroidOS"==r&&(i=t.split(";"),o=-1<(n=this.contains(i,"Build/"))?i[n].substring(0,i[n].indexOf("Build/")):e.mobile()),this.model=o,this.OS=r,egret.log("md:"+JSON.stringify(e)),egret.log(":"+r),egret.log(":"+o))},r.contains=function(t,e){for(var r in t)if(0<t[r].indexOf(e))return Number(r);return-1},r);function r(){}t.WebBrowerUtil=e,__reflect(e.prototype,"qmr.WebBrowerUtil")}(qmr=qmr||{});