var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r},global,__global;void 0===global&&(global=window),void 0===__global&&(__global=global);var __define=this&&this.__define||function(t,e,r,i){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:r,set:i})},egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret;!function(t){t.$hashCount=1;var e=(Object.defineProperty(r.prototype,"hashCode",{get:function(){return this.$hashCode},enumerable:!0,configurable:!0}),r);function r(){this.$hashCode=t.$hashCount++}t.HashObject=e,__reflect(e.prototype,"egret.HashObject",["egret.IHashObject"])}(egret=egret||{}),function(a){var r,l=[],t=(r=a.HashObject,__extends(e,r),e.prototype.$getEventMap=function(t){var e=this.$EventDispatcher;return t?e[2]:e[1]},e.prototype.addEventListener=function(t,e,r,i,n){this.$addListener(t,e,r,i,n)},e.prototype.once=function(t,e,r,i,n){this.$addListener(t,e,r,i,n,!0)},e.prototype.$addListener=function(t,e,r,i,n,o){var a=this.$EventDispatcher,s=i?a[2]:a[1],l=s[t];l?0!==a[3]&&(s[t]=l=l.concat()):l=s[t]=[],this.$insertEventBin(l,t,e,r,i,n,o)},e.prototype.$insertEventBin=function(t,e,r,i,n,o,a){o=0|+o;for(var s=-1,l=t.length,c=0;c<l;c++){var u=t[c];if(u.listener==r&&u.thisObject==i&&u.target==this)return!1;-1==s&&u.priority<o&&(s=c)}var h={type:e,listener:r,thisObject:i,priority:o,target:this,useCapture:n,dispatchOnce:!!a};return-1!==s?t.splice(s,0,h):t.push(h),!0},e.prototype.removeEventListener=function(t,e,r,i){var n=this.$EventDispatcher,o=i?n[2]:n[1],a=o[t];a&&(0!==n[3]&&(o[t]=a=a.concat()),this.$removeEventBin(a,e,r),0==a.length&&(o[t]=null))},e.prototype.$removeEventBin=function(t,e,r){for(var i=t.length,n=0;n<i;n++){var o=t[n];if(o.listener==e&&o.thisObject==r&&o.target==this)return t.splice(n,1),!0}return!1},e.prototype.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},e.prototype.willTrigger=function(t){return this.hasEventListener(t)},e.prototype.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},e.prototype.$notifyListener=function(t,e){var r=this.$EventDispatcher,i=(e?r[2]:r[1])[t.$type];if(!i)return!0;var n=i.length;if(0==n)return!0;var o=l;r[3]++;for(var a,s=0;s<n&&((a=i[s]).listener.call(a.thisObject,t),a.dispatchOnce&&o.push(a),!t.$isPropagationImmediateStopped);s++);for(r[3]--;o.length;)(a=o.pop()).target.removeEventListener(a.type,a.listener,a.thisObject,a.useCapture);return!t.$isDefaultPrevented},e.prototype.dispatchEventWith=function(t,e,r,i){if(e||this.hasEventListener(t)){var n=a.Event.create(a.Event,t,e,i);n.data=r;var o=this.dispatchEvent(n);return a.Event.release(n),o}return!0},e);function e(t){void 0===t&&(t=null);var e=r.call(this)||this;return e.$EventDispatcher={0:t||e,1:{},2:{},3:0},e}a.EventDispatcher=t,__reflect(t.prototype,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret=egret||{}),function(e){var r,t=(r=e.HashObject,__extends(i,r),i.prototype.$toJson=function(){return""},i.prototype.updatePadding=function(){},i.prototype.onPropertyChange=function(){var t=this;t.updatePadding(),e.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(t.$id,t.paddingTop,t.paddingBottom,t.paddingLeft,t.paddingRight),egret_native.NativeDisplayObject.setDataToFilter(t))},i);function i(){var t=r.call(this)||this;return t.type=null,t.$id=null,t.paddingTop=0,t.paddingBottom=0,t.paddingLeft=0,t.paddingRight=0,t.$uniforms={},e.nativeRender&&egret_native.NativeDisplayObject.createFilter(t),t}e.Filter=t,__reflect(t.prototype,"egret.Filter")}(egret=egret||{}),function(y){function o(t){return 180<(t%=360)?t-=360:t<-180&&(t+=360),t}var l,t=(l=y.EventDispatcher,__extends(c,l),c.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(0)},Object.defineProperty(c.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),c.prototype.$setParent=function(t){this.$parent=t},c.prototype.$onAddToStage=function(t,e){this.$stage=t,this.$nestLevel=e,this.$hasAddToStage=!0,y.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},c.prototype.$onRemoveFromStage=function(){this.$nestLevel=0,y.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},c.prototype.$updateUseTransform=function(){var t=this;1==t.$scaleX&&1==t.$scaleY&&0==t.$skewX&&0==t.$skewY?t.$useTranslate=!1:t.$useTranslate=!0},Object.defineProperty(c.prototype,"stage",{get:function(){return this.$stage},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"matrix",{get:function(){return this.$getMatrix().clone()},set:function(t){this.$setMatrix(t)},enumerable:!0,configurable:!0}),c.prototype.$getMatrix=function(){var t=this;return t.$matrixDirty&&(t.$matrixDirty=!1,t.$matrix.$updateScaleAndRotation(t.$scaleX,t.$scaleY,t.$skewX,t.$skewY)),t.$matrix.tx=t.$x,t.$matrix.ty=t.$y,t.$matrix},c.prototype.$setMatrix=function(t,e){void 0===e&&(e=!0);var r=this,i=r.$matrix;i.a=t.a,i.b=t.b,i.c=t.c,i.d=t.d,r.$x=t.tx,r.$y=t.ty,r.$matrixDirty=!1,1==i.a&&0==i.b&&0==i.c&&1==i.d?r.$useTranslate=!1:r.$useTranslate=!0,e&&(r.$scaleX=i.$getScaleX(),r.$scaleY=i.$getScaleY(),r.$skewX=t.$getSkewX(),r.$skewY=t.$getSkewY(),r.$skewXdeg=o(180*r.$skewX/Math.PI),r.$skewYdeg=o(180*r.$skewY/Math.PI),r.$rotation=o(180*r.$skewY/Math.PI)),y.nativeRender&&r.$nativeDisplayObject.setMatrix(t.a,t.b,t.c,t.d,t.tx,t.ty)},c.prototype.$getConcatenatedMatrix=function(){var t=this,e=(e=t.$concatenatedMatrix)||(t.$concatenatedMatrix=new y.Matrix);t.$parent?t.$parent.$getConcatenatedMatrix().$preMultiplyInto(t.$getMatrix(),e):e.copyFrom(t.$getMatrix());var r=t.$anchorOffsetX,i=t.$anchorOffsetY,n=t.$scrollRect;return n?e.$preMultiplyInto(y.$TempMatrix.setTo(1,0,0,1,-n.x-r,-n.y-i),e):0==r&&0==i||e.$preMultiplyInto(y.$TempMatrix.setTo(1,0,0,1,-r,-i),e),t.$concatenatedMatrix},c.prototype.$getInvertedConcatenatedMatrix=function(){var t=this;return t.$invertedConcatenatedMatrix||(t.$invertedConcatenatedMatrix=new y.Matrix),t.$getConcatenatedMatrix().$invertInto(t.$invertedConcatenatedMatrix),t.$invertedConcatenatedMatrix},Object.defineProperty(c.prototype,"x",{get:function(){return this.$getX()},set:function(t){this.$setX(t)},enumerable:!0,configurable:!0}),c.prototype.$getX=function(){return this.$x},c.prototype.$setX=function(t){var e,r,i=this;return i.$x!=t&&(i.$x=t,y.nativeRender?i.$nativeDisplayObject.setX(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())),!0)},Object.defineProperty(c.prototype,"y",{get:function(){return this.$getY()},set:function(t){this.$setY(t)},enumerable:!0,configurable:!0}),c.prototype.$getY=function(){return this.$y},c.prototype.$setY=function(t){var e,r,i=this;return i.$y!=t&&(i.$y=t,y.nativeRender?i.$nativeDisplayObject.setY(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())),!0)},Object.defineProperty(c.prototype,"scaleX",{get:function(){return this.$getScaleX()},set:function(t){this.$setScaleX(t)},enumerable:!0,configurable:!0}),c.prototype.$getScaleX=function(){return this.$scaleX},c.prototype.$setScaleX=function(t){var e,r,i=this;i.$scaleX!=t&&(i.$scaleX=t,i.$matrixDirty=!0,i.$updateUseTransform(),y.nativeRender?i.$nativeDisplayObject.setScaleX(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"scaleY",{get:function(){return this.$getScaleY()},set:function(t){this.$setScaleY(t)},enumerable:!0,configurable:!0}),c.prototype.$getScaleY=function(){return this.$scaleY},c.prototype.$setScaleY=function(t){var e,r,i=this;i.$scaleY!=t&&(i.$scaleY=t,i.$matrixDirty=!0,i.$updateUseTransform(),y.nativeRender?i.$nativeDisplayObject.setScaleY(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"rotation",{get:function(){return this.$getRotation()},set:function(t){this.$setRotation(t)},enumerable:!0,configurable:!0}),c.prototype.$getRotation=function(){return this.$rotation},c.prototype.$setRotation=function(t){var e,r,i,n=this;(t=o(t))!=n.$rotation&&(e=(t-n.$rotation)/180*Math.PI,n.$skewX+=e,n.$skewY+=e,n.$rotation=t,n.$matrixDirty=!0,n.$updateUseTransform(),y.nativeRender?n.$nativeDisplayObject.setRotation(t):((r=n.$parent)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()),(i=n.$maskedObject)&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"skewX",{get:function(){return this.$skewXdeg},set:function(t){this.$setSkewX(t)},enumerable:!0,configurable:!0}),c.prototype.$setSkewX=function(t){var e,r,i=this;t!=i.$skewXdeg&&(t=(t=o(i.$skewXdeg=t))/180*Math.PI,i.$skewX=t,i.$matrixDirty=!0,i.$updateUseTransform(),y.nativeRender?i.$nativeDisplayObject.setSkewX(i.$skewXdeg):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"skewY",{get:function(){return this.$skewYdeg},set:function(t){this.$setSkewY(t)},enumerable:!0,configurable:!0}),c.prototype.$setSkewY=function(t){var e,r,i=this;t!=i.$skewYdeg&&(t=((t=o(i.$skewYdeg=t))+i.$rotation)/180*Math.PI,i.$skewY=t,i.$matrixDirty=!0,i.$updateUseTransform(),y.nativeRender?i.$nativeDisplayObject.setSkewY(i.$skewYdeg):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){this.$setWidth(t)},enumerable:!0,configurable:!0}),c.prototype.$getWidth=function(){return isNaN(this.$explicitWidth)?this.$getOriginalBounds().width:this.$explicitWidth},c.prototype.$setWidth=function(t){t=isNaN(t)?NaN:t,this.$explicitWidth!=t&&(this.$explicitWidth=t)},Object.defineProperty(c.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){this.$setHeight(t)},enumerable:!0,configurable:!0}),c.prototype.$getHeight=function(){return isNaN(this.$explicitHeight)?this.$getOriginalBounds().height:this.$explicitHeight},c.prototype.$setHeight=function(t){t=isNaN(t)?NaN:t,this.$explicitHeight!=t&&(this.$explicitHeight=t)},Object.defineProperty(c.prototype,"measuredWidth",{get:function(){return this.$getOriginalBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"measuredHeight",{get:function(){return this.$getOriginalBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"anchorOffsetX",{get:function(){return this.$anchorOffsetX},set:function(t){this.$setAnchorOffsetX(t)},enumerable:!0,configurable:!0}),c.prototype.$setAnchorOffsetX=function(t){var e,r,i=this;i.$anchorOffsetX!=t&&(i.$anchorOffsetX=t,y.nativeRender?i.$nativeDisplayObject.setAnchorOffsetX(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"anchorOffsetY",{get:function(){return this.$anchorOffsetY},set:function(t){this.$setAnchorOffsetY(t)},enumerable:!0,configurable:!0}),c.prototype.$setAnchorOffsetY=function(t){var e,r,i=this;i.$anchorOffsetY!=t&&(i.$anchorOffsetY=t,y.nativeRender?i.$nativeDisplayObject.setAnchorOffsetY(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$setVisible(t)},enumerable:!0,configurable:!0}),c.prototype.$setVisible=function(t){var e,r,i=this;i.$visible!=t&&(i.$visible=t,y.nativeRender?i.$nativeDisplayObject.setVisible(t):(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"cacheAsBitmap",{get:function(){return this.$cacheAsBitmap},set:function(t){this.$cacheAsBitmap=t,y.nativeRender?this.$nativeDisplayObject.setCacheAsBitmap(t):this.$setHasDisplayList(t)},enumerable:!0,configurable:!0}),c.prototype.$setHasDisplayList=function(t){var e,r=this;!!r.$displayList!=t&&(t?(e=y.sys.DisplayList.create(r))&&(r.$displayList=e,r.$cacheDirty=!0):r.$displayList=null)},c.prototype.$cacheDirtyUp=function(){var t=this.$parent;t&&!t.$cacheDirty&&(t.$cacheDirty=!0,t.$cacheDirtyUp())},Object.defineProperty(c.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$setAlpha(t)},enumerable:!0,configurable:!0}),c.prototype.$setAlpha=function(t){var e,r,i=this;i.$alpha!=t&&(i.$alpha=t,y.nativeRender?i.$nativeDisplayObject.setAlpha(t):(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},Object.defineProperty(c.prototype,"touchEnabled",{get:function(){return this.$getTouchEnabled()},set:function(t){this.$setTouchEnabled(t)},enumerable:!0,configurable:!0}),c.prototype.$getTouchEnabled=function(){return this.$touchEnabled},c.prototype.$setTouchEnabled=function(t){this.$touchEnabled=!!t},Object.defineProperty(c.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){this.$setScrollRect(t)},enumerable:!0,configurable:!0}),c.prototype.$setScrollRect=function(t){var e,r,i=this;t||i.$scrollRect?(t?(i.$scrollRect||(i.$scrollRect=new y.Rectangle),i.$scrollRect.copyFrom(t),y.nativeRender&&i.$nativeDisplayObject.setScrollRect(t.x,t.y,t.width,t.height)):(i.$scrollRect=null,y.nativeRender&&i.$nativeDisplayObject.setScrollRect(0,0,0,0)),y.nativeRender||(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))):i.$updateRenderMode()},Object.defineProperty(c.prototype,"blendMode",{get:function(){return y.sys.numberToBlendMode(this.$blendMode)},set:function(t){var e,r,i=this,n=y.sys.blendModeToNumber(t);i.$blendMode!=n&&(i.$blendMode=n,y.nativeRender?i.$nativeDisplayObject.setBlendMode(n):(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"mask",{get:function(){return this.$mask?this.$mask:this.$maskRect},set:function(t){var e=this;if(t!==e){if(t)if(t instanceof c){if(t==e.$mask)return;t.$maskedObject&&(t.$maskedObject.mask=null),(t.$maskedObject=e).$mask=t,y.nativeRender||t.$updateRenderMode(),e.$maskRect&&(y.nativeRender&&e.$nativeDisplayObject.setMaskRect(0,0,0,0),e.$maskRect=null),y.nativeRender&&e.$nativeDisplayObject.setMask(t.$nativeDisplayObject.id)}else e.$maskRect||(e.$maskRect=new y.Rectangle),e.$maskRect.copyFrom(t),y.nativeRender&&e.$nativeDisplayObject.setMaskRect(t.x,t.y,t.width,t.height),e.$mask&&(e.$mask.$maskedObject=null,y.nativeRender||e.$mask.$updateRenderMode()),e.mask&&(y.nativeRender&&e.$nativeDisplayObject.setMask(-1),e.$mask=null);else e.$mask&&(e.$mask.$maskedObject=null,y.nativeRender||e.$mask.$updateRenderMode()),e.mask&&(y.nativeRender&&e.$nativeDisplayObject.setMask(-1),e.$mask=null),e.$maskRect&&(y.nativeRender&&e.$nativeDisplayObject.setMaskRect(0,0,0,0),e.$maskRect=null);y.nativeRender||e.$updateRenderMode()}},enumerable:!0,configurable:!0}),c.prototype.$setMaskRect=function(t){var e=this;(t||e.$maskRect)&&(t?(e.$maskRect||(e.$maskRect=new y.Rectangle),e.$maskRect.copyFrom(t)):e.$maskRect=null)},Object.defineProperty(c.prototype,"filters",{get:function(){return this.$filters},set:function(t){var e,r,i=this;i.$filters||t?(t&&t.length?(t=t.concat(),i.$filters=t,y.nativeRender&&i.$nativeDisplayObject.setFilters(t)):(i.$filters=t,y.nativeRender&&i.$nativeDisplayObject.setFilters(null)),y.nativeRender||(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))):(i.$filters=t,y.nativeRender?i.$nativeDisplayObject.setFilters(null):(i.$updateRenderMode(),(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())))},enumerable:!0,configurable:!0}),c.prototype.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},c.prototype.getBounds=function(t,e){void 0===e&&(e=!0);var r=this;return t=r.$getTransformedBounds(r,t),e&&(0!=r.$anchorOffsetX&&(t.x-=r.$anchorOffsetX),0!=r.$anchorOffsetY&&(t.y-=r.$anchorOffsetY)),t},c.prototype.$getTransformedBounds=function(t,e){var r,i=this.$getOriginalBounds();return(e=e||new y.Rectangle).copyFrom(i),t==this||(t?(r=y.$TempMatrix,t.$getInvertedConcatenatedMatrix().$preMultiplyInto(this.$getConcatenatedMatrix(),r)):r=this.$getConcatenatedMatrix(),r.$transformBounds(e)),e},c.prototype.globalToLocal=function(t,e,r){if(void 0===t&&(t=0),void 0===e&&(e=0),y.nativeRender){egret_native.updateNativeRender();var i=egret_native.nrGlobalToLocal(this.$nativeDisplayObject.id,t,e).split(","),n=parseFloat(i[0]),o=parseFloat(i[1]);return r?r.setTo(n,o):r=new y.Point(n,o),r}return this.$getInvertedConcatenatedMatrix().transformPoint(t,e,r)},c.prototype.localToGlobal=function(t,e,r){if(void 0===t&&(t=0),void 0===e&&(e=0),y.nativeRender){egret_native.updateNativeRender();var i=egret_native.nrLocalToGlobal(this.$nativeDisplayObject.id,t,e).split(","),n=parseFloat(i[0]),o=parseFloat(i[1]);return r?r.setTo(n,o):r=new y.Point(n,o),r}return this.$getConcatenatedMatrix().transformPoint(t,e,r)},c.prototype.$getOriginalBounds=function(){var t=this.$getContentBounds();this.$measureChildBounds(t);var e=this.$measureFiltersOffset(!1);return e&&(t.x+=e.minX,t.y+=e.minY,t.width+=-e.minX+e.maxX,t.height+=-e.minY+e.maxY),t},c.prototype.$measureChildBounds=function(t){},c.prototype.$getContentBounds=function(){var t=y.$TempRectangle;return t.setEmpty(),this.$measureContentBounds(t),t},c.prototype.$measureContentBounds=function(t){},c.prototype.$getRenderNode=function(){var t=this,e=t.$renderNode;return e?(t.$renderDirty&&(e.cleanBeforeRender(),t.$updateRenderNode(),t.$renderDirty=!1,e=t.$renderNode),e):null},c.prototype.$updateRenderMode=function(){var t=this;!t.$visible||t.$alpha<=0||t.$maskedObject?t.$renderMode=1:t.filters&&0<t.filters.length?t.$renderMode=2:0!==t.$blendMode||t.$mask&&t.$mask.$stage?t.$renderMode=3:t.$scrollRect||t.$maskRect?t.$renderMode=4:t.$renderMode=null},c.prototype.$measureFiltersOffset=function(t){for(var e=this,r=0,i=0,n=0,o=0;e;){var a=e.$filters;if(a&&a.length)for(var s=a.length,l=0;l<s;l++){var c,u,h,p,f,d,g,m=a[l];"blur"==m.type?(r-=c=m.blurX,i-=u=m.blurY,n+=c,o+=u):"glow"==m.type?(r-=c=m.blurX,i-=u=m.blurY,n+=c,o+=u,h=m.distance||0,p=m.angle||0,(d=f=0)!=h&&(r+=f=0<(f=h*y.NumberUtils.cos(p))?Math.ceil(f):Math.floor(f),n+=f,i+=d=0<(d=h*y.NumberUtils.sin(p))?Math.ceil(d):Math.floor(d),o+=d)):"custom"==m.type&&(r-=g=m.padding,i-=g,n+=g,o+=g)}e=t?e.$parent:null}return{minX:r=Math.min(r,0),minY:i=Math.min(i,0),maxX:n=Math.max(n,0),maxY:o=Math.max(o,0)}},c.prototype.$getConcatenatedMatrixAt=function(t,e){var r=t.$getInvertedConcatenatedMatrix();if(0===r.a||0===r.d){var i=this,n=t.$nestLevel;for(e.identity();i.$nestLevel>n;){var o=i.$scrollRect;o&&e.concat(y.$TempMatrix.setTo(1,0,0,1,-o.x,-o.y)),e.concat(i.$getMatrix()),i=i.$parent}}else r.$preMultiplyInto(e,e)},c.prototype.$updateRenderNode=function(){},c.prototype.$hitTest=function(t,e){var r=this;if(!y.nativeRender&&!r.$renderNode||!r.$visible||0==r.$scaleX||0==r.$scaleY)return null;var i=r.$getInvertedConcatenatedMatrix();if(0==i.a&&0==i.b&&0==i.c&&0==i.d)return null;var n=r.$getContentBounds(),o=i.a*t+i.c*e+i.tx,a=i.b*t+i.d*e+i.ty;if(n.contains(o,a)){if(!r.$children){var s=r.$scrollRect?r.$scrollRect:r.$maskRect;if(s&&!s.contains(o,a))return null;if(r.$mask&&!r.$mask.$hitTest(t,e))return null}return r}return null},c.prototype.hitTestPoint=function(t,e,r){var i=this;if(r){var n=(u=i.$getInvertedConcatenatedMatrix()).a*t+u.c*e+u.tx,o=u.b*t+u.d*e+u.ty,a=void 0;if(y.nativeRender){(l=y.sys.customHitTestBuffer).resize(3,3),egret_native.forHitTest=!0,egret_native.activateBuffer(l),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject2(i.$nativeDisplayObject.id,1-n,1-o,!0);try{a=new Uint8Array(4),egret_native.nrGetPixels(1,1,1,1,a)}catch(t){throw new Error(y.sys.tr(1039))}return egret_native.activateBuffer(null),egret_native.forHitTest=!1,0!==a[3]}var s=i.$displayList;if(s){var l=s.renderBuffer;try{a=l.getPixels(n-s.offsetX,o-s.offsetY)}catch(t){throw new Error(y.sys.tr(1039))}}else{(l=y.sys.customHitTestBuffer).resize(3,3);var c=y.Matrix.create();c.identity(),c.translate(1-n,1-o),y.sys.systemRenderer.render(this,l,c,!0),y.Matrix.release(c);try{a=l.getPixels(1,1)}catch(t){throw new Error(y.sys.tr(1039))}}return 0!==a[3]}if(0==i.$scaleX||0==i.$scaleY)return!1;var u=i.$getInvertedConcatenatedMatrix(),h=i.getBounds(null,!1),n=u.a*t+u.c*e+u.tx,o=u.b*t+u.d*e+u.ty;if(h.contains(n,o)){var p=i.$scrollRect?i.$scrollRect:i.$maskRect;return!(p&&!p.contains(n,o))}return!1},c.prototype.$addListener=function(t,e,r,i,n,o){l.prototype.$addListener.call(this,t,e,r,i,n,o);var a,s=t==y.Event.ENTER_FRAME;!s&&t!=y.Event.RENDER||-1==(a=s?c.$enterFrameCallBackList:c.$renderCallBackList).indexOf(this)&&a.push(this)},c.prototype.removeEventListener=function(t,e,r,i){l.prototype.removeEventListener.call(this,t,e,r,i);var n,o,a=t==y.Event.ENTER_FRAME;!a&&t!=y.Event.RENDER||this.hasEventListener(t)||-1!==(o=(n=a?c.$enterFrameCallBackList:c.$renderCallBackList).indexOf(this))&&n.splice(o,1)},c.prototype.dispatchEvent=function(t){if(!t.$bubbles)return l.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),r=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,r),!t.$isDefaultPrevented},c.prototype.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var r=e.concat();return r.reverse(),r.concat(e)},c.prototype.$dispatchPropagationEvent=function(t,e,r){for(var i=e.length,n=r-1,o=0;o<i;o++){var a=e[o];if(t.$currentTarget=a,t.$eventPhase=o<n?1:o==r||o==n?2:3,a.$notifyListener(t,o<r),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},c.prototype.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},Object.defineProperty(c.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this.$tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!0,configurable:!0}),c.prototype.sortChildren=function(){this.$sortDirty=!1},Object.defineProperty(c.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.$sortDirty=!0)},enumerable:!0,configurable:!0}),c.defaultTouchEnabled=!1,c.$enterFrameCallBackList=[],c.$renderCallBackList=[],c);function c(){var t=l.call(this)||this;return t.$children=null,t.$name="",t.$parent=null,t.$stage=null,t.$nestLevel=0,t.$useTranslate=!1,t.$matrix=new y.Matrix,t.$matrixDirty=!1,t.$x=0,t.$y=0,t.$scaleX=1,t.$scaleY=1,t.$rotation=0,t.$skewX=0,t.$skewXdeg=0,t.$skewY=0,t.$skewYdeg=0,t.$explicitWidth=NaN,t.$explicitHeight=NaN,t.$anchorOffsetX=0,t.$anchorOffsetY=0,t.$visible=!0,t.$displayList=null,t.$cacheAsBitmap=!1,t.$cacheDirty=!1,t.$alpha=1,t.$touchEnabled=c.defaultTouchEnabled,t.$scrollRect=null,t.$blendMode=0,t.$maskedObject=null,t.$mask=null,t.$maskRect=null,t.$parentDisplayList=null,t.$renderNode=null,t.$renderDirty=!1,t.$renderMode=null,t._tint=0,t.$tintRGB=0,t.$sortDirty=!1,t._zIndex=0,t.$lastSortedIndex=0,t.sortableChildren=!1,y.nativeRender&&t.createNativeDisplayObject(),t.tint=16777215,t}y.DisplayObject=t,__reflect(t.prototype,"egret.DisplayObject")}(egret=egret||{}),function(p){p.$TextureScaleFactor=1;var e,t=(e=p.HashObject,__extends(r,e),Object.defineProperty(r.prototype,"textureWidth",{get:function(){return this.$getTextureWidth()},enumerable:!0,configurable:!0}),r.prototype.$getTextureWidth=function(){return this.$textureWidth},Object.defineProperty(r.prototype,"textureHeight",{get:function(){return this.$getTextureHeight()},enumerable:!0,configurable:!0}),r.prototype.$getTextureHeight=function(){return this.$textureHeight},r.prototype.$getScaleBitmapWidth=function(){return this.$bitmapWidth*p.$TextureScaleFactor},r.prototype.$getScaleBitmapHeight=function(){return this.$bitmapHeight*p.$TextureScaleFactor},Object.defineProperty(r.prototype,"bitmapData",{get:function(){return this.$bitmapData},set:function(t){this.$ktxData=null,this._setBitmapData(t)},enumerable:!0,configurable:!0}),r.prototype._setBitmapData=function(t){this.$bitmapData=t;var e=p.$TextureScaleFactor,r=t.width*e,i=t.height*e;this.$initData(0,0,r,i,0,0,r,i,t.width,t.height)},Object.defineProperty(r.prototype,"ktxData",{get:function(){return this.$ktxData},set:function(t){this._setKtxData(t)},enumerable:!0,configurable:!0}),r.prototype._setKtxData=function(t){if(t){if(t!=this.$ktxData){var e=new p.KTXContainer(t,1);if(e.isInvalid)return void p.error("ktx data is invalid");this.$ktxData=t;var r=new p.BitmapData(t);r.format="ktx",e.uploadLevels(r,!1),this._setBitmapData(r)}}else p.error("ktx data is null")},r.prototype.$initData=function(t,e,r,i,n,o,a,s,l,c,u){void 0===u&&(u=!1);var h=p.$TextureScaleFactor;this.$bitmapX=t/h,this.$bitmapY=e/h,this.$bitmapWidth=r/h,this.$bitmapHeight=i/h,this.$offsetX=n,this.$offsetY=o,this.$textureWidth=a,this.$textureHeight=s,this.$sourceWidth=l,this.$sourceHeight=c,this.$rotated=u,p.BitmapData.$invalidate(this.$bitmapData)},r.prototype.getPixel32=function(t,e){throw new Error},r.prototype.getPixels=function(t,e,r,i){throw void 0===r&&(r=1),void 0===i&&(i=1),new Error},r.prototype.toDataURL=function(t,e,r){throw new Error},r.prototype.saveToFile=function(t,e,r){throw new Error},r.prototype.dispose=function(){this.$bitmapData&&(this.disposeBitmapData&&this.$bitmapData.$dispose(),this.$bitmapData=null)},r);function r(){var t=e.call(this)||this;return t.disposeBitmapData=!0,t.$bitmapX=0,t.$bitmapY=0,t.$bitmapWidth=0,t.$bitmapHeight=0,t.$offsetX=0,t.$offsetY=0,t.$textureWidth=0,t.$textureHeight=0,t.$sourceWidth=0,t.$sourceHeight=0,t.$bitmapData=null,t.$ktxData=null,t.$rotated=!1,t}p.Texture=t,__reflect(t.prototype,"egret.Texture")}(egret=egret||{}),function(t){var o,e=(o=t.HashObject,__extends(s,o),Object.defineProperty(s.prototype,"type",{get:function(){return this.$type},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bubbles",{get:function(){return this.$bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cancelable",{get:function(){return this.$cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"eventPhase",{get:function(){return this.$eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"currentTarget",{get:function(){return this.$currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"target",{get:function(){return this.$target},enumerable:!0,configurable:!0}),s.prototype.$setTarget=function(t){return this.$target=t,!0},s.prototype.isDefaultPrevented=function(){return this.$isDefaultPrevented},s.prototype.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},s.prototype.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},s.prototype.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},s.prototype.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},s.dispatchEvent=function(t,e,r,i){void 0===r&&(r=!1);var n=s.create(s,e,r),o=s._getPropertyData(s);null!=i&&(o.data=i);var a=t.dispatchEvent(n);return s.release(n),a},s._getPropertyData=function(t){return t._props||(t._props={})},s.create=function(t,e,r,i){var n;if(t.hasOwnProperty("eventPool")&&(n=t.eventPool),(n=n||(t.eventPool=[])).length){var o=n.pop();return o.$type=e,o.$bubbles=!!r,o.$cancelable=!!i,o.$isDefaultPrevented=!1,o.$isPropagationStopped=!1,o.$isPropagationImmediateStopped=!1,o.$eventPhase=2,o}return new t(e,r,i)},s.release=function(t){t.clean(),Object.getPrototypeOf(t).constructor.eventPool.push(t)},s.ADDED_TO_STAGE="addedToStage",s.REMOVED_FROM_STAGE="removedFromStage",s.ADDED="added",s.REMOVED="removed",s.ENTER_FRAME="enterFrame",s.RENDER="render",s.RESIZE="resize",s.CHANGE="change",s.CHANGING="changing",s.COMPLETE="complete",s.LOOP_COMPLETE="loopComplete",s.FOCUS_IN="focusIn",s.FOCUS_OUT="focusOut",s.ENDED="ended",s.ACTIVATE="activate",s.DEACTIVATE="deactivate",s.CLOSE="close",s.CONNECT="connect",s.LEAVE_STAGE="leaveStage",s.SOUND_COMPLETE="soundComplete",s);function s(t,e,r,i){var n=o.call(this)||this;return n.$eventPhase=2,n.$currentTarget=null,n.$target=null,n.$isDefaultPrevented=!1,n.$isPropagationStopped=!1,n.$isPropagationImmediateStopped=!1,n.$type=t,n.$bubbles=!!e,n.$cancelable=!!r,n.data=i,n}t.Event=e,__reflect(e.prototype,"egret.Event")}(egret=egret||{}),function(t){t.getString=function(){return""},t.$error=function(t){throw new Error("#"+t)},t.$warn=function(){},t.$markCannotUse=function(){}}(egret=egret||{}),function(r){var i,n=[],o=Math.PI/180,t=(i=r.HashObject,__extends(a,i),a.release=function(t){t&&n.push(t)},a.create=function(t,e){return(n.pop()||new a).setTo(t,e)},Object.defineProperty(a.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),a.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},a.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},a.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},a.prototype.add=function(t){return new a(this.x+t.x,this.y+t.y)},a.interpolate=function(t,e,r){var i=1-r;return new a(t.x*r+e.x*i,t.y*r+e.y*i)},a.prototype.normalize=function(t){var e;0==this.x&&0==this.y||(e=t/this.length,this.x*=e,this.y*=e)},a.prototype.offset=function(t,e){this.x+=t,this.y+=e},a.polar=function(t,e){return new a(t*r.NumberUtils.cos(e/o),t*r.NumberUtils.sin(e/o))},a.prototype.subtract=function(t){return new a(this.x-t.x,this.y-t.y)},a.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},a);function a(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var r=i.call(this)||this;return r.x=t,r.y=e,r}r.Point=t,__reflect(t.prototype,"egret.Point"),r.$TempPoint=new t}(egret=egret||{}),function(u){var h,t=(h=u.DisplayObject,__extends(p,h),Object.defineProperty(p.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),p.prototype.setChildrenSortMode=function(t){u.nativeRender&&this.$nativeDisplayObject.setChildrenSortMode&&this.$nativeDisplayObject.setChildrenSortMode(t)},p.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},p.prototype.addChildAt=function(t,e){return((e=0|+e)<0||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},p.prototype.$doAddChild=function(t,e,r){void 0===r&&(r=!0);var i=this,n=t.$parent;if(n==i)return i.doSetChildIndex(t,e),t;n&&n.removeChild(t),i.$children.splice(e,0,t),t.$setParent(i),u.nativeRender&&i.$nativeDisplayObject.addChildAt(t.$nativeDisplayObject.id,e);var o,a,s=i.$stage;if(s&&t.$onAddToStage(s,i.$nestLevel+1),r&&t.dispatchEventWith(u.Event.ADDED,!0),s)for(var l=p.$EVENT_ADD_TO_STAGE_LIST;l.length;){var c=l.shift();c.$stage&&r&&c.dispatchEventWith(u.Event.ADDED_TO_STAGE)}return u.nativeRender||(t.$maskedObject&&t.$maskedObject.$updateRenderMode(),i.$cacheDirty)||(i.$cacheDirty=!0,(o=i.$parent)&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp()),(a=i.$maskedObject)&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())),this.$childAdded(t,e),t},p.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},p.prototype.getChildAt=function(t){return 0<=(t=0|+t)&&t<this.$children.length?this.$children[t]:null},p.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},p.prototype.getChildByName=function(t){for(var e,r=this.$children,i=r.length,n=0;n<i;n++)if((e=r[n]).name==t)return e;return null},p.prototype.removeChild=function(t){var e=this.$children.indexOf(t);return 0<=e?this.$doRemoveChild(e):null},p.prototype.removeChildAt=function(t){return 0<=(t=0|+t)&&t<this.$children.length?this.$doRemoveChild(t):null},p.prototype.$doRemoveChild=function(t,e){void 0===e&&(e=!0),t=0|+t;var r=this,i=this.$children,n=i[t];if(this.$childRemoved(n,t),e&&n.dispatchEventWith(u.Event.REMOVED,!0),this.$stage){n.$onRemoveFromStage();for(var o=p.$EVENT_REMOVE_FROM_STAGE_LIST;0<o.length;){var a=o.shift();e&&a.$hasAddToStage&&(a.$hasAddToStage=!1,a.dispatchEventWith(u.Event.REMOVED_FROM_STAGE)),a.$hasAddToStage=!1,a.$stage=null}}this.$displayList||this.$parentDisplayList,n.$setParent(null);var s,l,c=i.indexOf(n);return-1!=c&&i.splice(c,1),u.nativeRender?r.$nativeDisplayObject.removeChild(n.$nativeDisplayObject.id):(n.$maskedObject&&n.$maskedObject.$updateRenderMode(),r.$cacheDirty||(r.$cacheDirty=!0,(s=r.$parent)&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp()),(l=r.$maskedObject)&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp()))),n},p.prototype.setChildIndex=function(t,e){((e=0|+e)<0||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},p.prototype.doSetChildIndex=function(t,e){var r,i,n=this.$children.indexOf(t);n!=e&&(this.$childRemoved(t,n),this.$children.splice(n,1),this.$children.splice(e,0,t),this.$childAdded(t,e),u.nativeRender?(this.$nativeDisplayObject.removeChild(t.$nativeDisplayObject.id),this.$nativeDisplayObject.addChildAt(t.$nativeDisplayObject.id,e)):this.$cacheDirty||(this.$cacheDirty=!0,(r=this.$parent)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()),(i=this.$maskedObject)&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())))},p.prototype.swapChildrenAt=function(t,e){e=0|+e,0<=(t=0|+t)&&t<this.$children.length&&0<=e&&e<this.$children.length&&this.doSwapChildrenAt(t,e)},p.prototype.swapChildren=function(t,e){var r=this.$children.indexOf(t),i=this.$children.indexOf(e);-1==r||-1==i||this.doSwapChildrenAt(r,i)},p.prototype.doSwapChildrenAt=function(t,e){if(e<t){var r=e;e=t,t=r}else if(t==e)return;var i,n,o=this.$children,a=o[t],s=o[e];this.$childRemoved(a,t),this.$childRemoved(s,e),o[t]=s,o[e]=a,this.$childAdded(s,t),this.$childAdded(a,e),u.nativeRender?this.$nativeDisplayObject.swapChild(t,e):this.$cacheDirty||(this.$cacheDirty=!0,(i=this.$parent)&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp()),(n=this.$maskedObject)&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp()))},p.prototype.removeChildren=function(){for(var t=this.$children.length-1;0<=t;t--)this.$doRemoveChild(t)},p.prototype.$childAdded=function(t,e){},p.prototype.$childRemoved=function(t,e){},p.prototype.$onAddToStage=function(t,e){h.prototype.$onAddToStage.call(this,t,e);var r=this.$children.length;e++;for(var i=0;i<r;i++){var n=this.$children[i];n.$onAddToStage(t,e),n.$maskedObject&&n.$maskedObject.$updateRenderMode()}},p.prototype.$onRemoveFromStage=function(){h.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,e=t.length,r=0;r<e;r++)t[r].$onRemoveFromStage()},p.prototype.$measureChildBounds=function(t){var e=this.$children,r=e.length;if(0!=r){for(var i=0,n=0,o=0,a=0,s=!1,l=-1;l<r;l++){var c=void 0;(c=-1==l?t:(e[l].getBounds(u.$TempRectangle),e[l].$getMatrix().$transformBounds(u.$TempRectangle),u.$TempRectangle)).isEmpty()||(a=s?(i=Math.min(i,c.x),n=Math.max(n,c.x+c.width),o=Math.min(o,c.y),Math.max(a,c.y+c.height)):(s=!0,n=(i=c.x)+c.width,(o=c.y)+c.height))}t.setTo(i,o,n-i,a-o)}},Object.defineProperty(p.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),p.prototype.$getTouchChildren=function(){return this.$touchChildren},p.prototype.$setTouchChildren=function(t){return this.$touchChildren!=t&&(this.$touchChildren=t,!0)},p.prototype.$hitTest=function(t,e){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),i=r.a*t+r.c*e+r.tx,n=r.b*t+r.d*e+r.ty,o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(i,n))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null;for(var a=this.$children,s=!1,l=null,c=a.length-1;0<=c;c--){var u=a[c];if(!u.$maskedObject&&(l=u.$hitTest(t,e))){if(s=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:s?this:h.prototype.$hitTest.call(this,t,e)},p.prototype._sortChildrenFunc=function(t,e){return t.zIndex===e.zIndex?t.$lastSortedIndex-e.$lastSortedIndex:t.zIndex-e.zIndex},p.prototype.sortChildren=function(){h.prototype.sortChildren.call(this);for(var t=this.$sortDirty=!1,e=this.$children,r=null,i=0,n=e.length;i<n;++i)(r=e[i]).$lastSortedIndex=i,t||0===r.zIndex||(t=!0);t&&1<e.length&&e.sort(this._sortChildrenFunc)},p.$EVENT_ADD_TO_STAGE_LIST=[],p.$EVENT_REMOVE_FROM_STAGE_LIST=[],p);function p(){var t=h.call(this)||this;return t.$touchChildren=!0,t.$children=[],t}u.DisplayObjectContainer=t,__reflect(t.prototype,"egret.DisplayObjectContainer")}(egret=egret||{}),function(u){var r,t=(r=u.HashObject,__extends(e,r),e.prototype.getTexture=function(t){return this._textureMap[t]},e.prototype.createTexture=function(t,e,r,i,n,o,a,s,l){void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=o+i),void 0===l&&(l=a+n);var c=new u.Texture;return c.disposeBitmapData=!1,c.$bitmapData=this.$texture.$bitmapData,c.$initData(this._bitmapX+e,this._bitmapY+r,i,n,o,a,s,l,this.$texture.$sourceWidth,this.$texture.$sourceHeight),this._textureMap[t]=c},e.prototype.dispose=function(){this.$texture&&this.$texture.dispose()},e);function e(t){var e=r.call(this)||this;return e._bitmapX=0,e._bitmapY=0,e._textureMap=u.createMap(),e.$texture=t,e._bitmapX=t.$bitmapX-t.$offsetX,e._bitmapY=t.$bitmapY-t.$offsetY,e}u.SpriteSheet=t,__reflect(t.prototype,"egret.SpriteSheet")}(egret=egret||{}),function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret=egret||{}),function(a){(a.sys||(a.sys={})).tr=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=a.$locale_strings[a.$language][t];if(!i)return"{"+t+"}";for(var n=e.length,o=0;o<n;o++)i=i.replace("{"+o+"}",e[o]);return i}}(egret=egret||{}),function(c){var i,t=(i=c.DisplayObject,__extends(r,i),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(1)},r.prototype.$onAddToStage=function(t,e){i.prototype.$onAddToStage.call(this,t,e);var r=this.$texture;r&&r.$bitmapData&&c.BitmapData.$addDisplayObject(this,r.$bitmapData)},r.prototype.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this);var t=this.$texture;t&&c.BitmapData.$removeDisplayObject(this,t.$bitmapData)},Object.defineProperty(r.prototype,"texture",{get:function(){return this.$texture},set:function(t){this.$setTexture(t),t&&this.$renderNode&&(this.$renderNode.rotated=t.$rotated)},enumerable:!0,configurable:!0}),r.prototype.$setTexture=function(t){var e=this,r=e.$texture;if(t==r)return!1;if(!(e.$texture=t)){r&&c.BitmapData.$removeDisplayObject(e,r.$bitmapData),e.setImageData(null,0,0,0,0,0,0,0,0,0,0),e.$renderDirty=!0;var i=e.$parent;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp());var n=e.$maskedObject;return n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp()),c.nativeRender&&this.setBitmapDataToWasm(null),!0}if(e.$refreshImageData(),e.$stage){if(r&&r.$bitmapData){if(r.$bitmapData.hashCode==(t.$bitmapData?t.$bitmapData.hashCode:-1)){e.$renderDirty=!0;var o=e.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var a=e.$maskedObject;return a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp()),!0}c.BitmapData.$removeDisplayObject(e,r.$bitmapData)}c.BitmapData.$addDisplayObject(e,t.$bitmapData)}e.$renderDirty=!0;var s=e.$parent;s&&!s.$cacheDirty&&(s.$cacheDirty=!0,s.$cacheDirtyUp());var l=e.$maskedObject;return l&&!l.$cacheDirty&&(l.$cacheDirty=!0,l.$cacheDirtyUp()),!0},r.prototype.$setBitmapData=function(t){this.$setTexture(t)},r.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setTexture(t)},r.prototype.$refreshImageData=function(){var t=this.$texture;t?(c.nativeRender&&this.setBitmapDataToWasm(t),this.setImageData(t.$bitmapData,t.$bitmapX,t.$bitmapY,t.$bitmapWidth,t.$bitmapHeight,t.$offsetX,t.$offsetY,t.$getTextureWidth(),t.$getTextureHeight(),t.$sourceWidth,t.$sourceHeight)):c.nativeRender&&this.setBitmapDataToWasm(null)},r.prototype.setImageData=function(t,e,r,i,n,o,a,s,l,c,u){this.$bitmapData=t,this.$bitmapX=e,this.$bitmapY=r,this.$bitmapWidth=i,this.$bitmapHeight=n,this.$offsetX=o,this.$offsetY=a,this.$textureWidth=s,this.$textureHeight=l,this.$sourceWidth=c,this.$sourceHeight=u},Object.defineProperty(r.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$setScale9Grid(t)},enumerable:!0,configurable:!0}),r.prototype.$setScale9Grid=function(t){var e,r,i=this;i.$scale9Grid=t,i.$renderDirty=!0,c.nativeRender?t?i.$nativeDisplayObject.setScale9Grid(t.x,t.y,t.width,t.height):i.$nativeDisplayObject.setScale9Grid(0,0,-1,-1):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))},Object.defineProperty(r.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(t){this.$setFillMode(t)},enumerable:!0,configurable:!0}),r.prototype.$setFillMode=function(t){var e,r,i=this;return t!=i.$fillMode&&(i.$fillMode=t,c.nativeRender?i.$nativeDisplayObject.setBitmapFillMode(i.$fillMode):(i.$renderDirty=!0,(e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())),!0)},Object.defineProperty(r.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){var e,r;t==this.$smoothing||(this.$smoothing=t,this.$renderNode.smoothing=t,c.nativeRender)||((e=this.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=this.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))},enumerable:!0,configurable:!0}),r.prototype.$setWidth=function(t){var e,r,i=this;return!(t<0||t==i.$explicitBitmapWidth||(i.$explicitBitmapWidth=t,i.$renderDirty=!0,c.nativeRender?i.$nativeDisplayObject.setWidth(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())),0))},r.prototype.$setHeight=function(t){var e,r,i=this;return!(t<0||t==i.$explicitBitmapHeight||(i.$explicitBitmapHeight=t,i.$renderDirty=!0,c.nativeRender?i.$nativeDisplayObject.setHeight(t):((e=i.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=i.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())),0))},r.prototype.$getWidth=function(){return isNaN(this.$explicitBitmapWidth)?this.$getContentBounds().width:this.$explicitBitmapWidth},r.prototype.$getHeight=function(){return isNaN(this.$explicitBitmapHeight)?this.$getContentBounds().height:this.$explicitBitmapHeight},r.prototype.$measureContentBounds=function(t){var e,r;r=this.$bitmapData?(e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight):(e=isNaN(this.$explicitBitmapWidth)?0:this.$explicitBitmapWidth,isNaN(this.$explicitBitmapHeight)?0:this.$explicitBitmapHeight),t.setTo(0,0,e,r)},r.prototype.$updateRenderNode=function(){var t,e,r;this.$texture&&(t=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,e=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,(r=this.scale9Grid||this.$texture.scale9Grid)?(this.$renderNode instanceof c.sys.NormalBitmapNode&&(this.$renderNode=new c.sys.BitmapNode),c.sys.BitmapNode.$updateTextureDataWithScale9Grid(this.$renderNode,this.$bitmapData,r,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,t,e,this.$sourceWidth,this.$sourceHeight,this.$smoothing)):(this.fillMode==c.BitmapFillMode.REPEAT&&this.$renderNode instanceof c.sys.NormalBitmapNode&&(this.$renderNode=new c.sys.BitmapNode),c.sys.BitmapNode.$updateTextureData(this.$renderNode,this.$bitmapData,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX,this.$offsetY,this.$textureWidth,this.$textureHeight,t,e,this.$sourceWidth,this.$sourceHeight,this.$fillMode,this.$smoothing)))},Object.defineProperty(r.prototype,"pixelHitTest",{get:function(){return this._pixelHitTest},set:function(t){this._pixelHitTest=!!t},enumerable:!0,configurable:!0}),r.prototype.$hitTest=function(t,e){var r=i.prototype.$hitTest.call(this,t,e);return r&&this._pixelHitTest&&(this.hitTestPoint(t,e,!0)||(r=null)),r},r.defaultSmoothing=!0,r);function r(t){var e=i.call(this)||this;return e.$texture=null,e.$bitmapData=null,e.$bitmapX=0,e.$bitmapY=0,e.$bitmapWidth=0,e.$bitmapHeight=0,e.$offsetX=0,e.$offsetY=0,e.$textureWidth=0,e.$textureHeight=0,e.$sourceWidth=0,e.$sourceHeight=0,e.$smoothing=r.defaultSmoothing,e.$explicitBitmapWidth=NaN,e.$explicitBitmapHeight=NaN,e.$scale9Grid=null,e.$fillMode="scale",e._pixelHitTest=!1,e.$renderNode=new c.sys.NormalBitmapNode,e.$setTexture(t),t&&(e.$renderNode.rotated=t.$rotated),e}c.Bitmap=t,__reflect(t.prototype,"egret.Bitmap")}(egret=egret||{}),function(t){var e,r;function i(){this.type=0,this.drawData=[],this.renderCount=0}e=t.sys||(t.sys={}),i.prototype.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},i.prototype.$getRenderCount=function(){return this.renderCount},r=i,e.RenderNode=r,__reflect(r.prototype,"egret.sys.RenderNode")}(egret=egret||{}),function(t){var e,r;function i(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0,this.$lastX=0,this.$lastY=0}e=t.sys||(t.sys={}),i.prototype.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var r=this.dataPosition;this.$data[r++]=t,this.$data[r++]=e,this.dataPosition=r},i.prototype.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var r=this.dataPosition;this.$data[r++]=t,this.$data[r++]=e,this.dataPosition=r},i.prototype.curveTo=function(t,e,r,i){this.$commands[this.commandPosition++]=3;var n=this.dataPosition;this.$data[n++]=t,this.$data[n++]=e,this.$data[n++]=r,this.$data[n++]=i,this.dataPosition=n},i.prototype.cubicCurveTo=function(t,e,r,i,n,o){this.$commands[this.commandPosition++]=4;var a=this.dataPosition;this.$data[a++]=t,this.$data[a++]=e,this.$data[a++]=r,this.$data[a++]=i,this.$data[a++]=n,this.$data[a++]=o,this.dataPosition=a},i.prototype.drawRect=function(t,e,r,i){var n=t+r,o=e+i;this.moveTo(t,e),this.lineTo(n,e),this.lineTo(n,o),this.lineTo(t,o),this.lineTo(t,e)},i.prototype.drawRoundRect=function(t,e,r,i,n,o){var a,s,l,c,u,h,p,f,d=.5*n|0,g=o?.5*o|0:d;d&&g?((a=.5*r)<d&&(d=a),(s=.5*i)<g&&(g=s),a!==d||s!==g?(u=t+d,h=(l=t+r)-d,p=e+g,f=(c=e+i)-g,this.moveTo(l,f),this.curveTo(l,c,h,c),this.lineTo(u,c),this.curveTo(t,c,t,f),this.lineTo(t,p),this.curveTo(t,e,u,e),this.lineTo(h,e),this.curveTo(l,e,l,p),this.lineTo(l,f)):d===g?this.drawCircle(t+d,e+g,d):this.drawEllipse(t,e,2*d,2*g)):this.drawRect(t,e,r,i)},i.prototype.drawCircle=function(t,e,r){this.arcToBezier(t,e,r,r,0,2*Math.PI)},i.prototype.drawEllipse=function(t,e,r,i){var n=.5*r,o=.5*i;t+=n,e+=o,this.arcToBezier(t,e,n,o,0,2*Math.PI)},i.prototype.drawArc=function(t,e,r,i,n,o){o?i<=n&&(n-=2*Math.PI):n<=i&&(n+=2*Math.PI),this.arcToBezier(t,e,r,r,i,n,o)},i.prototype.arcToBezier=function(t,e,r,i,n,o,a){var s=.5*Math.PI,l=n,c=l;a?(c+=-s-l%s)<o&&(c=o):o<(c+=s-l%s)&&(c=o);var u=t+Math.cos(l)*r,h=e+Math.sin(l)*i;this.$lastX==u&&this.$lastY==h||this.moveTo(u,h);for(var p=Math.cos(l),f=Math.sin(l),d=0;d<4;d++){var g=c-l,m=4*Math.tan(g/4)/3,y=u-f*m*r,v=h+p*m*i,_=(u=t+(p=Math.cos(c))*r)+(f=Math.sin(c))*m*r,b=(h=e+f*i)-p*m*i;if(this.cubicCurveTo(y,v,_,b,u,h),c===o)break;l=c,a?(c=l-s)<o&&(c=o):o<(c=l+s)&&(c=o)}},r=i,e.Path2D=r,__reflect(r.prototype,"egret.sys.Path2D")}(egret=egret||{}),(egret=egret||{}).fontMapping={},(egret||(egret={})).createMap=function(){var t=Object.create(null);return t.__v8__=void 0,delete t.__v8__,t},function(t){var u,e=(u=t.Filter,__extends(r,u),Object.defineProperty(r.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16,this.$uniforms.color.x=this.$red/255,this.$uniforms.color.y=this.$green/255,this.$uniforms.color.z=this.$blue/255)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.$uniforms.alpha=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.$uniforms.blurX=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.$uniforms.blurY=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"strength",{get:function(){return this.$strength},set:function(t){this.$strength!=t&&(this.$strength=t,this.$uniforms.strength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this.$quality},set:function(t){this.$quality!=t&&(this.$quality=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"inner",{get:function(){return this.$inner},set:function(t){this.$inner!=t&&(this.$inner=t,this.$uniforms.inner=t?1:0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"knockout",{get:function(){return this.$knockout},set:function(t){this.$knockout!=t&&(this.$knockout=t,this.$uniforms.knockout=t?0:1)},enumerable:!0,configurable:!0}),r.prototype.$toJson=function(){return'{"color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+"}"},r.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY},r);function r(t,e,r,i,n,o,a,s){void 0===t&&(t=16711680),void 0===e&&(e=1),void 0===r&&(r=6),void 0===i&&(i=6),void 0===n&&(n=2),void 0===o&&(o=1),void 0===a&&(a=!1),void 0===s&&(s=!1);var l=u.call(this)||this,c=l;return c.type="glow",c.$color=t,c.$blue=255&t,c.$green=(65280&t)>>8,c.$red=t>>16,c.$alpha=e,c.$blurX=r,c.$blurY=i,c.$strength=n,c.$quality=o,c.$inner=a,c.$knockout=s,c.$uniforms.color={x:l.$red/255,y:l.$green/255,z:l.$blue/255,w:1},c.$uniforms.alpha=e,c.$uniforms.blurX=r,c.$uniforms.blurY=i,c.$uniforms.strength=n,c.$uniforms.inner=a?1:0,c.$uniforms.knockout=s?0:1,c.$uniforms.dist=0,c.$uniforms.angle=0,c.$uniforms.hideObject=0,c.onPropertyChange(),l}t.GlowFilter=e,__reflect(e.prototype,"egret.GlowFilter")}(egret=egret||{}),function(r){var e,t=(e=r.DisplayObjectContainer,__extends(i,e),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(13)},Object.defineProperty(i.prototype,"frameRate",{get:function(){return r.ticker.$frameRate},set:function(t){r.ticker.$setFrameRate(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),i.prototype.invalidate=function(){r.sys.$invalidateRenderFlag=!0},i.prototype.registerImplementation=function(t,e){r.registerImplementation(t,e)},i.prototype.getImplementation=function(t){return r.getImplementation(t)},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureScaleFactor",{get:function(){return r.$TextureScaleFactor},set:function(t){r.$TextureScaleFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i);function i(){var t=e.call(this)||this;return t.$stageWidth=0,t.$stageHeight=0,t.$scaleMode=r.StageScaleMode.SHOW_ALL,t.$orientation=r.OrientationMode.AUTO,t.$maxTouches=99,(t.$stage=t).$nestLevel=1,t}r.Stage=t,__reflect(t.prototype,"egret.Stage")}(egret=egret||{}),function(t){var e=(r.NORMAL="normal",r.ADD="add",r.ERASE="erase",r);function r(){}t.BlendMode=e,__reflect(e.prototype,"egret.BlendMode")}(egret=egret||{}),function(t){!function(t){for(var r=["normal","add","erase"],i={},e=r.length,n=0;n<e;n++){i[r[n]]=n}t.blendModeToNumber=function(t){var e=i[t];return void 0===e?0:e},t.numberToBlendMode=function(t){var e=r[t];return void 0===e?"normal":e}}(t.sys||(t.sys={}))}(egret=egret||{}),(egret=egret||{}).ChildrenSortMode={DEFAULT:"default",INCREASE_Y:"increaseY",DECREASE_Y:"decreaseY"},(egret=egret||{}).CapsStyle={NONE:"none",ROUND:"round",SQUARE:"square"},function(a){var t=(s.compileProgram=function(t,e,r){var i=s.compileFragmentShader(t,r),n=s.compileVertexShader(t,e),o=t.createProgram();return t.attachShader(o,n),t.attachShader(o,i),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||a.$warn(1020),o},s.compileFragmentShader=function(t,e){return s._compileShader(t,e,t.FRAGMENT_SHADER)},s.compileVertexShader=function(t,e){return s._compileShader(t,e,t.VERTEX_SHADER)},s._compileShader=function(t,e,r){var i=t.createShader(r);return t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:null},s.checkCanUseWebGL=function(){if(null==s.canUseWebGL)try{var t=document.createElement("canvas");s.canUseWebGL=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){s.canUseWebGL=!1}return s.canUseWebGL},s.deleteWebGLTexture=function(t){var e;!t||t[a.engine_default_empty_texture]||(e=t[a.glContext])&&e.deleteTexture(t)},s.premultiplyTint=function(t,e){return 1===e?(255*e<<24)+t:0===e?0:(255*e<<24)+(((t>>16&255)*e+.5|0)<<16)+(((t>>8&255)*e+.5|0)<<8)+((255&t)*e+.5|0)},s);function s(){}a.WebGLUtils=t,__reflect(t.prototype,"egret.WebGLUtils")}(egret=egret||{}),function(t){var i,e=(i=t.Event,__extends(r,i),r.FOCUS_IN="focusIn",r.FOCUS_OUT="focusOut",r);function r(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),i.call(this,t,e,r)||this}t.FocusEvent=e,__reflect(e.prototype,"egret.FocusEvent")}(egret=egret||{}),function(t){var e,r=(e=t.Event,__extends(i,e),i.PERMISSION_DENIED="permissionDenied",i.UNAVAILABLE="unavailable",i);function i(){return null!==e&&e.apply(this,arguments)||this}t.GeolocationEvent=r,__reflect(r.prototype,"egret.GeolocationEvent")}(egret=egret||{}),function(n){var o,t=(o=n.Event,__extends(a,o),Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),a.dispatchHTTPStatusEvent=function(t,e){var r=n.Event.create(a,a.HTTP_STATUS);r._status=e;var i=t.dispatchEvent(r);return n.Event.release(r),i},a.HTTP_STATUS="httpStatus",a);function a(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var i=o.call(this,t,e,r)||this;return i._status=0,i}n.HTTPStatusEvent=t,__reflect(t.prototype,"egret.HTTPStatusEvent")}(egret=egret||{}),function(i){var n,t=(n=i.Event,__extends(o,n),o.dispatchIOErrorEvent=function(t){var e=i.Event.create(o,o.IO_ERROR),r=t.dispatchEvent(e);return i.Event.release(e),r},o.IO_ERROR="ioError",o);function o(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),n.call(this,t,e,r)||this}i.IOErrorEvent=t,__reflect(t.prototype,"egret.IOErrorEvent")}(egret=egret||{}),function(t){var e,r=(e=t.Event,__extends(i,e),i);function i(){return null!==e&&e.apply(this,arguments)||this}t.MotionEvent=r,__reflect(r.prototype,"egret.MotionEvent")}(egret=egret||{}),function(t){var e,r=(e=t.Event,__extends(i,e),i);function i(){return null!==e&&e.apply(this,arguments)||this}t.OrientationEvent=r,__reflect(r.prototype,"egret.OrientationEvent")}(egret=egret||{}),function(a){var s,t=(s=a.Event,__extends(l,s),l.dispatchProgressEvent=function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=a.Event.create(l,e);n.bytesLoaded=r,n.bytesTotal=i;var o=t.dispatchEvent(n);return a.Event.release(n),o},l.PROGRESS="progress",l.SOCKET_DATA="socketData",l);function l(t,e,r,i,n){void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===i&&(i=0),void 0===n&&(n=0);var o=s.call(this,t,e,r)||this;return o.bytesLoaded=0,o.bytesTotal=0,o.bytesLoaded=i,o.bytesTotal=n,o}a.ProgressEvent=t,__reflect(t.prototype,"egret.ProgressEvent")}(egret=egret||{}),function(n){var i,t=(i=n.Event,__extends(o,i),o.dispatchStageOrientationEvent=function(t,e){var r=n.Event.create(o,e),i=t.dispatchEvent(r);return n.Event.release(r),i},o.ORIENTATION_CHANGE="orientationChange",o);function o(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),i.call(this,t,e,r)||this}n.StageOrientationEvent=t,__reflect(t.prototype,"egret.StageOrientationEvent")}(egret=egret||{}),function(o){var a,t=(a=o.Event,__extends(s,a),s.dispatchTextEvent=function(t,e,r){var i=o.Event.create(s,e);i.text=r;var n=t.dispatchEvent(i);return o.Event.release(i),n},s.LINK="link",s);function s(t,e,r,i){void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===i&&(i="");var n=a.call(this,t,e,r)||this;return n.text=i,n}o.TextEvent=t,__reflect(t.prototype,"egret.TextEvent")}(egret=egret||{}),function(a){var i,t=(i=a.Event,__extends(s,i),s.prototype.updateAfterEvent=function(){a.sys.$requestRenderingFlag=!0},s.dispatchTimerEvent=function(t,e,r,i){var n=a.Event.create(s,e,r,i),o=t.dispatchEvent(n);return a.Event.release(n),o},s.TIMER="timer",s.TIMER_COMPLETE="timerComplete",s);function s(t,e,r){return i.call(this,t,e,r)||this}a.TimerEvent=t,__reflect(t.prototype,"egret.TimerEvent")}(egret=egret||{}),function(s){function t(){}s.CompressedTextureData=t,__reflect(t.prototype,"egret.CompressedTextureData"),s.etc_alpha_mask="etc_alpha_mask",s.engine_default_empty_texture="engine_default_empty_texture",s.is_compressed_texture="is_compressed_texture",s.glContext="glContext",s.UNPACK_PREMULTIPLY_ALPHA_WEBGL="UNPACK_PREMULTIPLY_ALPHA_WEBGL";var i,e=(i=s.HashObject,__extends(l,i),Object.defineProperty(l.prototype,"source",{get:function(){return this.$source},set:function(t){this.$source=t,s.nativeRender&&egret_native.NativeDisplayObject.setSourceToNativeBitmapData(this.$nativeBitmapData,t)},enumerable:!0,configurable:!0}),l.create=function(t,e,r){var i="",n="image/png";"/"===(i="arraybuffer"===t?s.Base64Util.encode(e):e).charAt(0)?n="image/jpeg":"R"===i.charAt(0)?n="image/gif":"i"===i.charAt(0)&&(n="image/png");var o=new Image;o.src="data:"+n+";base64,"+i,o.crossOrigin="*";var a=new l(o);return o.onload=function(){o.onload=void 0,a.source=o,a.height=o.height,a.width=o.width,r&&r(a)},a},l.prototype.$dispose=function(){"webgl"==s.Capabilities.renderMode&&this.webGLTexture&&(s.WebGLUtils.deleteWebGLTexture(this.webGLTexture),this.webGLTexture=null),this.source&&this.source.dispose&&this.source.dispose(),this.source&&this.source.src&&(this.source.src=""),this.source=null,this.clearCompressedTextureData(),this.debugCompressedTextureURL="",this.etcAlphaMask=null,s.nativeRender&&egret_native.NativeDisplayObject.disposeNativeBitmapData(this.$nativeBitmapData),l.$dispose(this)},l.$addDisplayObject=function(t,e){if(e){var r=e.hashCode;if(r){if(!l._displayList[r])return void(l._displayList[r]=[t]);var i=l._displayList[r];i.indexOf(t)<0&&i.push(t)}}},l.$removeDisplayObject=function(t,e){var r,i,n;!e||(r=e.hashCode)&&l._displayList[r]&&0<=(n=(i=l._displayList[r]).indexOf(t))&&i.splice(n,1)},l.$invalidate=function(t){if(t){var e=t.hashCode;if(e&&l._displayList[e])for(var r=l._displayList[e],i=0;i<r.length;i++){r[i]instanceof s.Bitmap&&r[i].$refreshImageData();var n=r[i];n.$renderDirty=!0;var o=n.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var a=n.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}}},l.$dispose=function(t){if(t){var e=t.hashCode;if(e&&l._displayList[e]){for(var r=0,i=l._displayList[e];r<i.length;r++){var n=i[r];n instanceof s.Bitmap&&(n.$bitmapData=null),n.$renderDirty=!0;var o=n.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var a=n.$maskedObject;a&&!a.$cacheDirty&&(a.$cacheDirty=!0,a.$cacheDirtyUp())}delete l._displayList[e]}}},l.prototype._getCompressedTextureData=function(t,e){var r=this.compressedTextureData[t];return r?r[e]:null},l.prototype.getCompressed2dTextureData=function(){return this._getCompressedTextureData(0,0)},l.prototype.hasCompressed2d=function(){return!!this.getCompressed2dTextureData()},l.prototype.clearCompressedTextureData=function(){this.compressedTextureData.length=0},l._displayList=s.createMap(),l);function l(t){var e,r=i.call(this)||this;return r.format="image",r.$deleteSource=!0,r.compressedTextureData=[],r.debugCompressedTextureURL="",r.etcAlphaMask=null,s.nativeRender&&((e=new egret_native.NativeBitmapData).$init(),r.$nativeBitmapData=e),r.source=t,r.source=t,r.source&&(r.width=+t.width,r.height=+t.height),r}s.BitmapData=e,__reflect(e.prototype,"egret.BitmapData")}(egret=egret||{}),function(u){var s,t=new u.Point,e=(s=u.Event,__extends(h,s),h.prototype.$initTo=function(t,e,r){this.touchPointID=+r||0,this.$stageX=+t||0,this.$stageY=+e||0},Object.defineProperty(h.prototype,"stageX",{get:function(){return this.$stageX},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"stageY",{get:function(){return this.$stageY},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"localX",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localX},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"localY",{get:function(){return this.targetChanged&&this.getLocalXY(),this._localY},enumerable:!0,configurable:!0}),h.prototype.getLocalXY=function(){this.targetChanged=!1,this.$target.$getInvertedConcatenatedMatrix().transformPoint(this.$stageX,this.$stageY,t),this._localX=t.x,this._localY=t.y},h.prototype.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},h.prototype.updateAfterEvent=function(){u.sys.$requestRenderingFlag=!0},h.dispatchTouchEvent=function(t,e,r,i,n,o,a,s){if(void 0===s&&(s=!1),!r&&!t.hasEventListener(e))return!0;var l=u.Event.create(h,e,r,i);l.$initTo(n,o,a),l.touchDown=s;var c=t.dispatchEvent(l);return u.Event.release(l),c},h.TOUCH_MOVE="touchMove",h.TOUCH_BEGIN="touchBegin",h.TOUCH_END="touchEnd",h.TOUCH_CANCEL="touchCancel",h.TOUCH_TAP="touchTap",h.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",h);function h(t,e,r,i,n,o){var a=s.call(this,t,e,r)||this;return a.targetChanged=!0,a.touchDown=!1,a.$initTo(i,n,o),a}u.TouchEvent=e,__reflect(e.prototype,"egret.TouchEvent")}(egret=egret||{}),egret=egret||{},function(r){var o,t=(o=r.Filter,__extends(e,o),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.$blurX},set:function(t){this.$blurX!=t&&(this.$blurX=t,this.blurXFilter.blurX=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.$blurY},set:function(t){this.$blurY!=t&&(this.$blurY=t,this.blurYFilter.blurY=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"blurX": '+this.$blurX+', "blurY": '+this.$blurY+', "quality": 1}'},e.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY},e.prototype.onPropertyChange=function(){var t=this;t.updatePadding(),r.nativeRender&&(egret_native.NativeDisplayObject.setFilterPadding(t.blurXFilter.$id,0,0,t.paddingLeft,t.paddingRight),egret_native.NativeDisplayObject.setFilterPadding(t.blurYFilter.$id,t.paddingTop,t.paddingBottom,0,0),egret_native.NativeDisplayObject.setDataToFilter(t))},e);function e(t,e,r){void 0===t&&(t=4),void 0===e&&(e=4),void 0===r&&(r=1);var i=o.call(this)||this,n=i;return n.type="blur",n.$blurX=t,n.$blurY=e,n.$quality=r,n.blurXFilter=new a(t),n.blurYFilter=new l(e),n.onPropertyChange(),i}r.BlurFilter=t,__reflect(t.prototype,"egret.BlurFilter");var i,a=(i=r.Filter,__extends(n,i),Object.defineProperty(n.prototype,"blurX",{get:function(){return this.$uniforms.blur.x},set:function(t){this.$uniforms.blur.x=t},enumerable:!0,configurable:!0}),n);function n(t){void 0===t&&(t=4);var e=i.call(this)||this;return r.nativeRender?e.type="blur":e.type="blurX",e.$uniforms.blur={x:t,y:0},e.onPropertyChange(),e}__reflect(a.prototype,"BlurXFilter",["egret.IBlurXFilter"]);var s,l=(s=r.Filter,__extends(c,s),Object.defineProperty(c.prototype,"blurY",{get:function(){return this.$uniforms.blur.y},set:function(t){this.$uniforms.blur.y=t},enumerable:!0,configurable:!0}),c);function c(t){void 0===t&&(t=4);var e=s.call(this)||this;return r.nativeRender?e.type="blur":e.type="blurY",e.$uniforms.blur={x:0,y:t},e.onPropertyChange(),e}__reflect(l.prototype,"BlurYFilter",["egret.IBlurYFilter"])}(egret=egret||{}),function(t){var r,e=(r=t.Filter,__extends(i,r),Object.defineProperty(i.prototype,"matrix",{get:function(){for(var t=0;t<20;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},set:function(t){this.setMatrix(t)},enumerable:!0,configurable:!0}),i.prototype.setMatrix=function(t){if(t)for(var e=0;e<20;e++)this.$matrix[e]=t[e];else for(e=0;e<20;e++)this.$matrix[e]=0==e||6==e||12==e||18==e?1:0;for(var r=this.$matrix,i=this.$uniforms.matrix,n=this.$uniforms.colorAdd,e=0,o=0;e<r.length;e++)4===e?n.x=r[e]/255:9===e?n.y=r[e]/255:14===e?n.z=r[e]/255:19===e?n.w=r[e]/255:(i[o]=r[e],o++);this.onPropertyChange()},i.prototype.$toJson=function(){return'{"matrix": ['+this.$matrix.toString()+"]}"},i);function i(t){void 0===t&&(t=null);var e=r.call(this)||this;return e.$matrix=[],e.matrix2=[],e.type="colorTransform",e.$uniforms.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.$uniforms.colorAdd={x:0,y:0,z:0,w:0},e.setMatrix(t),e.onPropertyChange(),e}t.ColorMatrixFilter=e,__reflect(e.prototype,"egret.ColorMatrixFilter")}(egret=egret||{}),function(e){var o,a,s={},l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=new Array(36),u=0,t=(a=e.Filter,__extends(r,a),Object.defineProperty(r.prototype,"padding",{get:function(){return this.$padding},set:function(t){this.$padding!=t&&(this.$padding=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.$uniforms},enumerable:!0,configurable:!0}),r.prototype.onPropertyChange=function(){var t;e.nativeRender&&(t=this,egret_native.NativeDisplayObject.setFilterPadding(t.$id,t.$padding,t.$padding,t.$padding,t.$padding),egret_native.NativeDisplayObject.setDataToFilter(t))},r);function r(t,e,r){void 0===r&&(r={});var i=a.call(this)||this;i.$padding=0;var n=(i.$vertexSrc=t)+(i.$fragmentSrc=e);return s[n]||(s[n]=function(){for(var t=0;t<36;t++)8===t||13===t||18===t||23===t?c[t]="-":14===t?c[t]="4":(u<=2&&(u=33554432+16777216*Math.random()|0),o=15&u,u>>=4,c[t]=l[19===t?3&o|8:o]);return c.join("")}()),i.$shaderKey=s[n],i.$uniforms=r,i.type="custom",i}e.CustomFilter=t,__reflect(t.prototype,"egret.CustomFilter")}(egret=egret||{}),function(o){var f,t=(f=o.GlowFilter,__extends(e,f),Object.defineProperty(e.prototype,"distance",{get:function(){return this.$distance},set:function(t){this.$distance!=t&&(this.$distance=t,this.$uniforms.dist=t,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.$angle},set:function(t){this.$angle!=t&&(this.$angle=t,this.$uniforms.angle=t/180*Math.PI,this.onPropertyChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideObject",{get:function(){return this.$hideObject},set:function(t){this.$hideObject!=t&&(this.$hideObject=t,this.$uniforms.hideObject=t?1:0)},enumerable:!0,configurable:!0}),e.prototype.$toJson=function(){return'{"distance": '+this.$distance+', "angle": '+this.$angle+', "color": '+this.$color+', "red": '+this.$red+', "green": '+this.$green+', "blue": '+this.$blue+', "alpha": '+this.$alpha+', "blurX": '+this.$blurX+', "blurY": '+this.blurY+', "strength": '+this.$strength+', "quality": '+this.$quality+', "inner": '+this.$inner+', "knockout": '+this.$knockout+', "hideObject": '+this.$hideObject+"}"},e.prototype.updatePadding=function(){var t=this;t.paddingLeft=t.blurX,t.paddingRight=t.blurX,t.paddingTop=t.blurY,t.paddingBottom=t.blurY;var e=t.distance||0,r=t.angle||0,i=0,n=0;0!=e&&(i=0<(i=e*o.NumberUtils.cos(r))?Math.ceil(i):Math.floor(i),n=0<(n=e*o.NumberUtils.sin(r))?Math.ceil(n):Math.floor(n),t.paddingLeft+=i,t.paddingRight+=i,t.paddingTop+=n,t.paddingBottom+=n)},e);function e(t,e,r,i,n,o,a,s,l,c,u){void 0===t&&(t=4),void 0===e&&(e=45),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=4),void 0===o&&(o=4),void 0===a&&(a=1),void 0===s&&(s=1),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===u&&(u=!1);var h=f.call(this,r,i,n,o,a,s,l,c)||this,p=h;return p.$distance=t,p.$angle=e,p.$hideObject=u,p.$uniforms.dist=t,p.$uniforms.angle=e/180*Math.PI,p.$uniforms.hideObject=u?1:0,p.onPropertyChange(),h}o.DropShadowFilter=t,__reflect(t.prototype,"egret.DropShadowFilter")}(egret=egret||{}),function(t){var e=(r.LINEAR="linear",r.RADIAL="radial",r);function r(){}t.GradientType=e,__reflect(e.prototype,"egret.GradientType")}(egret=egret||{}),function(d){function u(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),t}function h(t,e){for(var r=[],i=0;i<e;i++){var n=function(t,e){var r=0,i=0,n=0,o=t.length;{var a,s,l,c,u,h,p,f;o/2==3?(a=t[r++],s=t[r++],l=t[r++],c=t[r++],u=t[r++],h=t[r++],i=g(a,l,u,e),n=g(s,c,h,e)):o/2==4&&(a=t[r++],s=t[r++],l=t[r++],c=t[r++],u=t[r++],h=t[r++],p=t[r++],f=t[r++],i=m(a,l,u,p,e),n=m(s,c,h,f,e))}return d.Point.create(i,n)}(t,i/e);n&&r.push(n)}return r}function g(t,e,r,i){return Math.pow(1-i,2)*t+2*i*(1-i)*e+Math.pow(i,2)*r}function m(t,e,r,i,n){return Math.pow(1-n,3)*t+3*n*Math.pow(1-n,2)*e+3*(1-n)*Math.pow(n,2)*r+Math.pow(n,3)*i}var e,t=(e=d.HashObject,__extends(r,e),r.prototype.$setTarget=function(t){this.$targetDisplay&&(this.$targetDisplay.$renderNode=null),t.$renderNode=this.$renderNode,this.$targetDisplay=t,this.$targetIsSprite=t instanceof d.Sprite},r.prototype.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},r.prototype.beginFill=function(t,e){void 0===e&&(e=1),t=+t||0,e=+e||0,d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginFill(t,e),this.fillPath=this.$renderNode.beginFill(t,e,this.strokePath),1<this.$renderNode.drawData.length&&this.fillPath.moveTo(this.lastX,this.lastY)},r.prototype.beginGradientFill=function(t,e,r,i,n){void 0===n&&(n=null),d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setBeginGradientFill(t,e,r,i,n),this.fillPath=this.$renderNode.beginGradientFill(t,e,r,i,n,this.strokePath),1<this.$renderNode.drawData.length&&this.fillPath.moveTo(this.lastX,this.lastY)},r.prototype.endFill=function(){d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setEndFill(),this.fillPath=null},r.prototype.lineStyle=function(t,e,r,i,n,o,a,s,l){void 0===t&&(t=NaN),void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=!1),void 0===n&&(n="normal"),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=3),t=+t||0,e=+e||0,r=+r||0,s=+s||0,d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineStyle(t,e,r,i,n,o,a,s),t<=0?(this.strokePath=null,this.setStrokeWidth(0)):(this.setStrokeWidth(t),this.strokePath=this.$renderNode.lineStyle(t,e,r,o,a,s,l),1<this.$renderNode.drawData.length&&this.strokePath.moveTo(this.lastX,this.lastY))},r.prototype.drawRect=function(t,e,r,i){t=+t||0,e=+e||0,r=+r||0,i=+i||0,d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRect(t,e,r,i);var n=this.fillPath,o=this.strokePath;n&&n.drawRect(t,e,r,i),o&&o.drawRect(t,e,r,i),this.extendBoundsByPoint(t+r,e+i),this.updatePosition(t,e),this.dirty()},r.prototype.drawRoundRect=function(t,e,r,i,n,o){t=+t||0,e=+e||0,r=+r||0,i=+i||0,n=+n||0,o=+o||0,d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawRoundRect(t,e,r,i,n,o);var a=this.fillPath,s=this.strokePath;a&&a.drawRoundRect(t,e,r,i,n,o),s&&s.drawRoundRect(t,e,r,i,n,o);var l=t+r,c=e+i,u=c-(o?.5*o|0:.5*n|0);this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(l,c),this.updatePosition(l,u),this.dirty()},r.prototype.drawCircle=function(t,e,r){t=+t||0,e=+e||0,r=+r||0,d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawCircle(t,e,r);var i=this.fillPath,n=this.strokePath;i&&i.drawCircle(t,e,r),n&&n.drawCircle(t,e,r),this.extendBoundsByPoint(t-r-1,e-r-1),this.extendBoundsByPoint(t+r+2,e+r+2),this.updatePosition(t+r,e),this.dirty()},r.prototype.drawEllipse=function(t,e,r,i){t=+t||0,e=+e||0,r=+r||0,i=+i||0,d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawEllipse(t,e,r,i);var n=this.fillPath,o=this.strokePath;n&&n.drawEllipse(t,e,r,i),o&&o.drawEllipse(t,e,r,i),this.extendBoundsByPoint(t-1,e-1),this.extendBoundsByPoint(t+r+2,e+i+2),this.updatePosition(t+r,e+.5*i),this.dirty()},r.prototype.moveTo=function(t,e){t=+t||0,e=+e||0,d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setMoveTo(t,e);var r=this.fillPath,i=this.strokePath;r&&r.moveTo(t,e),i&&i.moveTo(t,e),this.includeLastPosition=!1,this.lastX=t,this.lastY=e,this.dirty()},r.prototype.lineTo=function(t,e){t=+t||0,e=+e||0,d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setLineTo(t,e);var r=this.fillPath,i=this.strokePath;r&&r.lineTo(t,e),i&&i.lineTo(t,e),this.updatePosition(t,e),this.dirty()},r.prototype.curveTo=function(t,e,r,i){t=+t||0,e=+e||0,r=+r||0,i=+i||0,d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCurveTo(t,e,r,i);var n=this.fillPath,o=this.strokePath;n&&n.curveTo(t,e,r,i),o&&o.curveTo(t,e,r,i);for(var a=h([this.lastX||0,this.lastY||0,t,e,r,i],50),s=0;s<a.length;s++){var l=a[s];this.extendBoundsByPoint(l.x,l.y),d.Point.release(l)}this.extendBoundsByPoint(r,i),this.updatePosition(r,i),this.dirty()},r.prototype.cubicCurveTo=function(t,e,r,i,n,o){t=+t||0,e=+e||0,r=+r||0,i=+i||0,n=+n||0,o=+o||0,d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setCubicCurveTo(t,e,r,i,n,o);var a=this.fillPath,s=this.strokePath;a&&a.cubicCurveTo(t,e,r,i,n,o),s&&s.cubicCurveTo(t,e,r,i,n,o);for(var l=h([this.lastX||0,this.lastY||0,t,e,r,i,n,o],50),c=0;c<l.length;c++){var u=l[c];this.extendBoundsByPoint(u.x,u.y),d.Point.release(u)}this.extendBoundsByPoint(n,o),this.updatePosition(n,o),this.dirty()},r.prototype.drawArc=function(t,e,r,i,n,o){var a,s,l,c;r<0||i===n||(t=+t||0,e=+e||0,r=+r||0,n=+n||0,o=!!o,i=u(i=+i||0),n=u(n),d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setDrawArc(t,e,r,i,n,o),a=this.fillPath,s=this.strokePath,a&&(a.$lastX=this.lastX,a.$lastY=this.lastY,a.drawArc(t,e,r,i,n,o)),s&&(s.$lastX=this.lastX,s.$lastY=this.lastY,s.drawArc(t,e,r,i,n,o)),o?this.arcBounds(t,e,r,n,i):this.arcBounds(t,e,r,i,n),l=t+Math.cos(n)*r,c=e+Math.sin(n)*r,this.updatePosition(l,c),this.dirty())},r.prototype.dirty=function(){var t,e,r;this.$renderNode.dirtyRender=!0,d.nativeRender||((t=this.$targetDisplay).$cacheDirty=!0,(e=t.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=t.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))},r.prototype.arcBounds=function(t,e,r,i,n){var o=Math.PI;if(Math.abs(i-n)<.01)return this.extendBoundsByPoint(t-r,e-r),void this.extendBoundsByPoint(t+r,e+r);n<i&&(n+=2*o);for(var a=Math.cos(i)*r,s=Math.cos(n)*r,l=Math.min(a,s),c=Math.max(a,s),u=Math.sin(i)*r,h=Math.sin(n)*r,p=Math.min(u,h),f=Math.max(u,h),d=i/(.5*o),g=n/(.5*o),m=Math.ceil(d);m<=g;m++)switch(m%4){case 0:c=r;break;case 1:f=r;break;case 2:l=-r;break;case 3:p=-r}l=Math.floor(l),p=Math.floor(p),c=Math.ceil(c),f=Math.ceil(f),this.extendBoundsByPoint(l+t,p+e),this.extendBoundsByPoint(c+t,f+e)},r.prototype.clear=function(){d.nativeRender&&this.$targetDisplay.$nativeDisplayObject.setGraphicsClear(),this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.dirty()},r.prototype.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},r.prototype.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},r.prototype.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},r.prototype.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},r.prototype.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e)},r.prototype.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},r.prototype.$hitTest=function(t,e){var r=this.$targetDisplay,i=r.$getInvertedConcatenatedMatrix(),n=i.a*t+i.c*e+i.tx,o=i.b*t+i.d*e+i.ty,a=d.sys.canvasHitTestBuffer;a.resize(3,3);var s=this.$renderNode,l=d.Matrix.create();l.identity(),l.translate(1-n,1-o),d.sys.canvasRenderer.drawNodeToBuffer(s,a,l,!0),d.Matrix.release(l);try{if(0===a.getPixels(1,1)[3])return null}catch(t){throw new Error(d.sys.tr(1039))}return r},r.prototype.$onRemoveFromStage=function(){this.$renderNode&&this.$renderNode.clean(),d.nativeRender&&egret_native.NativeDisplayObject.disposeGraphicData(this)},r);function r(){var t=e.call(this)||this;return t.lastX=0,t.lastY=0,t.fillPath=null,t.strokePath=null,t.topLeftStrokeWidth=0,t.bottomRightStrokeWidth=0,t.minX=1/0,t.minY=1/0,t.maxX=-1/0,t.maxY=-1/0,t.includeLastPosition=!0,t.$renderNode=new d.sys.GraphicsNode,t}d.Graphics=t,__reflect(t.prototype,"egret.Graphics")}(egret=egret||{}),function(c){var s,t=Math.PI,a=2*t,u=t/180,e=[],r=(s=c.HashObject,__extends(i,s),i.release=function(t){t&&e.push(t)},i.create=function(){return e.pop()||new i},i.prototype.clone=function(){return new i(this.a,this.b,this.c,this.d,this.tx,this.ty)},i.prototype.concat=function(t){var e=this.a*t.a,r=0,i=0,n=this.d*t.d,o=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;0===this.b&&0===this.c&&0===t.b&&0===t.c||(e+=this.b*t.c,n+=this.c*t.b,r+=this.a*t.b+this.b*t.d,i+=this.c*t.a+this.d*t.c,o+=this.ty*t.c,a+=this.tx*t.b),this.a=e,this.b=r,this.c=i,this.d=n,this.tx=o,this.ty=a},i.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},i.prototype.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},i.prototype.invert=function(){this.$invertInto(this)},i.prototype.$invertInto=function(t){var e,r,i=this.a,n=this.b,o=this.c,a=this.d,s=this.tx,l=this.ty;0!=n||0!=o?0!=(e=i*a-n*o)?(e=1/e,r=t.a=a*e,n=t.b=-n*e,o=t.c=-o*e,a=t.d=i*e,t.tx=-(r*s+o*l),t.ty=-(n*s+a*l)):t.identity():(t.b=t.c=0)==i||0==a?t.a=t.d=t.tx=t.ty=0:(i=t.a=1/i,a=t.d=1/a,t.tx=-i*s,t.ty=-a*l)},i.prototype.rotate=function(t){var e,r,i,n,o,a,s,l;0!=(t=+t)&&(t/=u,e=c.NumberUtils.cos(t),r=c.NumberUtils.sin(t),i=this.a,n=this.b,o=this.c,a=this.d,s=this.tx,l=this.ty,this.a=i*e-n*r,this.b=i*r+n*e,this.c=o*e-a*r,this.d=o*r+a*e,this.tx=s*e-l*r,this.ty=s*r+l*e)},i.prototype.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},i.prototype.setTo=function(t,e,r,i,n,o){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o,this},i.prototype.transformPoint=function(t,e,r){var i=this.a*t+this.c*e+this.tx,n=this.b*t+this.d*e+this.ty;return r?(r.setTo(i,n),r):new c.Point(i,n)},i.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},i.prototype.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},i.prototype.prepend=function(t,e,r,i,n,o){var a,s,l=this.tx;return 1==t&&0==e&&0==r&&1==i||(a=this.a,s=this.c,this.a=a*t+this.b*r,this.b=a*e+this.b*i,this.c=s*t+this.d*r,this.d=s*e+this.d*i),this.tx=l*t+this.ty*r+n,this.ty=l*e+this.ty*i+o,this},i.prototype.append=function(t,e,r,i,n,o){var a=this.a,s=this.b,l=this.c,c=this.d;return 1==t&&0==e&&0==r&&1==i||(this.a=t*a+e*l,this.b=t*s+e*c,this.c=r*a+i*l,this.d=r*s+i*c),this.tx=n*a+o*l+this.tx,this.ty=n*s+o*c+this.ty,this},i.prototype.deltaTransformPoint=function(t){var e=this.a*t.x+this.c*t.y,r=this.b*t.x+this.d*t.y;return new c.Point(e,r)},i.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},i.prototype.createBox=function(t,e,r,i,n){void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0);var o,a,s=this;0!==r?(r/=u,o=c.NumberUtils.cos(r),a=c.NumberUtils.sin(r),s.a=o*t,s.b=a*e,s.c=-a*t,s.d=o*e):(s.a=t,s.b=0,s.c=0,s.d=e),s.tx=i,s.ty=n},i.prototype.createGradientBox=function(t,e,r,i,n){void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0),this.createBox(t/1638.4,e/1638.4,r,i+t/2,n+e/2)},i.prototype.$transformBounds=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,o=this.tx,a=this.ty,s=t.x,l=t.y,c=s+t.width,u=l+t.height,h=e*s+i*l+o,p=r*s+n*l+a,f=e*c+i*l+o,d=r*c+n*l+a,g=e*c+i*u+o,m=r*c+n*u+a,y=e*s+i*u+o,v=r*s+n*u+a,_=0;f<h&&(_=h,h=f,f=_),y<g&&(_=g,g=y,y=_),t.x=Math.floor(h<g?h:g),t.width=Math.ceil((y<f?f:y)-t.x),d<p&&(_=p,p=d,d=_),v<m&&(_=m,m=v,v=_),t.y=Math.floor(p<m?p:m),t.height=Math.ceil((v<d?d:v)-t.y)},i.prototype.getDeterminant=function(){return this.a*this.d-this.b*this.c},i.prototype.$getScaleX=function(){var t=this;if(0==t.b)return t.a;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},i.prototype.$getScaleY=function(){var t=this;if(0==t.c)return t.d;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},i.prototype.$getSkewX=function(){return this.d<0?Math.atan2(this.d,this.c)+t/2:Math.atan2(this.d,this.c)-t/2},i.prototype.$getSkewY=function(){return this.a<0?Math.atan2(this.b,this.a)-t:Math.atan2(this.b,this.a)},i.prototype.$updateScaleAndRotation=function(t,e,r,i){if(!(0!=r&&r!=a||0!=i&&i!=a))return this.a=t,this.b=this.c=0,void(this.d=e);r/=u,i/=u;var n=c.NumberUtils.cos(r),o=c.NumberUtils.sin(r);r==i?(this.a=n*t,this.b=o*t):(this.a=c.NumberUtils.cos(i)*t,this.b=c.NumberUtils.sin(i)*t),this.c=-o*e,this.d=n*e},i.prototype.$preMultiplyInto=function(t,e){var r=t.a*this.a,i=0,n=0,o=t.d*this.d,a=t.tx*this.a+this.tx,s=t.ty*this.d+this.ty;0===t.b&&0===t.c&&0===this.b&&0===this.c||(r+=t.b*this.c,o+=t.c*this.b,i+=t.a*this.b+t.b*this.d,n+=t.c*this.a+t.d*this.c,a+=t.ty*this.c,s+=t.tx*this.b),e.a=r,e.b=i,e.c=n,e.d=o,e.tx=a,e.ty=s},i);function i(t,e,r,i,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0);var a=s.call(this)||this;return a.a=t,a.b=e,a.c=r,a.d=i,a.tx=n,a.ty=o,a}c.Matrix=r,__reflect(r.prototype,"egret.Matrix"),c.$TempMatrix=new r}(egret=egret||{}),function(t){var o,e=[],r=(o=t.HashObject,__extends(i,o),i.release=function(t){t&&e.push(t)},i.create=function(){return e.pop()||new i},Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topLeft",{get:function(){return new t.Point(this.left,this.top)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!0,configurable:!0}),i.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i.prototype.setTo=function(t,e,r,i){return this.x=t,this.y=e,this.width=r,this.height=i,this},i.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},i.prototype.intersection=function(t){return this.clone().$intersectInPlace(t)},i.prototype.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},i.prototype.$intersectInPlace=function(t){var e=this.x,r=this.y,i=t.x,n=t.y,o=Math.max(e,i),a=Math.min(e+this.width,i+t.width);if(o<=a){var s=Math.max(r,n),l=Math.min(r+this.height,n+t.height);if(s<=l)return this.setTo(o,s,a-o,l-s),this}return this.setEmpty(),this},i.prototype.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},i.prototype.isEmpty=function(){return this.width<=0||this.height<=0},i.prototype.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.containsPoint=function(t){return this.x<=t.x&&this.x+this.width>t.x&&this.y<=t.y&&this.y+this.height>t.y},i.prototype.containsRect=function(t){var e=t.x+t.width,r=t.y+t.height,i=this.x+this.width,n=this.y+this.height;return t.x>=this.x&&t.x<i&&t.y>=this.y&&t.y<n&&e>this.x&&e<=i&&r>this.y&&r<=n},i.prototype.equals=function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},i.prototype.inflatePoint=function(t){this.inflate(t.x,t.y)},i.prototype.offset=function(t,e){this.x+=t,this.y+=e},i.prototype.offsetPoint=function(t){this.offset(t.x,t.y)},i.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},i.prototype.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var r=Math.min(e.x,t.x),i=Math.min(e.y,t.y);return e.setTo(r,i,Math.max(e.right,t.right)-r,Math.max(e.bottom,t.bottom)-i),e},i.prototype.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t));return e*this.width+r*this.height},i.prototype.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t));return Math.abs(Math.sin(t))*this.width+e*this.height},i);function i(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0);var n=o.call(this)||this;return n.x=t,n.y=e,n.width=r,n.height=i,n}t.Rectangle=r,__reflect(r.prototype,"egret.Rectangle"),t.$TempRectangle=new r}(egret=egret||{}),function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}。",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton error，singleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="Cross domains pictures can not get pixel information!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="{0} is deprecated, please use {1} replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[1043]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",e[1044]="The current version of the Runtime does not support video playback, please use the latest version",e[1045]="The resource url is not found",e[1046]="BitmapText no corresponding characters: {0}, please check the configuration file",e[1047]="egret.localStorage.setItem save failed,key={0}&value={1}",e[1048]="Video loading failed",e[1049]="In the absence of sound is not allowed to play after loading",e[1050]="ExternalInterface calls the method without js registration: {0}",e[1051]="runtime only support webgl render mode",e[1052]="network request timeout{0}",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list！",e[3014]="set fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[3200]="getResByUrl must be called after loadConfig",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!",e[4500]="The platform does not support {0} adapter mode and has been automatically replaced with {1} mode, please modify your code adapter logic"}(egret=egret||{}),(egret=egret||{}).JointStyle={BEVEL:"bevel",MITER:"miter",ROUND:"round"},function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="找不到Egret入口类: {0}。",e[1002]="Egret入口类 {0} 必须继承自egret.DisplayObject。",e[1003]="参数 {0} 不能为 null。",e[1004]="无法将对象添加为它的一个子对象（或子对象的子对象等）的子对象。",e[1005]="不能将对象添加为其自身的子对象。",e[1006]="提供的 DisplayObject 必须是调用者的子级。",e[1007]="为参数指定的索引不在范围内。",e[1008]="实例化单例出错，不允许实例化多个 {0} 对象。",e[1009]="类 {0} 不可以使用属性 {1}",e[1010]="类 {0} 属性 {1} 是只读的",e[1011]="流错误。URL: {0}",e[1012]="参数 {0} 的类型必须为 Class。",e[1013]="变量赋值为NaN，请查看代码！",e[1014]="类 {0} 常量 {1} 是只读的",e[1015]="xml not found!",e[1016]="{0}已经废弃",e[1017]="JSON文件格式不正确: {0}\ndata: {1}",e[1018]="9宫格设置错误",e[1019]="网络异常:{0}",e[1020]="无法初始化着色器",e[1021]="当前浏览器不支持webgl",e[1022]="{0} ArgumentError",e[1023]="此方法在ScrollView内不可用!",e[1025]="遇到文件尾",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]="调用了未配置的注入规则:{0}。 请先在项目初始化里配置指定的注入规则，再调用对应单例。",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="跨域图片不可以使用toDataURL来转换成base64",e[1034]='音乐文件解码失败："{0}"，请使用标准的转换工具重新转换下mp3。',e[1035]="Native 下暂未实现此功能！",e[1036]="声音已停止，请重新调用 Sound.play() 来播放声音！",e[1037]="非正确的blob加载！",e[1038]="XML 格式错误!",e[1039]="跨域图片不能获取像素信息!",e[1040]="hitTestPoint 不能对跨域图片进行检测! 请检查该显示对象内是否含有跨域元素",e[1041]="{0} 已废弃,请使用 {1} 代替",e[1042]="drawToTexture方法传入的区域各个参数需要为整数,否则某些浏览器绘制会出现异常",e[1043]="{0} 中存在编译错误，属性名 : {1}，属性值 : {2}",e[1044]="当前的 runtime 版本不支持视频播放,请使用最新的版本",e[1045]="没有设置要加载的资源地址",e[1046]="BitmapText 找不到对应字符:{0}，请检查配置文件",e[1047]="egret.localStorage.setItem保存失败,key={0}&value={1}",e[1048]="视频加载失败",e[1049]="声音在没有加载完之前不允许播放",e[1050]="ExternalInterface调用了js没有注册的方法: {0}",e[1051]="runtime 只支持 webgl 渲染模式",e[1052]="网络请求超时:{0}",e[3e3]="主题配置文件加载失败: {0}",e[3001]="找不到主题中所配置的皮肤类名: {0}",e[3002]='索引:"{0}"超出集合元素索引范围',e[3003]="在此组件中不可用，若此组件为容器类，请使用",e[3004]="addChild(){0}addElement()代替",e[3005]="addChildAt(){0}addElementAt()代替",e[3006]="removeChild(){0}removeElement()代替",e[3007]="removeChildAt(){0}removeElementAt()代替",e[3008]="setChildIndex(){0}setElementIndex()代替",e[3009]="swapChildren(){0}swapElements()代替",e[3010]="swapChildrenAt(){0}swapElementsAt()代替",e[3011]='索引:"{0}"超出可视元素索引范围',e[3012]="此方法在Scroller组件内不可用!",e[3013]="UIStage是GUI根容器，只能有一个此实例在显示列表中！",e[3014]="设置全屏模式失败",e[3100]="当前浏览器不支持WebSocket",e[3101]="请先连接WebSocket",e[3102]="请先设置type为二进制类型",e[3200]="getResByUrl 必须在 loadConfig 之后调用",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!",e[4500]="该平台不支持 {0} 适配模式，已经自动替换为 {1} 模式，请修改您的代码适配逻辑"}(egret=egret||{}),function(t){t.localStorage||(t.localStorage={})}(egret=egret||{}),function(t){var e,r;e=t.sys||(t.sys={}),r=[],e.$pushSoundChannel=function(t){r.indexOf(t)<0&&r.push(t)},e.$popSoundChannel=function(t){var e=r.indexOf(t);return 0<=e&&(r.splice(e,1),!0)}}(egret=egret||{}),egret=egret||{},egret=egret||{},function(t){var e;(e=t.HttpMethod||(t.HttpMethod={})).GET="GET",e.POST="POST"}(egret=egret||{}),egret=egret||{},function(t){var e=(r.TEXT="text",r.ARRAY_BUFFER="arraybuffer",r);function r(){}t.HttpResponseType=e,__reflect(e.prototype,"egret.HttpResponseType")}(egret=egret||{}),egret=egret||{},function(a){var s,r,t;function l(t){var e=r.call(this)||this;return e.isStage=!1,e.$renderNode=new s.BitmapNode,e.renderBuffer=null,e.offsetX=0,e.offsetY=0,e.offsetMatrix=new a.Matrix,e.$canvasScaleX=1,e.$canvasScaleY=1,e.root=t,e.isStage=t instanceof a.Stage,e}s=a.sys||(a.sys={}),r=a.HashObject,__extends(l,r),l.create=function(t){var e=new a.sys.DisplayList(t);try{var r=new s.RenderBuffer;e.renderBuffer=r}catch(t){return null}return e.root=t,e},l.prototype.$getRenderNode=function(){return this.$renderNode},l.prototype.setClipRect=function(t,e){t*=l.$canvasScaleX,e*=l.$canvasScaleY,this.renderBuffer.resize(t,e)},l.prototype.drawToSurface=function(){var t;this.$canvasScaleX=this.offsetMatrix.a=l.$canvasScaleX,this.$canvasScaleY=this.offsetMatrix.d=l.$canvasScaleY,this.isStage||this.changeSurfaceSize();var e,r,i,n,o=this.renderBuffer;return o.clear(),t=s.systemRenderer.render(this.root,o,this.offsetMatrix),this.isStage||(e=o.surface,(r=this.$renderNode).drawData.length=0,i=e.width,n=e.height,this.bitmapData?(this.bitmapData.source=e,this.bitmapData.width=i,this.bitmapData.height=n):this.bitmapData=new a.BitmapData(e),r.image=this.bitmapData,r.imageWidth=i,r.imageHeight=n,r.drawImage(0,0,i,n,-this.offsetX,-this.offsetY,i/this.$canvasScaleX,n/this.$canvasScaleY)),t},l.prototype.changeSurfaceSize=function(){var t=(this.root,this.offsetX),e=this.offsetY,r=this.root.$getOriginalBounds(),i=this.$canvasScaleX,n=this.$canvasScaleY;this.offsetX=-r.x,this.offsetY=-r.y,this.offsetMatrix.setTo(this.offsetMatrix.a,0,0,this.offsetMatrix.d,this.offsetX,this.offsetY);var o=this.renderBuffer,a=Math.max(257,r.width*i),s=Math.max(257,r.height*n);this.offsetX==t&&this.offsetY==e&&o.surface.width==a&&o.surface.height==s||o.resize(a,s)},l.$setCanvasScale=function(t,e){l.$canvasScaleX=t,l.$canvasScaleY=e,a.nativeRender&&egret_native.nrSetCanvasScaleFactor(l.$canvasScaleFactor,t,e)},l.$canvasScaleFactor=1,l.$canvasScaleX=1,l.$canvasScaleY=1,t=l,s.DisplayList=t,__reflect(t.prototype,"egret.sys.DisplayList")}(egret=egret||{}),egret=egret||{},egret=egret||{},function(d){!function(l){function c(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r]);return e}var n,t=(n=d.HashObject,__extends(e,n),e.prototype.createDisplayList=function(t,e){var r=new l.DisplayList(t);return r.renderBuffer=e,t.$displayList=r},e.prototype.start=function(){!this.isPlaying&&this.stage&&(l.$TempStage=l.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),d.ticker.$addPlayer(this))},e.prototype.initialize=function(){var t,e;this.entryClassName&&(t=d.getDefinitionByName(this.entryClassName)),t&&(e=new t,(this.root=e)instanceof d.DisplayObject&&this.stage.addChild(e))},e.prototype.stop=function(){this.pause(),this.stage=null},e.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,d.ticker.$removePlayer(this))},e.prototype.$render=function(t,e){if(d.nativeRender)return egret_native.updateNativeRender(),void egret_native.nrRender();var r=this.stage,i=d.getTimer(),n=r.$displayList.drawToSurface(),o=d.getTimer();t&&this.showFPS&&u.update(n,o-i,e)},e.prototype.updateStageSize=function(t,e){var r=this.stage;r.$stageWidth=t,r.$stageHeight=e,d.nativeRender?egret_native.nrResize(t,e):(this.screenDisplayList.setClipRect(t,e),this.stageDisplayList&&this.stageDisplayList.setClipRect(t,e)),r.dispatchEventWith(d.Event.RESIZE)},e.prototype.displayFPS=function(t,e,r,i){if((e=!!e)&&(d.log=function(){for(var t=arguments.length,e="",r=0;r<t;r++)e+=arguments[r]+" ";l.$logToFPS(e),console.log.apply(console,c(arguments))},d.warn=function(){for(var t=arguments.length,e="",r=0;r<t;r++)e+=arguments[r]+" ";l.$warnToFPS(e),console.warn.apply(console,c(arguments))},d.error=function(){for(var t=arguments.length,e="",r=0;r<t;r++)e+=arguments[r]+" ";l.$errorToFPS(e),console.error.apply(console,c(arguments))}),this.showFPS=!!t,this.showLog=e,!u){u=new FPS(this.stage,t,e,r,i);for(var n=h.length,o=0;o<n;o++)u.updateInfo(h[o]);h=null;for(var a=p.length,o=0;o<a;o++)u.updateWarn(p[o]);p=null;for(var s=f.length,o=0;o<s;o++)u.updateError(f[o]);f=null}},e);function e(t,e,r){var i=n.call(this)||this;return i.isPlaying=!1,i.entryClassName=r,i.stage=e,i.screenDisplayList=i.createDisplayList(e,t),i.showFPS=!1,i.showLog=!1,i.stageDisplayList=null,d.nativeRender&&(egret_native.rootWebGLBuffer=t),i}l.Player=t,__reflect(t.prototype,"egret.sys.Player");var u,h=[],p=[],f=[];l.$logToFPS=function(t){return u?void u.updateInfo(t):void h.push(t)},l.$warnToFPS=function(t){return u?void u.updateWarn(t):void p.push(t)},l.$errorToFPS=function(t){return u?void u.updateError(t):void f.push(t)};var r=(i.prototype.update=function(t,e,r){var i,n,o,a,s=d.getTimer();this.totalTime+=s-this.lastTime,this.lastTime=s,this.totalTick++,this.drawCalls+=t,this.costRender+=e,this.costTicker+=r,1e3<=this.totalTime&&(i=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),d.ticker.$frameRate),n=Math.round(this.drawCalls/this.totalTick),o=Math.round(this.costRender/this.totalTick),a=Math.round(this.costTicker/this.totalTick),this.fpsDisplay.update({fps:i,draw:n,costTicker:a,costRender:o}),this.totalTick=0,this.totalTime=this.totalTime%1e3,this.drawCalls=0,this.costRender=0,this.costTicker=0)},i.prototype.updateInfo=function(t){t&&this.showLog&&this.filter(t)&&this.fpsDisplay.updateInfo(t)},i.prototype.updateWarn=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateWarn?this.fpsDisplay.updateWarn(t):this.fpsDisplay.updateInfo("[Warning]"+t))},i.prototype.updateError=function(t){t&&this.showLog&&this.filter(t)&&(this.fpsDisplay.updateError?this.fpsDisplay.updateError(t):this.fpsDisplay.updateInfo("[Error]"+t))},i);function i(t,e,r,i,n){var o;this.showFPS=e,this.showLog=r,this.logFilter=i,this.styles=n,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.costRender=0,this.costTicker=0,this._stage=t,this.showFPS=e,this.showLog=r,this.logFilter=i,this.styles=n,this.fpsDisplay=new d.FPSDisplay(t,e,r,i,n);try{o=i?new RegExp(i):null}catch(t){d.log(t)}this.filter=function(t){return o?o.test(t):!i||0==t.indexOf(i)}}__reflect(r.prototype,"FPSImpl"),__global.FPS=r,d.warn=function(){console.warn.apply(console,c(arguments))},d.error=function(){console.error.apply(console,c(arguments))},d.assert=function(){console.assert.apply(console,c(arguments))},d.log=function(){console.log.apply(console,c(arguments))}}(d.sys||(d.sys={}))}(egret=egret||{}),function(t){var e,r,i;t.nativeRender=__global.nativeRender,t.nativeRender&&(e=egret_native.nrABIVersion,r=egret_native.nrMinEgretVersion,e<5?(t.nativeRender=!1,i="需要升级微端版本到 0.1.14 才可以开启原生渲染加速",t.sys.$warnToFPS(i),t.warn(i)):5<e&&(t.nativeRender=!1,i="需要升级引擎版本到 "+r+" 才可以开启原生渲染加速",t.sys.$warnToFPS(i),t.warn(i)))}(egret=egret||{}),function(d){var t=(g.prototype.uploadLevels=function(t,e){this.loadType===g.COMPRESSED_2D&&this._upload2DCompressedLevels(t,e)},g.prototype._upload2DCompressedLevels=function(t,e){t.clearCompressedTextureData();for(var r=t.compressedTextureData,i=g.HEADER_LEN+this.bytesOfKeyValueData,n=this.pixelWidth,o=this.pixelHeight,a=e?this.numberOfMipmapLevels:1,s=0;s<a;s++){var l=new Int32Array(this.arrayBuffer,i,1)[0];i+=4;for(var c=[],u=0;u<this.numberOfFaces;u++){var h=new Uint8Array(this.arrayBuffer,i,l),p=new d.CompressedTextureData;p.glInternalFormat=this.glInternalFormat,p.width=n,p.height=o,p.byteArray=h,p.face=u,p.level=s,c.push(p),i+=l,i+=3-(l+3)%4}r.push(c),n=Math.max(1,.5*n),o=Math.max(1,.5*o)}var f=t.getCompressed2dTextureData();f&&(t.width=f.width,t.height=f.height)},g.HEADER_LEN=64,g.COMPRESSED_2D=0,g.COMPRESSED_3D=1,g.TEX_2D=2,g.TEX_3D=3,g);function g(t,e,r,i){this.arrayBuffer=t,this.isInvalid=!1;var n=new Uint8Array(this.arrayBuffer,0,12);if(171!==n[0]||75!==n[1]||84!==n[2]||88!==n[3]||32!==n[4]||49!==n[5]||49!==n[6]||187!==n[7]||13!==n[8]||10!==n[9]||26!==n[10]||10!==n[11])return this.isInvalid=!0,void console.error("texture missing KTX identifier");var o=Uint32Array.BYTES_PER_ELEMENT,a=new DataView(this.arrayBuffer,12,13*o),s=67305985===a.getUint32(0,!0);return this.glType=a.getUint32(+o,s),this.glTypeSize=a.getUint32(2*o,s),this.glFormat=a.getUint32(3*o,s),this.glInternalFormat=a.getUint32(4*o,s),this.glBaseInternalFormat=a.getUint32(5*o,s),this.pixelWidth=a.getUint32(6*o,s),this.pixelHeight=a.getUint32(7*o,s),this.pixelDepth=a.getUint32(8*o,s),this.numberOfArrayElements=a.getUint32(9*o,s),this.numberOfFaces=a.getUint32(10*o,s),this.numberOfMipmapLevels=a.getUint32(11*o,s),this.bytesOfKeyValueData=a.getUint32(12*o,s),0!==this.glType?void console.error("only compressed formats currently supported"):(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0===this.pixelHeight||0!==this.pixelDepth?void console.error("only 2D textures currently supported"):0!==this.numberOfArrayElements?void console.error("texture arrays not currently supported"):this.numberOfFaces!==e?void console.error("number of faces expected"+e+", but found "+this.numberOfFaces):void(this.loadType=g.COMPRESSED_2D))}d.KTXContainer=t,__reflect(t.prototype,"egret.KTXContainer")}(egret=egret||{}),function(t){t.sys||(t.sys={})}(egret=egret||{}),function(h){var t,e,r;function i(){return e.call(this)||this}t=h.sys||(h.sys={}),e=h.HashObject,__extends(i,e),i.prototype.calculateStageSize=function(t,e,r,i,n){var o=e,a=r,s=i,l=n,c=e/s||0,u=r/l||0;switch(t){case h.StageScaleMode.EXACT_FIT:break;case h.StageScaleMode.FIXED_HEIGHT:s=Math.round(e/u);break;case h.StageScaleMode.FIXED_WIDTH:l=Math.round(r/c);break;case h.StageScaleMode.NO_BORDER:u<c?a=Math.round(l*c):o=Math.round(s*u);break;case h.StageScaleMode.SHOW_ALL:u<c?o=Math.round(s*u):a=Math.round(l*c);break;case h.StageScaleMode.FIXED_NARROW:u<c?s=Math.round(e/u):l=Math.round(r/c);break;case h.StageScaleMode.FIXED_WIDE:u<c?l=Math.round(r/c):s=Math.round(e/u);break;default:s=e,l=r}return h.Capabilities.runtimeType!=h.RuntimeType.WXGAME&&(s%2!=0&&(s+=1),l%2!=0&&(l+=1),o%2!=0&&(o+=1),a%2!=0&&(a+=1)),{stageWidth:s,stageHeight:l,displayWidth:o,displayHeight:a}},r=i,t.DefaultScreenAdapter=r,__reflect(r.prototype,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(egret=egret||{}),function(t){var e=(r.NO_SCALE="noScale",r.SHOW_ALL="showAll",r.NO_BORDER="noBorder",r.EXACT_FIT="exactFit",r.FIXED_WIDTH="fixedWidth",r.FIXED_HEIGHT="fixedHeight",r.FIXED_NARROW="fixedNarrow",r.FIXED_WIDE="fixedWide",r);function r(){}t.StageScaleMode=e,__reflect(e.prototype,"egret.StageScaleMode")}(egret=egret||{}),function(t){var e;(e=t.sys||(t.sys={})).mainCanvas=function(t,e){return console.error("empty sys.mainCanvas = "+t+", "+e),null},e.createCanvas=function(t,e){return console.error("empty sys.createCanvas = "+t+", "+e),null},e.resizeContext=function(t,e,r,i){console.error("empty sys.resizeContext = "+t+", "+e+", "+r+", "+i)},e.getContextWebGL=function(t){return console.error("empty sys.getContextWebGL = "+t),null},e.getContext2d=function(t){return console.error("empty sys.getContext2d = "+t),null},e.createTexture=function(t,e){return console.error("empty sys.createTexture = "+e),null},e._createTexture=function(t,e,r,i){return console.error("empty sys._createTexture = "+e+", "+r+", "+i),null},e.drawTextureElements=function(t,e,r){return console.error("empty sys.drawTextureElements = "+t+", "+e+", "+r),0},e.measureTextWith=function(t,e){return console.error("empty sys.measureTextWith = "+t+", "+e),0},e.createCanvasRenderBufferSurface=function(t,e,r,i){return console.error("empty sys.createCanvasRenderBufferSurface = "+e+", "+r),null},e.resizeCanvasRenderBuffer=function(t,e,r,i){console.error("empty sys.resizeContext = "+t+", "+e+", "+r+", "+i)}}(egret=egret||{}),function(m){!function(g){g.$START_TIME=0,g.$invalidateRenderFlag=!1,g.$requestRenderingFlag=!1;var t=(e.prototype.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(this.playerList=this.playerList.concat(),this.playerList.push(t))},e.prototype.$removePlayer=function(t){var e=this.playerList.indexOf(t);-1!==e&&(this.playerList=this.playerList.concat(),this.playerList.splice(e,1))},e.prototype.$startTick=function(t,e){-1==this.getTickIndex(t,e)&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},e.prototype.$stopTick=function(t,e){var r=this.getTickIndex(t,e);-1!=r&&(this.concatTick(),this.callBackList.splice(r,1),this.thisObjectList.splice(r,1))},e.prototype.getTickIndex=function(t,e){for(var r=this.callBackList,i=this.thisObjectList,n=r.length-1;0<=n;n--)if(r[n]==t&&i[n]==e)return n;return-1},e.prototype.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},e.prototype.$setFrameRate=function(t){return!(t<=0||this.$frameRate==t||(60<(this.$frameRate=t)&&(t=60),this.frameDeltaTime=1e3/t,this.lastCount=this.frameInterval=Math.round(6e4/t),0))},e.prototype.pause=function(){this.isPaused=!0},e.prototype.resume=function(){this.isPaused=!1},e.prototype.update=function(t){for(var e=m.getTimer(),r=this.callBackList,i=this.thisObjectList,n=r.length,o=g.$requestRenderingFlag,a=m.getTimer(),s=0,l=m.lifecycle.contexts;s<l.length;s++){var c=l[s];c.onUpdate&&c.onUpdate()}if(this.isPaused)this.lastTimeStamp=a;else{this.callLaterAsyncs();for(var u=0;u<n;u++)r[u].call(i[u],a)&&(o=!0);var h=m.getTimer(),p=a-this.lastTimeStamp;if(this.lastTimeStamp=a,p>=this.frameDeltaTime||t)this.lastCount=this.frameInterval;else{if(this.lastCount-=1e3,0<this.lastCount)return void(o&&this.render(!1,this.costEnterFrame+h-e));this.lastCount+=this.frameInterval}this.render(!0,this.costEnterFrame+h-e);var f=m.getTimer();this.broadcastEnterFrame();var d=m.getTimer();this.costEnterFrame=d-f}},e.prototype.render=function(t,e){var r=this.playerList,i=r.length;if(0!=i){this.callLaters(),g.$invalidateRenderFlag&&(this.broadcastRender(),g.$invalidateRenderFlag=!1);for(var n=0;n<i;n++)r[n].$render(t,e);g.$requestRenderingFlag=!1}},e.prototype.broadcastEnterFrame=function(){var t=m.DisplayObject.$enterFrameCallBackList,e=t.length;if(0!=e){t=t.concat();for(var r=0;r<e;r++)t[r].dispatchEventWith(m.Event.ENTER_FRAME)}},e.prototype.broadcastRender=function(){var t=m.DisplayObject.$renderCallBackList,e=t.length;if(0!=e){t=t.concat();for(var r=0;r<e;r++)t[r].dispatchEventWith(m.Event.RENDER)}},e.prototype.callLaters=function(){var t,e,r;if(0<m.$callLaterFunctionList.length&&(t=m.$callLaterFunctionList,m.$callLaterFunctionList=[],e=m.$callLaterThisList,m.$callLaterThisList=[],r=m.$callLaterArgsList,m.$callLaterArgsList=[]),t)for(var i=t.length,n=0;n<i;n++){var o=t[n];null!=o&&o.apply(e[n],r[n])}},e.prototype.callLaterAsyncs=function(){if(0<m.$callAsyncFunctionList.length){var t=m.$callAsyncFunctionList,e=m.$callAsyncThisList,r=m.$callAsyncArgsList;m.$callAsyncFunctionList=[],m.$callAsyncThisList=[],m.$callAsyncArgsList=[];for(var i=0;i<t.length;i++){var n=t[i];null!=n&&n.apply(e[i],r[i])}}},e);function e(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.lastTimeStamp=0,this.costEnterFrame=0,this.isPaused=!1,g.$START_TIME=Date.now(),this.frameDeltaTime=1e3/this.$frameRate,this.lastCount=this.frameInterval=Math.round(6e4/this.$frameRate)}g.SystemTicker=t,__reflect(t.prototype,"egret.sys.SystemTicker")}(m.sys||(m.sys={}))}(egret=egret||{}),function(n){!function(r){r.contexts=[];var t=!0,i=(e.prototype.pause=function(){t&&(t=!1,r.stage.dispatchEvent(new n.Event(n.Event.DEACTIVATE)),r.onPause&&r.onPause())},e.prototype.resume=function(){t||(t=!0,r.stage.dispatchEvent(new n.Event(n.Event.ACTIVATE)),r.onResume&&r.onResume())},e);function e(){}r.LifecycleContext=i,__reflect(i.prototype,"egret.lifecycle.LifecycleContext"),r.addLifecycleListener=function(t){var e=new i;r.contexts.push(e),t(e)}}(n.lifecycle||(n.lifecycle={})),n.ticker=new n.sys.SystemTicker}(egret=egret||{}),function(o){var t,r,e;function i(t){var e=r.call(this)||this;return e.maxTouches=0,e.useTouchesCount=0,e.touchDownTarget={},e.lastTouchX=-1,e.lastTouchY=-1,e.stage=t,e}t=o.sys||(o.sys={}),r=o.HashObject,__extends(i,r),i.prototype.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},i.prototype.onTouchBegin=function(t,e,r){var i;this.useTouchesCount>=this.maxTouches||(this.lastTouchX=t,this.lastTouchY=e,i=this.findTarget(t,e),null==this.touchDownTarget[r]&&(this.touchDownTarget[r]=i,this.useTouchesCount++),o.TouchEvent.dispatchTouchEvent(i,o.TouchEvent.TOUCH_BEGIN,!0,!0,t,e,r,!0))},i.prototype.onTouchMove=function(t,e,r){var i;null==this.touchDownTarget[r]||this.lastTouchX==t&&this.lastTouchY==e||(this.lastTouchX=t,this.lastTouchY=e,i=this.findTarget(t,e),o.TouchEvent.dispatchTouchEvent(i,o.TouchEvent.TOUCH_MOVE,!0,!0,t,e,r,!0))},i.prototype.onTouchEnd=function(t,e,r){var i,n;null!=this.touchDownTarget[r]&&(i=this.findTarget(t,e),n=this.touchDownTarget[r],delete this.touchDownTarget[r],this.useTouchesCount--,o.TouchEvent.dispatchTouchEvent(i,o.TouchEvent.TOUCH_END,!0,!0,t,e,r,!1),n==i?o.TouchEvent.dispatchTouchEvent(i,o.TouchEvent.TOUCH_TAP,!0,!0,t,e,r,!1):o.TouchEvent.dispatchTouchEvent(n,o.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,t,e,r,!1))},i.prototype.findTarget=function(t,e){return this.stage.$hitTest(t,e)||this.stage},e=i,t.TouchHandler=e,__reflect(e.prototype,"egret.sys.TouchHandler")}(egret=egret||{}),function(G){var t,e,r;function E(){var t=e.call(this)||this;return t.image=null,t.smoothing=!0,t.blendMode=null,t.alpha=NaN,t.filter=null,t.rotated=!1,t.type=1,t}t=G.sys||(G.sys={}),e=t.RenderNode,__extends(E,e),E.prototype.drawImage=function(t,e,r,i,n,o,a,s){this.drawData.push(t,e,r,i,n,o,a,s),this.renderCount++},E.prototype.cleanBeforeRender=function(){e.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null,this.blendMode=null,this.alpha=NaN,this.filter=null},E.$updateTextureData=function(t,e,r,i,n,o,a,s,l,c,u,h,p,f,d,g){if(e){var m=G.$TextureScaleFactor;if(t.smoothing=g,t.image=e,t.imageWidth=p,t.imageHeight=f,d==G.BitmapFillMode.SCALE){var y=u/l*m,v=h/c*m;t.drawImage(r,i,n,o,y*a,v*s,y*n,v*o)}else if(d==G.BitmapFillMode.CLIP){var _=Math.min(l,u),b=Math.min(c,h);E.drawClipImage(t,m,r,i,T=n*m,S=o*m,a,s,_,b)}else for(var T=n*m,S=o*m,C=0;C<u;C+=l)for(var $=0;$<h;$+=c)_=Math.min(u-C,l),b=Math.min(h-$,c),E.drawClipImage(t,m,r,i,T,S,a,s,_,b,C,$)}},E.$updateTextureDataWithScale9Grid=function(t,e,r,i,n,o,a,s,l,c,u,h,p,f,d,g){t.smoothing=g,t.image=e,t.imageWidth=f,t.imageHeight=d,h-=c-o*G.$TextureScaleFactor,p-=u-a*G.$TextureScaleFactor;var m=r.x-s,y=r.y-l,v=m/G.$TextureScaleFactor,_=y/G.$TextureScaleFactor,b=r.width/G.$TextureScaleFactor,T=r.height/G.$TextureScaleFactor;0==T&&(T=1,a<=_&&_--),0==b&&(b=1,o<=v&&v--);var S,C,$,E,O,P,L,I,w=i,D=w+v,R=D+b,x=o-v-b,A=n,M=A+_,N=M+T,k=a-_-T,U=x*G.$TextureScaleFactor,B=k*G.$TextureScaleFactor;(v+x)*G.$TextureScaleFactor>h||(_+k)*G.$TextureScaleFactor>p?t.drawImage(i,n,o,a,s,l,h,p):(C=(S=s)+m,$=S+(h-U),E=h-m-U,P=(O=l)+y,L=O+p-B,I=p-y-B,0<_&&(0<v&&t.drawImage(w,A,v,_,S,O,m,y),0<b&&t.drawImage(D,A,b,_,C,O,E,y),0<x&&t.drawImage(R,A,x,_,$,O,U,y)),0<T&&(0<v&&t.drawImage(w,M,v,T,S,P,m,I),0<b&&t.drawImage(D,M,b,T,C,P,E,I),0<x&&t.drawImage(R,M,x,T,$,P,U,I)),0<k&&(0<v&&t.drawImage(w,N,v,k,S,L,m,B),0<b&&t.drawImage(D,N,b,k,C,L,E,B),0<x&&t.drawImage(R,N,x,k,$,L,U,B)))},E.drawClipImage=function(t,e,r,i,n,o,a,s,l,c,u,h){void 0===u&&(u=0),void 0===h&&(h=0);var p=a+n-l;0<p&&(n-=p),0<(p=s+o-c)&&(o-=p),t.drawImage(r,i,n/e,o/e,u+a,h+s,n,o)},r=E,t.BitmapNode=r,__reflect(r.prototype,"egret.sys.BitmapNode")}(egret=egret||{}),function(c){var u,e,l,h,t;function r(){var t=e.call(this)||this;return t.dirtyRender=!0,t.type=3,t}u=c.sys||(c.sys={}),l=["none","round","square"],h=["bevel","miter","round"],e=u.RenderNode,__extends(r,e),r.prototype.beginFill=function(t,e,r){void 0===e&&(e=1);var i,n=new u.FillPath;return n.fillColor=t,n.fillAlpha=e,r?(i=this.drawData.lastIndexOf(r),this.drawData.splice(i,0,n)):this.drawData.push(n),this.renderCount++,n},r.prototype.beginGradientFill=function(t,e,r,i,n,o){var a=new c.Matrix;n?(a.a=819.2*n.a,a.b=819.2*n.b,a.c=819.2*n.c,a.d=819.2*n.d,a.tx=n.tx,a.ty=n.ty):(a.a=100,a.d=100);var s,l=new u.GradientFillPath;return l.gradientType=t,l.colors=e,l.alphas=r,l.ratios=i,l.matrix=a,o?(s=this.drawData.lastIndexOf(o),this.drawData.splice(s,0,l)):this.drawData.push(l),this.renderCount++,l},r.prototype.lineStyle=function(t,e,r,i,n,o,a){void 0===r&&(r=1),void 0===o&&(o=3),void 0===a&&(a=[]),-1==l.indexOf(i)&&(i="round"),-1==h.indexOf(n)&&(n="round");var s=new u.StrokePath;return s.lineWidth=t,s.lineColor=e,s.lineAlpha=r,s.caps=i||c.CapsStyle.ROUND,s.joints=n,s.miterLimit=o,s.lineDash=a,this.drawData.push(s),this.renderCount++,s},r.prototype.clear=function(){this.drawData.length=0,this.dirtyRender=!0,this.renderCount=0},r.prototype.cleanBeforeRender=function(){},r.prototype.clean=function(){this.$texture&&(c.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},t=r,u.GraphicsNode=t,__reflect(t.prototype,"egret.sys.GraphicsNode")}(egret=egret||{}),function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.type=4,t}e=t.sys||(t.sys={}),r=e.RenderNode,__extends(n,r),n.prototype.addNode=function(t){this.drawData.push(t)},n.prototype.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;0<=e;e--)t[e].cleanBeforeRender()},n.prototype.$getRenderCount=function(){for(var t=0,e=this.drawData,r=e.length-1;0<=r;r--)t+=e[r].$getRenderCount();return t},i=n,e.GroupNode=i,__reflect(i.prototype,"egret.sys.GroupNode")}(egret=egret||{}),function(e){var t,r,i;function n(){var t=r.call(this)||this;return t.image=null,t.smoothing=!0,t.bounds=new e.Rectangle,t.blendMode=null,t.alpha=NaN,t.filter=null,t.rotated=!1,t.type=5,t.vertices=[],t.uvs=[],t.indices=[],t}t=e.sys||(e.sys={}),r=t.RenderNode,__extends(n,r),n.prototype.drawMesh=function(t,e,r,i,n,o,a,s){this.drawData.push(t,e,r,i,n,o,a,s),this.renderCount++},n.prototype.cleanBeforeRender=function(){r.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},i=n,t.MeshNode=i,__reflect(i.prototype,"egret.sys.MeshNode")}(egret=egret||{}),function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.image=null,t.smoothing=!0,t.rotated=!1,t.type=6,t}e=t.sys||(t.sys={}),r=e.RenderNode,__extends(n,r),n.prototype.drawImage=function(t,e,r,i,n,o,a,s){var l=this;l.sourceX=t,l.sourceY=e,l.sourceW=r,l.sourceH=i,l.drawX=n,l.drawY=o,l.drawW=a,l.drawH=s,l.renderCount=1},n.prototype.cleanBeforeRender=function(){r.prototype.cleanBeforeRender.call(this),this.image=null},i=n,e.NormalBitmapNode=i,__reflect(i.prototype,"egret.sys.NormalBitmapNode")}(egret=egret||{}),function(l){var r,t=(r=l.Bitmap,__extends(e,r),e.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(12)},e.prototype.setBitmapDataToWasm=function(t){this.$nativeDisplayObject.setBitmapDataToMesh(t)},e.prototype.$updateRenderNode=function(){var t,e,r,i,n,o,a,s=this.$bitmapData;s&&(l.$TextureScaleFactor,(t=this.$renderNode).smoothing=this.$smoothing,t.image=s,t.imageWidth=this.$sourceWidth,t.imageHeight=this.$sourceHeight,e=isNaN(this.$explicitBitmapWidth)?this.$textureWidth:this.$explicitBitmapWidth,r=isNaN(this.$explicitBitmapHeight)?this.$textureHeight:this.$explicitBitmapHeight,i=e/this.$textureWidth,n=r/this.$textureHeight,o=this.$bitmapWidth,a=this.$bitmapHeight,t.drawMesh(this.$bitmapX,this.$bitmapY,o,a,this.$offsetX*i,this.$offsetY*n,i*o,n*a))},e.prototype.$updateVertices=function(){var t,e,r;this._verticesDirty=!0,this.$renderDirty=!0,l.nativeRender?(t=this.$renderNode,this.$nativeDisplayObject.setDataToMesh(t.vertices,t.indices,t.uvs)):((e=this.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=this.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))},e.prototype.$measureContentBounds=function(t){if(this._verticesDirty){this._verticesDirty=!1;var e=this.$renderNode,r=e.vertices;if(r.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0,n=r.length;i<n;i+=2){var o=r[i],a=r[i+1];this._bounds.x>o&&(this._bounds.x=o),this._bounds.width<o&&(this._bounds.width=o),this._bounds.y>a&&(this._bounds.y=a),this._bounds.height<a&&(this._bounds.height=a)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},e);function e(t){var e=r.call(this,t)||this;return e._verticesDirty=!0,e._bounds=new l.Rectangle,e.$renderNode=new l.sys.MeshNode,e}l.Mesh=t,__reflect(t.prototype,"egret.Mesh")}(egret=egret||{}),function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.textColor=16777215,t.strokeColor=0,t.size=30,t.stroke=0,t.bold=!1,t.italic=!1,t.fontFamily="Arial",t.dirtyRender=!0,t.type=2,t}e=t.sys||(t.sys={}),r=e.RenderNode,__extends(n,r),n.prototype.drawText=function(t,e,r,i){this.drawData.push(t,e,r,i),this.renderCount++,this.dirtyRender=!0},n.prototype.clean=function(){this.$texture&&(t.WebGLUtils.deleteWebGLTexture(this.$texture),this.$texture=null,this.dirtyRender=!0)},n.prototype.cleanBeforeRender=function(){r.prototype.cleanBeforeRender.call(this),this.dirtyRender=!0},i=n,e.TextNode=i,__reflect(i.prototype,"egret.sys.TextNode")}(egret=egret||{}),function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.type=1,t}e=t.sys||(t.sys={}),r=e.Path2D,__extends(n,r),i=n,e.FillPath=i,__reflect(i.prototype,"egret.sys.FillPath")}(egret=egret||{}),function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.type=2,t}e=t.sys||(t.sys={}),r=e.Path2D,__extends(n,r),i=n,e.GradientFillPath=i,__reflect(i.prototype,"egret.sys.GradientFillPath")}(egret=egret||{}),(egret=egret||{}).OrientationMode={AUTO:"auto",PORTRAIT:"portrait",LANDSCAPE:"landscape",LANDSCAPE_FLIPPED:"landscapeFlipped"},function(t){var e,r,i;function n(){var t=r.call(this)||this;return t.type=3,t}e=t.sys||(t.sys={}),r=e.Path2D,__extends(n,r),i=n,e.StrokePath=i,__reflect(i.prototype,"egret.sys.StrokePath")}(egret=egret||{}),function(S){function p(t,e){var r=(null==e.italic?t.italic:e.italic)?"italic ":"normal ";return(r+=(null==e.bold?t.bold:e.bold)?"bold ":"normal ")+((null==e.size?t.size:e.size)+"px ")+(e.fontFamily||t.fontFamily)}function f(t,e){return"rgba("+(t>>16)+","+(t>>8&255)+","+(255&t)+","+e+")"}function V(t,e,r){void 0===r&&(r=0);for(var i=0,n=e.length;i<n;i++)t[i+r]=e[i]}function L(t,e,r,i){for(var n=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],p=i[8],f=i[9],d=i[10],g=i[11],m=i[12],y=i[13],v=i[14],_=i[15],b=i[16],T=i[17],S=i[18],C=i[19],$=0,E=e*r*4;$<E;$+=4){var O=t[$+0],P=t[$+1],L=t[$+2],I=t[$+3];t[$+0]=n*O+o*P+a*L+s*I+l,t[$+1]=c*O+u*P+h*L+p*I+f,t[$+2]=d*O+g*P+m*L+y*I+v,t[$+3]=_*O+b*P+T*L+S*I+C}}function C(t,e,r,i,n){(function(t,e,r,i){var n;n=new(K?Uint8ClampedArray:Array)(4*e);for(var o=4*e,a=2*i+1,s=0;s<r;s++){for(var l=s*o,c=0,u=0,h=0,p=0,f=0,d=0,g=4*-i,m=4*i+4;g<m;g+=4){var y=l+g;y<l||l+o<=y||(f=t[y+3],c+=t[y+0]*f,u+=t[y+1]*f,h+=t[y+2]*f,p+=f)}for(var m=l+o,v=0,_=(g=l)-4*i,b=g+4*(i+1);g<m;g+=4,v+=4,b+=4,_+=4)0===p?(n[v+0]=0,n[v+1]=0,n[v+2]=0,n[v+3]=0):(n[v+0]=c/p,n[v+1]=u/p,n[v+2]=h/p,n[v+3]=p/a),f=t[b+3],d=t[_+3],f||0==f?d||0==d?(c+=t[b+0]*f-t[_+0]*d,u+=t[b+1]*f-t[_+1]*d,h+=t[b+2]*f-t[_+2]*d,p+=f-d):(c+=t[b+0]*f,u+=t[b+1]*f,h+=t[b+2]*f,p+=f):!d&&0!=d||(c+=-t[_+0]*d,u+=-t[_+1]*d,h+=-t[_+2]*d,p+=-d);K?t.set(n,l):V(t,n,l)}})(t,e,r,i),function(t,e,r,i){var n;n=new(K?Uint8ClampedArray:Array)(4*r);for(var o=4*e,a=2*i+1,s=0;s<e;s++){for(var l=4*s,c=0,u=0,h=0,p=0,f=0,d=0,g=-i*o,m=i*o+o;g<m;g+=o){var y=l+g;y<l||l+r*o<=y||(f=t[y+3],c+=t[y+0]*f,u+=t[y+1]*f,h+=t[y+2]*f,p+=f)}for(var g=l,m=l+r*o,v=0,_=l-i*o,b=l+(i+1)*o;g<m;g+=o,v+=4,b+=o,_+=o)0===p?(n[v+0]=0,n[v+1]=0,n[v+2]=0,n[v+3]=0):(n[v+0]=c/p,n[v+1]=u/p,n[v+2]=h/p,n[v+3]=p/a),f=t[b+3],d=t[_+3],f||0==f?d||0==d?(c+=t[b+0]*f-t[_+0]*d,u+=t[b+1]*f-t[_+1]*d,h+=t[b+2]*f-t[_+2]*d,p+=f-d):(c+=t[b+0]*f,u+=t[b+1]*f,h+=t[b+2]*f,p+=f):!d&&0!=d||(c+=-t[_+0]*d,u+=-t[_+1]*d,h+=-t[_+2]*d,p+=-d);for(var T=4*s,m=T+r*o,S=0;T<m;T+=o,S+=4)t[T+0]=n[S+0],t[T+1]=n[S+1],t[T+2]=n[S+2],t[T+3]=n[S+3]}}(t,e,r,n)}function $(t,e,r,i,n,o,a,s,l){var c=function(t,e){var r;e=e||[0,0,0,0],K?r=new Uint8ClampedArray(t):V(r=new Array(t.length),t);for(var i=e[0],n=e[1],o=e[2],a=e[3],s=0,l=r.length;s<l;s+=4){var c=r[s+3];r[s+0]=i*c,r[s+1]=n*c,r[s+2]=o*c,r[s+3]=a*c}return r}(t,i);(function(t,e,r,i,n){var o,a,s=Math.sin(i)*n|0,l=Math.cos(i)*n|0;if(K){o=new Int32Array(t.buffer),a=new Int32Array(o.length);for(var c=0;c<r;c++){if(!((h=c+s)<0||r<h))for(var u=0;u<e;u++){(p=u+l)<0||e<p||(a[h*e+p]=o[c*e+u])}}o.set(a)}else{o=t,a=new Array(o.length);for(var h,p,c=0;c<r;c++){if(!((h=c+s)<0||r<h))for(u=0;u<e;u++){(p=u+l)<0||e<p||(a[4*(h*e+p)+0]=o[4*(c*e+u)+0],a[4*(h*e+p)+1]=o[4*(c*e+u)+1],a[4*(h*e+p)+2]=o[4*(c*e+u)+2],a[4*(h*e+p)+3]=o[4*(c*e+u)+3])}}V(o,a)}})(c,e,r,a,s),C(c,e,r,n,o),function(t,e){for(var r=0,i=t.length;r<i;r+=4)t[r+3]*=e}(c,l),function(t,e){for(var r=0,i=t.length;r<i;r+=4){var n=t[r+0],o=t[r+1],a=t[r+2],s=t[r+3]/255,l=e[r+0],c=e[r+1],u=e[r+2],h=e[r+3]/255;t[r+0]=l+n*(1-h),t[r+1]=c+o*(1-h),t[r+2]=u+a*(1-h),t[r+3]=255*(h+s*(1-h))}}(c,t),t.set(c),K?t.set(c):V(t,c)}function X(t,e,r){return t*(1-r)+e*r}var I=["source-over","lighter","destination-out"],w="source-over",d="#000000",g={none:"butt",square:"square",round:"round"},D=[],E=[],t=(e.prototype.render=function(t,e,r,i){this.nestLevel++;var n=e.context;n.transform(r.a,r.b,r.c,r.d,0,0);var o=this.drawDisplayObject(t,n,r.tx,r.ty,!0),a=S.Matrix.create();if(r.$invertInto(a),n.transform(a.a,a.b,a.c,a.d,0,0),S.Matrix.release(a),this.nestLevel--,0===this.nestLevel){6<D.length&&(D.length=6);for(var s=D.length,l=0;l<s;l++)D[l].resize(0,0)}return o},e.prototype.drawDisplayObject=function(t,e,r,i,n){var o=0,a=t.$displayList,s=a&&!n?((t.$cacheDirty||t.$renderDirty||a.$canvasScaleX!=S.sys.DisplayList.$canvasScaleX||a.$canvasScaleY!=S.sys.DisplayList.$canvasScaleY)&&(o+=a.drawToSurface()),a.$renderNode):t.$renderDirty?t.$getRenderNode():t.$renderNode;if(t.$cacheDirty=!1,s){switch(o++,e.$offsetX=r,e.$offsetY=i,s.type){case 1:this.renderBitmap(s,e);break;case 2:this.renderText(s,e);break;case 3:this.renderGraphics(s,e);break;case 4:this.renderGroup(s,e);break;case 5:this.renderMesh(s,e);break;case 6:this.renderNormalBitmap(s,e)}e.$offsetX=0,e.$offsetY=0}if(a&&!n)return o;var l=t.$children;if(l)for(var c=l.length,u=0;u<c;u++){var h,p=l[u],f=void 0,d=void 0;d=p.$useTranslate?(h=p.$getMatrix(),f=r+p.$x,d=i+p.$y,e.save(),e.transform(h.a,h.b,h.c,h.d,f,d),f=-p.$anchorOffsetX,-p.$anchorOffsetY):(f=r+p.$x-p.$anchorOffsetX,i+p.$y-p.$anchorOffsetY);var g=void 0;switch(1!=p.$alpha&&(g=e.globalAlpha,e.globalAlpha*=p.$alpha),p.$renderMode){case 1:break;case 2:o+=this.drawWithFilter(p,e,f,d);break;case 3:o+=this.drawWithClip(p,e,f,d);break;case 4:o+=this.drawWithScrollRect(p,e,f,d);break;default:o+=this.drawDisplayObject(p,e,f,d)}p.$useTranslate?e.restore():g&&(e.globalAlpha=g)}return o},e.prototype.drawWithFilter=function(t,e,r,i){if(t.$children&&0==t.$children.length&&(!t.$renderNode||0==t.$renderNode.$getRenderCount()))return 0;var n,o=0,a=t.$filters,s=a.length,l=0!==t.$blendMode;l&&(n=(n=I[t.$blendMode])||w);var c=t.$getOriginalBounds(),u=c.x,h=c.y,p=c.width,f=c.height;if(p<=0||f<=0)return o;var d=this.createRenderBuffer(p-u,f-h,!0),g=d.context;if(0<(o+=t.$mask?this.drawWithClip(t,g,-u,-h):t.$scrollRect||t.$maskRect?this.drawWithScrollRect(t,g,-u,-h):this.drawDisplayObject(t,g,-u,-h))){l&&(e.globalCompositeOperation=n),o++;for(var m=g.getImageData(0,0,d.surface.width,d.surface.height),y=0;y<s;y++){var v,_,b,T,S=a[y];"colorTransform"==S.type?L(m.data,d.surface.width,d.surface.height,S.$matrix):"blur"==S.type?C(m.data,d.surface.width,d.surface.height,S.$blurX,S.$blurY):"glow"==S.type?(v=S.$red,_=S.$green,b=S.$blue,T=S.$alpha,S.$inner||S.$knockout||S.$hideObject?function(t,e,r,i,n,o,a,s,l,c,u,h){for(var p,f,d,g,m=new(K?Uint8ClampedArray:Array)(t.length),y=i[3],v=s*Math.cos(a),_=s*Math.sin(a),b=3.141592653589793,T=n/7,S=o/7,C=0;C<e;C++)for(var $=0;$<r;$++){for(var E=$*e*4+4*C,O=0,P=0,L=t[E]/255,I=t[1+E]/255,w=t[2+E]/255,D=t[3+E]/255,R=0;R<=2*b;R+=2*b/12){p=Math.cos(R+0),f=Math.sin(R+0);for(var x=0;x<7;x++){d=x*T*p,g=x*S*f;var A=Math.round(C+d-v),M=Math.round($+g-_);O+=(7-x)*(e<=A||A<0||M<0||r<=M?0:t[M*e*4+4*A+3]/255),P+=7-x}}D=Math.max(D,1e-4);var N=O/P*l*y*(1-c)*Math.max(Math.min(h,u),1-D),k=(P-O)/P*l*y*c*D,U=k/(k+(D=Math.max(D*u*(1-h),1e-4))),B=X(L,i[0],U),G=X(I,i[1],U),j=X(w,i[2],U),F=N/(k+D+N),q=X(B,i[0],F),H=X(G,i[1],F),W=X(j,i[2],F),Y=Math.min(D+N+k,1);m[E]=255*q,m[1+E]=255*H,m[2+E]=255*W,m[3+E]=255*Y}K?t.set(m):V(t,m)}(m.data,d.surface.width,d.surface.height,[v/255,_/255,b/255,T],S.$blurX,S.$blurY,S.$angle?S.$angle/180*Math.PI:0,S.$distance||0,S.$strength,S.$inner?1:0,S.$knockout?0:1,S.$hideObject?1:0):$(m.data,d.surface.width,d.surface.height,[v/255,_/255,b/255,T],S.$blurX,S.$blurY,S.$angle?S.$angle/180*Math.PI:0,S.$distance||0,S.$strength)):S.type}g.putImageData(m,0,0),e.drawImage(d.surface,r+u,i+h),l&&(e.globalCompositeOperation=w)}return E.push(d),o},e.prototype.drawWithClip=function(t,e,r,i){var n,o=0,a=0!==t.$blendMode;a&&(n=(n=I[t.$blendMode])||w);var s=t.$scrollRect?t.$scrollRect:t.$maskRect,l=t.$mask;if(l){var c=l.$getMatrix();if(0==c.a&&0==c.b||0==c.c&&0==c.d)return o}if(!(l||t.$children&&0!=t.$children.length))return s&&(e.save(),e.beginPath(),e.rect(s.x+r,s.y+i,s.width,s.height),e.clip()),a&&(e.globalCompositeOperation=n),o+=this.drawDisplayObject(t,e,r,i),a&&(e.globalCompositeOperation=w),s&&e.restore(),o;if(l){var u=l.$getRenderNode();if((!l.$children||0==l.$children.length)&&u&&3==u.type&&1==u.drawData.length&&1==u.drawData[0].type&&1==u.drawData[0].fillAlpha){this.renderingMask=!0,e.save(),(y=S.Matrix.create()).copyFrom(l.$getConcatenatedMatrix()),l.$getConcatenatedMatrixAt(t,y),y.prepend(1,0,0,1,r,i),e.transform(y.a,y.b,y.c,y.d,y.tx,y.ty);var h=this.drawDisplayObject(l,e,0,0);return this.renderingMask=!1,y.$invertInto(y),e.transform(y.a,y.b,y.c,y.d,y.tx,y.ty),S.Matrix.release(y),s&&(e.beginPath(),e.rect(s.x+r,s.y+i,s.width,s.height),e.clip()),h+=this.drawDisplayObject(t,e,r,i),e.restore(),h}}var p=t.$getOriginalBounds(),f=p.x,d=p.y,g=p.width,m=p.height;if(g<=0||m<=0)return o;var y,v,_,b=this.createRenderBuffer(g,m),T=b.context;return T?(o+=this.drawDisplayObject(t,T,-f,-d),l&&(u=l.$getRenderNode(),(y=S.Matrix.create()).copyFrom(l.$getConcatenatedMatrix()),l.$getConcatenatedMatrixAt(t,y),y.translate(-f,-d),u&&1==u.$getRenderCount()||l.$displayList?(T.globalCompositeOperation="destination-in",T.save(),T.setTransform(y.a,y.b,y.c,y.d,y.tx,y.ty),o+=this.drawDisplayObject(l,T,0,0),T.restore()):((_=(v=this.createRenderBuffer(g,m)).context).setTransform(y.a,y.b,y.c,y.d,y.tx,y.ty),o+=this.drawDisplayObject(l,_,0,0),T.globalCompositeOperation="destination-in",T.drawImage(v.surface,0,0),D.push(v)),S.Matrix.release(y)),0<o&&(o++,a&&(e.globalCompositeOperation=n),s&&(e.save(),e.beginPath(),e.rect(s.x+r,s.y+i,s.width,s.height),e.clip()),e.drawImage(b.surface,r+f,i+d),s&&e.restore(),a&&(e.globalCompositeOperation=w)),D.push(b),o):o+this.drawDisplayObject(t,e,r,i)},e.prototype.drawWithScrollRect=function(t,e,r,i){var n=0,o=t.$scrollRect?t.$scrollRect:t.$maskRect;return o.isEmpty()||(t.$scrollRect&&(r-=o.x,i-=o.y),e.save(),e.beginPath(),e.rect(o.x+r,o.y+i,o.width,o.height),e.clip(),n+=this.drawDisplayObject(t,e,r,i),e.restore()),n},e.prototype.drawNodeToBuffer=function(t,e,r,i){var n=e.context;n.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.renderNode(t,n,i)},e.prototype.drawDisplayToBuffer=function(t,e,r){var i,n=e.context;r&&n.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty);var o=0;if(i=t.$renderDirty?t.$getRenderNode():t.$renderNode)switch(o++,i.type){case 1:this.renderBitmap(i,n);break;case 2:this.renderText(i,n);break;case 3:this.renderGraphics(i,n);break;case 4:this.renderGroup(i,n);break;case 5:this.renderMesh(i,n);break;case 6:this.renderNormalBitmap(i,n)}var a=t.$children;if(a)for(var s=a.length,l=0;l<s;l++){var c=a[l];switch(c.$renderMode){case 1:break;case 2:o+=this.drawWithFilter(c,n,0,0);break;case 3:o+=this.drawWithClip(c,n,0,0);break;case 4:o+=this.drawWithScrollRect(c,n,0,0);break;default:o+=this.drawDisplayObject(c,n,0,0)}}return o},e.prototype.renderNode=function(t,e,r){var i=0;switch(t.type){case 1:i=this.renderBitmap(t,e);break;case 2:i=1,this.renderText(t,e);break;case 3:i=this.renderGraphics(t,e,r);break;case 4:i=this.renderGroup(t,e);break;case 5:i=this.renderMesh(t,e);break;case 6:i+=this.renderNormalBitmap(t,e)}return i},e.prototype.renderNormalBitmap=function(t,e){var r,i,n,o,a,s,l,c,u=t.image;return u&&u.source?(e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing),t.rotated?(r=t.sourceX,i=t.sourceY,n=t.sourceW,o=t.sourceH,a=t.drawX,s=t.drawY,l=t.drawW,c=t.drawH,e.save(),e.transform(0,-1,1,0,0,c),e.drawImage(u.source,r,i,o,n,a+e.$offsetX,s+e.$offsetY,c,l),e.restore()):e.drawImage(u.source,t.sourceX,t.sourceY,t.sourceW,t.sourceH,t.drawX+e.$offsetX,t.drawY+e.$offsetY,t.drawW,t.drawH),1):0},e.prototype.renderBitmap=function(t,e){var r=t.image;if(!r||!r.source)return 0;e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing);var i,n,o,a=t.drawData,s=a.length,l=0,c=t.matrix,u=t.blendMode,h=t.alpha,p=!1;c&&(e.save(),p=!0,0==e.$offsetX&&0==e.$offsetY||(e.translate(e.$offsetX,e.$offsetY),i=e.$offsetX,n=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(c.a,c.b,c.c,c.d,c.tx,c.ty)),u&&(e.globalCompositeOperation=I[u]),h==h&&(o=e.globalAlpha,e.globalAlpha*=h);var f,d,g=0,m=t.filter;if(m&&8==s){var y=a[0],v=a[1],_=a[2],b=a[3],T=a[4],S=a[5],C=a[6],$=a[7];t.rotated&&(_=a[3],b=a[2],C=a[7],$=a[6]);var E=this.createRenderBuffer(C,$),O=E.context;g++,t.rotated&&e.transform(0,-1,1,0,0,C),O.drawImage(r.source,y,v,_,b,0,0,C,$),g++;var P=O.getImageData(0,0,C,$);L(P.data,C,$,m.$matrix),O.putImageData(P,0,0),e.drawImage(E.surface,0,0,C,$,T+e.$offsetX,S+e.$offsetY,C,$),D.push(E)}else for(;l<s;)g++,t.rotated?(y=a[l++],v=a[l++],b=a[l++],_=a[l++],f=a[l++],d=a[l++],$=a[l++],C=a[l++],e.save(),e.transform(0,-1,1,0,0,C),e.drawImage(r.source,y,v,_,b,f+e.$offsetX,d+e.$offsetY,C,$),e.restore()):e.drawImage(r.source,a[l++],a[l++],a[l++],a[l++],a[l++]+e.$offsetX,a[l++]+e.$offsetY,a[l++],a[l++]);return p?e.restore():(u&&(e.globalCompositeOperation=w),h==h&&(e.globalAlpha=o)),i&&(e.$offsetX=i),n&&(e.$offsetY=n),g},e.prototype.renderMesh=function(t,e){return 0},e.prototype.renderText=function(t,e){e.textAlign="left",e.textBaseline="middle",e.lineJoin="round";for(var r=t.drawData,i=r.length,n=0;n<i;){var o=r[n++],a=r[n++],s=r[n++],l=r[n++];e.font=p(t,l);var c=null==l.textColor?t.textColor:l.textColor,u=null==l.strokeColor?t.strokeColor:l.strokeColor,h=null==l.stroke?t.stroke:l.stroke;e.fillStyle=S.toColorString(c),e.strokeStyle=S.toColorString(u),h&&(e.lineWidth=2*h,e.strokeText(s,o+e.$offsetX,a+e.$offsetY)),e.fillText(s,o+e.$offsetX,a+e.$offsetY)}},e.prototype.renderGraphics=function(t,e,r){var i=t.drawData,n=i.length;r=!!r;for(var o=0;o<n;o++){var a=i[o];switch(a.type){case 1:e.fillStyle=r?d:f(a.fillColor,a.fillAlpha),this.renderPath(a,e),this.renderingMask?e.clip():e.fill();break;case 2:var s=a;e.fillStyle=r?d:function(t,e,r,i,n){for(var o=e==S.GradientType.LINEAR?t.createLinearGradient(-1,0,1,0):t.createRadialGradient(0,0,0,0,0,1),a=r.length,s=0;s<a;s++)o.addColorStop(n[s]/255,f(r[s],i[s]));return o}(e,s.gradientType,s.colors,s.alphas,s.ratios,s.matrix),e.save();var l=s.matrix;this.renderPath(a,e),e.transform(l.a,l.b,l.c,l.d,l.tx,l.ty),e.fill(),e.restore();break;case 3:var c=a,u=c.lineWidth;e.lineWidth=u,e.strokeStyle=r?d:f(c.lineColor,c.lineAlpha),e.lineCap=g[c.caps],e.lineJoin=c.joints,e.miterLimit=c.miterLimit,e.setLineDash&&e.setLineDash(c.lineDash);var h=1===u||3===u;h&&e.translate(.5,.5),this.renderPath(a,e),e.stroke(),h&&e.translate(-.5,-.5)}}return 0==n?0:1},e.prototype.renderPath=function(t,e){e.beginPath();for(var r=t.$data,i=t.$commands,n=i.length,o=0,a=0;a<n;a++)switch(i[a]){case 4:e.bezierCurveTo(r[o++]+e.$offsetX,r[o++]+e.$offsetY,r[o++]+e.$offsetX,r[o++]+e.$offsetY,r[o++]+e.$offsetX,r[o++]+e.$offsetY);break;case 3:e.quadraticCurveTo(r[o++]+e.$offsetX,r[o++]+e.$offsetY,r[o++]+e.$offsetX,r[o++]+e.$offsetY);break;case 2:e.lineTo(r[o++]+e.$offsetX,r[o++]+e.$offsetY);break;case 1:e.moveTo(r[o++]+e.$offsetX,r[o++]+e.$offsetY)}},e.prototype.renderGroup=function(t,e){var r,i,n=t.matrix,o=!1;n&&(e.save(),o=!0,0==e.$offsetX&&0==e.$offsetY||(e.translate(e.$offsetX,e.$offsetY),r=e.$offsetX,i=e.$offsetY,e.$offsetX=e.$offsetY=0),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty));for(var a=0,s=t.drawData,l=s.length,c=0;c<l;c++){var u=s[c];a+=this.renderNode(u,e)}return o&&e.restore(),r&&(e.$offsetX=r),i&&(e.$offsetY=i),a},e.prototype.createRenderBuffer=function(t,e,r){var i=r?E.pop():D.pop();return i?i.resize(t,e,!0):i=new S.sys.CanvasRenderBuffer(t,e),i},e);function e(){this.nestLevel=0,this.renderingMask=!1}S.CanvasRenderer=t,__reflect(t.prototype,"egret.CanvasRenderer"),S.getFontString=p,S.getRGBAString=f;var K=!1;try{K=!0}catch(t){}}(egret=egret||{}),(egret=egret||{}).DeviceOrientation=null,egret=egret||{},egret=egret||{},function(t){var e;(e=t.RuntimeType||(t.RuntimeType={})).WEB="web",e.NATIVE="native",e.RUNTIME2="runtime2",e.MYGAME="mygame",e.WXGAME="wxgame",e.BAIDUGAME="baidugame",e.QGAME="qgame",e.OPPOGAME="oppogame",e.QQGAME="qqgame",e.VIVOGAME="vivogame";var r=(i.language="zh-CN",i.os="Unknown",i.runtimeType=t.RuntimeType.WEB,i.engineVersion="5.2.31",i.renderMode="Unknown",i.boundingClientWidth=0,i.boundingClientHeight=0,i);function i(){}t.Capabilities=r,__reflect(r.prototype,"egret.Capabilities")}(egret=egret||{}),function(f){var r,t=(r=f.Texture,__extends(e,r),e.prototype.drawToTexture=function(t,e,r){if(void 0===r&&(r=1),e&&(0==e.width||0==e.height))return!1;var i=e||t.$getOriginalBounds();if(0==i.width||0==i.height)return!1;r/=f.$TextureScaleFactor;var n=(i.x+i.width)*r,o=(i.y+i.height)*r;e&&(n=i.width*r,o=i.height*r);var a,s,l,c,u,h,p=this.$renderBuffer;return!!p&&(p.resize(n,o),this.$bitmapData.width=n,this.$bitmapData.height=o,f.nativeRender?(egret_native.activateBuffer(this.$renderBuffer),a=!1,u=c=l=s=0,e&&(a=!0,s=e.x,l=e.y,c=e.width,u=e.height),egret_native.updateNativeRender(),egret_native.nrRenderDisplayObject(t.$nativeDisplayObject.id,r,a,s,l,c,u),egret_native.activateBuffer(null)):((h=f.Matrix.create()).identity(),h.scale(r,r),e&&h.translate(-e.x,-e.y),f.sys.systemRenderer.render(t,p,h,!0),f.Matrix.release(h)),this.$initData(0,0,n,o,0,0,n,o,n,o),!0)},e.prototype.getPixel32=function(t,e){var r,i;return this.$renderBuffer&&(i=f.$TextureScaleFactor,t=Math.round(t/i),e=Math.round(e/i),r=this.$renderBuffer.getPixels(t,e,1,1)),r},e.prototype.dispose=function(){r.prototype.dispose.call(this),this.$renderBuffer=null},e);function e(){var t=r.call(this)||this;t.$renderBuffer=new f.sys.RenderBuffer;var e=new f.BitmapData(t.$renderBuffer.surface);return e.$deleteSource=!1,t._setBitmapData(e),t}f.RenderTexture=t,__reflect(t.prototype,"egret.RenderTexture")}(egret=egret||{}),function(t){var r={};t.registerImplementation=function(t,e){r[t]=e},t.getImplementation=function(t){return r[t]}}(egret=egret||{}),function(e){var i,t=(i=e.DisplayObject,__extends(r,i),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(8)},Object.defineProperty(r.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),r.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},r.prototype.$hitTest=function(t,e){var r=i.prototype.$hitTest.call(this,t,e);return r==this&&(r=this.$graphics.$hitTest(t,e)),r},r.prototype.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},r);function r(){var t=i.call(this)||this;return t.$graphics=new e.Graphics,t.$graphics.$setTarget(t),t}e.Shape=t,__reflect(t.prototype,"egret.Shape")}(egret=egret||{}),function(t){var i,e=(i=t.SpriteSheet,__extends(r,i),r.prototype.getTexture=function(t){var e=this._textureMap[t];if(!e){var r=this.charList[t];if(!r)return null;e=this.createTexture(t,r.x,r.y,r.w,r.h,r.offX,r.offY,r.sourceW,r.sourceH),this._textureMap[t]=e}return e},r.prototype.getConfig=function(t,e){return this.charList[t]?this.charList[t][e]:0},r.prototype._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var r,i,n=e.sourceH;if(void 0===n&&(void 0===(r=e.h)&&(r=0),void 0===(i=e.offY)&&(i=0),n=r+i),n<=0)continue;this.firstCharHeight=n;break}}return this.firstCharHeight},r.prototype.parseConfig=function(t){for(var e=(t=t.split("\r\n").join("\n")).split("\n"),r=this.getConfigByKey(e[3],"count"),i={},n=4;n<4+r;n++){var o=e[n],a={};(i[String.fromCharCode(this.getConfigByKey(o,"id"))]=a).x=this.getConfigByKey(o,"x"),a.y=this.getConfigByKey(o,"y"),a.w=this.getConfigByKey(o,"width"),a.h=this.getConfigByKey(o,"height"),a.offX=this.getConfigByKey(o,"xoffset"),a.offY=this.getConfigByKey(o,"yoffset"),a.xadvance=this.getConfigByKey(o,"xadvance")}return i},r.prototype.getConfigByKey=function(t,e){for(var r=t.split(" "),i=0,n=r.length;i<n;i++){var o=r[i];if(e==o.substring(0,e.length)){var a=o.substring(e.length+1);return parseInt(a)}}return 0},r);function r(t,e){var r=i.call(this,t)||this;return r.firstCharHeight=0,"string"==typeof e?r.charList=r.parseConfig(e):e&&e.hasOwnProperty("frames")?r.charList=e.frames:r.charList={},r}t.BitmapFont=e,__reflect(e.prototype,"egret.BitmapFont")}(egret=egret||{}),function(w){var e,t=(e=w.DisplayObject,__extends(D,e),D.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(D.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){var e,r;t==this.$smoothing||(this.$smoothing=t,w.nativeRender)||((e=this.$parent)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()),(r=this.$maskedObject)&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp()))},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"text",{get:function(){return this.$text},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),D.prototype.$setText=function(t){return(t=null==t?"":String(t))!=this.$text&&(this.$text=t,this.$invalidateContentBounds(),!0)},D.prototype.$getWidth=function(){var t=this.$textFieldWidth;return isNaN(t)?this.$getContentBounds().width:t},D.prototype.$setWidth=function(t){return!(t<0||t==this.$textFieldWidth||(this.$textFieldWidth=t,this.$invalidateContentBounds(),0))},D.prototype.$invalidateContentBounds=function(){this.$renderDirty=!0,this.$textLinesChanged=!0,this.$updateRenderNode()},D.prototype.$getHeight=function(){var t=this.$textFieldHeight;return isNaN(t)?this.$getContentBounds().height:t},D.prototype.$setHeight=function(t){return!(t<0||t==this.$textFieldHeight||(this.$textFieldHeight=t,this.$invalidateContentBounds(),0))},Object.defineProperty(D.prototype,"font",{get:function(){return this.$font},set:function(t){this.$setFont(t)},enumerable:!0,configurable:!0}),D.prototype.$setFont=function(t){return this.$font!=t&&(this.$font=t,this.$fontStringChanged=!0,this.$invalidateContentBounds(),!0)},Object.defineProperty(D.prototype,"lineSpacing",{get:function(){return this.$lineSpacing},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),D.prototype.$setLineSpacing=function(t){return this.$lineSpacing!=t&&(this.$lineSpacing=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(D.prototype,"letterSpacing",{get:function(){return this.$letterSpacing},set:function(t){this.$setLetterSpacing(t)},enumerable:!0,configurable:!0}),D.prototype.$setLetterSpacing=function(t){return this.$letterSpacing!=t&&(this.$letterSpacing=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(D.prototype,"textAlign",{get:function(){return this.$textAlign},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),D.prototype.$setTextAlign=function(t){return this.$textAlign!=t&&(this.$textAlign=t,this.$invalidateContentBounds(),!0)},Object.defineProperty(D.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),D.prototype.$setVerticalAlign=function(t){return this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$invalidateContentBounds(),!0)},D.prototype.$updateRenderNode=function(){var t=this,e=this.$getTextLines(),r=e.length;if(0!=r){var i,n=[],o=this.$textLinesWidth,a=t.$font;w.nativeRender||(i=this.$renderNode,a.$texture&&(i.image=a.$texture.$bitmapData),i.smoothing=t.$smoothing);for(var s,l=a._getFirstCharHeight(),c=Math.ceil(l*D.EMPTY_FACTOR),u=!isNaN(t.$textFieldHeight),h=t.$textWidth,p=t.$textFieldWidth,f=t.$textFieldHeight,d=t.$textAlign,g=this.$textOffsetY+this.$textStartY,m=this.$lineHeights,y=0;y<r;y++){var v=m[y];if(u&&0<y&&f<g+v)break;var _,b=e[y],T=b.length,S=this.$textOffsetX;d!=w.HorizontalAlign.LEFT&&(_=h<p?p:h,d==w.HorizontalAlign.RIGHT?S+=_-o[y]:d==w.HorizontalAlign.CENTER&&(S+=Math.floor((_-o[y])/2)));for(var C=0;C<T;C++){var $,E,O=b.charAt(C),P=a.getTexture(O);P?($=P.$bitmapWidth,E=P.$bitmapHeight,w.nativeRender?n.push(P.$bitmapX,P.$bitmapY,$,E,S+P.$offsetX,g+P.$offsetY,P.$getScaleBitmapWidth(),P.$getScaleBitmapHeight(),P.$sourceWidth,P.$sourceHeight):(i.imageWidth=P.$sourceWidth,i.imageHeight=P.$sourceHeight,i.drawImage(P.$bitmapX,P.$bitmapY,$,E,S+P.$offsetX,g+P.$offsetY,P.$getScaleBitmapWidth(),P.$getScaleBitmapHeight())),S+=(a.getConfig(O,"xadvance")||P.$getTextureWidth())+t.$letterSpacing):" "==O?S+=c:w.$warn(1046,O)}g+=v+t.$lineSpacing}w.nativeRender&&(t.$nativeDisplayObject.setDataToBitmapNode(t.$nativeDisplayObject.id,a.$texture,n),s=t.$getContentBounds(),t.$nativeDisplayObject.setWidth(s.width),t.$nativeDisplayObject.setHeight(s.height))}else w.nativeRender&&t.$font&&(t.$nativeDisplayObject.setDataToBitmapNode(t.$nativeDisplayObject.id,t.$font.$texture,[]),t.$nativeDisplayObject.setWidth(0),t.$nativeDisplayObject.setHeight(0))},D.prototype.$measureContentBounds=function(t){0==this.$getTextLines().length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$textWidth-this.$textOffsetX,this.$textHeight-this.$textOffsetY)},Object.defineProperty(D.prototype,"textWidth",{get:function(){return this.$getTextLines(),this.$textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"textHeight",{get:function(){return this.$getTextLines(),this.$textHeight},enumerable:!0,configurable:!0}),D.prototype.$getTextLines=function(){function t(t){return!(p&&0<r.length&&p<c)&&(c+=T+a,C||$||(S-=s),r.push(t),n.push(T),i.push(S),l=Math.max(S,l),1)}var e=this;if(!e.$textLinesChanged)return e.textLines;var r=[];e.textLines=r;var i=[];e.$textLinesWidth=i,e.$textLinesChanged=!1;var n=[];if(e.$lineHeights=n,!e.$text||!e.$font)return e.$textWidth=0,e.$textHeight=0,r;for(var o,a=e.$lineSpacing,s=e.$letterSpacing,l=0,c=0,u=!isNaN(e.$textFieldWidth),h=e.$textFieldWidth,p=e.$textFieldHeight,f=e.$font,d=f._getFirstCharHeight(),g=Math.ceil(d*D.EMPTY_FACTOR),m=e.$text.split(/(?:\r\n|\r|\n)/),y=m.length,v=0;v<y;v++){for(var _=m[v],b=_.length,T=0,S=0,C=!0,$=!1,E=0;E<b;E++){C||(S+=s);var O=_.charAt(E),P=void 0,L=void 0,I=f.getTexture(O);if(I)P=I.$getTextureWidth(),L=I.$getTextureHeight(),I.$offsetX,I.$offsetY;else{if(" "!=O){w.$warn(1046,O),C=C&&!1;continue}P=g,L=d}if(C=C&&!1,u&&0<E&&h<S+P){if(!t(_.substring(0,E)))break;b=(_=_.substring(E)).length,S=(E=0)!=b-1&&f.getConfig(O,"xadvance")||P,T=L}else S+=E!=b-1&&f.getConfig(O,"xadvance")||P,T=Math.max(L,T)}if(p&&0<v&&p<c)break;if($=!0,!t(_))break}return c-=a,e.$textWidth=l,e.$textHeight=c,this.$textOffsetX=0,this.$textOffsetY=0,this.$textStartX=0,this.$textStartY=0,l<h&&((o=e.$textAlign)==w.HorizontalAlign.RIGHT?this.$textStartX=h-l:o==w.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor((h-l)/2))),c<p&&((o=e.$verticalAlign)==w.VerticalAlign.BOTTOM?this.$textStartY=p-c:o==w.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((p-c)/2))),r},D.EMPTY_FACTOR=.33,D);function D(){var t=e.call(this)||this;return t.$smoothing=w.Bitmap.defaultSmoothing,t.$text="",t.$textFieldWidth=NaN,t.$textLinesChanged=!1,t.$textFieldHeight=NaN,t.$font=null,t.$fontStringChanged=!1,t.$lineSpacing=0,t.$letterSpacing=0,t.$textAlign=w.HorizontalAlign.LEFT,t.$verticalAlign=w.VerticalAlign.TOP,t.$textWidth=NaN,t.$textHeight=NaN,t.$textOffsetX=0,t.$textOffsetY=0,t.$textStartX=0,t.$textStartY=0,t.textLines=[],t.$lineHeights=[],w.nativeRender||(t.$renderNode=new w.sys.BitmapNode),t}w.BitmapText=t,__reflect(t.prototype,"egret.BitmapText")}(egret=egret||{}),function(t){var e=(r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.JUSTIFY="justify",r.CONTENT_JUSTIFY="contentJustify",r);function r(){}t.HorizontalAlign=e,__reflect(e.prototype,"egret.HorizontalAlign")}(egret=egret||{}),function(o){var t=(e.prototype.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},e.prototype.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var r=this.replaceArr[e][0],i=this.replaceArr[e][1];t=t.replace(r,i)}return t},e.prototype.parse=function(t){this.stackArray=[],this.resutlArr=[];for(var e=0,r=t.length;e<r;)var i,n=t.indexOf("<",e),e=n<0?(this.addToResultArr(t.substring(e)),r):(this.addToResultArr(t.substring(e,n)),-1==(i=t.indexOf(">",n))?(o.$error(1038),i=n):"/"==t.charAt(n+1)?this.stackArray.pop():this.addToArray(t.substring(n+1,i)),i+1);return this.resutlArr},e.prototype.parser=function(t){return this.parse(t)},e.prototype.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),0<this.stackArray.length?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},e.prototype.changeStringToObject=function(t){var e,r={};if("i"==(t=t.trim()).charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(r,t,"true");else if(e=t.match(/^(font|a)\s/)){t=t.substring(e[0].length).trim();for(var i,n=0;i=t.match(this.getHeadReg());){var o=i[0],a="";'"'==(t=t.substring(o.length).trim()).charAt(0)?(n=t.indexOf('"',1),a=t.substring(1,n),n+=1):"'"==t.charAt(0)?(n=t.indexOf("'",1),a=t.substring(1,n),n+=1):n=(a=t.match(/(\S)+/)[0]).length,this.addProperty(r,o.substring(0,o.length-1).trim(),a.trim()),t=t.substring(n).trim()}}return r},e.prototype.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},e.prototype.addProperty=function(t,e,r){switch(e.toLowerCase()){case"color":case"textcolor":r=r.replace(/#/,"0x"),t.textColor=parseInt(r);break;case"strokecolor":r=r.replace(/#/,"0x"),t.strokeColor=parseInt(r);break;case"stroke":t.stroke=parseInt(r);break;case"b":case"bold":t.bold="true"==r;break;case"u":t.underline="true"==r;break;case"i":case"italic":t.italic="true"==r;break;case"size":t.size=parseInt(r);break;case"fontfamily":t.fontFamily=r;break;case"href":t.href=this.replaceSpecial(r);break;case"target":t.target=this.replaceSpecial(r)}},e.prototype.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var r=this.stackArray[this.stackArray.length-1];for(var i in r)null==e[i]&&(e[i]=r[i]);this.stackArray.push(e)}},e);function e(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}o.HtmlTextParser=t,__reflect(t.prototype,"egret.HtmlTextParser")}(egret=egret||{}),function(a){var e,t=(e=a.HashObject,__extends(r,e),r.prototype.init=function(t){this._text=t,this.stageText=new a.StageText,this.stageText.$setTextField(this._text)},r.prototype._addStageText=function(){this.stageTextAdded||(this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(a.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this),this.stageTextAdded=!0)},r.prototype._removeStageText=function(){this.stageTextAdded&&(this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this),this.stageTextAdded=!1)},r.prototype._getText=function(){return this.stageText.$getText()},r.prototype._setText=function(t){this.stageText.$setText(t)},r.prototype._setColor=function(t){this.stageText.$setColor(t)},r.prototype.focusHandler=function(t){this._isFocus||(this._isFocus=!0,t.showing||this._text.$setIsTyping(!0),this._text.dispatchEvent(new a.FocusEvent(a.FocusEvent.FOCUS_IN,!0)))},r.prototype.blurHandler=function(t){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$setIsTyping(!1),this.stageText.$onBlur(),this._text.dispatchEvent(new a.FocusEvent(a.FocusEvent.FOCUS_OUT,!0)))},r.prototype.onMouseDownHandler=function(t){this.$onFocus()},r.prototype.$onFocus=function(){var t=this;this._text.visible&&(this._isFocus||(this.tempStage.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),a.callLater(function(){t.tempStage.addEventListener(a.TouchEvent.TOUCH_BEGIN,t.onStageDownHandler,t)},this),a.nativeRender&&this.stageText.$setText(this._text.$TextField[13]),this.stageText.$show()))},r.prototype.onStageDownHandler=function(t){t.$target!=this._text&&this.stageText.$hide()},r.prototype.updateTextHandler=function(t){var e,r,i=this._text.$TextField,n=this.stageText.$getText(),o=!1;null!=i[35]&&(e=new RegExp("["+i[35]+"]","g"),n=(r=n.match(e))?r.join(""):"",o=!0),null!=i[36]&&(e=new RegExp("[^"+i[36]+"]","g"),n=(r=n.match(e))?r.join(""):"",o=!0),o&&this.stageText.$getText()!=n&&this.stageText.$setText(n),this.resetText(),this._text.dispatchEvent(new a.Event(a.Event.CHANGE,!0))},r.prototype.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},r.prototype._hideInput=function(){this.stageText.$removeFromStage()},r.prototype.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},r.prototype._updateProperties=function(){return this._isFocus||this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),void this.updateInput()},r);function r(){var t=e.call(this)||this;return t.stageTextAdded=!1,t._text=null,t._isFocus=!1,t}a.InputController=t,__reflect(t.prototype,"egret.InputController")}(egret=egret||{}),egret=egret||{},function(A){function M(t,e,r){var i=null==(r=r||{}).italic?e[16]:r.italic,n=null==r.bold?e[15]:r.bold,o=null==r.size?e[0]:r.size,a=r.fontFamily||e[8]||s.default_fontFamily;return A.sys.measureText(t,a,o,n,i)}var r,N=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![。，！、》…）)}”】\\.\\,\\!\\?\\]\\:])"),s=(r=A.DisplayObject,__extends(_,r),_.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(7)},_.prototype.isInput=function(){return this.$TextField[24]==A.TextFieldType.INPUT},_.prototype.$setTouchEnabled=function(t){r.prototype.$setTouchEnabled.call(this,t),this.isInput()&&(this.$inputEnabled=!0)},Object.defineProperty(_.prototype,"fontFamily",{get:function(){return this.$TextField[8]},set:function(t){this.$setFontFamily(t)},enumerable:!0,configurable:!0}),_.prototype.$setFontFamily=function(t){var e=this.$TextField;return e[8]!=t&&(e[8]=t,this.invalidateFontString(),A.nativeRender&&this.$nativeDisplayObject.setFontFamily(t),!0)},Object.defineProperty(_.prototype,"size",{get:function(){return this.$TextField[0]},set:function(t){this.$setSize(t)},enumerable:!0,configurable:!0}),_.prototype.$setSize=function(t){var e=this.$TextField;return e[0]!=t&&(e[0]=t,this.invalidateFontString(),A.nativeRender&&this.$nativeDisplayObject.setFontSize(t),!0)},Object.defineProperty(_.prototype,"bold",{get:function(){return this.$TextField[15]},set:function(t){this.$setBold(t)},enumerable:!0,configurable:!0}),_.prototype.$setBold=function(t){var e=this.$TextField;return t!=e[15]&&(e[15]=t,this.invalidateFontString(),A.nativeRender&&this.$nativeDisplayObject.setBold(t),!0)},Object.defineProperty(_.prototype,"italic",{get:function(){return this.$TextField[16]},set:function(t){this.$setItalic(t)},enumerable:!0,configurable:!0}),_.prototype.$setItalic=function(t){var e=this.$TextField;return t!=e[16]&&(e[16]=t,this.invalidateFontString(),A.nativeRender&&this.$nativeDisplayObject.setItalic(t),!0)},_.prototype.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},Object.defineProperty(_.prototype,"textAlign",{get:function(){return this.$TextField[9]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),_.prototype.$setTextAlign=function(t){var e=this.$TextField;return e[9]!=t&&(e[9]=t,this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setTextAlign(t),!0)},Object.defineProperty(_.prototype,"verticalAlign",{get:function(){return this.$TextField[10]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),_.prototype.$setVerticalAlign=function(t){var e=this.$TextField;return e[10]!=t&&(e[10]=t,this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setVerticalAlign(t),!0)},Object.defineProperty(_.prototype,"lineSpacing",{get:function(){return this.$TextField[1]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),_.prototype.$setLineSpacing=function(t){var e=this.$TextField;return e[1]!=t&&(e[1]=t,this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setLineSpacing(t),!0)},Object.defineProperty(_.prototype,"textColor",{get:function(){return this.$TextField[2]},set:function(t){this.$setTextColor(t)},enumerable:!0,configurable:!0}),_.prototype.$setTextColor=function(t){var e=this.$TextField;return e[2]!=t&&(e[2]=t,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setTextColor(t),!0)},Object.defineProperty(_.prototype,"wordWrap",{get:function(){return this.$TextField[19]},set:function(t){this.$setWordWrap(t)},enumerable:!0,configurable:!0}),_.prototype.$setWordWrap=function(t){var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setWordWrap(t)))},Object.defineProperty(_.prototype,"type",{get:function(){return this.$TextField[24]},set:function(t){this.$setType(t)},enumerable:!0,configurable:!0}),_.prototype.$setType=function(t){var e=this.$TextField;return e[24]!=t&&(e[24]=t,A.nativeRender&&this.$nativeDisplayObject.setType(t),t==A.TextFieldType.INPUT?(isNaN(e[3])&&this.$setWidth(100),isNaN(e[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new A.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0)},Object.defineProperty(_.prototype,"inputType",{get:function(){return this.$TextField[37]},set:function(t){this.$TextField[37]!=t&&(this.$TextField[37]=t,A.nativeRender&&this.$nativeDisplayObject.setInputType(t))},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"text",{get:function(){return this.$getText()},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),_.prototype.$getText=function(){return this.$TextField[24]==A.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},_.prototype.$setBaseText=function(t){t=null==t?"":t.toString(),this.isFlow=!1;var e=this.$TextField;if(e[13]==t)return!1;this.$invalidateTextField(),e[13]=t;var r=e[20]?this.changeToPassText(t):t;return A.nativeRender&&this.$nativeDisplayObject.setText(r),this.setMiddleStyle([{text:r}]),!0},_.prototype.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},Object.defineProperty(_.prototype,"displayAsPassword",{get:function(){return this.$TextField[20]},set:function(t){this.$setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),_.prototype.$setDisplayAsPassword=function(t){var e=this.$TextField;if(e[20]==t)return!1;e[20]=t,this.$invalidateTextField();var r=t?this.changeToPassText(e[13]):e[13];return A.nativeRender&&this.$nativeDisplayObject.setText(r),this.setMiddleStyle([{text:r}]),!0},Object.defineProperty(_.prototype,"strokeColor",{get:function(){return this.$TextField[25]},set:function(t){this.$setStrokeColor(t)},enumerable:!0,configurable:!0}),_.prototype.$setStrokeColor=function(t){var e=this.$TextField;return e[25]!=t&&(this.$invalidateTextField(),e[25]=t,A.nativeRender&&this.$nativeDisplayObject.setStrokeColor(t),e[26]=A.toColorString(t),!0)},Object.defineProperty(_.prototype,"stroke",{get:function(){return this.$TextField[27]},set:function(t){this.$setStroke(t)},enumerable:!0,configurable:!0}),_.prototype.$setStroke=function(t){return this.$TextField[27]!=t&&(this.$invalidateTextField(),this.$TextField[27]=t,A.nativeRender&&this.$nativeDisplayObject.setStroke(t),!0)},Object.defineProperty(_.prototype,"maxChars",{get:function(){return this.$TextField[21]},set:function(t){this.$setMaxChars(t)},enumerable:!0,configurable:!0}),_.prototype.$setMaxChars=function(t){return this.$TextField[21]!=t&&(this.$TextField[21]=t,A.nativeRender&&this.$nativeDisplayObject.setMaxChars(t),!0)},Object.defineProperty(_.prototype,"scrollV",{get:function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},set:function(t){(t=Math.max(t,1))!=this.$TextField[28]&&(this.$TextField[28]=t,A.nativeRender&&this.$nativeDisplayObject.setScrollV(t),this.$invalidateTextField())},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"maxScrollV",{get:function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-A.TextFieldUtils.$getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),_.prototype.$setSelection=function(t,e){return!1},_.prototype.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},Object.defineProperty(_.prototype,"numLines",{get:function(){return this.$getLinesArr(),this.$TextField[29]},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"multiline",{get:function(){return this.$TextField[30]},set:function(t){this.$setMultiline(t)},enumerable:!0,configurable:!0}),_.prototype.$setMultiline=function(t){return this.$TextField[30]!=t&&(this.$TextField[30]=t,this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setMultiline(t),!0)},Object.defineProperty(_.prototype,"restrict",{get:function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},set:function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var r=-1;r<t.length&&0!=(r=t.indexOf("^",r))&&0<r&&"\\"==t.charAt(r-1);)r++;0==r?(e[35]=null,e[36]=t.substring(r+1)):0<r?(e[35]=t.substring(0,r),e[36]=t.substring(r+1)):(e[35]=t,e[36]=null)}},enumerable:!0,configurable:!0}),_.prototype.$setWidth=function(t){A.nativeRender&&this.$nativeDisplayObject.setTextFieldWidth(t);var e=this.$TextField;if(isNaN(t)){if(isNaN(e[3]))return!1;e[3]=NaN}else{if(e[3]==t)return!1;e[3]=t}return!((t=+t)<0||(this.$invalidateTextField(),0))},_.prototype.$setHeight=function(t){A.nativeRender&&this.$nativeDisplayObject.setTextFieldHeight(t);var e=this.$TextField;if(isNaN(t)){if(isNaN(e[4]))return!1;e[4]=NaN}else{if(e[4]==t)return!1;e[4]=t}return!((t=+t)<0||(this.$invalidateTextField(),0))},_.prototype.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},_.prototype.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},Object.defineProperty(_.prototype,"border",{get:function(){return this.$TextField[31]},set:function(t){this.$setBorder(t)},enumerable:!0,configurable:!0}),_.prototype.$setBorder=function(t){t=!!t,this.$TextField[31]!=t&&(this.$TextField[31]=t,this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setBorder(t))},Object.defineProperty(_.prototype,"borderColor",{get:function(){return this.$TextField[32]},set:function(t){this.$setBorderColor(t)},enumerable:!0,configurable:!0}),_.prototype.$setBorderColor=function(t){t=+t||0,this.$TextField[32]!=t&&(this.$TextField[32]=t,this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setBorderColor(t))},Object.defineProperty(_.prototype,"background",{get:function(){return this.$TextField[33]},set:function(t){this.$setBackground(t)},enumerable:!0,configurable:!0}),_.prototype.$setBackground=function(t){this.$TextField[33]!=t&&(this.$TextField[33]=t,this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setBackground(t))},Object.defineProperty(_.prototype,"backgroundColor",{get:function(){return this.$TextField[34]},set:function(t){this.$setBackgroundColor(t)},enumerable:!0,configurable:!0}),_.prototype.$setBackgroundColor=function(t){this.$TextField[34]!=t&&(this.$TextField[34]=t,this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setBackgroundColor(t))},_.prototype.fillBackground=function(t){var e=this.$graphicsNode;e&&e.clear();var r,i,n=this.$TextField;if(n[33]||n[31]||t&&0<t.length){e||(e=this.$graphicsNode=new A.sys.GraphicsNode,A.nativeRender?this.$renderNode=this.textNode:((r=new A.sys.GroupNode).addNode(e),r.addNode(this.textNode),this.$renderNode=r));var o=void 0;if(n[33]&&e.beginFill(n[34]).drawRect(0,0,this.$getWidth(),this.$getHeight()),n[31]&&(o=e.lineStyle(1,n[32])).drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1),t&&0<t.length)for(var a=n[2],s=-1,l=t.length,c=0;c<l;c+=4){var u=t[c],h=t[c+1],p=t[c+2],f=t[c+3]||a;(s<0||s!=f)&&(s=f,o=e.lineStyle(2,f,1,A.CapsStyle.NONE)),o.moveTo(u,h),o.lineTo(u+p,h)}}e&&(i=this.$getRenderBounds(),e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height,A.Rectangle.release(i))},_.prototype.setFocus=function(){this.type==A.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},_.prototype.$onRemoveFromStage=function(){r.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==A.TextFieldType.INPUT&&this.inputUtils._removeStageText(),this.textNode&&(this.textNode.clean(),A.nativeRender&&egret_native.NativeDisplayObject.disposeTextData(this))},_.prototype.$onAddToStage=function(t,e){r.prototype.$onAddToStage.call(this,t,e),this.addEvent(),this.$TextField[24]==A.TextFieldType.INPUT&&this.inputUtils._addStageText()},_.prototype.$invalidateTextField=function(){var t,e,r=this;r.$renderDirty=!0,r.$TextField[18]=!0,r.$TextField[38]=!0,A.nativeRender||((t=r.$parent)&&!t.$cacheDirty&&(t.$cacheDirty=!0,t.$cacheDirtyUp()),(e=r.$maskedObject)&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp()))},_.prototype.$getRenderBounds=function(){var t=this.$getContentBounds(),e=A.Rectangle.create();e.copyFrom(t),this.$TextField[31]&&(e.width+=2,e.height+=2);var r=2*this.$TextField[27];return 0<r&&(e.width+=2*r,e.height+=2*r),e.x-=2+r,e.y-=2+r,e.width=Math.ceil(e.width)+4,e.height=Math.ceil(e.height)+4,e},_.prototype.$measureContentBounds=function(t){this.$getLinesArr();var e=0,r=0,r=A.nativeRender?(e=egret_native.nrGetTextFieldWidth(this.$nativeDisplayObject.id),egret_native.nrGetTextFieldHeight(this.$nativeDisplayObject.id)):(e=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],isNaN(this.$TextField[4])?A.TextFieldUtils.$getTextHeight(this):this.$TextField[4]);t.setTo(0,0,e,r)},_.prototype.$updateRenderNode=function(){if(this.$TextField[24]==A.TextFieldType.INPUT){if(this.inputUtils._updateProperties(),this.$isTyping)return void this.fillBackground()}else if(0==this.$TextField[3]){var t=this.$graphicsNode;return void(t&&t.clear())}var e=this.drawText();this.fillBackground(e);var r=this.$getRenderBounds(),i=this.textNode;i.x=r.x,i.y=r.y,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),A.Rectangle.release(r)},Object.defineProperty(_.prototype,"textFlow",{get:function(){return this.textArr},set:function(t){this.isFlow=!0;var e="";null==t&&(t=[]);for(var r=0;r<t.length;r++)e+=t[r].text;this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t),A.nativeRender&&this.$nativeDisplayObject.setTextFlow(t))},enumerable:!0,configurable:!0}),_.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",r=0,i=t.length;r<i;r++)switch(t.charAt(r)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},_.prototype.setMiddleStyle=function(t){this.$TextField[18]=!0,this.$TextField[38]=!0,this.textArr=t,this.$invalidateTextField()},Object.defineProperty(_.prototype,"textWidth",{get:function(){return this.$getLinesArr(),A.nativeRender?egret_native.nrGetTextWidth(this.$nativeDisplayObject.id):this.$TextField[5]},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"textHeight",{get:function(){return this.$getLinesArr(),A.nativeRender?egret_native.nrGetTextHeight(this.$nativeDisplayObject.id):A.TextFieldUtils.$getTextHeight(this)},enumerable:!0,configurable:!0}),_.prototype.appendText=function(t){this.appendElement({text:t})},_.prototype.appendElement=function(t){var e=this.$TextField[13]+t.text;return A.nativeRender?(this.textArr.push(t),this.$TextField[13]=e,this.$TextField[18]=!0,this.$TextField[38]=!0,void this.$nativeDisplayObject.setTextFlow(this.textArr)):void(this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.textArr.push(t),this.setMiddleStyle(this.textArr)))},_.prototype.$getLinesArr=function(){var t=this.$TextField;return A.nativeRender&&t[38]?(egret_native.updateNativeRender(),void(t[38]=!1)):this.$getLinesArr2()},_.prototype.$getLinesArr2=function(){var t=this.$TextField;if(!t[18])return this.linesArr;t[18]=!1;var e=this.textArr;this.linesArr.length=0,t[6]=0,t[5]=0;var r=t[3];if(!isNaN(r)&&0==r)return[{width:t[29]=0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var i,n=this.linesArr,o=0,a=0,s=0,l=0,c=0,u=e.length;c<u;c++){var h=e[c];if(h.text){h.style=h.style||{};for(var p=h.text.toString().split(/(?:\r\n|\r|\n)/),f=0,d=p.length;f<d;f++){null==n[l]&&(i={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},n[l]=i,a=s=o=0),s=t[24]==A.TextFieldType.INPUT?t[0]:Math.max(s,h.style.size||t[0]);var g=!0;if(""==p[f])f==d-1&&(g=!1);else{var m=M(p[f],t,h.style);if(isNaN(r))o+=m,a+=p[f].length,i.elements.push({width:m,text:p[f],style:h.style}),f==d-1&&(g=!1);else if(o+m<=r)i.elements.push({width:m,text:p[f],style:h.style}),o+=m,a+=p[f].length,f==d-1&&(g=!1);else{for(var y=0,v=0,_=p[f],b=void 0,T=(b=t[19]?_.split(N):_.match(/./g)).length,S=0;y<T;y++){var C=!1;if(m=1==(P=b[y].length)&&y<T-1?(L=b[y].charCodeAt(0),I=b[y+1].charCodeAt(0),55296<=L&&L<=56319&&56320==(64512&I)?(P=2,C=!0,M(b[y]+b[y+1],t,h.style)):M(b[y],t,h.style)):M(b[y],t,h.style),0!=o&&r<o+m&&o+y!=0)break;if(r<v+m)for(var $=b[y].match(/./g),E=0,O=$.length;E<O;E++){var P,L,I,w=!1;if(m=1==(P=$[E].length)&&E<O-1?(L=$[E].charCodeAt(0),I=$[E+1].charCodeAt(0),55296<=L&&L<=56319&&56320==(64512&I)?(P=2,w=!0,M($[E]+$[E+1],t,h.style)):M($[E],t,h.style)):M($[E],t,h.style),0<E&&r<o+m)break;v+=m,o+=m,a+=S+=P,w&&E++}else v+=m,o+=m,a+=S+=P;C&&y++}if(0<y){i.elements.push({width:v,text:_.substring(0,S),style:h.style});for(var D=_.substring(S),R=void 0,x=D.length,R=0;R<x&&" "==D.charAt(R);R++);p[f]=D.substring(R)}""!=p[f]&&(f--,g=!1)}}g&&(a++,i.hasNextLine=!0),f<p.length-1&&(i.width=o,i.height=s,i.charNum=a,t[5]=Math.max(t[5],o),t[6]+=s,l++)}c==e.length-1&&i&&(i.width=o,i.height=s,i.charNum=a,t[5]=Math.max(t[5],o),t[6]+=s)}else i&&(i.width=o,i.height=s,i.charNum=a,t[5]=Math.max(t[5],o),t[6]+=s)}return t[29]=n.length,n},_.prototype.$setIsTyping=function(t){this.$isTyping=t,this.$invalidateTextField(),A.nativeRender&&this.$nativeDisplayObject.setIsTyping(t)},_.prototype.drawText=function(){var t=this.textNode,e=this.$TextField;t.bold=e[15],t.fontFamily=e[8]||_.default_fontFamily,t.italic=e[16],t.size=e[0],t.stroke=e[27],t.strokeColor=e[25],t.textColor=e[2];var r=this.$getLinesArr();if(0==e[5])return[];var i=isNaN(e[3])?e[5]:e[3],n=A.TextFieldUtils.$getTextHeight(this),o=0,a=A.TextFieldUtils.$getStartLine(this),s=e[4];!isNaN(s)&&n<s&&(o+=A.TextFieldUtils.$getValign(this)*(s-n)),o=Math.round(o);for(var l=A.TextFieldUtils.$getHalign(this),c=0,u=[],h=a,p=e[29];h<p;h++){var f=r[h],d=f.height;if(o+=d/2,h!=a){if(e[24]==A.TextFieldType.INPUT&&!e[30])break;if(!isNaN(s)&&s<o)break}c=Math.round((i-f.width)*l);for(var g=0,m=f.elements.length;g<m;g++){var y=f.elements[g],v=y.style.size||e[0];t.drawText(c,o+(d-v)/2,y.text,y.style),y.style.underline&&u.push(c,o+d/2,y.width,y.style.textColor),c+=y.width}o+=d/2+e[1]}return u},_.prototype.addEvent=function(){this.addEventListener(A.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},_.prototype.removeEvent=function(){this.removeEventListener(A.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},_.prototype.onTapHandler=function(t){var e,r,i;this.$TextField[24]!=A.TextFieldType.INPUT&&(null==(e=A.TextFieldUtils.$getTextElement(this,t.localX,t.localY))||(r=e.style)&&r.href&&(r.href.match(/^event:/)?(i=r.href.match(/^event:/)[0],A.TextEvent.dispatchTextEvent(this,A.TextEvent.LINK,r.href.substring(i.length))):open(r.href,r.target||"_blank")))},_.default_fontFamily="Arial",_.default_size=30,_.default_textColor=16777215,_);function _(){var t=r.call(this)||this;t.$inputEnabled=!1,t.inputUtils=null,t.$graphicsNode=null,t.isFlow=!1,t.textArr=[],t.linesArr=[],t.$isTyping=!1;var e=new A.sys.TextNode;return e.fontFamily=_.default_fontFamily,t.textNode=e,t.$renderNode=e,t.$TextField={0:_.default_size,1:0,2:_.default_textColor,3:NaN,4:NaN,5:0,6:0,7:0,8:_.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:A.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:A.TextFieldInputType.TEXT,38:!1},t}A.TextField=s,__reflect(s.prototype,"egret.TextField")}(egret=egret||{}),function(t){var e=(r.TEXT="text",r.TEL="tel",r.PASSWORD="password",r);function r(){}t.TextFieldInputType=e,__reflect(e.prototype,"egret.TextFieldInputType")}(egret=egret||{}),function(t){var e=(r.DYNAMIC="dynamic",r.INPUT="input",r);function r(){}t.TextFieldType=e,__reflect(e.prototype,"egret.TextFieldType")}(egret=egret||{}),function(n){var t=(g.$getStartLine=function(t){var e=t.$TextField,r=g.$getTextHeight(t),i=0,n=e[4];return isNaN(n)||(r<n||n<r&&(i=Math.max(e[28]-1,0),i=Math.min(e[29]-1,i)),e[30]||(i=Math.max(e[28]-1,0),0<e[29]&&(i=Math.min(e[29]-1,i)))),i},g.$getHalign=function(t){var e=t.$getLinesArr2(),r=0;return t.$TextField[9]==n.HorizontalAlign.CENTER?r=.5:t.$TextField[9]==n.HorizontalAlign.RIGHT&&(r=1),t.$TextField[24]==n.TextFieldType.INPUT&&!t.$TextField[30]&&1<e.length&&(r=0),r},g.$getTextHeight=function(t){return n.TextFieldType.INPUT!=t.$TextField[24]||t.$TextField[30]?t.$TextField[6]+(t.$TextField[29]-1)*t.$TextField[1]:t.$TextField[0]},g.$getValign=function(t){var e=g.$getTextHeight(t),r=t.$TextField[4];if(!isNaN(r)&&e<r){var i=0;return t.$TextField[10]==n.VerticalAlign.MIDDLE?i=.5:t.$TextField[10]==n.VerticalAlign.BOTTOM&&(i=1),i}return 0},g.$getTextElement=function(t,e,r){var i=g.$getHit(t,e,r),n=t.$getLinesArr2();return i&&n[i.lineIndex]&&n[i.lineIndex].elements[i.textElementIndex]?n[i.lineIndex].elements[i.textElementIndex]:null},g.$getHit=function(t,e,r){var i=t.$getLinesArr2();if(0==t.$TextField[3])return null;var n=0,o=g.$getTextHeight(t),a=0,s=t.$TextField[4];!isNaN(s)&&o<s&&0!=(a=g.$getValign(t)*(s-o))&&(r-=a);for(var l=0,c=g.$getStartLine(t);c<i.length;c++){var u=i[c];if(l+u.height>=r){l<r&&(n=c+1);break}if((l+=u.height)+t.$TextField[1]>r)return null;l+=t.$TextField[1]}if(0==n)return null;var h=i[n-1],p=t.$TextField[3];isNaN(p)&&(p=t.textWidth),e-=g.$getHalign(t)*(p-h.width);for(var f=0,c=0;c<h.elements.length;c++){var d=h.elements[c];if(f+d.width<=e)f+=d.width;else if(f<e)return{lineIndex:n-1,textElementIndex:c}}return null},g.$getScrollNum=function(t){var e,r,i,n=1;return t.$TextField[30]&&(e=t.height,(r=t.size)/2<e-(r+(i=t.lineSpacing))*(n=Math.floor(e/(r+i)))&&n++),n},g);function g(){}n.TextFieldUtils=t,__reflect(t.prototype,"egret.TextFieldUtils")}(egret=egret||{}),function(t){t.sys||(t.sys={})}(egret=egret||{}),function(t){var e=(r.TOP="top",r.BOTTOM="bottom",r.MIDDLE="middle",r.JUSTIFY="justify",r.CONTENT_JUSTIFY="contentJustify",r);function r(){}t.VerticalAlign=e,__reflect(e.prototype,"egret.VerticalAlign")}(egret=egret||{}),function(t){var e=(r.encode=function(t){for(var e=new Uint8Array(t),r=e.length,i="",n=0;n<r;n+=3)i+=chars[e[n]>>2],i+=chars[(3&e[n])<<4|e[n+1]>>4],i+=chars[(15&e[n+1])<<2|e[n+2]>>6],i+=chars[63&e[n+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},r.decode=function(t){var e,r,i,n,o=.75*t.length,a=t.length,s=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);for(var l=new ArrayBuffer(o),c=new Uint8Array(l),u=0;u<a;u+=4)e=lookup[t.charCodeAt(u)],r=lookup[t.charCodeAt(u+1)],i=lookup[t.charCodeAt(u+2)],n=lookup[t.charCodeAt(u+3)],c[s++]=e<<2|r>>4,c[s++]=(15&r)<<4|i>>2,c[s++]=(3&i)<<6|63&n;return l},r);function r(){}t.Base64Util=e,__reflect(e.prototype,"egret.Base64Util")}(egret=egret||{});for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0,egret,egret,egret,egret,egret,egret;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;!function(a){var o=(t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t);function t(){}a.Endian=o,__reflect(o.prototype,"egret.Endian");var e=(Object.defineProperty(r.prototype,"endian",{get:function(){return 0==this.$endian?o.LITTLE_ENDIAN:o.BIG_ENDIAN},set:function(t){this.$endian=t==o.LITTLE_ENDIAN?0:1},enumerable:!0,configurable:!0}),r.prototype.setArrayBuffer=function(t){},Object.defineProperty(r.prototype,"readAvailable",{get:function(){return this.write_position-this._position},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(t){var e,r=t.byteLength,i=new Uint8Array(t),n=this.bufferExtSize;(e=0==n?new Uint8Array(r):new Uint8Array((1+(r/n|0))*n)).set(i),this.write_position=r,this._bytes=e,this.data=new DataView(e.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bytes",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataView",{get:function(){return this.data},set:function(t){this.buffer=t.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this._position},set:function(t){(this._position=t)>this.write_position&&(this.write_position=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t,this.data.byteLength>t&&(this._position=t),this._validateBuffer(t)},enumerable:!0,configurable:!0}),r.prototype._validateBuffer=function(t){var e,r;this.data.byteLength<t&&(r=void 0,(r=0==(e=this.bufferExtSize)?new Uint8Array(t):new Uint8Array((1+(t/e>>0))*e)).set(this._bytes),this._bytes=r,this.data=new DataView(r.buffer))},Object.defineProperty(r.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),r.prototype.clear=function(){var t=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(t),this._bytes=new Uint8Array(t),this._position=0,this.write_position=0},r.prototype.readBoolean=function(){return this.validate(1)?!!this._bytes[this.position++]:void 0},r.prototype.readByte=function(){return this.validate(1)?this.data.getInt8(this.position++):void 0},r.prototype.readBytes=function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),t){var i=this._position,n=this.write_position-i;if(n<0)return void a.$error(1025);if(0==r)r=n;else if(n<r)return void a.$error(1025);var o=t._position;t._position=0,t.validateBuffer(e+r),t._position=o,t._bytes.set(this._bytes.subarray(i,i+r),e),this.position+=r}},r.prototype.readDouble=function(){if(this.validate(8)){var t=this.data.getFloat64(this._position,0==this.$endian);return this.position+=8,t}},r.prototype.readFloat=function(){if(this.validate(4)){var t=this.data.getFloat32(this._position,0==this.$endian);return this.position+=4,t}},r.prototype.readInt=function(){if(this.validate(4)){var t=this.data.getInt32(this._position,0==this.$endian);return this.position+=4,t}},r.prototype.readShort=function(){if(this.validate(2)){var t=this.data.getInt16(this._position,0==this.$endian);return this.position+=2,t}},r.prototype.readUnsignedByte=function(){return this.validate(1)?this._bytes[this.position++]:void 0},r.prototype.readUnsignedInt=function(){if(this.validate(4)){var t=this.data.getUint32(this._position,0==this.$endian);return this.position+=4,t}},r.prototype.readUnsignedShort=function(){if(this.validate(2)){var t=this.data.getUint16(this._position,0==this.$endian);return this.position+=2,t}},r.prototype.readUTF=function(){var t=this.readUnsignedShort();return 0<t?this.readUTFBytes(t):""},r.prototype.readUTFBytes=function(t){if(this.validate(t)){var e=this.data,r=new Uint8Array(e.buffer,e.byteOffset+this._position,t);return this.position+=t,this.decodeUTF8(r)}},r.prototype.writeBoolean=function(t){this.validateBuffer(1),this._bytes[this.position++]=+t},r.prototype.writeByte=function(t){this.validateBuffer(1),this._bytes[this.position++]=255&t},r.prototype.writeBytes=function(t,e,r){var i;void 0===e&&(e=0),void 0===r&&(r=0),e<0||r<0||0<(i=0==r?t.length-e:Math.min(t.length-e,r))&&(this.validateBuffer(i),this._bytes.set(t._bytes.subarray(e,e+i),this._position),this.position=this._position+i)},r.prototype.writeDouble=function(t){this.validateBuffer(8),this.data.setFloat64(this._position,t,0==this.$endian),this.position+=8},r.prototype.writeFloat=function(t){this.validateBuffer(4),this.data.setFloat32(this._position,t,0==this.$endian),this.position+=4},r.prototype.writeInt=function(t){this.validateBuffer(4),this.data.setInt32(this._position,t,0==this.$endian),this.position+=4},r.prototype.writeShort=function(t){this.validateBuffer(2),this.data.setInt16(this._position,t,0==this.$endian),this.position+=2},r.prototype.writeUnsignedInt=function(t){this.validateBuffer(4),this.data.setUint32(this._position,t,0==this.$endian),this.position+=4},r.prototype.writeUnsignedShort=function(t){this.validateBuffer(2),this.data.setUint16(this._position,t,0==this.$endian),this.position+=2},r.prototype.writeUTF=function(t){var e=this.encodeUTF8(t),r=e.length;this.validateBuffer(2+r),this.data.setUint16(this._position,r,0==this.$endian),this.position+=2,this._writeUint8Array(e,!1)},r.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},r.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},r.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0);var r=this._position,i=r+t.length;e&&this.validateBuffer(i),this.bytes.set(t,r),this.position=i},r.prototype.validate=function(t){var e=this._bytes.length;return 0<e&&this._position+t<=e||void a.$error(1025)},r.prototype.validateBuffer=function(t){this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this._validateBuffer(t)},r.prototype.encodeUTF8=function(t){for(var e=0,r=this.stringToCodePoints(t),i=[];r.length>e;){var n=r[e++];if(this.inRange(n,55296,57343))this.encoderError(n);else if(this.inRange(n,0,127))i.push(n);else{var o=void 0,a=void 0;for(this.inRange(n,128,2047)?(o=1,a=192):this.inRange(n,2048,65535)?(o=2,a=224):this.inRange(n,65536,1114111)&&(o=3,a=240),i.push(this.div(n,Math.pow(64,o))+a);0<o;){var s=this.div(n,Math.pow(64,o-1));i.push(128+s%64),--o}}}return new Uint8Array(i)},r.prototype.decodeUTF8=function(t){for(var e=0,r="",i=0,n=0,o=0,a=0;t.length>e;){var s,l,c,u=t[e++];null!==(c=u==this.EOF_byte?0!=n?this.decoderError(!1):this.EOF_code_point:0==n?this.inRange(u,0,127)?u:(this.inRange(u,194,223)?(n=1,a=128,i=u-192):this.inRange(u,224,239)?(n=2,a=2048,i=u-224):this.inRange(u,240,244)?(n=3,a=65536,i=u-240):this.decoderError(!1),i*=Math.pow(64,n),null):this.inRange(u,128,191)?(o+=1,i+=(u-128)*Math.pow(64,n-o),o!==n?null:(s=i,l=a,a=o=n=i=0,this.inRange(s,l,1114111)&&!this.inRange(s,55296,57343)?s:this.decoderError(!1,u))):(a=o=n=i=0,e--,this.decoderError(!1,u)))&&c!==this.EOF_code_point&&(c<=65535?0<c&&(r+=String.fromCharCode(c)):(c-=65536,r+=String.fromCharCode(55296+(c>>10&1023)),r+=String.fromCharCode(56320+(1023&c))))}return r},r.prototype.encoderError=function(t){a.$error(1026,t)},r.prototype.decoderError=function(t,e){return t&&a.$error(1027),e||65533},r.prototype.inRange=function(t,e,r){return e<=t&&t<=r},r.prototype.div=function(t,e){return Math.floor(t/e)},r.prototype.stringToCodePoints=function(t){for(var e=[],r=0,i=t.length;r<t.length;){var n,o,a,s=t.charCodeAt(r);this.inRange(s,55296,57343)?this.inRange(s,56320,57343)||r==i-1?e.push(65533):(n=t.charCodeAt(r+1),this.inRange(n,56320,57343)?(o=1023&s,a=1023&n,r+=1,e.push(65536+(o<<10)+a)):e.push(65533)):e.push(s),r+=1}return e},r);function r(t,e){void 0===e&&(e=0),this.bufferExtSize=0,this.EOF_byte=-1,this.EOF_code_point=-1,e<0&&(e=0),this.bufferExtSize=e;var r,i,n=0;t?(r=void 0,t instanceof Uint8Array?n=(r=t).length:(n=t.byteLength,r=new Uint8Array(t)),(i=0==e?new Uint8Array(n):new Uint8Array((1+(n/e|0))*e)).set(r)):i=new Uint8Array(e),this.write_position=n,this._position=0,this._bytes=i,this.data=new DataView(i.buffer),this.endian=o.BIG_ENDIAN}a.ByteArray=e,__reflect(e.prototype,"egret.ByteArray")}(egret=egret||{}),function(h){var e,t=(e=h.DisplayObjectContainer,__extends(r,e),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(9)},Object.defineProperty(r.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),r.prototype.$hitTest=function(t,e){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),i=r.a*t+r.c*e+r.tx,n=r.b*t+r.d*e+r.ty,o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(i,n))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null;for(var a=this.$children,s=!1,l=null,c=a.length-1;0<=c;c--){var u=a[c];if(!u.$maskedObject&&(l=u.$hitTest(t,e))){if(s=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:s?this:l=(l=h.DisplayObject.prototype.$hitTest.call(this,t,e))&&this.$graphics.$hitTest(t,e)},r.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},r.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},r);function r(){var t=e.call(this)||this;return t.$graphics=new h.Graphics,t.$graphics.$setTarget(t),t}h.Sprite=t,__reflect(t.prototype,"egret.Sprite")}(egret=egret||{}),(egret||(egret={})).registerClass=function(t,e,r){var i=t.prototype;Object.defineProperty(i,"__class__",{value:e,enumerable:!1,writable:!0});var n=[e];r&&(n=n.concat(r));var o=i.__types__;if(i.__types__)for(var a=o.length,s=0;s<a;s++){var l=o[s];-1==n.indexOf(l)&&n.push(l)}Object.defineProperty(i,"__types__",{value:n,enumerable:!1,writable:!0})},(egret=egret||{}).BitmapFillMode={REPEAT:"repeat",SCALE:"scale",CLIP:"clip"},function(t){var e=(Object.defineProperty(r,"logLevel",{set:function(t){},enumerable:!0,configurable:!0}),r.ALL="all",r.DEBUG="debug",r.INFO="info",r.WARN="warn",r.ERROR="error",r.OFF="off",r);function r(){}t.Logger=e,__reflect(e.prototype,"egret.Logger")}(egret=egret||{}),function(t){var e=(n.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},n.sin=function(t){var e=Math.floor(t),r=e+1,i=n.sinInt(e);return e==t?i:(t-e)*n.sinInt(r)+(r-t)*i},n.sinInt=function(t){return(t%=360)<0&&(t+=360),egret_sin_map[t]},n.cos=function(t){var e=Math.floor(t),r=e+1,i=n.cosInt(e);return e==t?i:(t-e)*n.cosInt(r)+(r-t)*i},n.cosInt=function(t){return(t%=360)<0&&(t+=360),egret_cos_map[t]},n.convertStringToHashCode=function(t){if(0===t.length)return 0;for(var e=0,r=0,i=t.length;r<i;++r)e=(e<<5)-e+t.charCodeAt(r),e|=0;return e},n);function n(){}t.NumberUtils=e,__reflect(e.prototype,"egret.NumberUtils")}(egret=egret||{});for(var egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret,egret;NumberUtils_i<360;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);egret_sin_map[90]=1,egret_cos_map[90]=0,egret_sin_map[180]=0,egret_cos_map[180]=-1,egret_sin_map[270]=-1,egret_cos_map[270]=0,Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);function e(){}function r(){return n.apply(this instanceof e&&t?this:t,i.concat(Array.prototype.slice.call(arguments)))}var i=Array.prototype.slice.call(arguments,1),n=this;return e.prototype=this.prototype,r.prototype=new e,r}),function(r){var i,t=(i=r.EventDispatcher,__extends(e,i),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){t<1&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.stop(),this._currentCount=0},e.prototype.start=function(){this._running||(this.lastCount=this.updateInterval,this.lastTimeStamp=r.getTimer(),r.ticker.$startTick(this.$update,this),this._running=!0)},e.prototype.stop=function(){this._running&&(r.stopTick(this.$update,this),this._running=!1)},e.prototype.$update=function(t){if(t-this.lastTimeStamp>=this._delay)this.lastCount=this.updateInterval;else{if(this.lastCount-=1e3,0<this.lastCount)return!1;this.lastCount+=this.updateInterval}this.lastTimeStamp=t,this._currentCount++;var e=0<this.repeatCount&&this._currentCount>=this.repeatCount;return(0==this.repeatCount||this._currentCount<=this.repeatCount)&&r.TimerEvent.dispatchTimerEvent(this,r.TimerEvent.TIMER),e&&(this.stop(),r.TimerEvent.dispatchTimerEvent(this,r.TimerEvent.TIMER_COMPLETE)),!1},e);function e(t,e){void 0===e&&(e=0);var r=i.call(this)||this;return r._delay=0,r._currentCount=0,r._running=!1,r.updateInterval=1e3,r.lastCount=1e3,r.lastTimeStamp=0,r.delay=t,r.repeatCount=0|+e,r}r.Timer=t,__reflect(t.prototype,"egret.Timer")}(egret=egret||{}),egret=egret||{},function(n){n.$callLaterFunctionList=[],n.$callLaterThisList=[],n.$callLaterArgsList=[],n.callLater=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];n.$callLaterFunctionList.push(t),n.$callLaterThisList.push(e),n.$callLaterArgsList.push(r)},n.$callAsyncFunctionList=[],n.$callAsyncThisList=[],n.$callAsyncArgsList=[],n.$callAsync=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];n.$callAsyncFunctionList.push(t),n.$callAsyncThisList.push(e),n.$callAsyncArgsList.push(r)}}(egret=egret||{}),function(t){t.superSetter=function(t,e,r){for(var i=[],n=3;n<arguments.length;n++)i[n-3]=arguments[n];var o,a=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}});var s=(o=t.__sets__)[r];if(s)return s.apply(e,i);var l=Object.getPrototypeOf(a);if(null!=l){for(;!l.hasOwnProperty(r);)if(null==(l=Object.getPrototypeOf(l)))return;s=Object.getOwnPropertyDescriptor(l,r).set,(o[r]=s).apply(e,i)}},t.superGetter=function(t,e,r){var i,n=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}});var o=(i=t.__gets__)[r];if(o)return o.call(e);var a=Object.getPrototypeOf(n);if(null!=a){for(;!a.hasOwnProperty(r);)if(null==(a=Object.getPrototypeOf(a)))return;return o=Object.getOwnPropertyDescriptor(a,r).get,(i[r]=o).call(e)}}}(egret=egret||{}),function(t){var o={};t.getDefinitionByName=function(t){if(!t)return null;var e=o[t];if(e)return e;var r=t.split("."),i=r.length;e=global;for(var n=0;n<i;n++){if(!(e=e[r[n]]))return null}return o[t]=e}}(egret=egret||{}),egret=egret||{},(egret||(egret={})).getQualifiedClassName=function(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var r=t.prototype?t.prototype:Object.getPrototypeOf(t);if(r.hasOwnProperty("__class__"))return r.__class__;var i=r.constructor.toString().trim(),n=i.indexOf("("),o=i.substring(9,n);return Object.defineProperty(r,"__class__",{value:o,enumerable:!1,writable:!0}),o},function(n){n.getQualifiedSuperclassName=function(t){if(!t||"object"!=typeof t&&!t.prototype)return null;var e=t.prototype?t.prototype:Object.getPrototypeOf(t),r=Object.getPrototypeOf(e);if(!r)return null;var i=n.getQualifiedClassName(r.constructor);return i||null}}(egret=egret||{}),function(t){t.getTimer=function(){return Date.now()-t.sys.$START_TIME}}(egret=egret||{}),function(e){e.hasDefinition=function(t){return!!e.getDefinitionByName(t)}}(egret=egret||{}),(egret||(egret={})).is=function(t,e){if(!t||"object"!=typeof t)return!1;var r=Object.getPrototypeOf(t),i=r?r.__types__:null;return!!i&&-1!==i.indexOf(e)},function(r){r.startTick=function(t,e){r.ticker.$startTick(t,e)}}(egret=egret||{}),function(r){r.stopTick=function(t,e){r.ticker.$stopTick(t,e)}}(egret=egret||{}),(egret||(egret={})).toColorString=function(t){t<0&&(t=0),16777215<t&&(t=16777215);for(var e=t.toString(16).toUpperCase();6<e.length;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e};var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r},__awaiter=this&&this.__awaiter||function(o,a,s,l){return new(s=s||Promise)(function(t,e){function r(t){try{n(l.next(t))}catch(t){e(t)}}function i(t){try{n(l.throw(t))}catch(t){e(t)}}function n(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(r,i)}n((l=l.apply(o,a||[])).next())})},__generator=this&&this.__generator||function(r,i){function t(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(a=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=i.call(r,s)}catch(t){e=[6,t],o=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}var n,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr;!function(a){var e,t=(e=eui.Component,__extends(r,e),r.prototype.onCreationComplete=function(t){this.initComponent(),this.isSkinLoaded=!0,this.initListener(),this.initData(),this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.onCreationComplete,this)},r.prototype.initUnpackRes=function(t){var e=t.numChildren;t instanceof eui.Component&&t.skin instanceof eui.Skin&&this.initStatesUnpackRes(t.skin,t);for(var r=0;r<e;r++){var i,n,o=t.getChildAt(r);o instanceof egret.DisplayObjectContainer?this.initUnpackRes(o):o instanceof eui.Image&&("string"!=typeof(i=o.source)||""==i||(n=RES.getResourceInfo(i))&&"unpack"==n.url.substr(0,6)&&this.addUnpackRef(i,o))}},r.prototype.initStatesUnpackRes=function(t,e){for(var r=t.currentState,i=0,n=t.states;i<n.length;i++){var o=n[i];if(o.name!=r)for(var a=0,s=o.overrides;a<s.length;a++){var l,c,u,h,p=s[a];p instanceof eui.SetProperty?"source"==p.name&&"string"==typeof(c=p.value)&&""!=c&&(!(u=RES.getResourceInfo(c))||"unpack"!=u.url.substr(0,6)||(l=e[p.target])instanceof eui.Image&&this.addUnpackRef(c,l)):p instanceof eui.AddItems&&(h=(h=e[p.target])||t[p.target])instanceof eui.Image&&"string"==typeof(c=h.source)&&""!=c&&(u=RES.getResourceInfo(c))&&"unpack"==u.url.substr(0,6)&&this.addUnpackRef(c,h)}}},r.prototype.addUnpackRef=function(t,e){var r=this._unpackDic[t];r?r.push(e):this._unpackDic[t]=[e]},r.prototype.addedToStage=function(t){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this)},r.prototype.removeFromStage=function(t){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this)},r.prototype.initComponent=function(){},r.prototype.initData=function(){this.onStageResize();var t=this._unpackDic;for(var e in t){if(!RES.getRes(e)){var r=t[e];if(r)for(var i=0,n=r;i<n.length;i++){var o=n[i];o.source=null,o.source=e}}a.LoaderManager.instance.addGroupRef(e)}},Object.defineProperty(r.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),r.prototype.initListener=function(){},r.prototype.onStageResize=function(){},r.prototype.registerNotify=function(t,e,r){void 0===r&&(r=null),r=r||this,this._notifyDic[t]={callBack:e,thisObject:r},a.NotifyManager.registerNotify(t,e,r)},r.prototype.unRegisterNotify=function(t,e,r){void 0===r&&(r=null),r=r||this;var i=this._notifyDic[t];i&&i.callback==e&&i.thisObject==r&&delete this._notifyDic[t],a.NotifyManager.unRegisterNotify(t,e,r)},r.prototype.unRegisterAllNotify=function(){var t,e=this._notifyDic;for(var r in e)(t=e[r])&&a.NotifyManager.unRegisterNotify(r,t.callBack,t.thisObject),delete e[r];this._notifyDic={}},r.prototype.dispatch=function(t,e){void 0===e&&(e=null),a.NotifyManager.sendNotification(t,e)},r.prototype.addEvent=function(t,e,r,i){void 0===i&&(i=null),i=i||this;var n={};n.target=t,n.type=e,n.callBack=r,n.thisObject=i,t&&(t.addEventListener(e,r,i),this._eventDic[t.hashCode+e]=n)},r.prototype.addClickEvent=function(t,e,r){void 0===r&&(r=null);var i,n,o=this,a=o._eventDic,s=1,l=1;r=r||o,t instanceof eui.Group&&(t.touchChildren=!1),t instanceof egret.DisplayObject&&(0==t.anchorOffsetX&&0==t.anchorOffsetY&&(i=t.width/2,n=t.height/2,t.anchorOffsetX=i,t.anchorOffsetY=n,t.x+=i,t.y+=n),s=t.scaleX,l=t.scaleY);var c={};c.target=t,c.scaleX=s,c.scaleY=l,c.type=egret.TouchEvent.TOUCH_BEGIN,c.thisObject=r,c.callFunc=o.onTouchBegin,c.thisCall=o,t&&(t.addEventListener(c.type,o.onTouchBegin,o),a[t.hashCode+c.type]=c);var u={};u.target=t,u.scaleX=s,u.scaleY=l,u.type=egret.TouchEvent.TOUCH_END,u.callBack=e,u.thisObject=r,u.callFunc=o.onTouchEnd,u.thisCall=o,t&&(t.addEventListener(u.type,o.onTouchEnd,o),a[t.hashCode+u.type]=u);var h={};h.target=t,h.scaleX=s,h.scaleY=l,h.type=egret.TouchEvent.TOUCH_TAP,h.callBack=e,h.thisObject=r,h.callFunc=o.onTouchEnd,h.thisCall=o,t&&(t.addEventListener(h.type,o.onTouchEnd,o),a[t.hashCode+h.type]=h);var p={};p.target=t,p.scaleX=s,p.scaleY=l,p.type=egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,p.thisObject=r,p.callFunc=o.onTouchReleaseOutSide,p.thisCall=o,t&&(t.addEventListener(p.type,o.onTouchReleaseOutSide,o),a[t.hashCode+p.type]=p);var f={};f.target=t,f.scaleX=s,f.scaleY=l,f.type=egret.TouchEvent.TOUCH_CANCEL,f.thisObject=r,f.callFunc=o.onTouchReleaseOutSide,f.thisCall=o,t&&(t.addEventListener(f.type,o.onTouchReleaseOutSide,o),a[t.hashCode+f.type]=p)},r.prototype.onTouchBegin=function(t){var e=t.target,r=e.hashCode,i=this._eventDic[r+t.type];this._touchBeginTaret=e,egret.Tween.removeTweens(e),egret.Tween.get(e).to({scaleX:.9*i.scaleX,scaleY:.9*i.scaleY},50),this.loadAndPlayEffect("SOUND_DIANJI")},r.prototype.onTouchEnd=function(t){var e,r,i,n=t.target,o=this._eventDic;this._touchBeginTaret==n&&(this._touchBeginTaret=null,r=(e=o[n.hashCode+t.type]).scaleX,i=e.scaleY,egret.Tween.get(n).to({scaleX:r,scaleY:i},50).call(function(){for(var t in o){var e=o[t];e.target==n&&e.type==egret.TouchEvent.TOUCH_END&&e.callBack.call(e.thisObject,n)}},this))},r.prototype.onTouchReleaseOutSide=function(t){var e;this._touchBeginTaret==t.target&&(this._touchBeginTaret=null,(e=this._eventDic[t.target.hashCode+t.type])&&(t.target.scaleX=e.scaleX,t.target.scaleY=e.scaleY))},r.prototype.removeAllEvent=function(){var t,e,r=this._eventDic;for(var i in r)null!=(e=(t=r[i]).target)&&(t.type!=egret.TouchEvent.TOUCH_TAP||e instanceof egret.Stage||(null!=t.scaleX&&(e.scaleX=t.scaleX),null!=t.scaleY&&(e.scaleY=t.scaleY)),e.removeEventListener(t.type,t.callBack,t.thisObject),e.removeEventListener(t.type,t.callFunc,t.thisCall)),delete r[i];this._eventDic={}},r.prototype.updateTitle=function(t,e){t||0<e?a.NotifyManager.sendNotification(a.NotifyConstLogin.UPDATE_MODULE_TITLE,{title:t,ruleId:e}):t||null!=e||a.NotifyManager.sendNotification(a.NotifyConstLogin.UPDATE_MODULE_TITLE,{ruleId:0})},r.prototype.loadAndPlayEffect=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1),a.SoundManager.getInstance().loadAndPlayEffect(t,e,r)},r.prototype.stopSoundEffect=function(t){a.SoundManager.getInstance().stopSoundEffect(t)},r.prototype.addUnpackRes=function(t){var e=this._unpackDynamic;if("string"==typeof t)e[t]||(e[t]=!0,a.LoaderManager.instance.addGroupRef(t));else for(var r=0,i=t;r<i.length;r++){var n=i[r];e[n]||(e[n]=!0,a.LoaderManager.instance.addGroupRef(n))}},r.prototype.destoryUnpackRes=function(){for(var t in this._unpackDic)a.LoaderManager.instance.destoryGroup(t);for(var t in this._unpackDynamic)a.LoaderManager.instance.destoryGroup(t);this._unpackDynamic={}},r.prototype.dispose=function(t){void 0===t&&(t=!1);var e=this;e.destoryUnpackRes(),e.removeAllEvent(),e.unRegisterAllNotify(),e._touchBeginTaret=null,e._data=null,e.parent&&e.parent.removeChild(e),a.ModuleManager.openPanelFromBattle&&(a.ModuleManager.openPanelFromBattle=!1)},r);function r(){var t=e.call(this)||this;return t._eventDic={},t._notifyDic={},t._unpackDic={},t._unpackDynamic={},t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.onCreationComplete,t),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addedToStage,t),t}a.UIComponent=t,__reflect(t.prototype,"qmr.UIComponent")}(qmr=qmr||{}),function(i){var e,t=(e=i.UIComponent,__extends(r,e),Object.defineProperty(r.prototype,"groupName",{get:function(){return this._groupName},set:function(t){this._groupName=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"qmrSkinName",{set:function(t){this._qmrSkinName=t},enumerable:!0,configurable:!0}),r.prototype.initComponent=function(){e.prototype.initComponent.call(this),this.resetPos(),this.initUnpackRes(this)},r.prototype.updateGuide=function(){},r.prototype.resetPos=function(){(this.isPopupEffect||this.isCenter)&&(this.anchorOffsetX=this.width>>1,this.anchorOffsetY=(this.height>>1)+this.offsetY,this.x=i.StageUtil.stageWidth>>1,this.y=i.StageUtil.stageHeight>>1)},r.prototype.initListener=function(){this.numChildren,this.registerNotify(i.StageUtil.STAGE_RESIZE,this.onStageResize,this),e.prototype.initListener.call(this)},r.prototype.getEffective=function(t,e){return!(this._groupName&&t-this.useTime>=e)},r.prototype.onPageBgCloseView=function(){this.hide()},r.prototype.addedToStage=function(t){e.prototype.addedToStage.call(this,t),egret.callLater(this.popupEffect,this)},r.prototype.onStageResize=function(t){var e=this;e.isPopupEffect||e.isCenter||(e.width=i.StageUtil.stageWidth,1400<i.StageUtil.stageHeight&&e.needAdaptStatusBar?(e.height=i.StageUtil.stageHeight-50,e.y=50):(e.height=i.StageUtil.stageHeight,e.y=0)),e.resetPos(),e.layout(),e.maskSprite&&e.maskSprite.onStageResize()},r.prototype.show=function(t){var e=this;e.data=t,e.isSkinLoaded?(e.initListener(),egret.callLater(e.initData,e)):e._qmrSkinName&&(e.skinName=e._qmrSkinName),e.isShow=!0},Object.defineProperty(r.prototype,"isShow",{get:function(){return this._isShow},set:function(t){this._isShow=t},enumerable:!0,configurable:!0}),r.prototype.layout=function(){},r.prototype.getComponentGlobalPoint=function(t){var e=this[t];return e?e.parent?e.parent.localToGlobal(e.x,e.y):e.localToGlobal(e.x,e.y):{x:0,y:0}},r.prototype.hide=function(){this.isPopupEffect?this.closeEffect():i.ModuleManager.hideModule(this)},r.prototype.popupEffect=function(){var t,e,r=this;r.isPopupEffect&&(r.alpha=.2,r.scaleX=.2,r.scaleY=.2,e=r.openPos?(t=r.openPos.x,r.openPos.y):(t=i.StageUtil.stageWidth>>1,i.StageUtil.stageHeight>>1),egret.Tween.get(r).to({scaleX:1,scaleY:1,alpha:1,x:t,y:e},200,egret.Ease.backOut).call(r.doOpenOver,r))},r.prototype.closeEffect=function(){var t=0,e=0,e=this._closePos?(t=this._closePos.x,this._closePos.y):(t=i.StageUtil.stageWidth>>1,i.StageUtil.stageHeight>>1);egret.Tween.get(this).to({scaleX:.3,scaleY:.3,alpha:0,x:t,y:e},180,egret.Ease.cubicOut).call(this.doCloseOver,this)},r.prototype.doOpenOver=function(){},r.prototype.doCloseOver=function(){i.ModuleManager.hideModule(this)},Object.defineProperty(r.prototype,"closePos",{get:function(){return this._closePos},set:function(t){this._closePos=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"openPos",{get:function(){return this._openPos},set:function(t){this._openPos=t},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){e.prototype.dispose.call(this),this.isShow=!1,this.title&&this.updateTitle("",0);var t=this.groupName;null!=t&&""!=t&&i.LoaderManager.instance.destoryGroup(t)},r.prototype.closeView=function(){i.ModuleManager.hideModule(this)},r);function r(){var t=e.call(this)||this;return t.isClickHide=!0,t.isNeedMask=!1,t.isNeedAlpha0Mask=!1,t.isPopupEffect=!1,t.isCenter=!1,t.needAdaptStatusBar=!0,t._isShow=!1,t.offsetY=0,t}i.SuperBaseModule=t,__reflect(t.prototype,"qmr.SuperBaseModule")}(qmr=qmr||{}),function(l){var t=(e.prototype.reqLogin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.setLoadingStatus("验证账号..."),console.log("开始平台登录"),[4,this.login()];case 1:return t.sent(),console.log("平台登录完成"),l.PlatformConfig.platformId!=l.PlatformEnum.P_SLOGAME_DEBUG&&l.MarkPointManager.loginBeforeSetPoint(l.PointEnum.SDK_LOGIN),[2]}})})},e.prototype.getPullServerListUrl=function(){var t=l.PlatformConfig.isTSVersion?1:0;return(l.PlatformConfig.isTSVersion?this.tsServerListServer:this.serverListServer)+"?account="+l.GlobalConfig.account+"&ts="+t+"&sid="+l.PlatformConfig.platformId},e.prototype.getCheckAccountValidityUrl=function(s){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a;return __generator(this,function(t){return e=l.GlobalConfig.account,r=l.GlobalConfig.token,i=(s/1e3|0)+"",n=l.GlobalConfig.sid,o=l.Md5Util.getInstance().hex_md5(encodeURI(e)+n+r+i+l.GlobalConfig.loginKey),a=l.WebBrowerUtil.model||"none",l.GlobalConfig.uid,[2,this.loginServerUrl+"?account="+e+"&token="+r+"&time="+i+"&serverId="+n+"&unverifysvr=0&sign="+o+"&clientVer="+l.GlobalConfig.appVersion+"&deviceUID="+a]})})},e.prototype.reqPay=function(r){var i=this,t=i.rechargeOrderIdServer+"?account="+l.GlobalConfig.uid+"&serverId="+l.GlobalConfig.sid;console.log("请求充值服生成订单号: "+t),l.HttpRequest.sendGet(t,function(t){console.log("请求充值服生成订单号回包: "+JSON.stringify(t));var e=JSON.parse(t);(i.orderResultData=e)&&0==e.ret&&(i.orderId=e.orderId,console.log("请求充值服生成订单号成功:"+i.orderId),i.pay(r))},i)},e.prototype.setLoadingProgress=function(t){},e.prototype.logout=function(){},e.prototype.reportRegister=function(){},e.prototype.reportLogin=function(){},e.prototype.reportUpLevel=function(){},e.prototype.reportFightPower=function(t){},e.prototype.shareGame=function(t,e,r){},e.prototype.onShareBack=function(){},e.prototype.share=function(){},e.prototype.addToDesk=function(){},e.prototype.reloadGame=function(t){window.location&&window.location.reload?window.location.reload():l.TipManagerCommon.getInstance().createCommonColorTip("请重启游戏")},e.prototype.setLoadingStatus=function(t){t=t||"";var e=window.showPreLoading;e&&e(t),t||this.firstLoadBgHide||!window.EgretSubPackageLoading||(this.firstLoadBgHide=!0,window.EgretSubPackageLoading.instance.removePreLoading())},e.prototype.chatDataPost=function(t,e,r,i,n,o,a){void 0===o&&(o=""),void 0===a&&(a=0)},e.prototype.initLoginServer=function(){this.loginServer=l.GlobalConfig.loginServer,this.updateLoginServer()},Object.defineProperty(e.prototype,"webSocketProtoco",{get:function(){return"https:"==this.httpProtoco?"wss":"ws"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markPointPort",{get:function(){return"https:"==this.httpProtoco?2231:2230},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpProtoco",{get:function(){var t=window.location.protocol;return t||"https:"},enumerable:!0,configurable:!0}),e.prototype.updateLoginServer=function(){this.loginServerUrl=this.joinParamsURL(l.PlatformUrlConsont.LOGIN_URL,this.loginServer),this.rechargeOrderIdServer=this.joinParamsURL(l.PlatformUrlConsont.ORDER_URL,this.loginServer)},Object.defineProperty(e.prototype,"reqRoute",{get:function(){return"android"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appIdNum",{get:function(){return l.Int64Util.getNumber(l.PlatformConfig.appIdStr)},enumerable:!0,configurable:!0}),e.prototype.initServerUrl=function(){var t=this;t.serverListServer=t.joinParamsURL(l.PlatformUrlConsont.SVRLISTOP_URL),t.lastLoginServerReqUrl=t.joinParamsURL(l.PlatformUrlConsont.LASTLOGIN_URL),t.tsServerListServer=t.joinParamsURL(l.PlatformUrlConsont.SVRLISTOP_URL,l.PlatformConfig.ts_serverDomain),t.tsLastLoginServerReqUrl=t.joinParamsURL(l.PlatformUrlConsont.LASTLOGIN_URL,l.PlatformConfig.ts_serverDomain),t.dirtyWordCheckUrl=t.joinParamsURL(l.PlatformUrlConsont.WORD_URL),t.NoticeUrl=t.joinParamsURL(l.PlatformUrlConsont.NOTICE_URL,l.PlatformConfig.ossDoamin),t.verifyUrl=t.joinParamsURL(l.PlatformUrlConsont.VERIFY_URL),t.initMarkPointUrl()},e.prototype.initMarkPointUrl=function(){this.markPointUrl=this.httpProtoco+"//"+l.PlatformConfig.markPointDomain+":"+this.markPointPort,this.markPointUrlBeforeLogin=this.httpProtoco+"//"+l.PlatformConfig.markPointDomain+":"+this.markPointPort+"/before"},e.prototype.joinParamsURL=function(t,e){void 0===e&&(e="");var r=this.httpProtoco;""==e&&(e=l.PlatformConfig.serverDomain);var i=this.reqRoute;return l.StringUtilsBase.getmsg(t,r,e,l.PlatformConfig.platformSign,i)},e);function e(){this.ltServerDomain="xyws-sdk.dyhyyx.com",this.initGetOption(),this.initServerUrl()}l.BasePlatform=t,__reflect(t.prototype,"qmr.BasePlatform")}(qmr=qmr||{}),function(u){var i,t=(i=egret.Bitmap,__extends(e,i),e.prototype.setIsDirLoad=function(t){this.isDirLoad=t},e.prototype.getIsDirLoad=function(){return this.isDirLoad},e.prototype.setActs=function(t){this.actList=t.split(",")},e.prototype.containsAct=function(t){var e=this.actList;if(0==e.length)return!0;for(var r=0,i=e;r<i.length;r++)if(i[r]==t)return!0;return!1},e.prototype.load=function(o,a,s){void 0===s&&(s=-1);var l=this,c=u.AnimateManager.getInstance();l.curFrame=0,"168_skill"!=a&&"168_skill2"!=a||(a="168_idle"),l.animateData&&l.resName&&c.dispos(l.resName),l.resName=l.isGray?a+"_g":a;var t,e,r,i=c.getAnimalData(l.resName,l.isDirLoad?-1:s);i?(l.animateData=i,l.callBack&&egret.callLater(l.callBack,l.thisObject,!0,a)):("20100_idle"==a&&(o=u.PlatformConfig.useCdnRes?u.PlatformConfig.webUrl+"resourceLogin/animation/":"resourceLogin/animation/"),t=function(i){function t(t,e){var r;t?(r=l.isGray?a+"_g":a,c.parseSpriteSheet(r,e,i,t,s),r==l.resName&&(l.animateData=c.getAnimalData(r,s)),l.callBack&&egret.callLater(l.callBack,l.thisObject,!1,a)):l.reset()}var e,r,n;i?(e=i.harf?"_f.png":".png",r=o+(l.isGray?a+"_g"+e:a+e),(n=RES.getRes(r))?(u.LoaderManager.instance.removeGroupRef(r),t(n,r)):u.ResManager.getRes(r,t,l,u.LoadPriority.IMMEDIATELY,RES.ResourceItem.TYPE_IMAGE)):l.reset()},l.isBody&&(l.texture=RES.getRes("preloading_defaultBody_png"),l.x=-l.texture.textureWidth/2,l.y=-l.texture.textureHeight),e=o+a+".json",(r=RES.getRes(e))?t(r):u.ResManager.getRes(e,t,l,u.LoadPriority.IMMEDIATELY,RES.ResourceItem.TYPE_JSON))},e.prototype.reset=function(){this.animateData&&(this.texture=null,this.animateData=null),this.curFrame=0},e.prototype.render=function(t){this.curFrame=t;var e,r,i,n=this,o=n.animateData;null!=o&&(e=n._scale,r=o.getOffset(t),i=o.getTextureByFrame(t),n.texture=i,r&&(n.x=r.x*e+n._offsetX,n.y=r.y*e+n._offsetY,o.halfTexture?(n.width=r.w,n.height=r.h):i&&(n.width=i.textureWidth,n.height=i.textureHeight)),0<n._effectWidth?o.halfTexture?n.scaleX=n._effectWidth/r.w:n.scaleX=n._effectWidth/i.textureWidth:n.scaleX=n.scaleY=e)},Object.defineProperty(e.prototype,"offsetX",{set:function(t){this._offsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{set:function(t){this._offsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{set:function(t){this._scale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectWidth",{get:function(){return this._effectWidth},set:function(t){this._effectWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstFrameHeight",{get:function(){var t=this.animateData;return t?t.getTextureByFrame(1).textureHeight:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalFrames",{get:function(){var t=this.animateData;return null!=t?t.totalFrames:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameRate",{get:function(){var t=this.animateData;return null!=t?t.frameRate:0},enumerable:!0,configurable:!0}),e.prototype.dispos=function(){var t=this;t.curFrame=0,t.parent&&(t.reset(),u.AnimateManager.getInstance().dispos(t.resName),t.parent.removeChild(t))},e);function e(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=i.call(this)||this;return r._scale=1,r._offsetX=0,r._offsetY=0,r._effectWidth=0,r.callBack=t,r.thisObject=e,r.isDirLoad=!1,r.actList=[],r.isBody=!1,r.pixelHitTest=!0,r.offsetX=0,r.offsetY=0,r.curFrame=0,r}u.AnimateClip=t,__reflect(t.prototype,"qmr.AnimateClip")}(qmr=qmr||{}),function(t){var e=(r.prototype.merge=function(t,e){if(void 0===e&&(e=1),t&&t.hasOwnProperty("d")){var r=t.d;this.key||(this.key=t.key);var i=this.d;for(var n in i||(i=new Object,this.d=i),r){var o=r[n];"number"==typeof o?(i[n]||(i[n]=0),o=o||0,i[n]=parseFloat(i[n])+o*e):("string"==typeof o?(i[n]||(i[n]=""),o=o||""):"boolean"==typeof o&&(o=o||!1),i[n]=o)}}},r.prototype.setRate=function(t){var e=this.d;for(var r in e){var i=e[r];"number"==typeof i&&(i*=t,e[r]=i)}},r);function r(t){this.d=t}t.BaseBean=e,__reflect(e.prototype,"qmr.BaseBean")}(qmr=qmr||{}),function(t){var e,r=(e=t.SuperBaseModule,__extends(i,e),i);function i(){var t=e.call(this)||this;return t.qmrSkinName="LoginViewSkin",t}t.LoginViewUI=r,__reflect(r.prototype,"qmr.LoginViewUI")}(qmr=qmr||{}),function(t){var e,r=(e=t.SuperBaseModule,__extends(i,e),i);function i(){var t=e.call(this)||this;return t.qmrSkinName="ServerListViewSkin",t}t.ServerListSelectUI=r,__reflect(r.prototype,"qmr.ServerListSelectUI")}(qmr=qmr||{}),function(i){var t=(e.prototype.initListeners=function(){},e.prototype.dispatch=function(t,e){void 0===e&&(e=null),i.NotifyManager.sendNotification(t,e)},e.prototype.registerNotify=function(t,e,r){i.NotifyManager.registerNotify(t,e,r)},e.prototype.unRegisterNotify=function(t,e,r){i.NotifyManager.unRegisterNotify(t,e,r)},e);function e(){this.initListeners()}i.BaseNotify=t,__reflect(t.prototype,"qmr.BaseNotify")}(qmr=qmr||{}),function(l){var t=(e.prototype.initListeners=function(){},e.prototype.sendCmd=function(t,e,r){void 0===r&&(r=!1),l.Rpc.getInstance().sendCmd(t,e,r)},e.prototype.dispatch=function(t,e){void 0===e&&(e=null),l.NotifyManager.sendNotification(t,e)},e.prototype.registerNotify=function(t,e,r){l.NotifyManager.registerNotify(t,e,r)},e.prototype.unRegisterNotify=function(t,e,r){l.NotifyManager.unRegisterNotify(t,e,r)},e.prototype.rpc=function(t,e,r,i,n,o,a,s){void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=!1),l.Rpc.getInstance().rpcCMD(t,e,r,i,n,o,a,s)},e.prototype.addSocketListener=function(t,e,r,i){void 0===i&&(i=!1),l.Rpc.getInstance().addSocketListener(t,e,r,i)},e.prototype.removeSocketListener=function(t,e,r){l.Rpc.getInstance().removeSocketListener(t,e,r)},e.prototype.loadAndPlayEffect=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1),l.SoundManager.getInstance().loadAndPlayEffect(t,e,r)},e.prototype.checIsLock=function(t){if(!this._reqDic)return!1;var e=this._reqDic.has(t)?this._reqDic.get(t):0;return egret.getTimer()<e},e.prototype.setReqLock=function(t,e){void 0===e&&(e=15e3),this._reqDic||(this._reqDic=new l.Dictionary);var r=egret.getTimer()+e;this._reqDic.set(t,r)},e.prototype.resetLock=function(){this._reqDic&&this._reqDic.clear()},e.prototype.removeAllListener=function(){this.resetLock()},e);function e(){this.initListeners()}l.BaseController=t,__reflect(t.prototype,"qmr.BaseController")}(qmr=qmr||{}),function(t){var e=(Object.defineProperty(r.prototype,"values",{get:function(){return this._values},set:function(t){this._values=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"keys",{get:function(){return this._keys},set:function(t){this._keys=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t,e){var r=this.indexOf(t);return 0<=r?void(this._values[r]=e):(this._keys.push(t),void this._values.push(e))},r.prototype.setConf=function(t,e){this._keys.push(t),this._values.push(e)},r.prototype.indexOf=function(t){var e=this._keys.indexOf(t);return 0<=e?e:(t=t instanceof String?Number(t):t instanceof Number?t.toString():t,this._keys.indexOf(t))},r.prototype.get=function(t){var e=this.indexOf(t);return e<0?null:this._values[e]},r.prototype.has=function(t){return 0<=this.indexOf(t)},Object.defineProperty(r.prototype,"length",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),r.prototype.remove=function(t){var e=this.indexOf(t);return 0<=e&&(this._keys.splice(e,1),this._values.splice(e,1),!0)},r.prototype.clear=function(){this._values.length=0,this._keys.length=0},r);function r(){this._values=[],this._keys=[]}t.Dictionary=e,__reflect(e.prototype,"qmr.Dictionary")}(qmr=qmr||{}),function(f){var a,t=(a=egret.DisplayObjectContainer,__extends(e,a),e.prototype.addToStage=function(){this.setIsStopped(!1),this.render()},e.prototype.removeToStage=function(){this.setIsStopped(!0)},Object.defineProperty(e.prototype,"isNoRendering",{get:function(){return this._isNoRendering},set:function(t){this._isNoRendering=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGray",{get:function(){return this._isGray},set:function(t){this._isGray=t},enumerable:!0,configurable:!0}),e.prototype.setIsDirLoad=function(t){this.isDirLoaded=t;var e=this.partDic;for(var r in e)e[r].setIsDirLoad(t)},e.prototype.addPartAt=function(t,e,r,i,n,o,a){void 0===r&&(r=-1),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===a&&(a=!0),e&&(this.addPartTo(t,e,r,i,n,o),t==f.ActorPart.BODY&&a&&(this.partDic[f.ActorPart.DEFAULT]||(this.addPartTo(f.ActorPart.DEFAULT,168,r,i,n,o),this.partDic[f.ActorPart.DEFAULT].offsetY=-85)))},e.prototype.addPartTo=function(t,e,r,i,n,o){void 0===r&&(r=-1),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===o&&(o=null);var a,s=this,l=s.act,c=s.partDic[t];s.partIdDic[t]=e,s.dir=i,c?(-1!=r?s.addChildAt(c,r):s.addChild(c),c.setIsDirLoad(n),c.containsAct(l)||(l=t==f.ActorPart.HORSE?f.Status.IDLE_RIDE:f.Status.IDLE)):(c=t==f.ActorPart.BODY?new f.AnimateClip(s.onLoaded,s):t==f.ActorPart.DEFAULT?new f.AnimateClip(s.onLoadedDefault,s):t==f.ActorPart.WING?new f.AnimateWing(s.onLoadedOther,s):new f.AnimateClip(s.onLoadedOther,s),-1!=r?s.addChildAt(c,r):s.addChild(c),c.containsAct(l)||(l=t==f.ActorPart.HORSE?f.Status.IDLE_RIDE:f.Status.IDLE),s.partDic[t]=c),a=f.ActorPartResourceDic.getInstance().partDic[t],c.isGray=s.isGray,c.load(a||s.resourcePath,e+"_"+l,f.DirUtil.getDir(i))},e.prototype.setPartVisible=function(t,e){this.partDic[t].visible=e},e.prototype.removePart=function(t){var e=this.partDic[t];e&&(e.dispos(),delete this.partDic[t],delete this.partIdDic[t])},e.prototype.getPart=function(t){return void 0===t&&(t=f.ActorPart.BODY),this.partDic[t]},e.prototype.setPartActs=function(t,e){var r,i=this.partDic;for(var n in i)parseInt(n)!=t||(r=i[t])&&r.setActs(e);-1<e.indexOf(",")?this.act=e.split(",")[0]:this.act=e},e.prototype.gotoAndPlay=function(t,e,r,i,n){void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=!1);var o=this;if(o.loopCallBack=r,o.loopThisObject=i,n||o.act!=t){o.actDic[t]=!1,o.act=t,o.dir=e,o.currentFrame=1;var a=Math.abs(o.scaleX);o.scaleX=e<=5?a:-a,o.act==f.Status.DEAD&&(e=-1);var s=o.partDic,l=o.partIdDic;for(var c in o.setIsStopped(!0),s){var u,h,p=s[c];p&&(u=o.act,p.containsAct(u)||(u=parseInt(c)==f.ActorPart.HORSE?f.Status.IDLE_RIDE:f.Status.IDLE),h=f.ActorPartResourceDic.getInstance().partDic[c]||o.resourcePath,p.load(h,l[c]+"_"+u,f.DirUtil.getDir(e)))}}},e.prototype.clearCallBack=function(){this.loopCallBack=null},e.prototype.changeDir=function(t){if(this.dir!=t){this.dir=t;var e=Math.abs(this.scaleX);this.scaleX=t<=5?e:-e;var r=this.partDic,i=this.partIdDic;for(var n in r){var o,a,s=r[n];s&&(o=this.act,s.containsAct(o)||(o=parseInt(n)==f.ActorPart.HORSE?f.Status.IDLE_RIDE:f.Status.IDLE),a=f.ActorPartResourceDic.getInstance().partDic[n]||this.resourcePath,s.load(a+i[n]+"/",i[n]+"_"+o,f.DirUtil.getDir(t)))}}},e.prototype.gotoAndStop=function(t){this.currentFrame=t,this.render(),this.setIsStopped(!0)},e.prototype.onLoadedDefault=function(t,e){var r=this.partDic[f.ActorPart.DEFAULT];r&&(this.totalFrame=r.totalFrames,this.frameRate=r.frameRate,this.setIsStopped(!1))},e.prototype.onLoadedOther=function(t){this.partDic[f.ActorPart.DEFAULT]&&(this.removePart(f.ActorPart.DEFAULT),this.totalFrame=1),t||this.changeDir(this.dir)},e.prototype.onLoaded=function(t,e){var r,i=this;i.removePart(f.ActorPart.DEFAULT),-1!=e.indexOf(i.act)&&((r=i.partDic[f.ActorPart.BODY])?(i.totalFrame=r.totalFrames,i.frameRate=r.frameRate):i.totalFrame=0,0<i.totalFrame?(i.actDic[i.act]=!0,1==i.totalFrame?i.gotoAndStop(1):i.setIsStopped(!1),i.loadCallBack&&i.loadCallBack.call(i.loadThisObject)):i.gotoAndPlay(i.act,i.dir))},Object.defineProperty(e.prototype,"firstBodyFrameHeight",{get:function(){var t=this.partDic[f.ActorPart.BODY];return t?t.firstFrameHeight:0},enumerable:!0,configurable:!0}),e.prototype.registerFrameEvent=function(t,e,r){this.eventDic[t]={callBack:e,thisObject:r}},e.prototype.unRegisterFrameEvent=function(t){var e=this.eventDic;e[t]&&(e[t]=null,delete e[t])},e.prototype.clearFrameEvent=function(){var t=this.eventDic;for(var e in t)t[e]=null,delete t[e]},e.prototype.advanceTime=function(t){var e=this;if(e.isNoRendering)return e.gotoAndStop(1),!1;var r=t-e.lastTime;e.lastTime=t;var i=e.frameIntervalTime,n=e.passedTime+r;e.passedTime=n%i;var o=n/i;if(o<1)return!1;for(e.render();1<=o;)o--,e.currentFrame++,e.actDic[e.act]&&e.checkFrameEvent();return!1},e.prototype.checkFrameEvent=function(){var t=this.eventDic[this.currentFrame];t&&t.callBack&&t.callBack.call(t.thisObject)},e.prototype.render=function(){var t=this;if(0<t.totalFrame&&(t.currentFrame>t.totalFrame&&(t.currentFrame=1,t.loopCallBack&&t.loopCallBack.call(t.loopThisObject)),1==t.totalFrame||t.stage)){var e=t.partDic,r=t.currentFrame;for(var i in e){var n=e[i];n&&n.render(r)}}},Object.defineProperty(e.prototype,"frameRate",{set:function(t){60<t&&(t=60),this._frameRate=t,this.frameIntervalTime=1e3/(t*this._timeScale)},enumerable:!0,configurable:!0}),e.prototype.getTotalFrame=function(){return this.totalFrame},Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._timeScale},set:function(t){t<=0&&(t=1),this._timeScale=t,this.frameIntervalTime=1e3/(this._frameRate*t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"act",{get:function(){return this._act},set:function(t){this._act=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourcePath",{get:function(){return this._resourcePath},set:function(t){this._resourcePath=t},enumerable:!0,configurable:!0}),e.prototype.setIsStopped=function(t){var e=this;e.isStopped!=t&&((e.isStopped=t)?egret.stopTick(e.advanceTime,e):1==e.totalFrame||e.isNoRendering?e.gotoAndStop(1):(e.lastTime=egret.getTimer(),egret.startTick(e.advanceTime,e)))},e.prototype.getDir=function(){return this.dir},e.prototype.clear=function(){this.setIsStopped(!0),this.clearFrameEvent(),this.parent&&this.parent.removeChild(this)},e.prototype.dispos=function(t){void 0===t&&(t=!0);var e=this;for(var r in e.setIsStopped(!0),e.clearFrameEvent(),e.removeEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,e.removeToStage,e),e.partDic)e.removePart(r);e.parent&&t&&e.parent.removeChild(e)},e);function e(t,e,r,i){void 0===i&&(i="idle");var n=a.call(this)||this,o=n;return o.resourcePath=t,o.loadCallBack=e,o.loadThisObject=r,o.currentFrame=1,o.totalFrame=0,o.isStopped=!0,o.isDirLoaded=!1,o.isNoRendering=!1,o.passedTime=0,o.lastTime=0,o._timeScale=1,o.act=i,o.frameRate=30,o.eventDic={},o.actDic={},o.partDic={},o.partIdDic={},o.addEventListener(egret.Event.ADDED_TO_STAGE,o.addToStage,o),o.addEventListener(egret.Event.REMOVED_FROM_STAGE,o.removeToStage,o),n}f.BaseActor=t,__reflect(t.prototype,"qmr.BaseActor")}(qmr=qmr||{}),function(t){var e=(r.IDLE="idle",r.ATTACK="attack",r.ATTACK2="attack2",r.MOVE="move",r.FLY="move",r.DEAD="death",r.SKILL="skill",r.SKILL2="skill2",r.IDLE_RIDE="idle_ride",r.MOVE_RIDE="move_ride",r.ATTACK_RIDE="attack_ride",r.JUMP="fly",r.JUMP_ATTACK="jump_attack",r.STAND="stand",r.PICK="pick",r.UI_SHOW="ui_show",r.UI_SHOW1="ui_show_1",r.UI_IDLE="ui_idle",r);function r(){}t.Status=e,__reflect(e.prototype,"qmr.Status")}(qmr=qmr||{});var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,r){qmr.ResManager.getRes(t,e,r,qmr.LoadPriority.IMMEDIATELY,RES.ResourceItem.TYPE_IMAGE)},t}(),qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr;__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]),function(t){var e=(r.prototype.parseClip=function(t){var e=this.framesList;this._frameRate=parseInt(t.frameRate);for(var r=0,i=t.frames;r<i.length;r++){var n=i[r],o=parseInt(n.duration);isNaN(o)&&(o=1);for(var a=1;a<=o;a++)e.push(n)}if(this.autoParseTexture)for(var s=this.spriteSheet,l=this.autoHalfTexture,c=0,u=e;c<u.length;c++){var h,p=u[c];s.getTexture(p.res)||(h=this.resJson[p.res],l?s.createTexture(p.res,Math.ceil(h.x/2),Math.ceil(h.y/2),h.w>>1,h.h>>1):s.createTexture(p.res,h.x,h.y,h.w,h.h))}this._totalFrames=this.framesList.length},r.prototype.parseClipByStartAndEnd=function(t,e,r){var i=0,n=this.framesList;this._frameRate=parseInt(t.frameRate);for(var o=0,a=t.frames;o<a.length;o++){var s=a[o],l=parseInt(s.duration);isNaN(l)&&(l=1);for(var c=1;c<=l;c++)e<=(i+=1)&&i<=r&&n.push(s)}this._totalFrames=n.length},r.prototype.getTextureByFrame=function(t){var e;if(!(t<=this.framesList.length))return null;e=this.framesList[t-1];var r,i=this.spriteSheet.getTexture(e.res);return i||(r=this.resJson[e.res],i=this.spriteSheet.createTexture(e.res,r.x,r.y,r.w,r.h)),i},r.prototype.getOffset=function(t){var e=this.framesList,r=t<=e.length?e[t-1]:e[e.length-1];if(this.autoHalfTexture){var i=this.resJson[r.res],n=i.x%2?1:0,o=i.y%2?1:0;return{x:r.x+n,y:r.y+o,w:i.w>>1<<1,h:i.h>>1<<1}}return r},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"halfTexture",{get:function(){return this.autoHalfTexture},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"frameRate",{get:function(){return this._frameRate},enumerable:!0,configurable:!0}),r.prototype.dispos=function(){this.framesList.length=0,this.framesList=null},r);function r(t,e,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1),this.resJson=t,this.spriteSheet=e,this.autoHalfTexture=i,this.autoParseTexture=r,this.framesList=[]}t.AnimateData=e,__reflect(e.prototype,"qmr.AnimateData")}(qmr=qmr||{}),function(m){var t=(e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.parseSpriteSheet=function(t,e,r,i,n,o){void 0===n&&(n=-1),void 0===o&&(o=!0);var a,s=new egret.SpriteSheet(i);for(var l in r.mc)if(null!=l&&0!=l.length){a=r.mc[l];break}if(a){var c=this.animaDic[t];c||(c={},this.animaDic[t]=c),c.url=e,c.sheet=s;var u=a.labels,h=r.harf;if(u&&1<u.length)for(var p=0,f=u;p<f.length;p++){var d,g=f[p];(d=new m.AnimateData(r.res,s,o,h)).parseClipByStartAndEnd(a,parseInt(g.frame),parseInt(g.end)),c[parseInt(g.name)]=d}else(d=new m.AnimateData(r.res,s,o,h)).parseClip(a),c.data=d}},e.prototype.getAnimalData=function(t,e){var r=this.animaDic[t];if(!r)return null;var i=r.count;return i?i+=1:i=1,r.count=i,r.useTime=egret.getTimer(),0<e&&-1==t.indexOf("death")?r[e]:r.data},e.prototype.dispos=function(t){var e,r;"168_idle"==t||(e=this.animaDic[t])&&((r=e.count)?--r:r=0,r<=0&&(r=0),e.count=r)},e.prototype.clear=function(t){var e=this.animaDic,r=this.maxAliveTime;for(var i in e){var n,o=e[i];0==o.count&&o.useTime&&t-o.useTime>r&&(o.sheet&&o.sheet.dispose(),n=RES.destroyRes(o.url),m.LogUtil.warn("AnimationManager.destroy url="+o.url+"  "+n),e[i]=null,delete e[i])}},e);function e(){this.maxAliveTime=1e4,this.animaDic={}}m.AnimateManager=t,__reflect(t.prototype,"qmr.AnimateManager")}(qmr=qmr||{}),function(t){var i,e=(i=t.AnimateClip,__extends(r,i),r.prototype.render=function(t){this._wingFrame!=t&&(this._wingFrame=t,this._wingFrameIndex++),t=1+this._wingFrameIndex%this.totalFrames,i.prototype.render.call(this,t)},r.prototype.reset=function(){i.prototype.reset.call(this),this._wingFrame=0,this._wingFrameIndex=0},r);function r(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var r=i.call(this,t,e)||this;return r._wingFrame=0,r._wingFrameIndex=0,r}t.AnimateWing=e,__reflect(e.prototype,"qmr.AnimateWing")}(qmr=qmr||{}),function(e){var r,t=(r=egret.DisplayObjectContainer,__extends(i,r),i.prototype.load=function(t,e,r,i,n){void 0===n&&(n=1),this.playeTimes=1,this.loopCallBack=r,this.thisObject=i,this.mainClip.load(t,e)},i.prototype.onLoaded=function(){this.totalFrame=this.mainClip.totalFrames,this.frameRate=this.mainClip.frameRate,this.currentFrame=1,this.render(),this.setIsStopped(!1),1==this.totalFrame&&this.gotoAndStop(1)},i.prototype.registerFrameEvent=function(t,e,r){this.eventDic[t]={callBack:e,thisObject:r}},i.prototype.unRegisterFrameEvent=function(t){this.eventDic[t]&&(this.eventDic[t]=null,delete this.eventDic[t])},i.prototype.advanceTime=function(t){var e=t-this.lastTime;this.lastTime=t;var r=this.frameIntervalTime,i=this.passedTime+e;this.passedTime=i%r;var n=i/r;if(n<1)return!1;for(this.render();1<=n;)n--,this.currentFrame++,this.checkFrameEvent();return!1},i.prototype.checkFrameEvent=function(){var t=this.eventDic[this.currentFrame];t&&t.callBack&&t.callBack.call(t.thisObject)},i.prototype.clearCallBack=function(){this.loopCallBack=null},i.prototype.render=function(){var t=this;return 0<t.totalFrame&&t.currentFrame>t.totalFrame&&(t.loopCallBack&&t.loopCallBack.call(t.thisObject),(t.currentFrame=1)==t.playeTimes)?void t.setIsStopped(!0):void t.mainClip.render(t.currentFrame)},Object.defineProperty(i.prototype,"frameRate",{set:function(t){60<t&&(t=60),this._frameRate=t,this.frameIntervalTime=1e3/(t*this._timeScale)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"timeScale",{set:function(t){isNaN(this.frameRate)||(this._timeScale=t,this.frameIntervalTime=1e3/(this._frameRate*t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"totalFrames",{get:function(){return this.totalFrame},enumerable:!0,configurable:!0}),i.prototype.gotoAndStop=function(t){this.mainClip.render(t),this.setIsStopped(!0)},i.prototype.setIsStopped=function(t){this.isStopped!=t&&((this.isStopped=t)?egret.stopTick(this.advanceTime,this):(this.lastTime=egret.getTimer(),egret.startTick(this.advanceTime,this)))},i.prototype.clear=function(){this.mainClip&&this.mainClip.reset()},i.prototype.dispos=function(){for(var t in this.mainClip&&this.mainClip.dispos(),this.setIsStopped(!0),this.eventDic)this.eventDic[t]=null,delete this.eventDic[t];this.parent&&this.parent.removeChild(this)},i);function i(){var t=r.call(this)||this;return t.currentFrame=1,t.totalFrame=0,t.isStopped=!0,t.passedTime=0,t.lastTime=0,t.frameRate=30,t.eventDic={},t._timeScale=1,t.mainClip=new e.AnimateClip(t.onLoaded,t),t.addChild(t.mainClip),t}e.MovieClip=t,__reflect(t.prototype,"qmr.MovieClip")}(qmr=qmr||{}),function(t){var e,r=(e=t.UIComponent,__extends(i,e),i.prototype.initComponent=function(){e.prototype.initComponent.call(this),this.iscompleted=!0},i.prototype.initData=function(){e.prototype.initData.call(this),this.setTip()},i.prototype.onStageResize=function(){e.prototype.onStageResize.call(this),this.x=(t.StageUtil.stageWidth-640)/2},i.prototype.showTip=function(t){this.data=t,this.iscompleted&&this.setTip()},i.prototype.setTip=function(){this.data&&(this.isSeted||(this.x=(t.StageUtil.stageWidth-640)/2,this.isSeted=!0,this.alpha=1,this.data.color?(this.lbl_tipMsg.text=this.data.mess,this.lbl_tipMsg.textColor=this.data.color):this.lbl_tipMsg.textFlow=t.HtmlUtil.getHtmlString(this.data.mess),this.data.itemcfg&&t.ImageUtil.setItemIcon(this.img_icon,this.data.itemcfg.icon,this.data.itemcfg.page),this.y=t.StageUtil.stageHeight/2-this.height/2+this.data.yPos,this.common_g.width=this.lbl_tipMsg.width+200,egret.Tween.get(this).to({y:t.StageUtil.stageHeight/3+50+this.data.yPos},1500).to({y:t.StageUtil.stageHeight/3+this.data.yPos,alpha:0},800).call(this.dispose,this)))},i.prototype.dispose=function(){this.data=null,this.isSeted=!1,this.lbl_tipMsg.text="",this.img_icon.source=null,egret.Tween.removeTweens(this),e.prototype.dispose.call(this),t.TipManagerCommon.getInstance().recycleCommonTip(this)},i);function i(){var t=e.call(this)||this;return t.iscompleted=!1,t.isSeted=!1,t.skinName="CommonTipSkin",t.touchEnabled=t.touchChildren=!1,t}t.CommonTip=r,__reflect(r.prototype,"qmr.CommonTip")}(qmr=qmr||{}),function(l){var t=(e.getCNValue=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=this.getBean(l.ConfigEnumBase.CLIENTCN).get(t);if(i){var n=i.value;return e&&0<e.length&&(e.unshift(n),n=l.StringUtils.getmsg.apply(l.StringUtils,e)),n}return""},e.getConf=function(t,e){var r=this.getBean(t);return r?r.get(e):null},e.getBean=function(t){var e=this.cfgDic.get(t);return e||(e=this.parseConfigFromZip(t),this.cfgDic.set(t,e),l.LogUtil.log("ConfigManagerBase.parseConfigFromZip:",t)),e},e.parseConfigFromZip=function(t){var i=this,n=new l.Dictionary,e=t.charAt(0).toLocaleUpperCase()+t.slice(1,t.length)+"Cfg",o=l[e],r=i.getZip(i.WHOLE_CONFIG_NAME);(r=r||i.getZip(i.BASE_CONFIG_NAME))||console.error("配置读取失败");var a=r.file(t+".json");a||l.LogUtil.warn("从zip中解析一张表 = "+t+" 异常，请查看配置是否提交？？");var s=JSON.parse(a.asText());return o&&(l.PlatformConfig.isShildTSV&&"Hero"==t&&l.TSHelper&&l.TSHelper.instance.handleHeroCfgJson(s),s.forEach(function(t){var e,r=new o(t);r.key?(e=i.getkey(r,t),n.setConf(e,r)):l.LogUtil.warn("获取配置表的唯一key 错误了。。。"+r)})),n},e.getZip=function(t){this.zipDic||(this.zipDic=new l.Dictionary);var e,r=this.zipDic.get(t);return r||(e=RES.getRes(t))&&(r=new JSZip(e),this.zipDic.set(t,r)),r},e.getkey=function(t,r){if(t.key){var e=t.key.split("_"),i="",n=e.length;return 1==n?i=r[t.key]:e.forEach(function(t,e){i+=e!=n-1?r[t]+"_":r[t]}),i}},e.cfgDic=new l.Dictionary,e.WHOLE_CONFIG_NAME="config_bin",e.BASE_CONFIG_NAME="configbase_bin",e);function e(){}l.ConfigManagerBase=t,__reflect(t.prototype,"qmr.ConfigManagerBase")}(qmr=qmr||{}),function(r){var t=(e.setup=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return r.WebBrowerUtil.initSysInfo(),[4,r.PlatformConfig.init()];case 1:return t.sent(),r.StageUtil.init(e),egret.ImageLoader.crossOrigin="anonymous",egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.registerVersionController(new r.VersionController),r.MessageIDLogin.init(),r.LayerManager.instance.setup(r.StageUtil.stage),r.ModuleManager.setupClass(),r.LoginController.instance,r.SystemController.instance,r.GameLifecycleManger.instance.init(),this.initLocalStorage(),[4,r.GameLoadManager.instance.loadBaseRes()];case 2:return t.sent(),[4,r.PlatformManager.instance.platform.reqLogin()];case 3:return t.sent(),[4,r.LoginManager.startCheck()];case 4:return t.sent(),[2]}})})},e.initLocalStorage=function(){var t="0"==egret.localStorage.getItem("bgSoundIsOpen"),e="0"==egret.localStorage.getItem("effectSoundIsOpen");console.log("背景音乐是否关闭："+t),console.log("音效是否关闭："+e),r.SoundManager.getInstance().isMusicSoundOpen=!t,r.SoundManager.getInstance().isEffectSoundOpen=!e},e);function e(){}r.EntryLogin=t,__reflect(t.prototype,"qmr.EntryLogin")}(qmr=qmr||{}),function(t){var e=(r.PlayerName=!0,r.CodeCfg=!0,r.Music=!0,r.ClientCn=!0,r);function r(){}t.BaseConfigKeys=e,__reflect(e.prototype,"qmr.BaseConfigKeys")}(qmr=qmr||{}),function(t){var r,e=(r=t.BaseBean,__extends(i,r),Object.defineProperty(i.prototype,"id",{get:function(){return this.d.id},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name_xing",{get:function(){return this.d.name_xing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name_ming_nan",{get:function(){return this.d.name_ming_nan},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name_ming_nv",{get:function(){return this.d.name_ming_nv},enumerable:!0,configurable:!0}),i);function i(t){var e=r.call(this,t)||this;return e.key="id",e}t.PlayerNameCfg=e,__reflect(e.prototype,"qmr.PlayerNameCfg");var n,o=(n=t.BaseBean,__extends(a,n),Object.defineProperty(a.prototype,"id",{get:function(){return this.d.id},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"msg",{get:function(){return this.d.msg},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"type",{get:function(){return this.d.type},enumerable:!0,configurable:!0}),a);function a(t){var e=n.call(this,t)||this;return e.key="id",e}t.CodeCfgCfg=o,__reflect(o.prototype,"qmr.CodeCfgCfg");var s,l=(s=t.BaseBean,__extends(c,s),Object.defineProperty(c.prototype,"soundType",{get:function(){return this.d.soundType},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"soundName",{get:function(){return this.d.soundName},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isPlaySameTime",{get:function(){return this.d.isPlaySameTime},enumerable:!0,configurable:!0}),c);function c(t){var e=s.call(this,t)||this;return e.key="soundType",e}t.MusicCfg=l,__reflect(l.prototype,"qmr.MusicCfg");var u,h=(u=t.BaseBean,__extends(p,u),Object.defineProperty(p.prototype,"id",{get:function(){return this.d.id},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"value",{get:function(){return this.d.value},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"colerType",{get:function(){return this.d.colerType},enumerable:!0,configurable:!0}),p);function p(t){var e=u.call(this,t)||this;return e.key="id",e}t.ClientCnCfg=h,__reflect(h.prototype,"qmr.ClientCnCfg")}(qmr=qmr||{}),function(t){var e=(r.PLAYERNAME="PlayerName",r.CODECFG="CodeCfg",r.MUSIC="Music",r.CLIENTCN="ClientCn",r);function r(){}t.ConfigEnumBase=e,__reflect(e.prototype,"qmr.ConfigEnumBase")}(qmr=qmr||{}),function(t){var e,r;(e=t.BtnSkinType||(t.BtnSkinType={}))[e.Type_1=1]="Type_1",e[e.Type_2=2]="Type_2",(r=t.CHAT_CHANNELID||(t.CHAT_CHANNELID={}))[r.SYSTEM=1]="SYSTEM",r[r.WORLD=2]="WORLD",r[r.TEAM=3]="TEAM",r[r.SELF=4]="SELF",r[r.UNION=5]="UNION",r[r.CROSS=6]="CROSS"}(qmr=qmr||{}),function(t){var e,r,i,n,o;(e=t.MusicType||(t.MusicType={}))[e.BG_MUSIC=1]="BG_MUSIC",e[e.EFFECT_MUSIC=2]="EFFECT_MUSIC",(r=t.WarriorRole||(t.WarriorRole={}))[r.ROLE_MALE=101]="ROLE_MALE",r[r.ROLE_FEMALE=102]="ROLE_FEMALE",(i=t.ColorQualityConst||(t.ColorQualityConst={}))[i.COLOR_G=9067563]="COLOR_G",i[i.COLOR_GREEN=632328]="COLOR_GREEN",i[i.COLOR_BLUE=2197196]="COLOR_BLUE",i[i.COLOR_VIOLET=16722152]="COLOR_VIOLET",i[i.COLOR_CADMIUM=15095046]="COLOR_CADMIUM",i[i.COLOR_RED=14489856]="COLOR_RED",i[i.COLOR_DIAMOND=4758466]="COLOR_DIAMOND",(n=t.BagType||(t.BagType={}))[n.TIEM=0]="TIEM",n[n.HERO=1]="HERO",n[n.EQUIP=2]="EQUIP",(o=t.ActorSizeType||(t.ActorSizeType={}))[o.small=0]="small",o[o.mid=1]="mid",o[o.big=2]="big",o[o.UI=3]="UI"}(qmr=qmr||{}),function(){function t(){}(qmr||(qmr={})).NotifyConstBase=t,__reflect(t.prototype,"qmr.NotifyConstBase")}(),function(t){var e=(r.S_ERROR_CODE="S_ERROR_CODE",r.S_USER_LOGIN="S_USER_LOGIN",r.S_USER_LOGIN_REPEAT="S_USER_LOGIN_REPEAT",r.S_LOGIN_OFFLINE_HANGUP_PUSH="S_LOGIN_OFFLINE_HANGUP_PUSH",r.S_USER_LOGOUT="S_USER_LOGOUT",r.TAB_VIEW_ADDPAGE="TAB_VIEW_ADDPAGE",r.TAB_VIEW_REMOVEPAGE="TAB_VIEW_REMOVEPAGE",r.TAB_VIEW_CHANGE_TAB="TAB_VIEW_CHANGE_TAB",r.UPDATE_OPEN_TITLE="UPDATE_OPEN_TITLE",r.UPDATE_MODULE_TITLE="UPDATE_MODULE_TITLE",r.OPEN_PANEL_LAYER="OPEN_PANEL_LAYER",r.CLOSE_PANEL_LAYER="CLOSE_PANEL_LAYER",r.OPEN_PANEL_VIEW="OPEN_PANEL_VIEW",r.CLOSE_PANEL_VIEW="CLOSE_PANEL_VIEW",r.SCNY_ONE_SERVER_TIME="SCNY_ONE_SERVER_TIME",r.CROSS_DAY="CROSS_DAY",r.CHANGE_MODEL_VIEW="SHOW_OR_HIDE_GUIDE",r.TO_HIDE_VIP_VIEW="TO_HIDE_VIP_VIEW",r.TO_REQUEST_SHARE_REWARD="TO_REQUEST_SHARE_REWARD",r);function r(){}t.NotifyConstLogin=e,__reflect(e.prototype,"qmr.NotifyConstLogin")}(qmr=qmr||{}),function(t){var e=(n.prototype.setTo=function(t,e,r,i){return this._id=n._gid++,this.caller=t,this.method=e,this.args=r,this.once=i,this},n.prototype.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},n.prototype.runWith=function(t){if(null==this.method)return null;var e=this._id,r=this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t);return this._id===e&&this.once&&this.recover(),r},n.prototype.recover=function(){0<this._id&&(this._id=0,n._pool.push(this.clear()))},n.create=function(t,e,r,i){return void 0===r&&(r=null),void 0===i&&(i=!0),this._pool.length?this._pool.pop().setTo(t,e,r,i):new n(t,e,r,i)},n.prototype.clear=function(){return this.caller=null,this.method=null,this.args=null,this},n._pool=[],n._gid=1,n);function n(t,e,r,i){this._id=0,this.setTo(t,e,r,i)}t.Handler=e,__reflect(e.prototype,"qmr.Handler")}(qmr=qmr||{}),function(t){var e=(r.sendPost=function(t,e,r,i){var n="",o=0;for(var a in e)n+=0==o?a+"="+e[a]:"&"+a+"="+e[a],o++;var s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.open(t,egret.HttpMethod.POST),s.send(n),s.addEventListener(egret.Event.COMPLETE,function(t){r&&r.call(s.response)},this)},r.sendGet=function(t,e,r){var i=new egret.HttpRequest;i.timeout=1e4,i.responseType=egret.HttpResponseType.TEXT,i.open(t,egret.HttpMethod.GET),i.send(null),i.addEventListener(egret.Event.COMPLETE,function(t){e&&e.call(r,i.response)},this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){},this)},r);function r(){}t.HttpRequest=e,__reflect(e.prototype,"qmr.HttpRequest")}(qmr=qmr||{}),function(t){var e=(r.MAP_LAYER="mapLayer",r.FIGTH_UI="figthUI",r.TOOLBAR="toolbar",r.ACTIVITY_UI="activityUI",r.BASE_UI="baseUI",r.SECOND_PAGE_UI="secondUI",r.UI_EFFECT="uiEffect",r.ALERT="alert",r.TIP="tip",r.LOADING="loading",r.SYSTEM_UI="systemUI",r.GUIDE="guide",r.MASK_UI="maskUI",r.CHAT="chat",r.TOP="top",r);function r(){}t.LayerConst=e,__reflect(e.prototype,"qmr.LayerConst")}(qmr=qmr||{}),function(r){var i=egret.DisplayObjectContainer,t=(Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.setup=function(t){this._parent=t,this.layerIndex=this._parent.numChildren,this.addLayer(r.LayerConst.MAP_LAYER,!0),this.addLayer(r.LayerConst.FIGTH_UI,!0),this.addLayer(r.LayerConst.TOOLBAR,!0),this.addLayer(r.LayerConst.ACTIVITY_UI,!0),this.addLayer(r.LayerConst.BASE_UI,!0),this.addLayer(r.LayerConst.SECOND_PAGE_UI,!0),this.addLayer(r.LayerConst.UI_EFFECT,!1),this.addLayer(r.LayerConst.ALERT,!0),this.addLayer(r.LayerConst.SYSTEM_UI,!0),this.addLayer(r.LayerConst.MASK_UI,!0),this.addLayer(r.LayerConst.GUIDE,!0),this.addLayer(r.LayerConst.CHAT,!0),this.addLayer(r.LayerConst.TOP,!0),this.addLayer(r.LayerConst.TIP,!1),this.addLayer(r.LayerConst.LOADING,!1)},e.prototype.showOrHideFightMapAndToolbar=function(t){var e;t?(e=this.getLayer(r.LayerConst.MAP_LAYER),r.DisplayUtils.removeDisplay(e),e=this.getLayer(r.LayerConst.FIGTH_UI),r.DisplayUtils.removeDisplay(e),e=this.getLayer(r.LayerConst.TOOLBAR),r.DisplayUtils.removeDisplay(e)):(e=this.getLayer(r.LayerConst.MAP_LAYER),this._parent.addChildAt(e,this.layerIndex),e=this.getLayer(r.LayerConst.FIGTH_UI),this._parent.addChildAt(e,this.layerIndex+1),e=this.getLayer(r.LayerConst.TOOLBAR),this._parent.addChildAt(e,this.layerIndex+2)),this._isHideFight=t},Object.defineProperty(e.prototype,"isHideFight",{get:function(){return this._isHideFight},enumerable:!0,configurable:!0}),e.prototype.showLayer=function(t){var e=this.getLayer(t);e&&(e.x=0)},e.prototype.hideLayer=function(t){var e=this.getLayer(t);e&&(e.x=9999)},e.prototype.addLayer=function(t,e){var r;this._parent.getChildByName(t)||((r=new i).touchEnabled=r.touchChildren=e,r.name=t,this.layerList.push(r),this._parent.addChild(r),this.layerDic.set(t,r))},e.prototype.getLayer=function(t){return t?this.layerDic.get(t):null},e.prototype.addChild=function(t,e){var r=this.getLayer(e);return r&&r.addChild(t),t},e.prototype.addChildAt=function(t,e,r){void 0===r&&(r=0);var i=this.getLayer(e);return i&&i.addChildAt(t,0),t},e.prototype.removeChild=function(t){return t&&t.parent&&t.parent.removeChild(t),t},e.prototype.setCenter=function(t){t&&(t.x=Math.floor((r.StageUtil.stageWidth-t.width)/2),t.y=Math.floor((r.StageUtil.stageHeight-t.height)/2))},Object.defineProperty(e.prototype,"layersVisible",{set:function(t){for(var e=0,r=this.layerList;e<r.length;e++){var i=r[e];if(i.visible==t)break;i.visible=t}},enumerable:!0,configurable:!0}),e.prototype.addDisplay=function(t,e,r){var i=this.getLayer(e);r?i.addChildAt(t,999):i.addChild(t)},e);function e(){this.layerList=new Array,this.layerDic=new r.Dictionary}r.LayerManager=t,__reflect(t.prototype,"qmr.LayerManager")}(qmr=qmr||{}),function(h){var p,t,e=(f.loadGroup=function(t,e,r,i,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===i&&(i=0),void 0===n&&(n=null),f.addLoader(t,e,r,i,null,!0,n)},f.getRes=function(t,e,r,i,n){if(void 0===i&&(i=0),void 0===n&&(n=null),t){if(RES.hasRes(t)){var o=RES.getRes(t);if(o)return a=o,void(e&&e.call(r,a,t))}f.addLoader(t,e,r,i,n)}var a},f.addLoader=function(t,e,r,i,n,o,a){void 0===i&&(i=0),void 0===n&&(n=null),void 0===o&&(o=!1),void 0===a&&(a=null);var s=d.get();s.init(f.loaderCompleted,t,e,r,n,i,o,a);var l=f._sameResInfoDic;l||(l=new h.Dictionary,f._sameResInfoDic=l);var c,u=l.get(t);u?(u.push(s),f.checkSameLoaderPriority(t,i)):(u=[],l.set(t,u),i>=p.IMMEDIATELY?f.startLoader(s):((c=f._loaderQueue)||(f._loaderQueue=c=[]),c.push(s),f.checkToLoadNext()))},f.checkSameLoaderPriority=function(t,e){var r=f._loaderQueue;if(r)for(var i=r.length,n=0;n<i;n++){var o=r[n];if(o.source==t){o.priority<e&&((o.priority=e)==p.IMMEDIATELY?(r.splice(n,1),f.startLoader(o)):f.checkToLoadNext());break}}},f.checkToLoadNext=function(){var t,e,r,i=f._loaderQueue;!i||0<(t=i.length)&&(r=!1,(e=i[t-1]).priority>=p.HIGH?f._loadingCount<f.HIGH_PRIORITY_MAX_COUNT&&(r=!0):e.priority<=p.LOW&&f._loadingCount<f.LOW_PRIORITY_MAX_COUNT&&(r=!0),r&&(e=i.pop(),f.startLoader(e)))},f.startLoader=function(t){f._loadingCount++,t.load()},f.loaderCompleted=function(t,e,r){try{if(e){f.callbackLoader(t,r);var i=f._loaderQueue;if(i&&0<i.length)for(var n=i.length-1;0<=n;n--){var o,a=i[n];!RES.hasRes(a.source)||(o=RES.getRes(a.source))&&(f.callbackLoader(a,o),i.splice(n,1),d.recycle(a))}}var s,l=f._sameResInfoDic.get(t.source);if(l&&(f._sameResInfoDic.remove(t.source),e))for(s=l.length,n=0;n<s;n++){var c=l[n];f.startLoader(c)}d.recycle(t)}catch(t){h.LogUtil.log("ResManager.loaderCompleted error"+t)}finally{f._loadingCount--,f.checkToLoadNext()}},f.callbackLoader=function(t,e){t.compFunc&&(e?t.compFunc.call(t.thisObject,e,t.source):t.compFunc.call(t.thisObject))},f.LOW_PRIORITY_MAX_COUNT=1,f.HIGH_PRIORITY_MAX_COUNT=4,f._loadingCount=0,f);function f(){}h.ResManager=e,__reflect(e.prototype,"qmr.ResManager"),(t=p=h.LoadPriority||(h.LoadPriority={}))[t.LOW=-1]="LOW",t[t.HIGH=0]="HIGH",t[t.IMMEDIATELY=1]="IMMEDIATELY";var d=(r.getPool=function(){var t=r._pool;return t||(r._pool=t=[]),t},r.get=function(){var t=r.getPool();return 0<t.length?t.pop():new i},r.recycle=function(t){t.reset(),r.getPool().push(t)},r);function r(){}__reflect(d.prototype,"LoaderPool");var i=(n.prototype.init=function(t,e,r,i,n,o,a,s){void 0===o&&(o=0),void 0===a&&(a=!1),void 0===s&&(s=null),this.callbackMananger=t,this.source=e,this.compFunc=r,this.thisObject=i,this.type=this.type,this.priority=o,this.isGroup=a,this.progFunc=s,this.loadCount=0},n.prototype.load=function(){if(this.loadCount++,this.isGroup)this.loadCount<=1&&(RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onGroupProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onGroupLoadCompleted,this)),RES.loadGroup(this.source);else{var t=!1;if(RES.hasRes(this.source)){t=!0;var e=RES.getRes(this.source);if(e)return void this.onGetResSuccess(e)}this.loadCount<=1&&RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),t?RES.getResAsync(this.source,this.onGetResSuccess,this):RES.getResByUrl(this.source,this.onGetResSuccess,this,this.type)}},n.prototype.reset=function(){this.isGroup?(RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onGroupProgress,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onGroupLoadCompleted,this)):RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.callbackMananger=null,this.source=null,this.compFunc=null,this.thisObject=null,this.type=null,this.priority=null,this.isGroup=!1,this.progFunc=null,this.loadCount=0},n.prototype.onGetResSuccess=function(t){this.callbackMananger&&this.callbackMananger(this,!0,t)},n.prototype.onItemLoadError=function(t){this.source==t.resItem.url&&(h.LogUtil.log("onItemLoadError",this.source),this.callbackMananger&&this.callbackMananger(this,!1))},n.prototype.onGroupLoadCompleted=function(t){this.source==t.groupName&&this.callbackMananger&&this.callbackMananger(this,!0)},n.prototype.onGroupLoadError=function(t){this.source==t.groupName&&this.callbackMananger&&this.callbackMananger(this,!1)},n.prototype.onGroupProgress=function(t){this.source==t.groupName&&this.progFunc&&this.progFunc(t.itemsLoaded/t.itemsTotal)},n);function n(){}__reflect(i.prototype,"Loader")}(qmr=qmr||{}),function(t){var e=(Object.defineProperty(r,"instance",{get:function(){return null==this._instance&&(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r.prototype.init=function(){var t=this;egret.lifecycle.onPause=function(){t.onPause()},egret.lifecycle.onResume=function(){t.onResume()}},r.prototype.onResume=function(){t.LogUtil.log("焦点触发"),t.SoundManager.getInstance().isMusicSoundOpen=r.bgSoundIsOpen,t.SoundManager.getInstance().isEffectSoundOpen=r.effectSoundIsOpen,t.PlatformManager.instance.platform.onShareBack()},r.prototype.onPause=function(){t.LogUtil.log("焦点失去"),r.instance.onHideCount++,r.bgSoundIsOpen=t.SoundManager.getInstance().isMusicSoundOpen,r.effectSoundIsOpen=t.SoundManager.getInstance().isEffectSoundOpen,t.SoundManager.getInstance().isMusicSoundOpen=!1,t.SoundManager.getInstance().isEffectSoundOpen=!1},r.bgSoundIsOpen=!0,r.effectSoundIsOpen=!0,r);function r(){this.onHideCount=0}t.GameLifecycleManger=e,__reflect(e.prototype,"qmr.GameLifecycleManger")}(qmr=qmr||{}),function(c){var t,e=(t=c.BaseNotify,__extends(r,t),r.prototype.loadBaseRes=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return c.PlatformManager.instance.platform.setLoadingStatus("玩命加载中..."),[4,this.loadResJson("login.res.json","resourceLogin/")];case 1:return t.sent(),[4,this.loadThmJson("login.thm.json")];case 2:return t.sent(),[4,this.loadPreloadingGroup()];case 3:return t.sent(),[4,this.loadLoginBaseAnimation()];case 4:return t.sent(),c.PlatformManager.instance.platform.setLoadingProgress(50),[2]}})})},r.prototype.loadcreateRoleGroup=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResJson("createrole.res.json")];case 1:return t.sent(),[4,this.loadThmJson("createrole.thm.json")];case 2:return t.sent(),[4,this.loadCreateRoleThmJs()];case 3:return t.sent(),[2,new Promise(function(t,e){function r(){2<=++i&&t()}var i=0;c.ResManager.loadGroup("createrole",r,n,c.LoadPriority.IMMEDIATELY),c.ResManager.getRes(c.GlobalConfig.getBgName(),r,n,c.LoadPriority.IMMEDIATELY)})]}})})},r.prototype.loadLoginViewRes=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return c.PlatformManager.instance.platform.setLoadingStatus("精彩立即呈现"),[2,new Promise(function(t,e){function r(){2<=++i&&t()}var i=0;c.ResManager.loadGroup("login",r,n,c.LoadPriority.IMMEDIATELY),c.ResManager.getRes("serverlist_loginBg_jpg",r,n,c.LoadPriority.IMMEDIATELY)})]})})},r.prototype.loadGameResAfterLogin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return!c.VersionManager.isGameVersionReady||this.isGameResAfterLoginLoading?[2]:(this.isGameResAfterLoginLoading=!0,this.isGameResAfterLoginLoaded=!1,c.MarkPointManager.setPoint(c.PointEnum.POINT_7),[4,this.loadLoadingViewRes()]);case 1:return t.sent(),this.setLoadingViewParams("加载资源配置...",!0,.05,.1,!1),c.MarkPointManager.loginSetPoint(c.PointEnum.LOAD_DEFAULT_RES),c.MarkPointManager.setPoint(c.PointEnum.POINT_WX_LOAD_SKIN),this.setLoadingViewParams("加载皮肤配置...",!0,.1,.2,!0),[4,this.loadResJson("default.res.json")];case 2:return t.sent(),[4,this.loadDefaultThmJs()];case 3:return t.sent(),[4,this.loadThmJson("default.thm.json")];case 4:return t.sent(),c.MarkPointManager.setPoint(c.PointEnum.POINT_WX_LOAD_CONFIG),this.setLoadingViewParams("加载游戏配置...",!0,.2,.5,!0),[4,this.loadConfigGroup()];case 5:return t.sent(),this.setLoadingViewParams("加载公共资源...",!0,.5,.9,!0),c.MarkPointManager.loginSetPoint(c.PointEnum.LOAD_COMMON_RES),c.MarkPointManager.setPoint(c.PointEnum.POINT_WX_LOAD_COMMON_RES),[4,this.loadCommonGroup()];case 6:return t.sent(),[4,this.loadBaseAnimation()];case 7:return t.sent(),c.GlobalConfig.isCreatRoleEnterGame?(this.setLoadingViewParams("加载公共资源...",!0,.9,.99,!0),[4,this.loadResNeedByNewRole()]):[3,9];case 8:t.sent(),t.label=9;case 9:return c.MarkPointManager.setPoint(c.PointEnum.POINT_WX_LOAD_COMPLETED),this.isGameResAfterLoginLoaded=!0,this.gameResAfterLoginLoadedCall&&this.gameResAfterLoginLoadedCall.call(this),[2]}})})},r.prototype.waiGameResAfterLoginLoaded=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},r.prototype.waitGameResLoaded=function(){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(t){return i=this,[2,new Promise(function(e,t){function r(){i.setLoadingViewParams("准备进入游戏...",!0,.99,.99,!0);var t=new egret.Timer(30,1);t.addEventListener(egret.TimerEvent.TIMER,function(){i.loadPreModel(),e()},i),t.start()}i.isGameResAfterLoginLoaded?(i.showLoadingView(),r()):(i.gameResAfterLoginLoadedCall=r,i.showLoadingView())})]})})},r.prototype.loadLoadingViewRes=function(){return __awaiter(this,void 0,void 0,function(){var i=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=0;c.ResManager.getRes(c.GameLoadingView.getBgName(),function(){1<=++r&&t()},i,c.LoadPriority.IMMEDIATELY)})]})})},r.prototype.setLoadingViewParams=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.loadingViewparams=t,this.gameResAfterLoginLoadedCall&&this.showLoadingView()},r.prototype.showLoadingView=function(){this.loadingViewparams&&c.GameLoadingView.getInstance().showSelf(this.loadingViewparams[0],this.loadingViewparams[1],this.loadingViewparams[2],this.loadingViewparams[3],this.loadingViewparams[4])},r.prototype.updateTotalProgress=function(t){c.ModuleManager.isShowModule(c.ModuleNameLogin.GAME_LOADING_VIEW)&&c.GameLoadingView.getInstance().updateTotalProgress(t,!0)},r.prototype.loadPreloadingGroup=function(){return __awaiter(this,void 0,void 0,function(){var r,i=this;return __generator(this,function(t){return r=this,[2,new Promise(function(t,e){c.ResManager.loadGroup("preloading1",function(){t()},i,c.LoadPriority.IMMEDIATELY,r.updateTotalProgress)})]})})},r.prototype.loadLoginBaseAnimation=function(){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=[];r.push({path:c.SystemPath.defaultPath,res:"168_idle"});var i=r.length,n=0;o.loaderSilentResource(r,function(){i<=++n&&t()},c.LoadPriority.IMMEDIATELY)})]})})},r.prototype.loadCreateRoleThmJs=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,e){window.onScriptLoadedCallBack=function(){t()},window.onScriptLoadingProgressCallBack=function(t){},window.loadJsForEgretGame?window.loadJsForEgretGame("createrole",c.VersionManager.getPathWithGameVersion):t()})]})})},r.prototype.loadDefaultThmJs=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,e){window.onScriptLoadedCallBack=function(){t()},window.onScriptLoadingProgressCallBack=function(t){},window.loadJsForEgretGame?window.loadJsForEgretGame("game",c.VersionManager.getPathWithGameVersion):window.loadSub2?window.loadSub2():t()})]})})},r.prototype.loadResJson=function(o,a){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=function(){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,r,this),t()};RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,r,n),a=a||c.PlatformConfig.baseRoot;var i=c.PlatformConfig.useCdnRes?c.PlatformConfig.webUrl+a:a;RES.loadConfig(i+o,i)})]})})},r.prototype.loadThmJson=function(a,s){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(t){return[2,new Promise(function(t,e){s=s||c.PlatformConfig.baseRoot;var r=c.PlatformConfig.useCdnRes?c.PlatformConfig.webUrl+s:s,i=new eui.Theme(r+a,c.StageUtil.stage),n=function(){i.removeEventListener(eui.UIEvent.COMPLETE,n,this),t()};i.addEventListener(eui.UIEvent.COMPLETE,n,o)})]})})},r.prototype.loadConfigGroup=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=n,i=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,i,r),t()};RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,i,r),c.ResManager.loadGroup("config",i,n,c.LoadPriority.IMMEDIATELY,r.updateTotalProgress)})]})})},r.prototype.loadCommonGroup=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=n,i=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,i,r),t()};RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,i,r),c.ResManager.loadGroup("common",i,n,c.LoadPriority.IMMEDIATELY,r.updateTotalProgress)})]})})},r.prototype.loadBaseAnimation=function(){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=[];r.push({path:c.SystemPath.rolePath,res:"50_idle"}),o.loadFristMap(r);var i=r.length,n=0;o.loaderSilentResource(r,function(){i<=++n&&t()},c.LoadPriority.IMMEDIATELY)})]})})},r.prototype.loadResNeedByNewRole=function(){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=[];r.push({path:"ui_dlhl_dengluhaoli_png",type:RES.ResourceItem.TYPE_IMAGE}),r.push({path:"lijilingqu_png",type:RES.ResourceItem.TYPE_IMAGE});var i=r.length,n=0;o.loaderSilentResource(r,function(){i<=++n&&t()},c.LoadPriority.IMMEDIATELY)})]})})},r.prototype.loadPreModel=function(){var t=[],e=[],r=c.SystemPath.effectPath,i=c.GlobalConfig.registerAccountHeroId;i==c.WarriorRole.ROLE_MALE?(t.push({path:c.SystemPath.rolePath,res:"1003_idle"}),e.push({path:r,res:"7110_effect",harf:!0}),e.push({path:r,res:"7107_effect"}),e.push({path:r,res:"7089_effect"}),e.push({path:r,res:"7090_effect",harf:!0}),e.push({path:r,res:"7091_effect"}),e.push({path:r,res:"7092_effect"}),e.push({path:r,res:"7093_effect",harf:!0}),e.push({path:r,res:"7094_effect"})):i==c.WarriorRole.ROLE_FEMALE&&(t.push({path:c.SystemPath.rolePath,res:"2003_idle"}),e.push({path:r,res:"7001_effect",harf:!0}),e.push({path:r,res:"7061_effect"}),e.push({path:r,res:"7062_effect",harf:!0}),e.push({path:r,res:"7095_effect"}),e.push({path:r,res:"7096_effect",harf:!0}),e.push({path:r,res:"7097_effect",harf:!0}),e.push({path:r,res:"7098_effect",harf:!0}),e.push({path:r,res:"7099_effect"})),this.loaderSilentResource(t,null,c.LoadPriority.IMMEDIATELY),this.loaderSilentResource(e,null,c.LoadPriority.LOW)},r.prototype.preLoadAnimation=function(t,e,r,i,n,o){void 0===r&&(r=0),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1);var a,s,l=e;o&&(l+="_f"),i?(s=a=!1,c.ResManager.getRes(t+e+".json",function(t){a=!0,s&&i&&i.call(n)},this,r,RES.ResourceItem.TYPE_JSON),c.ResManager.getRes(t+l+".png",function(t){s=!0,a&&i&&i.call(n)},this,r,RES.ResourceItem.TYPE_IMAGE)):(c.ResManager.getRes(t+e+".json",null,null,r,RES.ResourceItem.TYPE_JSON),c.ResManager.getRes(t+l+".png",null,null,r,RES.ResourceItem.TYPE_IMAGE))},r.prototype.loaderSilentResource=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=0);for(var i,n=null,o=0,a=t;o<a.length;o++){var s=a[o],n=s.path;s.type?c.ResManager.getRes(n,e,this,r,s.type):(i=s.res,this.preLoadAnimation(s.path,i,r,e,this,s.harf),n=s.path+i+".png",c.LoaderManager.instance.addGroupRef(n))}},r.prototype.loadFristMap=function(e){var r,i;["_hang_top.jpg","_hang_middle.png","_hang_down.png"].forEach(function(t){r=1001+t,i=c.ResPathUtil.getHangMapUrl(r),e.push({path:i,type:RES.ResourceItem.TYPE_IMAGE})})},Object.defineProperty(r,"instance",{get:function(){return this._instance||(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r);function r(){return t.call(this)||this}c.GameLoadManager=e,__reflect(e.prototype,"qmr.GameLoadManager")}(qmr=qmr||{}),function(e){var t=(r.getInstance=function(){return null==r.instance&&(r.instance=new r).parseNameJson(),r.instance},r.prototype.getRandomName=function(t){var e=this.name_xing.length,r=this.name_ming_nan.length,i=this.name_ming_nv.length;return this.name_xing[Math.floor(Math.random()*e)]+(0==t?this.name_ming_nan[Math.floor(Math.random()*r)]:this.name_ming_nv[Math.floor(Math.random()*i)])},r.prototype.parseNameJson=function(){var t=e.ConfigManagerBase.getConf(e.ConfigEnumBase.PLAYERNAME,1);t&&(this.name_xing=t.name_xing?t.name_xing.toString().split(";"):null,this.name_ming_nan=t.name_ming_nan?t.name_ming_nan.toString().split(";"):null,this.name_ming_nv=t.name_ming_nv?t.name_ming_nv.toString().split(";"):null)},r);function r(){this.jsonDic={}}e.JsonDataManager=t,__reflect(t.prototype,"qmr.JsonDataManager")}(qmr=qmr||{}),function(i){var t=(e.getLayerMaskSprite=function(){return i.Pool.getItemByClass("LayerMaskSprite",e)},e.recovryLayerMaskSprite=function(t){i.Pool.recover("LayerMaskSprite",t)},e.prototype.addMask=function(t,e){void 0===e&&(e=!1),this._isAlpha0=e,this.mask||(this.mask=new egret.Sprite),this.onStageResize(),this.mask.touchEnabled=!0,this.mask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMaskHandler,this),i.LayerManager.instance.getLayer(t).addChild(this.mask),e||this.tweenAddMask()},e.prototype.onClickMaskHandler=function(t){var e,r;this.mask&&this.mask.parent&&1<(e=this.mask.parent.numChildren)&&(r=this.mask.parent.getChildAt(e-1))instanceof i.SuperBaseModule&&r.isClickHide&&r.hide()},e.prototype.tweenAddMask=function(){this.mask&&this.mask.parent&&(egret.Tween.resumeTweens(this.mask),egret.Tween.get(this.mask).to({alpha:1},120))},e.prototype.tweenRemoveMask=function(){var t=this.mask;t&&t.parent&&(0<t.alpha?(t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMaskHandler,this),egret.Tween.resumeTweens(t),egret.Tween.get(t).to({alpha:0},100).call(this.removeMask,this)):this.removeMask())},e.prototype.onStageResize=function(){var t=this.stageWidth,e=this.stageHeight;this.mask.graphics.clear(),this.mask.graphics.beginFill(0,this._isAlpha0?0:.6),this.mask.graphics.drawRect(0,0,t,e),this.mask.graphics.endFill(),this.mask.width=t,this.mask.height=e},e.prototype.removeMask=function(){var t=this.mask;t&&t.parent&&(t.graphics.clear(),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickMaskHandler,this),t.parent.removeChild(t)),this.dispose()},Object.defineProperty(e.prototype,"stageWidth",{get:function(){return i.StageUtil.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stageHeight",{get:function(){return i.StageUtil.stageHeight},enumerable:!0,configurable:!0}),e.prototype.reset=function(){},e.prototype.dispose=function(){this.reset(),e.recovryLayerMaskSprite(this)},e);function e(){this.mask=new egret.Sprite}i.LayerMaskSprite=t,__reflect(t.prototype,"qmr.LayerMaskSprite")}(qmr=qmr||{}),function(a){var t=(Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.addGroupRef=function(t){var e,r;-1==this._noCountGroupNames.indexOf(t)&&((e=this.groupNameDic[t])||(this.groupNameDic[t]=e={}),(r=e.count)?r+=1:r=1,e.count=r,a.LogUtil.log("LoaderManager.addGroupRef:",t,r))},e.prototype.removeGroupRef=function(t){t in this.groupNameDic&&delete this.groupNameDic[t]},e.prototype.destoryGroup=function(t,e){void 0===e&&(e=!1);var r,i,n=this.groupNameDic[t];n&&((r=n.count)?--r:r=0,r<=0&&(r=0),0==(n.count=r)&&(n.livingTime=egret.getTimer(),e)&&(i=RES.destroyRes(t),a.LogUtil.warn("强制释放 "+t+"  "+i),this.groupNameDic[t]=null,delete this.groupNameDic[t]))},e.prototype.calGpuSizeTick=function(){},e.prototype.clearGroupTick=function(){var t=egret.getTimer(),e=this.groupNameDic,r=this.maxLivingTime;for(var i in e){var n,o=e[i];0==o.count&&o.livingTime&&t-o.livingTime>r&&(n=RES.destroyRes(i),a.LogUtil.warn("RES.destroyRes res:"+i+"  "+n),e[i]=null,delete e[i])}a.ModuleManager.clearModuleTick(t,r),a.AnimateManager.getInstance().clear(t)},e);function e(){this.maxLivingTime=12e4,this._noCountGroupNames=["common","mainC","common_beijing_png"];this.groupNameDic={},a.Ticker.getInstance().registerTick(this.clearGroupTick,this,6e4)}a.LoaderManager=t,__reflect(t.prototype,"qmr.LoaderManager")}(qmr=qmr||{}),function(a){var t=(o.startCheck=function(){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(t){switch(t.label){case 0:return e=this,a.PlatformManager.instance.isOutNetPlatForm?[3,2]:(r=a.Handler.create(e,e.pullServerList),[4,a.GameLoadManager.instance.loadLoginViewRes()]);case 1:return t.sent(),a.ModuleManager.showModule(a.ModuleNameLogin.LOGIN_VIEW,r),[3,3];case 2:e.pullServerList(),t.label=3;case 3:return[2]}})})},o.reqConnectGameServer=function(){var t=this;a.GameLoading.getInstance().setLoadingTip("登录中..."),a.Rpc.getInstance().connect(a.GlobalConfig.loginServer,a.GlobalConfig.loginPort,function(){a.MarkPointManager.setPoint(a.PointEnum.POINT_4),t.checkAccountValidity(a.Handler.create(t,function(){return __awaiter(this,void 0,void 0,function(){var e,r,i;return __generator(this,function(t){return(e=a.ServerListModel.instance.getServerVo(parseInt(a.GlobalConfig.sid)))&&(a.GlobalConfig.sName=e.serverName),r=a.ServerListModel.instance.sid,i=a.GlobalConfig.uid+"",console.log("account:"+a.GlobalConfig.account+" ---- userName:"+i),a.GlobalConfig.account?(a.MarkPointManager.setPoint(a.PointEnum.POINT_5),a.LoginController.instance.reqLogin(a.GlobalConfig.account,r)):a.ModuleManager.showModule(a.ModuleNameLogin.DISCONNECT_VIEW,{msg:"平台账号验证失败，请重新登录",code:-1},a.LayerConst.TIP,!0,!1),[2]})})}))},t)},o.pullServerList=function(){return __awaiter(this,void 0,void 0,function(){var n,e;return __generator(this,function(t){return n=this,a.GlobalConfig.account&&""!=a.GlobalConfig.account?(a.MarkPointManager.loginBeforeSetPoint(a.PointEnum.GET_SERVER_LIST),e=a.PlatformManager.instance.platform.getPullServerListUrl(),console.log("服务器请求列表: "+e),a.HttpRequest.sendGet(e,function(i){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),e=JSON.parse(i),console.log("拉取服务器列表成功:"+JSON.stringify(i)),a.GlobalConfig.serverList=e.sl,a.GlobalConfig.recentLoginServerList=e.my,a.ServerListController.instance.parseServerList(a.GlobalConfig.serverList),a.PlatformConfig.platformId!=a.PlatformEnum.P_6kwAndriod&&a.PlatformManager.instance.isOutNetPlatForm?[3,2]:[4,n.showLoginView()];case 1:return t.sent(),[3,3];case 2:n.pullRecentlyServerList(),t.label=3;case 3:return[3,5];case 4:return r=t.sent(),console.log("拉取服务器解析失败:"+r),[3,5];case 5:return[2]}})})},n)):(console.error("账号为空"),a.TipManagerCommon.getInstance().createCommonColorTip("账号为空")),[2]})})},o.checkAccountValidity=function(i){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(t){switch(t.label){case 0:return e=this,[4,a.PlatformManager.instance.platform.getCheckAccountValidityUrl(a.TimeUtil.serverTime)];case 1:return r=t.sent(),console.log("检测账号合法性请求: "+r),a.HttpRequest.sendGet(r,function(t){var e=JSON.parse(t);console.log("请求登陆服检测账户合法性验证回包:"+JSON.stringify(t)),e&&0==e.ret&&(console.log("请求登陆服检测账户合法性验证通过",e.sparam),a.PlatformManager.instance.platform.isVerify=!0,a.GlobalConfig.cdata=e.cdata,a.GlobalConfig.sparam=e.sparam,a.GlobalConfig.logintime=e.sparam.time,e.sparam&&e.sparam.clientip&&(a.GlobalConfig.clientIp=e.sparam.clientip,a.PlatformConfig.channelId=e.sparam.ChannelId),e.sparam&&e.sparam.account&&(a.GlobalConfig.account=String(e.sparam.account),console.log("返回账号替换:"+e.sparam.account)),i&&i.run())},e),[2]}})})},o.showLoginView=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return a.PlatformManager.instance.platform.setLoadingProgress(100),[4,a.GameLoadManager.instance.loadLoginViewRes()];case 1:return t.sent(),a.ModuleManager.showModule(a.ModuleNameLogin.LOGIN_VIEW),a.MarkPointManager.loginBeforeSetPoint(a.PointEnum.SHOW_SELECT_SERVER_VIEW),[2]}})})},o.pullRecentlyServerList=function(){var o=this;a.ServerListController.instance.pullMyLoginServerList(a.Handler.create(this,function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n;return __generator(this,function(t){switch(t.label){case 0:if(e="",(r=a.ServerListModel.instance.recentLoginServerlist)&&0<r.length)for(n=0;n<r.length;n++)i=r[n],e+="ip="+i.ip+",serverId="+i.serverId+",serverName="+i.serverName+",serverIndex="+i.serverIndex+";";return console.log("获取玩家最近登录的服务器列表：===》》》"+e),0<a.ServerListModel.instance.recentLoginServerlist.length?(a.GlobalConfig.isFirstNewUser=!1,[4,o.showLoginView()]):[3,2];case 1:return t.sent(),a.MarkPointManager.loginBeforeSetPoint(a.PointEnum.SHOW_SELECT_SERVER_VIEW),a.ModuleManager.popModule(a.ModuleNameLogin.GONGGAO_VIEW),[3,3];case 2:a.GlobalConfig.isFirstNewUser=!0,o.firstLoginByNewUser(),t.label=3;case 3:return[2]}})})}))},o.firstLoginByNewUser=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n;return __generator(this,function(t){return a.MarkPointManager.setPoint(a.PointEnum.POINT_2),e=null,e=a.ServerListModel.instance.recommendServer,console.log("最近服务器数据",e&&JSON.stringify(e)),e||(e=a.ServerListModel.instance.defaultServer,console.log("默认服务器数据",e&&JSON.stringify(e))),e?e.isWh?a.TipManagerCommon.getInstance().createCommonColorTip("服务器维护中"):(a.GlobalConfig.sid=e.serverId+"",r=e.ip,i=e.port,(n=new a.LoginInfoVo).loginServerIP=r,n.loginServerPort=i+"",egret.localStorage.setItem("testUserid",a.GlobalConfig.account),egret.localStorage.setItem("serverId",a.GlobalConfig.sid),a.PlatformManager.instance.platform.setLoadingProgress(100),a.PlatformManager.instance.platform.setLoadingStatus("精彩立即呈现"),a.MarkPointManager.setPoint(a.PointEnum.POINT_3),a.LoginModel.instance.setLoginIninfo(n),o.reqConnectGameServer()):a.TipManagerCommon.getInstance().createCommonColorTip("请选择服务器"),[2]})})},o);function o(){}a.LoginManager=t,__reflect(t.prototype,"qmr.LoginManager")}(qmr=qmr||{}),function(m){var t,e=(r.setPoint=function(t,e){void 0===e&&(e=!1),m.PlatformConfig.platformId==m.PlatformEnum.P_WX&&m.GlobalConfig.isFirstNewUser&&(this.MarkedPoints[t]||(this.MarkedPoints[t]=!0,m.PlatformConfig.platformId==m.PlatformEnum.P_WX&&aladin.AladinSDK.reportAnalytics(m.PlatformConfig.appIdStr+"",t),console.log("》》》游戏进度打点:"+t+"\t"+egret.getTimer()+"ms")))},r.loginBeforeSetPoint=function(t,e){if(e=e||"",m.PlatformConfig.isNeedMarkPoint){var r,i,n,o,a,s,l,c,u,h,p=m.PlatformManager.instance;if(!p.isGetPlatformInfo)return void console.log("平台sdk信息拉取不成功,禁止打点...");this.markedPoint[t]||(r=encodeURI(m.PlatformConfig.platform),i=encodeURI(m.GlobalConfig.account),n=encodeURI(m.PlatformConfig.channelId),o=t,a=encodeURI(m.WebBrowerUtil.model),s=encodeURI(m.GlobalConfig.appVersion),l=encodeURI(m.GlobalConfig.clientIp),c=(new Date).getTime()/1e3|0,u=encodeURI(m.Md5Util.getInstance().hex_md5(""+r+i+l+o+c+m.GlobalConfig.qosKey)),h=p.platform.markPointUrlBeforeLogin+"?platform="+r+"&account="+i+"&channel="+n+"&type="+o+"&subtype="+e+"&device="+a+"&clientver="+s+"&clientip="+l+"&time="+c+"&sign="+u,console.log("登录前打点地址: "+h),m.HttpRequest.sendGet(h,function(t){console.log("登录前打点地址回包"+t)},this),this.markedPoint[t]=!0)}},r.loginSetPoint=function(t,e,r){if(void 0===e&&(e=!0),r=r||"",(!e||m.GlobalConfig.isCreatRoleEnterGame)&&m.PlatformConfig.isNeedMarkPoint){var i=m.GlobalConfig.cdata;if(!i||!i.qosurl)return void console.log("服务端返回不再打点 point:",t);var n,o,a,s,l,c,u,h,p,f,d,g=m.PlatformManager.instance;if(!g.isGetPlatformInfo)return void console.log("平台sdk信息拉取不成功,禁止打点...");this.markedPoint[t]||(n=encodeURI(m.PlatformConfig.platform),o=encodeURI(m.GlobalConfig.sid),a=encodeURI(m.PlatformConfig.channelId),s=encodeURI(m.GlobalConfig.account),l=t,c=encodeURI(m.WebBrowerUtil.model),u=encodeURI(m.GlobalConfig.appVersion),h=encodeURI(m.GlobalConfig.clientIp),p=(new Date).getTime()/1e3|0,f=encodeURI(m.Md5Util.getInstance().hex_md5(""+n+s+o+h+l+p+m.GlobalConfig.qosKey)),d=g.platform.markPointUrl+"?platform="+n+"&serverid="+o+"&channel="+a+"&account="+s+"&type="+l+"&subtype="+r+"&device="+c+"&clientver="+u+"&clientip="+h+"&time="+p+"&sign="+f,console.log("登录后打点："+d),m.HttpRequest.sendGet(d,function(t){console.log("登录后打点地址回包"+t)},this),this.markedPoint[t]=!0)}},r.markedPoint={},r.MarkedPoints={},r);function r(){}m.MarkPointManager=e,__reflect(e.prototype,"qmr.MarkPointManager"),(t=m.PointEnum||(m.PointEnum={}))[t.SDK_LOGIN=100]="SDK_LOGIN",t[t.GET_SERVER_LIST=101]="GET_SERVER_LIST",t[t.SHOW_SELECT_SERVER_VIEW=102]="SHOW_SELECT_SERVER_VIEW",t[t.START_GAME=103]="START_GAME",t[t.SHOW_CREAT_ROLE_VIEW=301]="SHOW_CREAT_ROLE_VIEW",t[t.CREAT_SUCCESS=302]="CREAT_SUCCESS",t[t.CREAT_FAIL=303]="CREAT_FAIL",t[t.LOAD_DEFAULT_RES=304]="LOAD_DEFAULT_RES",t[t.LOAD_COMMON_RES=305]="LOAD_COMMON_RES",t[t.FIRST_ENTER_GAME=401]="FIRST_ENTER_GAME",t[t.EVERY_ENTER_GAME=402]="EVERY_ENTER_GAME",t[t.POINT_2=2]="POINT_2",t[t.POINT_3=3]="POINT_3",t[t.POINT_4=4]="POINT_4",t[t.POINT_5=5]="POINT_5",t[t.POINT_6=6]="POINT_6",t[t.POINT_7=7]="POINT_7",t[t.POINT_8=8]="POINT_8",t[t.POINT_9=9]="POINT_9",t[t.POINT_10=10]="POINT_10",t[t.POINT_11=11]="POINT_11",t[t.POINT_12=12]="POINT_12",t[t.POINT_WX_LOAD_SKIN=13]="POINT_WX_LOAD_SKIN",t[t.POINT_WX_LOAD_CONFIG=14]="POINT_WX_LOAD_CONFIG",t[t.POINT_WX_LOAD_COMMON_RES=15]="POINT_WX_LOAD_COMMON_RES",t[t.POINT_WX_LOAD_COMPLETED=16]="POINT_WX_LOAD_COMPLETED",t[t.POINT_WX_CLICK_START_BTN=17]="POINT_WX_CLICK_START_BTN",t[t.POINT_WX_CLICK_RANDOM_BTN=18]="POINT_WX_CLICK_RANDOM_BTN",t[t.POINT_WX_CLICK_INPUTTEXT=19]="POINT_WX_CLICK_INPUTTEXT"}(qmr=qmr||{}),function(i){var e,t=(e=i.BaseController,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return null==this._instance&&(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r.prototype.initListeners=function(){this.addSocketListener(i.MessageIDLogin.S_SYNC_TIME,this.onRecsynSystem,this),this.addSocketListener(i.MessageIDLogin.S_EXCEPTION_MSG,this.onRecExceptionMsg,this,!0)},r.prototype.startHeart=function(){this.isStartSysn||(this.isStartSysn=!0,this.timeFlag=Date.now(),this.timeKey=egret.setInterval(this.reqgetSystemTime,this,8e3),this.reqgetSystemTime())},r.prototype.clearHeart=function(){this.isStartSysn=!1,-1!=this.timeKey&&(egret.clearInterval(this.timeKey),this.timeKey=-1)},r.prototype.reqgetSystemTime=function(){var t=new com.message.C_SYNC_TIME;this.sendCmd(t,i.MessageIDLogin.C_SYNC_TIME)},r.prototype.onRecsynSystem=function(t){i.TimeUtil.syncServerTime(parseInt(t.time.toString())),this.isSyncOne||(this.isSyncOne=!0,this.dispatch(i.NotifyConstLogin.SCNY_ONE_SERVER_TIME)),i.GlobalConfig.loginInitFinish&&!i.ServerClock.getInstance().isClockStart&&i.ServerClock.getInstance().startClock()},r.prototype.onRecExceptionMsg=function(t){var e=t.code;i.LogUtil.log("[错误码: "+e+"]");var r=i.ConfigManagerBase.getConf(i.ConfigEnumBase.CODECFG,e);r&&(1217==e?(i.Rpc.getInstance().close(),i.GameLoading.getInstance().close(),i.TipManagerCommon.getInstance().createCommonColorTip(r.msg)):1171==e?(this.dispatch(i.NotifyConstLogin.S_USER_LOGIN_REPEAT),i.TipManagerCommon.getInstance().createCommonColorTip(r.msg)):this.dispatch(i.NotifyConstLogin.S_ERROR_CODE,e)),!i.GlobalConfig.isCreatRoleEnterGame||1171!=e&&1172!=e&&1173!=e||i.MarkPointManager.loginSetPoint(i.PointEnum.CREAT_FAIL)},r);function r(){var t=e.call(this)||this;return t.timeKey=-1,t}i.SystemController=t,__reflect(t.prototype,"qmr.SystemController")}(qmr=qmr||{}),function(o){var t=(e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.createCommonTip=function(t,e,r,i){void 0===e&&(e=16777215),void 0===r&&(r=0),void 0===i&&(i=null);for(var n=!1,o=0,a=this.commonMessInfo;o<a.length;o++)if(a[o].mess==t){n=!0;break}n||this.commonMessInfo.push({mess:t,color:e,yPos:r,itemcfg:i}),this.isConmmoning||(this.isConmmoning=!0,this.showCommonTip())},e.prototype.createCommonColorTip=function(t,e,r,i){void 0===e&&(e=!1),void 0===r&&(r=0),void 0===i&&(i=null),this.createCommonTip(t,e?632328:16711680,r,i)},e.prototype.createCNTip=function(t,e,r){void 0===e&&(e=16777215),void 0===r&&(r=0);var i,n=o.ConfigManagerBase.getConf(o.ConfigEnumBase.CLIENTCN,t);n&&(0<=(i=n.colerType)&&(e=o.ColorUtil.getTipColorByType(i)),this.createCommonTip(n.value,e,r,null))},e.prototype.recycleCommonTip=function(t){this.commonTips.push(t)},e.prototype.showCommonTip=function(){var t,e,r=this;!this.isConmmoning||(t=this.commonMessInfo.shift())&&(e=(e=this.commonTips.shift())||new o.CommonTip,o.LayerManager.instance.addDisplay(e,o.LayerConst.TIP),e.showTip(t),egret.setTimeout(function(){r.commonMessInfo.length?r.showCommonTip():r.isConmmoning=!1},this,this.commonTipCdTime))},e.prototype.createCommonTipCanRepeat=function(t,e,r,i){void 0===e&&(e=16777215),void 0===r&&(r=0),void 0===i&&(i=null),this.commonMessInfoCanRepeat.push({mess:t,color:e,yPos:r,itemcfg:i}),this.isConmmoningCanRepeat||(this.isConmmoningCanRepeat=!0,this.showCommonTipCanRepeat())},e.prototype.createCommonColorTipCanRepeat=function(t,e,r,i){void 0===e&&(e=!1),void 0===r&&(r=0),void 0===i&&(i=null),this.createCommonTipCanRepeat(t,e?632328:16711680,r,i)},e.prototype.showCommonTipCanRepeat=function(){var t,e,r=this;!this.isConmmoningCanRepeat||(t=this.commonMessInfoCanRepeat.shift())&&(e=(e=this.commonTips.shift())||new o.CommonTip,o.LayerManager.instance.addDisplay(e,o.LayerConst.TIP),e.showTip(t),egret.setTimeout(function(){r.commonMessInfoCanRepeat.length?r.showCommonTipCanRepeat():r.isConmmoningCanRepeat=!1},this,this.commonTipCdTime))},e);function e(){this.commonTipCdTime=500,this.commonMessInfo=[],this.commonMessInfoCanRepeat=[],this.isConmmoning=!1,this.isConmmoningCanRepeat=!1,this.commonTips=[]}o.TipManagerCommon=t,__reflect(t.prototype,"qmr.TipManagerCommon")}(qmr=qmr||{}),function(s){var n=(o.initGameVersion=function(a){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o;return __generator(this,function(t){switch(t.label){case 0:return s.PlatformConfig.useCdnRes?a?1!=(e=a.split("&")).length?[3,2]:(r=void 0,r=e[0],i=r.split(":"),n=void 0,n=1==i.length?i[0]:i[1],o=n.split("/"),this.gameVersionDir=o[0],this.gameVersionNumber=o[1],this.isGameVersionReady=!0,[4,this.parseGameVersionList()]):(console.log("gameVersion undefined"),[2]):(this.isGameVersionReady=!0,[2]);case 1:return t.sent(),[3,3];case 2:this.isGameVersionReady=!1,t.label=3;case 3:return[2]}})})},o.initGameVersionByServer=function(e,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.isGameVersionReady?[2]:(this.parseGameVersion(e,r),this.isGameVersionReady=!0,[4,this.parseGameVersionList()]);case 1:return t.sent(),[2]}})})},o.parseGameVersionList=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return this.updateAppVersion(),[2,new Promise(function(i,t){var e=s.PlatformConfig.webUrl+o.gameVersionDir+"/"+o.gameVersionNumber+"/version.json";s.LogUtil.log("》》》加载版本控制文件："+e);var r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.TEXT,r.open(e,egret.HttpMethod.GET),r.send(),r.addEventListener(egret.Event.COMPLETE,function(t){var e=t.currentTarget,r=JSON.parse(e.response);n.versionConfig=r.verDic,n.defaultVer=r.defaultVer,i()},n),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){egret.log("post error : "+event),t()},n)})]})})},o.parseGameVersion=function(t,e){if(e){for(var r,i,n,o=e.split("&"),a="ver",s="1",l=o.length,c=0;c<l;c++){var u,h=!1,p=(u=(1==(r=o[c].split(":")).length?(h=!0,i=null,r[0]):(i=r[0],r[1])).split("/"))[0],f=u[1];if(h&&(a=p,s=f),i)for(var d=0,g=i.split(",");d<g.length;d++)if(1==(n=g[d].split("-").map(Number)).length){if(t==n[0])return this.gameVersionDir=p,void(this.gameVersionNumber=f)}else if(t>=n[0]&&t<=n[1])return this.gameVersionDir=p,void(this.gameVersionNumber=f)}this.gameVersionDir=a,this.gameVersionNumber=s,console.log("game module ver : serverId="+t+" ver="+this.gameVersionDir+" "+this.gameVersionNumber)}else console.log("gameVersion undefined")},o.updateAppVersion=function(){var t=this.gameVersionDir.replace(/[^0-9]/gi,"");""==t&&(t="1"),s.GlobalConfig.appVersion=s.PlatformConfig.loginVersion+"."+t+"."+this.gameVersionNumber,console.log("appVersion:",s.GlobalConfig.appVersion)},o.parseLoginResVersion=function(t){var e;t&&(e=t.split("."),this.loginResVersion=e[1]),console.log("login module res ver = "+this.loginResVersion)},o.getPathWithGameVersion=function(t){var e=o.defaultVer;return o.versionConfig&&o.versionConfig[t]&&(e=o.versionConfig[t]),s.PlatformConfig.webUrl+o.gameVersionDir+"/"+e+"/"+t},o.loginResVersion="1",o.isGameVersionReady=!1,o);function o(){}s.VersionManager=n,__reflect(n.prototype,"qmr.VersionManager");var t=(e.prototype.init=function(){return Promise.resolve()},e.prototype.getVirtualUrl=function(t){return s.PlatformConfig.useCdnRes?this.getResUrlByVersion(t):t+"?v="+(new Date).getTime()},e.prototype.getResUrlByVersion=function(t){if(-1!=t.indexOf("eui_skins"))return t;if(0<=t.indexOf("resourceLogin/"))return t.replace("resourceLogin/","login/resourceLogin/"+n.loginResVersion+"/");var e=t.indexOf(s.PlatformConfig.baseRoot);if(-1==e)return t;var r=t.indexOf("?v="),i=-1!=r?t.slice(e,r):t.slice(e);return n.getPathWithGameVersion(i)},e);function e(){}s.VersionController=t,__reflect(t.prototype,"qmr.VersionController",["RES.IVersionController"])}(qmr=qmr||{}),function(h){var t=(o.clearModuleTick=function(t,e){for(var r=this._cacheAppMap,i=0,n=r.keys;i<n.length;i++){var o=n[i],a=r.get(o);a?a.isShow||a.getEffective(t,e)||(r.remove(o),h.LogUtil.warn("ModuleManager.clear "+o)):h.LogUtil.error("ModuleManager.cacheAppMap变成空了？？ "+o)}},o.popModule=function(t,e,r,i,n){void 0===e&&(e=null),void 0===r&&(r=h.LayerConst.ALERT),void 0===i&&(i=!1),void 0===n&&(n=!0),o.showModule(t,e,r,i,n),h.SoundManager.getInstance().loadAndPlayEffect("SOUND_TANCHU")},o.showModule=function(t,e,r,i,n,o,a,s){void 0===e&&(e=null),void 0===r&&(r=h.LayerConst.BASE_UI),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===o&&(o=""),void 0===a&&(a=null),void 0===s&&(s=null);var l=this;if(h.GlobalConfig.isHideRecharge&&-1!=l.NO_RECHARGE_HIDE_VIEW.indexOf(t))return l.closeCurrentModule(),void h.TipManagerCommon.getInstance().createCommonColorTip("暂未开放充值！");var c=l.getAppByClass(t);if(c){if(c.preModule=s,c.name=t,c.closeOpenPanel=o,c.closeOpenPanelData=a,n&&c.isShow)return-1!=l._NO_TRIGGER_MODULE.indexOf(t)?void c.show(e):void l.hideModule(t);i&&l.closeAllWindow(),c.show(e),((l._currView=c).isNeedMask||c.isNeedAlpha0Mask)&&(r=h.LayerConst.MASK_UI,c.maskSprite||(c.maskSprite=l.addMask(r,c.isNeedAlpha0Mask)));var u=c.groupName;null!=u&&""!=u&&(u.match("_json")?h.ResManager.getRes(u,null,l):h.ResManager.loadGroup(u),h.LoaderManager.instance.addGroupRef(u)),c.layer=r,h.LayerManager.instance.getLayer(r).addChild(c),c.title&&c.updateTitle(c.title,c.ruleId),h.LogUtil.log("[openModule:"+t+"]"),h.NotifyManager.sendNotification(h.NotifyConstLogin.OPEN_PANEL_VIEW,t),h.NotifyManager.sendNotification(h.NotifyConstLogin.OPEN_PANEL_LAYER,r)}l.sendToTop()},o.isShowModule=function(t){var e=this._cacheAppMap.get(t);return!!e&&e.isShow},o.hideModule=function(t,e){void 0===e&&(e=!1);var r,i=t;if(t instanceof h.SuperBaseModule?i=(r=t).name:r=this._cacheAppMap.get(t),r){if(!r.isShow)return;e?r.hide():this.disposWin(r),r.closeOpenPanel&&this.showModule(r.closeOpenPanel,r.closeOpenPanelData)}h.NotifyManager.sendNotification(h.NotifyConstLogin.CLOSE_PANEL_VIEW,i)},o.closeAllWindow=function(){for(var t,e=h.LayerManager.instance.getLayer(h.LayerConst.BASE_UI);e.numChildren;)t=e.getChildAt(0),this.disposWin(t);for(e=h.LayerManager.instance.getLayer(h.LayerConst.MASK_UI);e.numChildren;)t=e.getChildAt(0),this.disposWin(t);for(e=h.LayerManager.instance.getLayer(h.LayerConst.SECOND_PAGE_UI);e.numChildren;)t=e.getChildAt(0),this.disposWin(t);for(e=h.LayerManager.instance.getLayer(h.LayerConst.ALERT);e.numChildren;)t=e.getChildAt(0),this.disposWin(t)},o.getCurrentView=function(){return this._currView},o.closeCurrentModule=function(){this._currView&&this.disposWin(this._currView)},o.getAppByClass=function(t){if(null==t)return null;var e=egret.getTimer(),r=this._cacheAppMap.get(t),i=h.LoaderManager.instance.maxLivingTime;return null!=r&&r.getEffective(e,i)||(r=new(this.getClassName(t)),this._cacheAppMap.set(t,r)),r.useTime=e,r},o.getSuperBaseModuleByClass=function(t){var e=this._cacheAppMap.get(t);return e&&e.stage?e:null},o.getComponentGlobalPoint=function(t,e){var r=this._cacheAppMap.get(t);return r?r.getComponentGlobalPoint(e):{x:0,y:0}},o.addMask=function(t,e){void 0===e&&(e=!1);var r=h.LayerMaskSprite.getLayerMaskSprite();return r.addMask(t,e),r},o.disposWin=function(t){t instanceof h.SuperBaseModule?(t.dispose(),t.maskSprite&&(t.maskSprite.tweenRemoveMask(),t.maskSprite=null),t.preModule&&t.preModule.parent&&(t.updateGuide(),t.preModule=null)):h.DisplayUtils.removeDisplay(t),this.sendToTop()},o.sendToTop=function(){var t=h.LayerManager.instance.getLayer(h.LayerConst.BASE_UI);h.NotifyManager.sendNotification(h.NotifyConstLogin.CLOSE_PANEL_LAYER,t.numChildren),this.sendToTopEvent()},o.sendToTopEvent=function(){h.NotifyManager.sendNotification(h.NotifyConstLogin.CHANGE_MODEL_VIEW)},o.deleteModule=function(t){this._cacheAppMap.remove(t)},o.setupClass=function(){this.registerClass(h.ModuleNameLogin.LOGIN_VIEW,h.LoginView),this.registerClass(h.ModuleNameLogin.SELECT_SEVER_LIST_VIEW,h.ServerListSelectView),this.registerClass(h.ModuleNameLogin.DISCONNECT_VIEW,h.DisConnectView),this.registerClass(h.ModuleNameLogin.DISCONNECT_VIEW,h.DisConnectView),this.registerClass(h.ModuleNameLogin.GONGGAO_VIEW,h.GonggaoView),this.registerClass(h.ModuleNameLogin.GAME_LOADING_VIEW,h.GameLoadingView)},o.registerClass=function(t,e){this._classAppMap[t]=e},o.getClassName=function(t){return this._classAppMap[t]},o._classAppMap={},o._cacheAppMap=new h.Dictionary,o._NO_TRIGGER_MODULE=[],o.NO_RECHARGE_HIDE_VIEW=[],o.openPanelFromBattle=!1,o);function o(){}h.ModuleManager=t,__reflect(t.prototype,"qmr.ModuleManager")}(qmr=qmr||{}),function(t){var e=(r.LOGIN_VIEW="qmr.LoginView",r.SELECT_SEVER_LIST_VIEW="qmr.ServerListSelectView",r.DISCONNECT_VIEW="qmr.DisConnectView",r.GONGGAO_VIEW="qmr.GonggaoView",r.CREATEROLE_VIEW="qmr.CreateRoleView",r.GAME_LOADING_VIEW="qmr.GameLoadingView",r.RECHARGE_GUILD="qmr.RechargeGuildView",r.FIRST_RECHARGE_VIEW="qmr.FirstRechargetView",r);function r(){}t.ModuleNameLogin=e,__reflect(e.prototype,"qmr.ModuleNameLogin")}(qmr=qmr||{}),function(e){var t=(Object.defineProperty(r,"isOpenRecharge",{get:function(){return!this.cdata||1==this.cdata.charge},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isHideRecharge",{get:function(){return!!r.checkHideRechargeFunc&&r.checkHideRechargeFunc()},enumerable:!0,configurable:!0}),r.getBgName=function(){if(!r._bgName){r._bgName="cjbg1_jpg";var t=window.createRoleBgCover;if(t)switch(Number(t)){case 2:r._bgName="cjbg2_jpg";break;case 3:r._bgName="cjbg3_jpg"}}return r._bgName},Object.defineProperty(r,"isSysIos",{get:function(){return"IOS"==egret.Capabilities.os.toUpperCase()},enumerable:!0,configurable:!0}),r.saveNewUser=function(){var t=r.account;t&&egret.localStorage.setItem(t,t),e.LogUtil.log("》》》存入新用户数据："+t)},r.reportLogData={},r.reportLogUrl="http://testmt.housepig.cn/xyws/",r.bIsShowSlowLog=!1,r.loginInitFinish=!1,r.isDebugF=!1,r.userId=0,r.signature="",r.unverifysvr=0,r.platLoginTime="",r.recentLoginServerList=[],r.loginProxyServer="h5liutingting7000.cn",r.isSDKLogout=!1,r.registerAccountHeroId=0,r.account="",r.token="",r.sid="1",r.loginKey="^SOLaMeMOBILE#2019!COMMONKEY24@^$^%(*9183098abcdhghhde",r.qosKey="SolGAmE2019QOSSecReTkeY#RewaRdSecRet^Ket%",r.loginServer="",r.isFirstNewUser=!1,r.appVersion="",r.clientIp="127.0.0.1",r.logintime=0,r);function r(){}e.GlobalConfig=t,__reflect(t.prototype,"qmr.GlobalConfig")}(qmr=qmr||{});var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},t}(egret.Sprite),qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr;__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]),function(t){var e,r=(e=t.SuperBaseModule,__extends(i,e),i.prototype.initListener=function(){e.prototype.initListener.call(this),this.addEvent(this.btn_refresh,egret.TouchEvent.TOUCH_TAP,this.onRefresh,this)},i.prototype.onRefresh=function(){t.GameLoadingView.getInstance().closeVitureProgress(),t.PlatformManager.instance.platform.reloadGame()},i.prototype.initData=function(){e.prototype.initData.call(this);var t=this.data;t?(this.txt_tip.text=t.msg+"",this.txt_code.visible=!1,-1!=t.code&&(this.txt_code.text="错误码: "+t.code,this.txt_code.visible=!0)):(this.txt_tip.text="服务器链接不上",this.txt_code.text="请稍后重试")},i.prototype.dispose=function(){t.LogUtil.log("DisConnectView被释放了"),e.prototype.dispose.call(this)},i);function i(){var t=e.call(this)||this;return t.qmrSkinName="DisConnectSkin",t.isNeedMask=!0,t.isClickHide=!1,t.isCenter=!0,t}t.DisConnectView=r,__reflect(r.prototype,"qmr.DisConnectView")}(qmr=qmr||{}),function(i){var n,t=(n=i.SuperBaseModule,__extends(e,n),e.prototype.initListener=function(){n.prototype.initListener.call(this),this.addClickEvent(this.btnClose,this.hide,this)},e.prototype.show=function(t){var r=this;n.prototype.show.call(this,t),this.labContent.textFlow=i.HtmlUtil.getHtmlString("正在获取数据...");var e=i.PlatformManager.instance.platform.NoticeUrl+"?platform="+i.PlatformConfig.platform;console.log("gonggao url=",e),i.HttpRequest.sendGet(e,function(t){var e;t&&(i.LogUtil.log("gonggao typeof res=",typeof t),i.LogUtil.log("gonggao res=",t),e=JSON.parse(t),i.LogUtil.log("gonggao json=",e),e.data?r.labContent.textFlow=i.HtmlUtil.getHtmlString(e.data):r.labContent.textFlow=i.HtmlUtil.getHtmlString("获取数据失败"))},this)},e);function e(){var t=n.call(this)||this;return t.qmrSkinName="GonggaoViewSkin",t.isNeedMask=!0,t}i.GonggaoView=t,__reflect(t.prototype,"qmr.GonggaoView")}(qmr=qmr||{}),function(r){var i,t=(i=eui.Group,__extends(e,i),e.prototype.onTouch=function(t){t.stopImmediatePropagation()},e.prototype.runLoading=function(t){this._loadingRun&&(this._loadingRun.rotation+=3)},e.getInstance=function(){return null==e.inttance&&(e.inttance=new e),e.inttance},e.prototype.createChildren=function(){i.prototype.createChildren.call(this),this.rect=new eui.Rect,this.rect.fillColor=0,this.rect.fillAlpha=.2,this.addChild(this.rect),this.rect.touchEnabled=!0,this.rect.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this._loadingRun=new eui.Image(RES.getRes("preloading_loading_png")),this.addChild(this._loadingRun),this._txProgress=new eui.Label,this.addChild(this._txProgress),this.updateSize()},e.prototype.updateSize=function(){this._loadingRun.verticalCenter=0,this._loadingRun.horizontalCenter=0,this._txProgress.verticalCenter=0,this._txProgress.horizontalCenter=0,this._txProgress.size=20,this.rect.width=r.StageUtil.stageWidth,this.rect.height=r.StageUtil.stageHeight},e.prototype.setProgress=function(t,e){r.LayerManager.instance.addDisplay(this,r.LayerConst.TOP),this._txProgress&&(this._txProgress.text=Math.round(t/e*100)+"%",0==t?(this.vitureCount=1,r.Ticker.getInstance().registerTick(this.onTimer,this,50)):r.Ticker.getInstance().unRegisterTick(this.onTimer,this))},e.prototype.onTimer=function(){this.vitureCount++,this.vitureCount<100&&(this._txProgress.text=Math.round(this.vitureCount)+"%")},e.prototype.setLoadingTip=function(t){r.Ticker.getInstance().unRegisterTick(this.onTimer,this),r.NotifyManager.registerNotify(r.StageUtil.STAGE_RESIZE,this.updateSize,this),r.LayerManager.instance.addDisplay(this,r.LayerConst.TOP),this._txProgress&&(this._txProgress.text=t)},e.prototype.close=function(){r.NotifyManager.unRegisterNotify(r.StageUtil.STAGE_RESIZE,this.updateSize,this),r.Ticker.getInstance().unRegisterTick(this.onTimer,this),this.parent&&this.parent.removeChild(this)},e);function e(){var t=i.call(this)||this;t.vitureCount=0;var e=t;return e.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(){e.hasEventListener(egret.Event.ENTER_FRAME)&&e.removeEventListener(egret.Event.ENTER_FRAME,e.runLoading,e)},e),e.addEventListener(egret.Event.ADDED_TO_STAGE,function(){e.setProgress(0,1),e.addEventListener(egret.Event.ENTER_FRAME,e.runLoading,e)},e),e.touchEnabled=!0,t}r.GameLoading=t,__reflect(t.prototype,"qmr.GameLoading")}(qmr=qmr||{}),function(t){var e,r=(e=eui.Component,__extends(i,e),i.prototype.showProgressRate=function(t,e){void 0===e&&(e=!1);var r=t;r<=0&&(r=0),1<=r&&(r=1);var i=528*r;egret.Tween.removeTweens(this.imgProgress),e?egret.Tween.get(this.imgProgress).to({width:i},300):this.imgProgress.width=i,this.imgCloud.x=i},i.prototype.setLoadingTip=function(t){this.labHint.text=t},i.prototype.dispose=function(){egret.Tween.removeTweens(this.imgProgress)},i);function i(){var t=e.call(this)||this;return t.skinName="GameLoadingProgressBarSkin",t.touchEnabled=t.touchChildren=!1,t}t.GameLoadingProgressBar=r,__reflect(r.prototype,"qmr.GameLoadingProgressBar")}(qmr=qmr||{}),function(o){var i,t=(i=o.SuperBaseModule,__extends(e,i),e.getInstance=function(){return e._instance||(e._instance=o.ModuleManager.getAppByClass(o.ModuleNameLogin.GAME_LOADING_VIEW)),e._instance},e.getBgName=function(){return e.bgName||(.5<=Math.random()?e.bgName=e.bgArray[0]:e.bgName=e.bgArray[1]),e.bgName},e.prototype.initComponent=function(){i.prototype.initComponent.call(this);var t=" 刷新游戏";o.PlatformManager.instance.platform.canClearResCache&&(t=" 清除缓存");var e=o.HtmlUtil.getHtmlTextElement("若长时间加载不成功，请点击",16777215),r=o.HtmlUtil.getHtmlTextElement(t,3276588,!0,this.HREF,1918992,1);this.labRefresh.textFlow=e.concat(r),this.labRefresh.touchEnabled=!0},e.prototype.initListener=function(){i.prototype.initListener.call(this),this.addEvent(this.labRefresh,egret.TextEvent.LINK,this.onRefresh,this)},e.prototype.addedToStage=function(t){i.prototype.addedToStage.call(this,t),this.imgBg.source=e.getBgName()},e.prototype.showSelf=function(t,e,r,i,n){void 0===e&&(e=!0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=!0),o.ModuleManager.isShowModule(o.ModuleNameLogin.GAME_LOADING_VIEW)||o.ModuleManager.showModule(o.ModuleNameLogin.GAME_LOADING_VIEW,null,o.LayerConst.MASK_UI,!1),this.setPrelMessage(t),.99<=this.fromProgressTotal&&(n=e=!1),e?this.showVitureProgress():this.closeVitureProgress(),this.fromProgressTotal=r,this.dProgressTotal=i-r,this.updateTotalProgress(0,n)},e.prototype.hideSelf=function(){this.currentProgress=0,o.ModuleManager.isShowModule(o.ModuleNameLogin.GAME_LOADING_VIEW)&&o.ModuleManager.hideModule(o.ModuleNameLogin.GAME_LOADING_VIEW)},e.prototype.updateTotalProgress=function(t,e){void 0===e&&(e=!1),this.isShow&&(.99<=this.fromProgressTotal&&(this.closeVitureProgress(),e=!1),this.showTotalProgress(this.fromProgressTotal+t*this.dProgressTotal,e))},e.prototype.showVitureProgress=function(){var t=this;this.tid||(this.tid=setInterval(function(){t.updateAutoLoading()},50),this.updateAutoLoading())},e.prototype.closeVitureProgress=function(){this.tid&&(clearInterval(this.tid),this.tid=null),this.showPreProgress(1)},e.prototype.updateAutoLoading=function(){this.currentProgress<this.maxProgress?this.currentProgress+=10:this.currentProgress=0,this.showPreProgress(this.currentProgress/this.maxProgress)},e.prototype.onRefresh=function(t){o.PlatformManager.instance.platform.reloadGame(o.PlatformManager.instance.platform.canClearResCache)},e.prototype.setPrelMessage=function(t){this.progressBar1.setLoadingTip(t)},e.prototype.setTotalMessage=function(t){this.progressBar2.setLoadingTip(t)},e.prototype.showTotalProgress=function(t,e){void 0===e&&(e=!1),this.progressBar2.showProgressRate(t,e)},e.prototype.showPreProgress=function(t,e){void 0===e&&(e=!1),this.progressBar1.showProgressRate(t,e)},e.prototype.dispose=function(){this.currentProgress=0,this.closeVitureProgress(),i.prototype.dispose.call(this),o.LoaderManager.instance.destoryGroup("serverlist_loginBg_jpg")},e.bgArray=["loadingNiu_jpg","loadingYu_jpg"],e);function e(){var t=i.call(this)||this;return t.currentProgress=0,t.maxProgress=100,t.fromProgressTotal=0,t.dProgressTotal=1,t.HREF="event_refresh_game",t.needAdaptStatusBar=!1,t.skinName="GameLoadingViewSkin",t.progressBar1.visible=!0,t.progressBar2.visible=!0,t}o.GameLoadingView=t,__reflect(t.prototype,"qmr.GameLoadingView")}(qmr=qmr||{}),function(a){var t,e=(t=a.BaseController,__extends(r,t),Object.defineProperty(r,"instance",{get:function(){return null==this._instance&&(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r.prototype.initListeners=function(){this.addSocketListener(a.MessageIDLogin.S_USER_LOGIN,this.onRecLoginSuccess,this,!0),this.addSocketListener(a.MessageIDLogin.S_USER_LOGOUT,this.onRecUseLoginOut,this,!0),this.addSocketListener(a.MessageIDLogin.S_SEND_SDK_DATA,this.onSdkReportResponse,this,!0)},r.prototype.reqLogin=function(t,e){void 0===e&&(e="1"),egret.log("登陆账号:"+t,"区服:"+e);var r=new com.message.C_USER_LOGIN;r.username=t,r.gameSite=e;var i=a.GlobalConfig.sparam;i&&(r.sparam=JSON.stringify(i)),this.sendCmd(r,a.MessageIDLogin.C_USER_LOGIN,!0)},r.prototype.reqLoginRegister=function(t,e,r,i){a.GlobalConfig.saveNewUser();var n=new com.message.C_LOGIN_REGISTER;n.username=t,n.gameSite=e,n.nickname=r,n.heroId=i;var o=a.GlobalConfig.sparam;o&&(n.sparam=JSON.stringify(o)),this.sendCmd(n,a.MessageIDLogin.C_LOGIN_REGISTER)},r.prototype.onRecLoginSuccess=function(t){a.SystemController.instance,a.LoginModel.instance.isReconnect?(a.SystemController.instance.startHeart(),a.GameLoading.getInstance().close(),a.PbGlobalCounter.maxReconnectCount=3,a.LogUtil.log("断线重连完成！！")):(a.LoginModel.instance.onRecLoginSuccess(t),this.dispatch(a.NotifyConstLogin.S_USER_LOGIN))},r.prototype.reqUserLogout=function(t){var e=new com.message.C_USER_LOGOUT;e.playerId=t,this.sendCmd(e,a.MessageIDLogin.C_USER_LOGOUT,!0)},r.prototype.onRecUseLoginOut=function(t){t.beKickOut?a.LoginModel.instance.isInstead=!0:a.LoginModel.instance.isDisconnect=!0,this.dispatch(a.NotifyConstLogin.S_USER_LOGOUT)},r.prototype.reqReconnect=function(){var t;a.PlatformManager.instance.platform.isVerify&&(a.LoginModel.instance.isReconnect=!0,t=a.ServerListModel.instance.sid,this.reqLogin(a.GlobalConfig.account,t))},r.prototype.reqRelogin=function(){var t;a.PlatformManager.instance.platform.isVerify&&(a.LoginModel.instance.isReconnect=!1,t=a.ServerListModel.instance.sid,this.reqLogin(a.GlobalConfig.account,t))},r.prototype.reportSdkPortRequest=function(t,e){var r=new com.message.C_SEND_SDK_DATA;r.reportStr=e,r.reportUrl=t,this.sendCmd(r,a.MessageIDLogin.C_SEND_SDK_DATA,!0)},r.prototype.onSdkReportResponse=function(t){console.log("sdk数据上报结果："+t.canUse)},r);function r(){return t.call(this)||this}a.LoginController=e,__reflect(e.prototype,"qmr.LoginController")}(qmr=qmr||{}),function(r){var t=(Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.onRecLoginSuccess=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return r.SystemController.instance.startHeart(),r.GlobalConfig.userId=parseFloat(e.playerId.toString()),[4,r.VersionManager.initGameVersionByServer(parseInt(r.GlobalConfig.sid),r.PlatformConfig.gameVersion)];case 1:return t.sent(),0<r.GlobalConfig.userId?(r.GlobalConfig.isCreatRoleEnterGame?(r.MarkPointManager.setPoint(r.PointEnum.POINT_9),r.MarkPointManager.loginSetPoint(r.PointEnum.CREAT_SUCCESS)):r.GlobalConfig.isFirstNewUser=!1,r.GameLoading.getInstance().close(),this.isEnterGame=!0,this.destoryLoginRes(),r.GameLoadManager.instance.loadGameResAfterLogin(),[4,r.GameLoadManager.instance.waitGameResLoaded()]):[3,3];case 2:return t.sent(),r.EntryAfterLogin.setup(),[3,5];case 3:return[4,r.GameLoadManager.instance.loadcreateRoleGroup()];case 4:t.sent(),r.EntryCreateRole.setup(),r.ModuleManager.showModule(r.ModuleNameLogin.CREATEROLE_VIEW),t.label=5;case 5:return[2]}})})},e.prototype.setLoginIninfo=function(t){r.GlobalConfig.loginProxyServer=t.proxyServer,r.GlobalConfig.loginPort=parseInt(t.loginServerPort+""),r.GlobalConfig.loginServer=t.loginServerIP,r.PlatformManager.instance.platform.initLoginServer()},e.prototype.destoryLoginRes=function(){var t=document.getElementById("preLoadBg");t&&t.parentNode&&t.parentNode.removeChild(t),r.ModuleManager.hideModule(r.ModuleNameLogin.GONGGAO_VIEW,!0),r.ModuleManager.hideModule(r.ModuleNameLogin.SELECT_SEVER_LIST_VIEW,!0),r.ModuleManager.hideModule(r.ModuleNameLogin.LOGIN_VIEW,!0),r.ModuleManager.hideModule(r.ModuleNameLogin.CREATEROLE_VIEW,!0)},e);function e(){}r.LoginModel=t,__reflect(t.prototype,"qmr.LoginModel")}(qmr=qmr||{}),function(a){var n,t=(n=a.LoginViewUI,__extends(e,n),e.prototype.initListener=function(){n.prototype.initListener.call(this),this.addClickEvent(this.btn_login,this.onStartLogin,this),this.addClickEvent(this.group_gonggao,this.onShowGonggao,this),this.addClickEvent(this.groupSwitchSDKAccount,this.onSwitchAccount,this),this.addEvent(this.g_select,egret.TouchEvent.TOUCH_TAP,this.onSelectServerList,this),a.LabelUtil.addInputListener(this.txt_account,this)},e.prototype.onSwitchAccount=function(){},e.prototype.addedToStage=function(t){n.prototype.addedToStage.call(this,t),this.groupSwitchSDKAccount.visible=!1,this.addEffect();var e=document.getElementById("gameLoading");e&&e.parentNode&&e.parentNode.removeChild(e);var r,i=document.getElementById("style");i&&i.parentNode&&i.parentNode.removeChild(i),a.PlatformConfig.platformId!=a.PlatformEnum.P_6kwAndriod&&(r=document.getElementById("preIndexBg"))&&r.parentNode&&r.parentNode.removeChild(r),a.PlatformManager.instance.platform.setLoadingStatus(""),this.imgBg.source="serverlist_loginBg_jpg",this.imgBg.addEventListener(egret.Event.COMPLETE,this.onBgResBack,this),this.group_gonggao.visible=a.PlatformConfig.isShowNotice,a.GameLoadManager.instance.loadGameResAfterLogin()},e.prototype.onBgResBack=function(){a.LogUtil.log("onBgResBack"),document&&document.getElementById("loaingMyBg")&&(document.getElementById("loaingMyBg").style.display="none")},e.prototype.addWindEffect=function(){this.imgWindSlow.x=this.stage.stageWidth,this.imgWindFast.x=this.stage.stageWidth,this.imgWindMiddle.x=this.stage.stageWidth;var t=-this.imgWindSlow.width;a.LogUtil.log("this.imgWindSlow.width",this.imgWindSlow.width),egret.Tween.get(this.imgWindSlow,{loop:!0}).to({x:t},7e3),egret.Tween.get(this.imgWindFast,{loop:!0}).to({x:t},7e3/1.5),egret.Tween.get(this.imgWindMiddle,{loop:!0}).to({x:t},7e3/1.3)},e.prototype.createAvatar=function(){this.avatar=new a.BaseActor(a.SystemPath.roleUiPath,null,this,a.Status.IDLE),this.groupRoleMonkey.addChild(this.avatar),this.avatar.addPartAt(a.ActorPart.BODY,20100,0,-1)},e.prototype.addEffect=function(){this.createAvatar(),this.groupMonkey.y=0,egret.Tween.get(this.groupMonkey,{loop:!0}).to({y:40},4e3).to({y:0},4e3),this.addWindEffect()},e.prototype.onShowGonggao=function(){a.ModuleManager.popModule(a.ModuleNameLogin.GONGGAO_VIEW)},e.prototype.initData=function(){var t,e;n.prototype.initData.call(this),this.handler=this.data,this.btn_login.enabled=!0,this.lbl_ver.text=a.GlobalConfig.appVersion,this.isOutNetPlatForm=a.PlatformManager.instance.isOutNetPlatForm,this.isOutNetPlatForm||!this.isOutNetPlatForm&&a.GlobalConfig.account?(t=null,(t=a.ServerListModel.instance.recommendServer)&&(this.txt_severmax.text=t.serverName),this.isOutNetPlatForm?(t=a.ServerListModel.instance.defaultServer)&&(a.GlobalConfig.sid=t.serverId+""):(e="",e=egret.localStorage.getItem("serverId")||"1",a.GlobalConfig.sid=e,t=a.ServerListModel.instance.getServerVo(parseInt(e))),t&&(this.txt_severname.text=t.serverName),this.currentState="publish",this.txt_severname.touchEnabled=!1,this.g_select.touchChildren=!1):(this.currentState="beforeLogin",this.txt_account.text=egret.localStorage.getItem("testUserid"))},e.prototype.onStartLogin=function(t){if(void 0===t&&(t=!0),a.PlatformConfig.platformId==a.PlatformEnum.P_6kwAndriod&&a.GlobalConfig.isSDKLogout)a.TipManagerCommon.getInstance().createCommonColorTip("当前处于登出状态，请重新登录");else{if(!this.isOutNetPlatForm&&!a.GlobalConfig.account){var e=this.txt_account.text.trim();return 0==e.length?void a.TipManagerCommon.getInstance().createCommonColorTip("请输入用户名"):(a.GlobalConfig.account=e,a.MarkPointManager.loginBeforeSetPoint(a.PointEnum.SDK_LOGIN),this.handler&&(this.handler.run(),this.handler=null),void this.hide())}if(this.btn_login.enabled){a.MarkPointManager.loginBeforeSetPoint(a.PointEnum.START_GAME),this._isLogin=t;var r=a.ServerListModel.instance.getServerVo(parseInt(a.GlobalConfig.sid));if(!r)return void a.TipManagerCommon.getInstance().createCommonColorTip("请选择服务器");var i=r.ip,n=r.port,o=new a.LoginInfoVo;o.loginServerIP=i,o.loginServerPort=n+"",egret.localStorage.setItem("testUserid",a.GlobalConfig.account),egret.localStorage.setItem("serverId",a.GlobalConfig.sid),this.connectLoginServer(o)}}},e.prototype.onSelectServerList=function(){a.ModuleManager.popModule(a.ModuleNameLogin.SELECT_SEVER_LIST_VIEW,this)},e.prototype.selectHandler=function(t){this.txt_severname.text=t},e.prototype.connectLoginServer=function(t){return a.ServerListModel.instance.getServerVo(parseInt(a.GlobalConfig.sid)).isWh?void a.TipManagerCommon.getInstance().createCommonColorTip("服务器维护中"):(a.LoginModel.instance.setLoginIninfo(t),this.lockBtn(),void a.LoginManager.reqConnectGameServer())},e.prototype.lockBtn=function(){var t=this;this.btn_login.enabled=!1,this.timeId=setTimeout(function(){t.btn_login.enabled=!0},3e3)},e.prototype.dispose=function(){n.prototype.dispose.call(this),a.LabelUtil.removeInputListener(this.txt_account,this),this.timeId&&(clearTimeout(this.timeId),this.timeId=null),egret.Tween.removeTweens(this.imgWindSlow),egret.Tween.removeTweens(this.imgWindFast),egret.Tween.removeTweens(this.imgWindMiddle),egret.Tween.removeTweens(this.groupMonkey),this.avatar&&this.avatar.dispos(),a.ModuleManager.deleteModule(a.ModuleNameLogin.GONGGAO_VIEW),a.ModuleManager.deleteModule(a.ModuleNameLogin.LOGIN_VIEW),a.ModuleManager.deleteModule(a.ModuleNameLogin.SELECT_SEVER_LIST_VIEW);var t=RES.destroyRes("login");a.LogUtil.log("RES.destroyRes,login=",t)},e);function e(){var t=n.call(this)||this;return t._isLogin=!1,t.needAdaptStatusBar=!1,t.groupName="login",t}a.LoginView=t,__reflect(t.prototype,"qmr.LoginView")}(qmr=qmr||{});var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),qmr.EntryLogin.setup(this.stage)},e.frame=0,e.currentIndex=0,e}(eui.UILayer),qmr,qmr,qmr,qmr,qmr;__reflect(Main.prototype,"Main"),function(){function t(){}(qmr||(qmr={})).LoginInfoVo=t,__reflect(t.prototype,"qmr.LoginInfoVo")}(),function(a){var t=(e.prototype.parseServerList=function(t){a.ServerListModel.instance.parseServerList(t)},e.prototype.pullMyLoginServerList=function(r){var t=a.PlatformManager.instance.platform;if(t){if(a.ServerListModel.isHasGetRecentLogin)return void(r&&r.run());var e=(a.PlatformConfig.isTSVersion,a.PlatformConfig.isTSVersion?t.tsLastLoginServerReqUrl:t.lastLoginServerReqUrl),i=(new Date).getTime(),n=a.Md5Util.getInstance().hex_md5(""+a.GlobalConfig.account+i+a.GlobalConfig.loginKey),o=e+"?account="+a.GlobalConfig.account+"&time="+i+"&sign="+n;console.log("请求用户最近登录的服务器列表：》》》"+o),a.HttpRequest.sendGet(o,function(t){var e=JSON.parse(t);console.log("请求用户最近登录的服务器列表数据：》》》"+JSON.stringify(t)),0==e.ret?e&&e.sl&&(a.ServerListModel.isHasGetRecentLogin=!0,a.ServerListModel.instance.parseMyRecentLogin(e.sl),r&&r.run()):r&&r.run()},this)}},Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e)},enumerable:!0,configurable:!0}),e);function e(){}a.ServerListController=t,__reflect(t.prototype,"qmr.ServerListController")}(qmr=qmr||{}),function(a){var t,e=(s.prototype.parseServerList=function(t){var r,i,n,o=this,e=t;this._serverTabDic.clear(),e.forEach(function(t,e){(r=new a.ServerVo).parseData(t,e+1),n=e/s.tabServerNum|0,e+=1,(i=o._serverTabDic.get(n))||(i=[],o._serverTabDic.set(n,i)),i.push(r),o._serverVoDic.set(r.serverId,r)})},s.prototype.parseMyRecentLogin=function(t){var e,r,i=this;t&&(r=this,t.forEach(function(t){(e=r.getServerVo(t.id))&&i._recentLoginServerlist.push(e)}))},s.prototype.getTabServerList=function(t){return this._serverTabDic.get(t)},Object.defineProperty(s.prototype,"serverTabDic",{get:function(){return this._serverTabDic},enumerable:!0,configurable:!0}),s.prototype.getServerVo=function(t){return this._serverVoDic.get(t)},s.prototype.getServerName=function(t){var e=s.instance.getServerVo(parseInt(a.GlobalConfig.sid));return e?e.serverName:""},Object.defineProperty(s.prototype,"recentLoginServerlist",{get:function(){return this._recentLoginServerlist},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"defaultServer",{get:function(){var t=this.recentLoginServerlist[0];if(t)return t;var e=egret.localStorage.getItem("serverId");return(t=this.getServerVo(parseInt(e)))||this.recommendServer},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"recommendServer",{get:function(){var t=this._serverVoDic.values;return t[t.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sid",{get:function(){return a.GlobalConfig.sid},enumerable:!0,configurable:!0}),Object.defineProperty(s,"instance",{get:function(){return this._instance||(this._instance=new s)},enumerable:!0,configurable:!0}),s.tabServerNum=10,s.isHasGetRecentLogin=!1,s);function s(){this._serverVoDic=new a.Dictionary,this._serverTabDic=new a.Dictionary,this._recentLoginServerlist=[]}a.ServerListModel=e,__reflect(e.prototype,"qmr.ServerListModel"),(t=a.ServerStateEnum||(a.ServerStateEnum={}))[t.STATE1=1]="STATE1",t[t.STATE2=2]="STATE2",t[t.STATE3=3]="STATE3"}(qmr=qmr||{}),function(o){var e,t=(e=o.ServerListSelectUI,__extends(r,e),r.prototype.initComponent=function(){e.prototype.initComponent.call(this),this.listServer.itemRenderer=o.ServerRender,this.collect=new eui.ArrayCollection,this.listServer.dataProvider=this.collect,this.tabCollect=new eui.ArrayCollection,this.updateTab()},r.prototype.initListener=function(){e.prototype.initListener.call(this),this.addEvent(this.tab_server,egret.Event.CHANGE,this.onTabarChanage,this),this.addEvent(this.listServer,eui.ItemTapEvent.ITEM_TAP,this.onClickItem,this),this.addClickEvent(this.btnClose,this.hide,this)},r.prototype.initData=function(){e.prototype.initData.call(this),this.tab_server.selectedIndex=0,this.onTabarChanage()},r.prototype.updateTab=function(){var t=this.convertData();this.tab_server.dataProvider=this.tabCollect,this.tabCollect.source=t},r.prototype.onTabarChanage=function(){var t;0==this.tab_server.selectedIndex?(this.collect.source=null,this.reqMyLoginServerList()):t=o.ServerListModel.instance.getTabServerList(this.tab_server.selectedIndex-1),t&&(this.collect.source=t)},r.prototype.reqMyLoginServerList=function(){o.ServerListController.instance.pullMyLoginServerList(o.Handler.create(this,function(){this.collect.source=o.ServerListModel.instance.recentLoginServerlist}))},r.prototype.onClickItem=function(t){var e=t.item;o.GlobalConfig.sid=e.serverId+"";var r=e.serverName,i=this.data;i&&i.selectHandler(r),this.hide()},r.prototype.convertData=function(){var i=[],n=o.ServerListModel.instance.serverTabDic;return i.push({label:"我的区服"}),n.keys.sort(function(t,e){return e-t}).forEach(function(t){var e,r;n.get(t)&&(r=(e=t*o.ServerListModel.tabServerNum+1)+"-"+(e+(o.ServerListModel.tabServerNum-1))+"区",i.push({label:r}))}),i},r);function r(){var t=e.call(this)||this;return t.isNeedMask=!0,t}o.ServerListSelectView=t,__reflect(t.prototype,"qmr.ServerListSelectView")}(qmr=qmr||{}),function(t){var e,r=(e=eui.ItemRenderer,__extends(i,e),i.prototype.dataChanged=function(){this.imgMark.visible=!1;var t=this.data;this.imgState.source=this.getStateIcon(),this.labServerNum.text=this.data.serverIndex+"区",this.labServerName.text=t.serverName,t.isNewServer?(this.imgMark.visible=!0,this.imgMark.source="serverlist_biao_png"):t.isHot&&(this.imgMark.visible=!0,this.imgMark.source="serverlist_biao2_png")},i.prototype.getStateIcon=function(){return this.data.isWh?"serverlist_ui_fwq_wh_png":this.data.isNewServer?"serverlist_ui_ty_ld_png":"serverlist_common_dian_png"},i);function i(){var t=e.call(this)||this;return t.skinName="ServerItemSkin",t}t.ServerRender=r,__reflect(r.prototype,"qmr.ServerRender")}(qmr=qmr||{});var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}(),qmr,qmr,qmr;__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform),function(t){var e=(r.prototype.parseData=function(t,e){this._serverId=t.id,this.serverIndex=e,this._ip=t.ip,this._port=t.pp,this._serverName=t.nm,this._openServerTime=t.tm,t.xf&&(this._isNewServer=1==t.xf),this._isWh=1==t.wh,this._isHot=1==t.hr},Object.defineProperty(r.prototype,"serverId",{get:function(){return this._serverId},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ip",{get:function(){return this._ip},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"port",{get:function(){return this._port},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"serverName",{get:function(){return this._serverName},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"openServerTime",{get:function(){return this._openServerTime},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isNewServer",{get:function(){return this._isNewServer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isWh",{get:function(){return this._isWh},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isHot",{get:function(){return this._isHot},enumerable:!0,configurable:!0}),r);function r(){}t.ServerVo=e,__reflect(e.prototype,"qmr.ServerVo")}(qmr=qmr||{}),function(t){var e=(r.init=function(){var t;for(var e in this)t=this[e],this.MSG_KEYS.set(t,e)},r.getMsgNameById=function(t){return r.MSG_KEYS.get(t)},r.MSG_KEYS=new t.Dictionary,r.S_EXCEPTION_MSG=900,r.C_USER_LOGIN=1001,r.S_USER_LOGIN=1002,r.C_LOGIN_REGISTER=1005,r.C_USER_LOGOUT=1007,r.S_USER_LOGOUT=1008,r.C_SYNC_TIME=2101,r.S_SYNC_TIME=2102,r.C_SEND_SDK_DATA=1032,r.S_SEND_SDK_DATA=1033,r);function r(){}t.MessageIDLogin=e,__reflect(e.prototype,"qmr.MessageIDLogin")}(qmr=qmr||{}),function(t){var e=(Object.defineProperty(r,"instance",{get:function(){return null==this._instance&&(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r);function r(){this.msgIdMap={},this.msgIdMap[t.MessageIDLogin.S_EXCEPTION_MSG]=com.message.S_EXCEPTION_MSG,this.msgIdMap[t.MessageIDLogin.S_USER_LOGIN]=com.message.S_USER_LOGIN,this.msgIdMap[t.MessageIDLogin.S_USER_LOGOUT]=com.message.S_USER_LOGOUT,this.msgIdMap[t.MessageIDLogin.C_SYNC_TIME]=com.message.C_SYNC_TIME,this.msgIdMap[t.MessageIDLogin.S_SYNC_TIME]=com.message.S_SYNC_TIME,this.msgIdMap[t.MessageIDLogin.C_SEND_SDK_DATA]=com.message.C_SEND_SDK_DATA,this.msgIdMap[t.MessageIDLogin.S_SEND_SDK_DATA]=com.message.S_SEND_SDK_DATA}t.ProtoMsgIdMapLogin=e,__reflect(e.prototype,"qmr.ProtoMsgIdMapLogin")}(qmr=qmr||{});var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(r,i,n,o){var t,e,a=this;"undefined"!=typeof generateEUI?(qmr.LogUtil.log("[url:"+r+"]"),egret.callLater(function(){i.call(o,generateEUI)},this)):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(t,e){window.JSONParseClass.setData(t),egret.callLater(function(){i.call(o,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON):"undefined"!=typeof generateJSON?-1<r.indexOf(".exml")?((t=r.split("/")).pop(),e=t.join("/")+"_EUI.json",generateJSON.paths[r]?egret.callLater(function(){i.call(o,generateJSON.paths[r])},this):RES.getResByUrl(e,function(t){window.JSONParseClass.setData(t),egret.callLater(function(){i.call(o,generateJSON.paths[r])},a)},this,RES.ResourceItem.TYPE_JSON)):egret.callLater(function(){i.call(o,generateJSON)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,function t(e){e.resItem.url==r&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,t,null),n.call(o))},null),RES.getResByUrl(r,function(t){i.call(o,t)},this,RES.ResourceItem.TYPE_TEXT))},t}(),qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,aladin,aladin,aladin,aladin,aladin,aladin,aladin,aladin,aladin,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr,qmr;__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]),function(t){var e=(c.registerNotify=function(t,e,r){var i=c.typeDic,n=i[t];if(n){for(var o=!1,a=0,s=n;a<s.length;a++){var l=s[a];if(l.callback==e&&l.thisObject==r){o=!0;break}}o||(n.push({callback:e,thisObject:r}),i[t]=n)}else i[t]=[{callback:e,thisObject:r}]},c.unRegisterNotify=function(t,e,r){var i=c.typeDic[t];if(i){for(var n=0,o=i;n<o.length;n++){var a=o[n];if(a.callback==e&&a.thisObject==r){var s=i.indexOf(a);-1!=s&&i.splice(s,1);break}}0==i.length?delete c.typeDic[t]:c.typeDic[t]=i}},c.unRegisterNotifyByType=function(t){delete c.typeDic[t]},c.hasNotification=function(t){var e=c.typeDic[t];return!!e&&0<e.length},c.sendNotification=function(t,e){void 0===e&&(e=null);var r=c.typeDic[t];if(r)for(var i=void 0,n=r.length-1;0<=n;n--)(i=r[n])&&i.callback&&i.callback.call(i.thisObject,e)},c.sendNotificationSplit=function(t,e){void 0===e&&(e=null);var r=c.typeDic[t],i=[];if(r){for(var n,o=r.length-1;0<=o;o--)(n=r[o])&&n.callback&&(i[o]||(i[o]={}),i[o].callback=n.callback,i[o].thisObject=n.thisObject,i[o].params=n.params);c.splitTypeDic.push(i)}},c.removeThisObjectNofity=function(t){var e=c.typeDic;for(var r in e){for(var i=e[r],n=i.length-1;0<=n;n--)i[n].thisObject==t&&i.splice(n,1);0==i.length?delete e[r]:e[r]=i}},c.test=function(){console.warn("NotifyManager.typeDic=======================================================>"),console.warn(c.typeDic),console.warn("egret.ticker=======================================================>"),console.warn(egret.ticker)},c.typeDic={},c.splitTypeDic=[],c.logDic={},c);function c(){}t.NotifyManager=e,__reflect(e.prototype,"qmr.NotifyManager")}(qmr=qmr||{}),function(t){var e=(Object.defineProperty(r,"instance",{get:function(){return this._instance||(this._instance=new r)},enumerable:!0,configurable:!0}),r.prototype.setModel=function(t,e){this._guildModel=t,this._heroModel=e},Object.defineProperty(r.prototype,"ownGuildId",{get:function(){var t=0;return this._guildModel&&(t=this._guildModel.ownGuildId),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"guildName",{get:function(){var t="";return this._guildModel&&(t=this._guildModel.guildName),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"playerId",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.playerId),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){var t="";return this._heroModel&&(t=this._heroModel.name),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"money",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.money),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"level",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.level),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"diamond",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.diamond),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"vipLevel",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.vipLevel),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"createTime",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.createTime),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fightVal",{get:function(){var t=0;return this._heroModel&&(t=this._heroModel.fightVal),t},enumerable:!0,configurable:!0}),r);function r(){}t.ClientHelper=e,__reflect(e.prototype,"qmr.ClientHelper")}(qmr=qmr||{}),function(r){var t=(i.init=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:if(!(e=window.GAME_CONFIG))throw new Error("platfrom config is not define");return this.GAME_CONFIG=e,this.platformId=Number(e.platformId),this.channelId=e.channelId,this.isNeedMarkPoint=e.isMarkPoint,this.isTSVersion=!!Number(e.isTSVersion),e.isWSS&&(this.isWSS=!!Number(e.isWSS)),this.isShildTSV=!!Number(e.isShildTSV),this.isShieldIOSBusiness=!!Number(e.isShieldIOSBusiness),this.isOpenGM=!!Number(Number(e.isOpenGM)),this.loginVersion=e.loginVersion,this.gameVersion=e.gameVersion,this.isDebug=!!Number(e.isDebug),this.extendsParams=e.extendsParams,this.platformClassType=e.platformClassType,this.useCdnRes=!!Number(e.isPublish),this.baseRoot=e.basePath,this.webUrl=e.resPath,this.webRoot=this.webUrl+this.baseRoot,e.isShowNotice&&(this.isShowNotice=!!Number(e.isShowNotice)),e.max_hw_ratio&&(r.StageUtil.MAX_HW_RATIO=Math.min(r.StageUtil.MAX_HW_RATIO,e.max_hw_ratio)),e.min_hw_ratio&&(r.StageUtil.MIN_HW_RATIO=Math.max(r.StageUtil.MIN_HW_RATIO,e.min_hw_ratio)),this.appIdStr=e.appId,this.appKey=e.appKey,this.platform=e.platform,this.platformSign=e.platformSign,this.serverDomain=e.serverDomain,this.ts_serverDomain=e.ts_serverDomain,this.markPointDomain=e.markPointServer,this.ossDoamin=e.ossServer,r.GlobalConfig.appVersion=i.loginVersion,r.VersionManager.parseLoginResVersion(this.loginVersion),[4,r.VersionManager.initGameVersion(this.gameVersion)];case 1:return t.sent(),[2]}})})},i.GAME_CONFIG=null,i.platformId=0,i.channelId="0",i.isNeedMarkPoint=!0,i.isTSVersion=!1,i.isShildTSV=!1,i.isShieldIOSBusiness=!1,i.isOpenGM=!1,i.isShowNotice=!0,i.isWSS=!0,i.extendsParams="",i.useCdnRes=!1,i.baseRoot="",i.webUrl="",i.webRoot="",i);function i(){}r.PlatformConfig=t,__reflect(t.prototype,"qmr.PlatformConfig")}(qmr=qmr||{}),function(t){var e;(e=t.PlatformEnum||(t.PlatformEnum={}))[e.P_SLOGAME_DEBUG=0]="P_SLOGAME_DEBUG",e[e.P_SLOGAME_WEB=100]="P_SLOGAME_WEB",e[e.P_DYHY_IOS=6]="P_DYHY_IOS",e[e.P_DYHY_QUICK=7]="P_DYHY_QUICK",e[e.P_DYHY_MK=8]="P_DYHY_MK",e[e.P_XIYOU_SQQ=9]="P_XIYOU_SQQ",e[e.P_DYHY_IOS_WEB=10]="P_DYHY_IOS_WEB",e[e.P_WX=11]="P_WX",e[e.P_DYHY_IOS_WEB_crown=120]="P_DYHY_IOS_WEB_crown",e[e.P_6kwAndriod=130]="P_6kwAndriod",e[e.P_9377=12]="P_9377",e[e.P_7477=13]="P_7477",e[e.P_XIYOU_H5=14]="P_XIYOU_H5",e[e.P_YMXK=15]="P_YMXK",e[e.P_OPPO=16]="P_OPPO",e[e.L_CAT=1e3]="L_CAT"}(qmr=qmr||{}),function(r){var t=(e.creatPlatform=function(t){var e;switch(t){case r.PlatformEnum.P_SLOGAME_DEBUG:case r.PlatformEnum.P_DYHY_IOS:case r.PlatformEnum.P_DYHY_QUICK:case r.PlatformEnum.P_DYHY_MK:case r.PlatformEnum.P_DYHY_IOS_WEB:case r.PlatformEnum.L_CAT:e=new r.SolGamePlatform;break;case r.PlatformEnum.P_XIYOU_SQQ:e=new r.XiyouSQQPlatform;break;case r.PlatformEnum.P_WX:e=new r.XiyouXWPlatform;break;case r.PlatformEnum.P_9377:e=new r.Pf9377Platform;break;case r.PlatformEnum.P_7477:e=new r.Pf7477Platform;break;case r.PlatformEnum.P_XIYOU_H5:e="apk"==r.PlatformConfig.platformClassType?new r.XiyouApkPlatform:new r.XiyouH5Platform;break;case r.PlatformEnum.P_YMXK:e=new r.PlatformYMXK;break;case r.PlatformEnum.P_OPPO:e=new r.PlatformOppo;break;default:throw new Error("platform not case at PlatformFactory.creatPlatform")}return e},e);function e(){}r.PlatformFactory=t,__reflect(t.prototype,"qmr.PlatformFactory")}(qmr=qmr||{}),function(e){var t=(r.prototype.reportRegister=function(){this.platform.reportRegister()},r.prototype.reportLogin=function(){this.platform.reportLogin()},r.prototype.reqPay=function(t){return e.GlobalConfig.isOpenRecharge?void this.platform.reqPay(t):void e.TipManagerCommon.getInstance().createCommonColorTip("暂未开放充值！")},r.prototype.reportUpLevel=function(){this.platform.reportUpLevel()},r.prototype.shareGame=function(t,e,r){this.platform.shareGame(t,e,r)},Object.defineProperty(r.prototype,"platform",{get:function(){return this._platform},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isOutNetPlatForm",{get:function(){return e.PlatformConfig.platformId!=e.PlatformEnum.P_SLOGAME_DEBUG},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isGetPlatformInfo",{get:function(){return this.platform.isGetPlatformInfo},enumerable:!0,configurable:!0}),Object.defineProperty(r,"instance",{get:function(){return this._instance||(this._instance=new r)},enumerable:!0,configurable:!0}),r);function r(){this._platform=e.PlatformFactory.creatPlatform(e.PlatformConfig.platformId)}e.PlatformManager=t,__reflect(t.prototype,"qmr.PlatformManager")}(qmr=qmr||{}),function(t){var e=(r.ORDER_URL="{0}//{1}/api/{2}.orderid_{3}.php",r.SVRLISTOP_URL="{0}//{1}/api/{2}.svrlist_{3}.php",r.TS_SVRLISTOP_URL="{0}//{1}/api/{2}.svrlist_{3}_ts.php",r.QUERY_URL="{0}//{1}/api/{2}.query_{3}.php",r.FORBIDDEN_URL="{0}//{1}/api/{2}.forbidden_{3}.php",r.LASTLOGIN_URL="{0}//{1}/api/{2}.lastlogin_{3}.php",r.LOGIN_URL="{0}//{1}/api/{2}.login_{3}.php",r.WORD_URL="{0}//{1}/api/dirtycli.php",r.NOTICE_URL="{0}//{1}/api/gm/getserver_notice.php",r.VERIFY_URL="{0}//{1}/api/{2}.validation.php",r);function r(){}t.PlatformUrlConsont=e,__reflect(e.prototype,"qmr.PlatformUrlConsont")}(qmr=qmr||{}),function(p){var e,t=(e=p.BasePlatform,__extends(r,e),r.prototype.initGetOption=function(){var t=this;t.uid=decodeURI(p.JsUtil.getQueryStringByName("uid")),p.PlatformConfig.appIdStr=p.JsUtil.getQueryStringByName("appid"),t.username=decodeURI(p.JsUtil.getQueryStringByName("username")),t.serverid=decodeURI(p.JsUtil.getQueryStringByName("serverid")),t.isadult=decodeURI(p.JsUtil.getQueryStringByName("isadult")),t.time=p.JsUtil.getQueryStringByName("time"),t.sign=p.JsUtil.getQueryStringByName("sign"),t.pf=p.JsUtil.getQueryStringByName("platform"),console.log("网页传过来的参数：》》》"+location.search),t.platformSing2=p.JsUtil.getValueFromParams("platformSing2",p.PlatformConfig.extendsParams),console.log("获取网页传参：》》》"+t.uid,t.username,p.PlatformConfig.appIdStr,t.serverid,t.platformSing2,t.sign),t.pf&&(t.platformSing2=t.pf),p.GlobalConfig.account=t.username,p.GlobalConfig.uid=t.uid},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var h;return __generator(this,function(t){return egret.log("平台登陆"),h=this,[2,new Promise(function(r,t){var e=h.uid,i=encodeURI(h.username),n=p.PlatformConfig.appIdStr,o=h.sign,a=h.pf,s=h.serverid,l=h.isadult,c=h.time,u=h.verifyUrl+"?uid="+e+"&account="+i+"&appid="+n+"&sign="+o+"&platform="+a+"&serverId="+s+"&isadult="+l+"&time="+c;console.log("请求sdk登录："+u),p.HttpRequest.sendGet(u,function(t){var e=JSON.parse(t);console.log("sdk登录返回："+e),0==e.ret?(this.isGetPlatformInfo=!0,egret.log("sdk登录成功:"+status)):p.TipManagerCommon.getInstance().createCommonColorTip("sdk登录失败："+e.msg),r()},h)})]})})},r.prototype.logout=function(){},r.prototype.getCheckAccountValidityUrl=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a,s,l,c,u,h;return __generator(this,function(t){return e=p.GlobalConfig.account,r=this.time,i=r,n=p.GlobalConfig.sid,o=p.Md5Util.getInstance().hex_md5(encodeURI(e)+n+i+r+p.GlobalConfig.loginKey),a=p.WebBrowerUtil.model||"none",s=this.uid,l=this.sign,c=p.PlatformConfig.appIdStr,u=this.platformSing2,h=this.isadult,[2,this.loginServerUrl+"?account="+e+"&token="+i+"&time="+r+"&serverId="+n+"&unverifysvr=0&sign="+o+"&clientVer="+p.GlobalConfig.appVersion+"&deviceUID="+a+"&uid="+s+"&appid="+c+"&psign="+l+"&pplatform="+u+"&isadult="+h]})})},r.prototype.reportRegister=function(){this.reportUpLevel(),this.reportEnterRole()},r.prototype.reportLogin=function(){this.reportEnterRole()},r.prototype.reportUpLevel=function(){var t={uid:this.uid,username:this.username,role:p.ClientHelper.instance.name,platform:this.platformSing2,appid:p.PlatformConfig.appIdStr,sid:this.serverid,level:p.ClientHelper.instance.level},e=JSON.stringify(t);p.LoginController.instance.reportSdkPortRequest("https://m.7477.com/wap/openapi/update_role",e)},r.prototype.reportEnterRole=function(){},r.prototype.reqPay=function(r){var i=this,t=p.GlobalConfig.account,e=p.GlobalConfig.sid,n=p.PlatformConfig.channelId,o=r.id,a=p.GlobalConfig.uid,s=Math.round(p.TimeUtil.serverTime/1e3),l=p.PlatformConfig.appIdStr,c=i.platformSing2,u=p.Md5Util.getInstance().hex_md5(encodeURI(t)+e+n+s+o+p.GlobalConfig.loginKey),h=i.rechargeOrderIdServer+"?account="+t+"&serverId="+e+"&channelId="+n+"&productId="+o+"&time="+s+"&uid="+a+"&appid="+l+"&pplatform="+c+"&sign="+u;console.log("请求充值服生成订单号: "+h),p.HttpRequest.sendGet(h,function(t){console.log("请求充值服生成订单号回包: "+JSON.stringify(t));var e=JSON.parse(t);(i.orderResultData=e)&&0==e.ret&&(i.orderId=e.orderId,console.log("请求充值服生成订单号成功:"+i.orderId),i.pay(r))},i)},r.prototype.pay=function(s){return __awaiter(this,void 0,void 0,function(){var a=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r=a;p.Md5Util.getInstance().hex_md5(p.PlatformConfig.appIdStr+p.ClientHelper.instance.level+r.platformSing2+r.time+r.uid+r.username+p.PlatformConfig.appKey),s.level,console.log("======================》》》7477获取的后台json数据："+JSON.stringify(r.orderResultData.content));var i=r.orderResultData.content,n=p.PlatformConfig.channelId+"@"+s.id+"@@"+i.out_orderid+"@"+i.serverid;console.log("=============================9377透传参数》》》"+i);var o="https://m.7477.com/wap/pay?uid="+i.uid+"&username="+i.username+"&paymoney="+i.paymoney+"&appid="+i.appid+"&serverid="+i.serverid+"&platform="+i.platform+"&time="+i.time+"&out_orderid="+i.out_orderid+"&goods_name="+encodeURI(s.name)+"&param="+n+"&sign="+i.sign;console.log("============================================》》》7477充值接口地址："+o),window.tc_iframe&&window.tc_iframe(o)})]})})},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,t}p.Pf7477Platform=t,__reflect(t.prototype,"qmr.Pf7477Platform")}(qmr=qmr||{}),function(g){var e,t=(e=g.BasePlatform,__extends(r,e),r.prototype.initGetOption=function(){var t=this;g.PlatformConfig.platformSign=g.PlatformConfig.platform+"",t.packName=g.JsUtil.getValueFromParams("packName",g.PlatformConfig.extendsParams),t.username=decodeURI(g.JsUtil.getQueryStringByName("username")),t.adult=decodeURI(g.JsUtil.getQueryStringByName("adult")),t.timestamp=g.JsUtil.getQueryStringByName("timestamp"),t.sign=g.JsUtil.getQueryStringByName("sign");var e=g.JsUtil.getQueryStringByName("gameid");e&&(g.PlatformConfig.appIdStr=e),window.addEventListener("message",function(t){console.log("》》》收到网页内嵌消息："+t.origin,t.source,t.data)},!1),g.GlobalConfig.account=g.GlobalConfig.uid=t.username;var r=g.Md5Util.getInstance().hex_md5("gameid=44044&type=1&uid="+g.GlobalConfig.account+"&key=a25959454254c4501bb316ba4cec3859"),i="https://s.9377.com/h5/union_platform/report.php?platformId=10138&event_type=aiweiyou_chat&uid="+g.GlobalConfig.account+"&touid=&type=1&gameid=44044&sign="+r;g.HttpRequest.sendGet(i,t.getPlatUid,t),console.log("》》》获取网页传参："+t.username,t.adult,t.timestamp,t.sign)},r.prototype.getPlatUid=function(t){var e=JSON.parse(t);console.log("》》》拉取用户渠道编号："+e),e&&e.gameid&&(this.uid=e.uid,this.touid=e.touid,this.gameId=e.gameid,this.gameSign=e.sign)},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var r=this;return __generator(this,function(t){return egret.log("》》》平台登陆"),[2,new Promise(function(t,e){r.isGetPlatformInfo=!0,egret.log("》》》平台登陆成功:"+status),t()})]})})},r.prototype.logout=function(){},r.prototype.getPullServerListUrl=function(){return(g.PlatformConfig.isTSVersion?this.tsServerListServer:this.serverListServer)+"?account="+g.GlobalConfig.account},r.prototype.getCheckAccountValidityUrl=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a;return __generator(this,function(t){return e=g.GlobalConfig.account,r=this.timestamp,i=r,n=g.GlobalConfig.sid,o=g.Md5Util.getInstance().hex_md5(encodeURI(e)+n+i+r+g.GlobalConfig.loginKey),a=g.WebBrowerUtil.model||"none",[2,this.loginServerUrl+"?account="+e+"&token="+i+"&time="+r+"&serverId="+n+"&unverifysvr=0&sign="+o+"&clientVer="+g.GlobalConfig.appVersion+"&deviceUID="+a]})})},r.prototype.reportRegister=function(){this.reportRoleInfo()},r.prototype.reportLogin=function(){var t={event:"enter_role",id:g.ClientHelper.instance.playerId,name:g.ClientHelper.instance.name,level:g.ClientHelper.instance.level,server_name:g.GlobalConfig.sName,_sid:g.GlobalConfig.sid},e=JSON.stringify(t);window.parent.postMessage(e,"*"),console.log("》》》获取角色数据上报："+e)},r.prototype.reportUpLevel=function(){this.reportRoleInfo()},r.prototype.reportRoleInfo=function(){var t={event:"role",id:g.ClientHelper.instance.playerId,name:g.ClientHelper.instance.name,level:g.ClientHelper.instance.level,server_name:g.GlobalConfig.sName,_sid:g.GlobalConfig.sid},e=JSON.stringify(t);window.parent.postMessage(e,"*"),console.log("》》》角色信息上传参数："+e)},r.prototype.reqPay=function(r){var i=this,t=g.GlobalConfig.account,e=g.GlobalConfig.sid,n=g.PlatformConfig.channelId,o=r.id,a=Math.round(g.TimeUtil.serverTime/1e3),s=g.Md5Util.getInstance().hex_md5(encodeURI(t)+e+n+a+o+g.GlobalConfig.loginKey),l=i.rechargeOrderIdServer+"?account="+t+"&serverId="+e+"&channelId="+n+"&productId="+o+"&time="+a+"&sign="+s;console.log("》》》请求充值服生成订单号: "+l),g.HttpRequest.sendGet(l,function(t){console.log("》》》请求充值服生成订单号回包: "+JSON.stringify(t));var e=JSON.parse(t);(i.orderResultData=e)&&0==e.ret&&(i.orderId=e.orderId,console.log("》》》请求充值服生成订单号成功:"+i.orderId),i.pay(r))},i)},r.prototype.pay=function(l){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(t){return s=this,[2,new Promise(function(t,e){var r=l.level,i=(Math.round(g.TimeUtil.serverTime/1e3),s.reqRoute+"@"+l.id+"@@"+s.orderResultData.orderId+"@"+g.GlobalConfig.sid);console.log("》》》透传参数"+i);var n=l.id;l.product_id&&(n=l.product_id);var o={event:"pay",gid:g.PlatformConfig.appIdStr,username:s.username,amount:r,product:l.name,product_id:n,extra_info:i,role:g.ClientHelper.instance.name,_sid:g.GlobalConfig.sid,_server_name:g.GlobalConfig.sName,server_name:g.GlobalConfig.sName,id:g.ClientHelper.instance.playerId,name:g.ClientHelper.instance.name,level:g.ClientHelper.instance.level},a=JSON.stringify(o);console.log("》》》充值上传参数类型："+typeof a),console.log("》》》充值上传参数："+a),window.parent.postMessage(a,"*"),g.NotifyManager.sendNotification(g.NotifyConstLogin.TO_HIDE_VIP_VIEW)})]})})},r.prototype.chatDataPost=function(t,e,r,i,n,o,a){void 0===o&&(o=""),void 0===a&&(a=0);var s=this.getChannelId(t),l="gameid="+this.gameId+"&type="+s+"&uid="+this.uid+"&key=fSaLpB242wChFJK6SJAOnKOFl1VyGcld",c=g.Md5Util.getInstance().hex_md5(l),u=1==s?a+"":"",h=1==s?"爱微游":"",p=1==s?"1":"",f="&type="+s+"&gameid="+this.gameId+"&serverid="+g.GlobalConfig.sid+"&uid="+this.uid+"&nick="+g.ClientHelper.instance.name+"&fromch=爱微游&touid="+p+"&tonick="+u+"&toch="+h+"&msg="+e+"&ip=&sign="+c,d="https://chat-monitor.11h5.com/chat/?cmd=record"+f;g.HttpRequest.sendGet(d,this.chatPostReturn,this),console.log("》》》聊天监控上报："+f)},r.prototype.chatPostReturn=function(t){console.log("》》》聊天监控上报结果返回："+t)},r.prototype.getChannelId=function(t){switch(t){case 2:return 4;case 3:return 2;case 4:return 1;case 5:return 5}return 3},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,t}g.Pf9377Platform=t,__reflect(t.prototype,"qmr.Pf9377Platform")}(qmr=qmr||{}),function(c){var e,t=(e=c.BasePlatform,__extends(r,e),r.prototype.setLoadingProgress=function(t){C9377SDK.Global.setLoadingProgress(t),console.log("》》》上报游戏加载进度",t)},r.prototype.getPullServerListUrl=function(){var t=c.PlatformConfig.isTSVersion?1:0,e=c.PlatformConfig.isTSVersion?this.tsServerListServer:this.serverListServer,r=c.PlatformConfig.isTSVersion?9e3:0;return e+"?account="+c.GlobalConfig.account+"&ts="+t+"&sid="+r},r.prototype.getCheckAccountValidityUrl=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a,s;return __generator(this,function(t){return e=c.GlobalConfig.account,r=c.TimeUtil.serverTime/1e3|0,n=i=r+"",o=c.GlobalConfig.sid,a=c.Md5Util.getInstance().hex_md5(encodeURI(e)+o+n+i+c.GlobalConfig.loginKey),s=c.WebBrowerUtil.model||"none",[2,this.loginServerUrl+"?account="+e+"&token="+n+"&time="+i+"&serverId="+o+"&unverifysvr=0&sign="+a+"&clientVer="+c.GlobalConfig.appVersion+"&deviceUID="+s]})})},r.prototype.reqPay=function(r){var i=this,t=c.GlobalConfig.account,e=c.GlobalConfig.sid,n=c.PlatformConfig.channelId,o=r.id,a=Math.round(c.TimeUtil.serverTime/1e3),s=c.Md5Util.getInstance().hex_md5(encodeURI(t)+e+n+a+o+c.GlobalConfig.loginKey),l=i.rechargeOrderIdServer+"?account="+t+"&serverId="+e+"&channelId="+n+"&productId="+o+"&time="+a+"&sign="+s;console.log("》》》请求充值服生成订单号: "+l),c.HttpRequest.sendGet(l,function(t){console.log("》》》请求充值服生成订单号回包: "+JSON.stringify(t));var e=JSON.parse(t);(i.orderResultData=e)&&0==e.ret&&(i.orderId=e.orderId,console.log("》》》请求SDK充值 订单号:"+i.orderId),i.pay(r))},i)},r.prototype.reportLogin=function(){window.qg.reportMonitor?(window.qg.reportMonitor("game_scene",0),console.log("》》》上报进入游戏主界面")):console.log("》》》上报进入游戏主界面失败，不支持该接口")},r.prototype.reportFightPower=function(t){(new C9377SDK.SDKReport).pushRank(t),console.log("》》》上报排行榜战力",t)},r.prototype.initGetOption=function(){},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return[2,new Promise(function(i,t){(new C9377SDK.SDKLogin).login({logined:function(t,e,r){c.GlobalConfig.account=r.getUsername(),n.isGetPlatformInfo=!0,console.log("》》》sdk登录成功",c.GlobalConfig.account),i()}})})]})})},r.prototype.pay=function(s){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(t){return a=this,[2,new Promise(function(t,e){var r=s.level,i=s.name,n=parseFloat(c.GlobalConfig.sid),o=a.reqRoute+"@"+s.id+"@@"+a.orderId+"@"+c.GlobalConfig.sid;(new C9377SDK.SDKPay).toPay(r,i,n,o,null,null),t()})]})})},r.prototype.reloadGame=function(t){var e,r="";t&&(this.setLoadingStatus("清理中..."),egret.localStorage.clear(),(e=window.clear_res_cache)&&e(),r="缓存清理成功，"),r+="请重新进入小程序",window.qg&&window.qg.exitApplication?(this.setLoadingStatus(""),window.qg.showModal({content:r,showCancel:!1,complete:function(){window.qg.exitApplication({})}})):c.TipManagerCommon.getInstance().createCommonColorTip("请关闭游戏进程重新进入")},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,t}c.PlatformOppo=t,__reflect(t.prototype,"qmr.PlatformOppo")}(qmr=qmr||{}),function(u){var e,t=(e=u.BasePlatform,__extends(r,e),r.prototype.getPullServerListUrl=function(){return(u.PlatformConfig.isTSVersion?this.tsServerListServer:this.serverListServer)+"?account="+u.GlobalConfig.account},r.prototype.getCheckAccountValidityUrl=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a,s;return __generator(this,function(t){return e=u.GlobalConfig.account,r=this.timestamp,i=r,n=u.GlobalConfig.sid,o=u.Md5Util.getInstance().hex_md5(encodeURI(e)+n+i+r+u.GlobalConfig.loginKey),a=u.WebBrowerUtil.model||"none",s=u.PlatformConfig.channelId,[2,this.loginServerUrl+"?account="+e+"&token="+i+"&time="+r+"&serverId="+n+"&unverifysvr=0&sign="+o+"&clientVer="+u.GlobalConfig.appVersion+"&deviceUID="+a+"&channelId="+s]})})},r.prototype.reqPay=function(r){var i=this;console.log("GlobalConfig.account",u.GlobalConfig.account);var t=u.GlobalConfig.account,e=u.GlobalConfig.sid,n=u.PlatformConfig.channelId,o=r.id,a=Math.round(u.TimeUtil.serverTime/1e3),s=u.Md5Util.getInstance().hex_md5(encodeURI(t)+e+n+a+o+u.GlobalConfig.loginKey),l=i.rechargeOrderIdServer+"?account="+t+"&serverId="+e+"&channelId="+n+"&productId="+o+"&time="+a+"&sign="+s;console.log("》》》请求充值服生成订单号: "+l),u.HttpRequest.sendGet(l,function(t){console.log("》》》请求充值服生成订单号回包: "+JSON.stringify(t));var e=JSON.parse(t);(i.orderResultData=e)&&0==e.ret&&(i.orderId=e.orderId,console.log("》》》请求充值服生成订单号成功:"+i.orderId),i.pay(r))},i)},r.prototype.reportRegister=function(){this.reportRoleInfo()},r.prototype.reportLogin=function(){var t={event:"enter_role",id:u.ClientHelper.instance.playerId,name:u.ClientHelper.instance.name,level:u.ClientHelper.instance.level,server_name:u.GlobalConfig.sName,_sid:u.GlobalConfig.sid},e=JSON.stringify(t);window.parent.postMessage(e,"*"),console.log("》》》进入游戏角色信息上报："+e)},r.prototype.reportUpLevel=function(){this.reportRoleInfo()},r.prototype.chatDataPost=function(t,e,r,i,n,o,a){void 0===o&&(o=""),void 0===a&&(a=0);var s=""+t;switch(t){case u.CHAT_CHANNELID.CROSS:s="9";break;case u.CHAT_CHANNELID.SELF:s="1";break;case u.CHAT_CHANNELID.TEAM:s="7";break;case u.CHAT_CHANNELID.UNION:s="6";break;case u.CHAT_CHANNELID.WORLD:s="4";break;default:return}var l={event:"chat_message",fromUserId:i,toUserId:o,type:s,content:e,time:""+r/1e3,serverId:n,serverName:u.ServerListModel.instance.getServerName(parseInt(n))},c=JSON.stringify(l);window.parent.postMessage(c,"*"),console.log("》》》聊天消息上报："+c)},r.prototype.initGetOption=function(){this.username=decodeURI(u.JsUtil.getQueryStringByName("username")),u.GlobalConfig.account=u.GlobalConfig.uid=this.username,this.adult=decodeURI(u.JsUtil.getQueryStringByName("adult")),this.timestamp=u.JsUtil.getQueryStringByName("timestamp"),this.avatar=u.JsUtil.getQueryStringByName("avatar"),this.sign=u.JsUtil.getQueryStringByName("sign"),this.age=u.JsUtil.getQueryStringByName("age"),u.PlatformConfig.appIdStr=u.JsUtil.getQueryStringByName("gameid"),u.PlatformConfig.channelId=u.PlatformConfig.appIdStr},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var r=this;return __generator(this,function(t){return[2,new Promise(function(t,e){r.isGetPlatformInfo=!0,t()})]})})},r.prototype.pay=function(l){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(t){return s=this,[2,new Promise(function(t,e){var r=l.level,i=(Math.round(u.TimeUtil.serverTime/1e3),u.PlatformConfig.channelId+"@"+l.id+"@@"+s.orderResultData.orderId+"@"+u.GlobalConfig.sid);console.log("》》》透传参数"+i);var n=l.id;l.product_id&&(n=l.product_id);var o={event:"pay",gid:u.PlatformConfig.appIdStr,username:s.username,_sid:u.GlobalConfig.sid,amount:r,product:l.name,product_id:n,extra_info:i,role:u.ClientHelper.instance.name,_server_name:u.GlobalConfig.sName,server_name:u.GlobalConfig.sName,id:u.ClientHelper.instance.playerId,name:u.ClientHelper.instance.name,level:u.ClientHelper.instance.level},a=JSON.stringify(o);console.log("》》》充值上传参数类型："+typeof a),console.log("》》》充值上传参数："+a),window.parent.postMessage(a,"*"),u.NotifyManager.sendNotification(u.NotifyConstLogin.TO_HIDE_VIP_VIEW),t()})]})})},r.prototype.reportRoleInfo=function(){var t={event:"role",id:u.ClientHelper.instance.playerId,name:u.ClientHelper.instance.name,level:u.ClientHelper.instance.level,server_name:u.GlobalConfig.sName,_sid:u.GlobalConfig.sid},e=JSON.stringify(t);window.parent.postMessage(e,"*"),console.log("》》》角色信息上报参数："+e)},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,console.log("PlatformYMXK created"),t}u.PlatformYMXK=t,__reflect(t.prototype,"qmr.PlatformYMXK")}(qmr=qmr||{}),function(i){var e,t=(e=i.BasePlatform,__extends(r,e),r.prototype.initGetOption=function(){i.PlatformConfig.platformSign=i.PlatformConfig.platform+"",this.isGetPlatformInfo=!0},r.prototype.initLoginServer=function(){this.updateLoginServer()},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var r=this;return __generator(this,function(t){return egret.log("平台登陆"),[2,new Promise(function(t,e){i.GlobalConfig.token="2322232",r.isGetPlatformInfo=!0,t(),egret.log("平台登陆成功:"+status)})]})})},r.prototype.reqPay=function(t){},r.prototype.pay=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,t}i.SolGamePlatform=t,__reflect(t.prototype,"qmr.SolGamePlatform")}(qmr=qmr||{}),function(g){var e,t=(e=g.BasePlatform,__extends(r,e),r.prototype.reqPay=function(t){var r=this,e=t.id+"@"+g.PlatformConfig.channelId,i=String(r.packageId),n=g.GlobalConfig.account,o=g.GlobalConfig.sid,a=g.GlobalConfig.uid,s=g.ClientHelper.instance.name,l=g.ClientHelper.instance.level+"",c=String(t.id),u=t.cumulVal,h=t.name,p=t.name,f=(g.GlobalConfig.loginKey,g.Md5Util.getInstance().hex_md5(""+i+encodeURI(n)+o+a+l+c+u+g.GlobalConfig.loginKey)),d=r.rechargeOrderIdServer+"?pid="+r.packageId+"&account="+n+"&serverId="+o+"&roleId="+a+"&roleName="+s+"&roleLevel="+l+"&productId="+c+"&productName="+h+"&productDesc="+p+"&price="+u+"&extension="+e+"&sign="+f+"&time="+g.TimeUtil.serverTime;console.log("请求充值服生成订单号: "+d),g.HttpRequest.sendGet(d,function(t){console.log("请求充值服生成订单号回包: "+JSON.stringify(t));var e=JSON.parse(t);e&&0==e.ret&&r.pay(e.data)},r)},r.prototype.reloadGame=function(t){this.logout()},r.prototype.setLoadingStatus=function(t){t=t||"hide",console.log("js setLoadingStatus",t),egret.ExternalInterface.call("setLoadingStatus",t)},r.prototype.reportRegister=function(){this.uploadGameRoleInfo(2)},r.prototype.reportLogin=function(){this.uploadGameRoleInfo(1)},r.prototype.reportUpLevel=function(){this.uploadGameRoleInfo(3)},r.prototype.logout=function(){this.uploadGameRoleInfo(4),egret.ExternalInterface.call("loginOutXiyouGameSDK","loginOutXiyouGameSDK message from JS")},r.prototype.initGetOption=function(){},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(t){return i=this,[2,new Promise(function(r,t){egret.ExternalInterface.addCallback("onExitResultXiyouGameSDK",function(t){i.uploadGameRoleInfo(4),egret.ExternalInterface.call("exitXiyouGameSDK","exitXiyouGameSDK message from JS")}),egret.ExternalInterface.addCallback("logoutXiyouGameSDKComplete",function(t){JSON.parse(t).success?(console.log("sdk登出成功",t),window.location&&window.location.reload?window.location.reload():g.TipManagerCommon.getInstance().createCommonColorTip("请手动重启游戏"),r()):(console.log("sdk登出失败",t),g.TipManagerCommon.getInstance().createCommonColorTip("请手动重启游戏"))}),egret.ExternalInterface.addCallback("onUserAuthXiyouGameSDKComplete",function(t){console.log("实名认证查询",JSON.stringify(t)),JSON.parse(t).age_scope}),egret.ExternalInterface.addCallback("initXiyouGameSDKComplete",function(t){var e=JSON.parse(t);e.success?(console.log("sdk初始化成功",t),i.packageId=e.pid,egret.ExternalInterface.call("loginXiyouGameSDK","loginXiyouGameSDK message from JS")):console.log("sdk初始化失败",t)}),egret.ExternalInterface.addCallback("loginXiyouGameSDKComplete",function(t){var e=JSON.parse(t);e.success?(console.log("sdk登录成功",t),g.GlobalConfig.uid=e.sUniqueUserId,g.GlobalConfig.token=e.sAuthToken,g.GlobalConfig.account=g.GlobalConfig.uid,i.isGetPlatformInfo=!0,r()):console.log("sdk登录失败",t)}),egret.ExternalInterface.call("initXiyouGameSDK","initXiyouGameSDK message from JS")})]})})},r.prototype.pay=function(n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,e){var r={fixedPay:!0};r.productId=n.productId,r.productName=n.productName,r.productDesc=n.productName,r.ration=n.ration,r.coinName="元宝",r.price=n.price,r.buyNum=n.buyNum,r.roleId=""+g.ClientHelper.instance.playerId,r.roleName=g.ClientHelper.instance.name,r.roleLevel=g.ClientHelper.instance.level,r.serverId=g.GlobalConfig.sid,r.serverName=g.GlobalConfig.sName,r.orderId=n.orderId,r.extension=n.extension;var i=JSON.stringify(r);console.log("请求sdk支付:",i),egret.ExternalInterface.call("payXiyouGameSDK",i)})]})})},r.prototype.uploadGameRoleInfo=function(t){var e=new Object;e.dataType=t,e.serverId=g.GlobalConfig.sid,e.serverName=g.GlobalConfig.sName,e.roleId=""+g.ClientHelper.instance.playerId,e.roleName=g.ClientHelper.instance.name,e.roleLevel=""+g.ClientHelper.instance.level;var r=Math.round(g.TimeUtil.serverTime/1e3);e.roleCTime=g.ClientHelper.instance.createTime,e.roleLevelIMTime=r,e.moneyNum=""+g.ClientHelper.instance.diamond,e.vip=""+g.ClientHelper.instance.vipLevel,e.power=""+g.ClientHelper.instance.fightVal;var i=JSON.stringify(e);console.log("上传角色信息:",i),egret.ExternalInterface.call("reportXiyouGameSDK",i)},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,egret.registerFontMapping("specialGameFont","./font/specialFont.ttf"),t}g.XiyouApkPlatform=t,__reflect(t.prototype,"qmr.XiyouApkPlatform")}(qmr=qmr||{}),function(g){var e,t=(e=g.BasePlatform,__extends(r,e),r.prototype.reqPay=function(t){var r=this,e=t.id+"@"+g.PlatformConfig.channelId,i=String(r.packageId),n=g.GlobalConfig.account,o=g.GlobalConfig.sid,a=g.GlobalConfig.uid,s=g.ClientHelper.instance.name,l=g.ClientHelper.instance.level+"",c=String(t.id),u=t.cumulVal,h=t.name,p=t.name,f=(g.GlobalConfig.loginKey,g.Md5Util.getInstance().hex_md5(""+i+encodeURI(n)+o+a+l+c+u+g.GlobalConfig.loginKey)),d=r.rechargeOrderIdServer+"?pid="+r.packageId+"&account="+n+"&serverId="+o+"&roleId="+a+"&roleName="+s+"&roleLevel="+l+"&productId="+c+"&productName="+h+"&productDesc="+p+"&price="+u+"&extension="+e+"&sign="+f;console.log("请求充值服生成订单号: "+d),g.HttpRequest.sendGet(d,function(t){console.log("请求充值服生成订单号回包: "+JSON.stringify(t));var e=JSON.parse(t);e&&0==e.ret&&r.pay(e.data)},r)},r.prototype.reportRegister=function(){this.uploadGameRoleInfo(2)},r.prototype.reportLogin=function(){this.uploadGameRoleInfo(1)},r.prototype.reportUpLevel=function(){this.uploadGameRoleInfo(3)},r.prototype.logout=function(){this.uploadGameRoleInfo(4)},r.prototype.initGetOption=function(){},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(t){return n=this,[2,new Promise(function(i,t){if(n.sdk=window.XiYouSDK,!n.sdk)throw new Error("XiYouSDK not found");var e={debugState:!0};e.appId=g.PlatformConfig.appIdStr,e.appKey=g.PlatformConfig.appKey,e.appVersion=g.GlobalConfig.appVersion;var r={onInit:function(t){1===t.state?(console.log("sdk初始化成功",JSON.stringify(t)),n.packageId=t.data.pid,n.sdk.login()):console.log("sdk初始化失败",JSON.stringify(t))},onLogin:function(t){var e,r;1===t.state?(console.log("sdk登录成功",JSON.stringify(t)),e=t.data.userId,g.GlobalConfig.uid=e,r=t.data.token,g.GlobalConfig.token=r,g.GlobalConfig.account=g.GlobalConfig.uid,n.isGetPlatformInfo=!0,egret.log("sdk请求实名认证查询"),n.sdk.getUserAuth(),i()):console.log("sdk登录失败",JSON.stringify(t))},onPay:function(t){1===t.state?console.log("支付成功",JSON.stringify(t)):console.log("支付失败",JSON.stringify(t))},onServers:function(t){},onUserAuth:function(t){if(console.log("实名认证查询",JSON.stringify(t)),1===t.state)switch(t.data.age_scope){case"1":case"2":case"3":case"4":break;default:n.sdk.setUserAuth(2,!0)}else t.state},onLogout:function(t){1===t.state?console.log("注销成功",JSON.stringify(t)):console.log("注销失败",JSON.stringify(t))},onExit:function(t){1===t.state?console.log("退出成功",JSON.stringify(t)):console.log("退出失败",JSON.stringify(t))}};egret.log("sdk请求初始化"),n.sdk.init(e,r)})]})})},r.prototype.pay=function(o){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r,i=n;i.sdk&&((r={fixedPay:!0}).productId=o.productId,r.productName=o.productName,r.productDesc=o.productName,r.ration=o.ration,r.coinName="元宝",r.price=o.price,r.buyNum=o.buyNum,r.orderId=o.orderId,r.extension=o.extension,r.serverId=g.GlobalConfig.sid,r.serverName=g.GlobalConfig.sName,console.log("请求sdk支付:",JSON.stringify(r)),i.sdk.pay(r))})]})})},r.prototype.uploadGameRoleInfo=function(t){var e,r;this.sdk&&((e=new Object).dataType=t,e.serverId=g.GlobalConfig.sid,e.serverName=g.GlobalConfig.sName,e.roleId=g.GlobalConfig.uid,e.roleName=g.ClientHelper.instance.name,e.roleLevel=""+g.ClientHelper.instance.level,r=Math.round(g.TimeUtil.serverTime/1e3),e.roleCTime=g.ClientHelper.instance.createTime,e.roleLevelIMTime=r,e.moneyNum=""+g.ClientHelper.instance.diamond,e.vip=""+g.ClientHelper.instance.vipLevel,e.power=""+g.ClientHelper.instance.fightVal,console.log("上传角色信息:"+JSON.stringify(e)),this.sdk.dataSubmit(e))},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!1,t}g.XiyouH5Platform=t,__reflect(t.prototype,"qmr.XiyouH5Platform")}(qmr=qmr||{}),function(g){var e,t=(e=g.BasePlatform,__extends(r,e),r.prototype.initGetOption=function(){g.PlatformConfig.platformSign=g.PlatformConfig.platform+"",this.masterId=g.JsUtil.getValueFromParams("masterId",g.PlatformConfig.extendsParams),this.packageId=g.JsUtil.getValueFromParams("packageId",g.PlatformConfig.extendsParams),this.packageName=g.JsUtil.getValueFromParams("packageName",g.PlatformConfig.extendsParams),this.isGetPlatformInfo=!0,window.onShareSucess=this.onShareSucess},r.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var e,i=this;return __generator(this,function(t){return egret.log("平台登陆"),e=this,[2,new Promise(function(r,t){if(!window.XYqqSdk)throw new Error("XYqqSdk init faild");if(e.sdk=window.XYqqSdk,!window.isInitSDK)throw new Error("XYqqSdk init faild");i.sdk&&i.sdk.doLogin(function(t,e){t?egret.error("sdk登录失败:"+t):(i.data=e,g.GlobalConfig.uid=String(e.userId),g.GlobalConfig.token=String(e.token),g.GlobalConfig.account=g.GlobalConfig.uid,egret.log("sdk登录成功:"+g.GlobalConfig.account),r())})})]})})},r.prototype.uploadGameRoleInfo=function(t){var e,r,i;!this.isGetPlatformInfo||this.sdk&&((e=new Object).dataType=t,e.serverId=g.GlobalConfig.sid,e.serverName=g.GlobalConfig.sName,e.roleId=g.GlobalConfig.uid,e.roleName=g.ClientHelper.instance.name,e.roleLevel=g.ClientHelper.instance.level,r=Math.round(g.TimeUtil.serverTime/1e3),e.roleCTime=0<g.GlobalConfig.logintime?g.GlobalConfig.logintime:"0",e.roleLevelIMTime=r,e.moneyNum=g.ClientHelper.instance.money,e.vip=g.ClientHelper.instance.vipLevel,e.power="0",i=JSON.stringify(e),egret.log("上传角色信息:"+i),this.sdk.doSubmit(e))},Object.defineProperty(r.prototype,"httpProtoco",{get:function(){return"https:"},enumerable:!0,configurable:!0}),r.prototype.reportRegister=function(){this.uploadGameRoleInfo(2)},r.prototype.reportLogin=function(){this.uploadGameRoleInfo(1)},r.prototype.reportUpLevel=function(){this.uploadGameRoleInfo(3)},r.prototype.logout=function(){this.uploadGameRoleInfo(4)},r.prototype.reqPay=function(r){var i=this,t=r.id+"@"+g.PlatformConfig.channelId,e=i.packageId,n=g.GlobalConfig.account,o=g.GlobalConfig.sid,a=g.GlobalConfig.uid,s=g.ClientHelper.instance.name,l=g.ClientHelper.instance.level+"",c=r.id,u=r.name,h=r.name,p=r.cumulVal,f=(g.GlobalConfig.loginKey,g.Md5Util.getInstance().hex_md5(""+e+encodeURI(n)+o+a+l+c+p+g.GlobalConfig.loginKey)),d=i.rechargeOrderIdServer+"?pid="+e+"&account="+n+"&serverId="+o+"&roleId="+a+"&roleName="+s+"&roleLevel="+l+"&productId="+c+"&productName="+u+"&productDesc="+h+"&price="+p+"&extension="+t+"&sign="+f;console.log("请求充值服生成订单号: "+d),g.HttpRequest.sendGet(d,function(t){console.log("请求充值服生成订单号回包: "+JSON.stringify(t));var e=JSON.parse(t);i.orderResultData=e.data,e&&0==e.ret&&(i.orderId=i.orderResultData.orderId,console.log("请求充值服生成订单号成功:"+i.orderId),i.pay(r))},i)},r.prototype.pay=function(s){return __awaiter(this,void 0,void 0,function(){var a=this;return __generator(this,function(t){return[2,new Promise(function(t,e){var r,i,n=a,o=s.level;n.sdk&&((r=new Object).productId=s.id,r.productName=s.name,r.productDesc=s.name,r.ration="100",r.coinName="元宝",r.price=o,r.buyNum="1",r.orderId=a.orderResultData.orderId,r.zoneid=g.GlobalConfig.sid,r.extension=a.orderResultData.extension,i=JSON.stringify(r),egret.log("调用sdk充值接口:"+i),n.sdk.doPay(r))})]})})},r.prototype.onScreenShow=function(){console.log("游戏界面切入前台"),this.__isShareGame&&(this.__isShareGame=!1,2e3<egret.getTimer()-this.lastTime?(console.log("分享时间超过2秒"),g.NotifyManager.sendNotification(g.NotifyConstLogin.TO_REQUEST_SHARE_REWARD)):console.log("分享时间不足2秒"))},r.prototype.onScreenHide=function(){console.log("游戏界面切入后台")},r.prototype.onShareBack=function(){this.__isShareGame&&(this.__isShareGame=!1,2e3<egret.getTimer()-this.lastTime&&g.NotifyManager.sendNotification(g.NotifyConstLogin.TO_REQUEST_SHARE_REWARD))},r.prototype.onShareSucess=function(){this.__isShareGame&&(this.__isShareGame=!1,g.NotifyManager.sendNotification(g.NotifyConstLogin.TO_REQUEST_SHARE_REWARD))},r.prototype.shareGame=function(t,e,r){return t-e<=0?void g.TipManagerCommon.getInstance().createCommonColorTip("今日的分享次数已经用完"):0<r&&r>egret.getTimer()?void g.TipManagerCommon.getInstance().createCommonColorTip("CD时间未到，请稍后"):(this.lastTime=egret.getTimer(),this.__isShareGame=!0,void(this.sdk&&this.sdk.doShare()))},r.prototype.reloadGame=function(t){console.log("reloadGame",t,window.clear_res_cache);var e,r="";t&&(this.setLoadingStatus("清理中..."),egret.localStorage.clear(),(e=window.clear_res_cache)&&e(),r="缓存清理成功，"),r+="请杀掉进程后重新启动游戏",window.qq&&window.qq.exitMiniProgram?(this.setLoadingStatus(""),window.qq.showModal({content:r,showCancel:!1,complete:function(){}})):g.TipManagerCommon.getInstance().createCommonColorTip("请关闭游戏进程重新进入")},r);function r(){var t=e.call(this)||this;return t.canClearResCache=!0,t.lastTime=0,t.__isShareGame=!1,t}g.XiyouSQQPlatform=t,__reflect(t.prototype,"qmr.XiyouSQQPlatform")}(qmr=qmr||{}),function(c){var e,t=(e=c.BasePlatform,__extends(n,e),n.prototype.initGetOption=function(){c.PlatformConfig.platformSign=c.PlatformConfig.platform+"";var t=c.JsUtil.getValueFromParams("limit",c.PlatformConfig.extendsParams),e=null==t?0:Number(t),r=c.JsUtil.getValueFromParams("h5limit",c.PlatformConfig.extendsParams),i=null==r?0:Number(r);n.limit=e,n.h5limit=i,this.isGetPlatformInfo=!0,aladin.AladinSDK.initSdk(),aladin.AladinSDK.init2(c.PlatformConfig.appIdStr,c.GlobalConfig.appVersion,null,this.aladinSdkInitComplete),aladin.AladinSDK.allowDebug(!1),window.showPayGuild=this.showPayGuild},n.prototype.aladinSdkInitComplete=function(){},Object.defineProperty(n.prototype,"httpProtoco",{get:function(){return"https:"},enumerable:!0,configurable:!0}),n.prototype.getCode=function(){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(t){switch(t.label){case 0:return(e=this).sdk?[4,e.sdk.getCode()]:[3,2];case 1:return r=t.sent(),console.log("》》》获取微信code参数："+r),[2,new Promise(function(t,e){t(r)})];case 2:return[2]}})})},n.prototype.reportOpenId=function(){aladin.AladinSDK.reportOpenId(c.GlobalConfig.uid),console.log("》》》上报openid："+c.GlobalConfig.uid)},Object.defineProperty(n.prototype,"reqRoute",{get:function(){return"IOS"==egret.Capabilities.os.toUpperCase()?"ios":"android"},enumerable:!0,configurable:!0}),n.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(t){switch(t.label){case 0:return e=this,console.log("游戏平台登录接口调用"),window.wxplatform?(e.sdk=window.wxplatform,e.sdk?(e.sdk.init(),[4,e.sdk.login()]):[3,2]):[3,2];case 1:return r=t.sent(),e.data=r,c.GlobalConfig.uid=r.openid,c.GlobalConfig.token=r.token,c.GlobalConfig.account=c.GlobalConfig.uid,console.log("》》》微信登录返回参数：openid"+c.GlobalConfig.uid+"   code: "+c.GlobalConfig.token),[2,new Promise(function(t,e){t()})];case 2:return[2]}})})},n.prototype.getPullServerListUrl=function(){var t=c.PlatformConfig.isTSVersion?1:0,e=(c.PlatformConfig.isTSVersion?this.tsServerListServer:this.serverListServer,c.PlatformConfig.isTSVersion?9e3:c.PlatformConfig.platformId);return this.serverListServer+"?account="+c.GlobalConfig.account+"&ts="+t+"&sid="+e},n.prototype.getCheckAccountValidityUrl=function(){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a,s,l;return __generator(this,function(t){switch(t.label){case 0:return e=c.GlobalConfig.account,[4,this.getCode()];case 1:return r=t.sent(),i=r.token,console.log("账号验签新code:"+i),n=c.TimeUtil.serverTime/1e3|0,o=n+"",a=c.GlobalConfig.sid,s=c.Md5Util.getInstance().hex_md5(encodeURI(e)+a+i+o+c.GlobalConfig.loginKey),l=c.WebBrowerUtil.model||"none",[2,this.loginServerUrl+"?account="+e+"&token="+i+"&time="+o+"&serverId="+a+"&unverifysvr=0&sign="+s+"&clientVer="+c.GlobalConfig.appVersion+"&deviceUID="+l]}})})},n.prototype.tryOrder=function(t){console.log("上线尝试拉取订单");var e=Math.round(t/1e3),r={account:c.GlobalConfig.account,serverId:c.GlobalConfig.sid,channelId:c.PlatformConfig.channelId,pf:"android",time:e,roleId:c.GlobalConfig.uid,roleName:c.ClientHelper.instance.name,roleLevel:c.ClientHelper.instance.level,rechargeUrl:this.rechargeOrderIdServer};console.log("请求支付:"+r),this.sdk&&this.sdk.tryOrder(r)},n.prototype.reportCreateRoleView=function(){console.log("==================================登录界面时间上报================================"),aladin.AladinSDK&&aladin.AladinSDK.reportWithAppId(c.PlatformConfig.appIdStr,"15_1","")},n.prototype.reportUpLevel=function(){aladin.AladinSDK.reportWithAppId(c.PlatformConfig.appIdStr,"16_1",c.ClientHelper.instance.level+""),console.log("==============================》》》上报角色升级："+c.ClientHelper.instance.level),10==c.ClientHelper.instance.level&&"ANDROID"==egret.Capabilities.os.toUpperCase()&&c.ModuleManager.popModule(c.ModuleNameLogin.FIRST_RECHARGE_VIEW,!1)},n.prototype.showPayGuild=function(){var t=c.ClientHelper.instance.playerId+"";egret.localStorage.getItem(t)==t?(console.log("===========================》》》老用户直接跳客服对话"),window.startH5PayCall&&(window.startH5PayCall(),console.log("===========================》》》老用户客服消息回调："))):(console.log("===========================》》》第一次弹付费引导界面"),egret.localStorage.setItem(t.toString(),t.toString()),c.ModuleManager.showModule(c.ModuleNameLogin.RECHARGE_GUILD))},n.prototype.startH5PayCall=function(){console.log("===========================》》》关闭引导界面后回调："+window.startH5PayCall),window.startH5PayCall&&(console.log("===========================》》》第一次客服消息回调："),window.startH5PayCall())},n.prototype.reqPay=function(t){this.pay(t)},n.prototype.pay=function(a){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(t){return o=this,[2,new Promise(function(t,e){var r,i=100*a.level,n=Math.round(c.TimeUtil.serverTime/1e3);o.sdk&&(r={account:c.GlobalConfig.account,serverId:c.GlobalConfig.sid,channelId:c.PlatformConfig.channelId,time:n,pf:"android",productId:a.id,productName:a.name,roleId:c.GlobalConfig.uid,roleName:c.ClientHelper.instance.name,roleLevel:c.ClientHelper.instance.level,price:i,rechargeUrl:o.rechargeOrderIdServer},console.log("请求支付:"+r),o.sdk.pay(r))})]})})},n.prototype.onScreenShow=function(){console.log("===============================================游戏界面切入前台==============================================="),this.__isShareGame&&(this.__isShareGame=!1,2e3<egret.getTimer()-this.lastTime?(console.log("===============================================分享时间超过2秒==============================================="),c.NotifyManager.sendNotification(c.NotifyConstLogin.TO_REQUEST_SHARE_REWARD)):console.log("===============================================分享时间不足2秒==============================================="))},n.prototype.onScreenHide=function(){console.log("===============================================游戏界面切入后台===============================================")},n.prototype.onShareBack=function(){this.__isShareGame&&(this.__isShareGame=!1,2e3<egret.getTimer()-this.lastTime&&c.NotifyManager.sendNotification(c.NotifyConstLogin.TO_REQUEST_SHARE_REWARD))},n.prototype.onShareSucess=function(){this.__isShareGame&&(this.__isShareGame=!1,c.NotifyManager.sendNotification(c.NotifyConstLogin.TO_REQUEST_SHARE_REWARD))},n.prototype.shareGame=function(t,e,r){return console.log("==================调用微信分享====================="),t-e<=0?void c.TipManagerCommon.getInstance().createCommonColorTip("今日的分享次数已经用完"):0<r&&r>egret.getTimer()?void c.TipManagerCommon.getInstance().createCommonColorTip("CD时间未到，请稍后"):(this.lastTime=egret.getTimer(),this.__isShareGame=!0,void(this.sdk&&(console.log("==================进入微信SDK分享====================="),this.sdk.doShare())))},n.prototype.reloadGame=function(t){var e,r="";t&&(this.setLoadingStatus("清理中..."),egret.localStorage.clear(),(e=window.clear_res_cache)&&e(),r="缓存清理成功，"),r+="请重新进入小程序",window.wx&&window.wx.exitMiniProgram?(this.setLoadingStatus(""),window.wx.showModal({content:r,showCancel:!1,complete:function(){window.wx.exitMiniProgram()}})):c.TipManagerCommon.getInstance().createCommonColorTip("请关闭游戏进程重新进入")},n.limit=0,n.h5limit=0,n);function n(){var t=e.call(this)||this;return t.canClearResCache=!0,t.lastTime=0,t.__isShareGame=!1,t}c.XiyouXWPlatform=t,__reflect(t.prototype,"qmr.XiyouXWPlatform")}(qmr=qmr||{}),function(n){var t=(e.allowDebug=function(t){n.ALUtil.DEBUG=t},e.readAppidList=function(e){return n.ALData.appIdListStr?void e(n.ALData.appIdListStr):void n.ALUtil.readAppIDList().then(function(t){n.ALData.appIdListStr=t,e(n.ALData.appIdListStr),n.ALUtil.LOG("AladinSDK readAppIDList",t)})},e.initSdk=function(){n.UserInfoData.InitUserinfo(),n.ALReport.init(),n.ALIntercept.init()},e.init2=function(t,e,r,i){n.ALSDK.init2(t,e,r,i)},e.reportOpenId=function(t,e){n.ALUtil.LOG("上报的[OPENID]:",t),n.ALReport.report(n.REPORT_TYPE_OPEN_ID,t)},e.reportAnalytics=function(t,e){n.ALReport.reportAnalytics(t,e)},e.reportWithAppId=function(t,e,r){void 0===r&&(r=""),n.ALConfig.appId=t,n.ALReport.report(e,r)},e.clickToMiniProgram=function(t,e,r){void 0===r&&(r=""),e===this.ClickTypes.ICONS_CLICK?n.ALSDK.toMiniProgram(t,this.ClickTypes.ICONS_CLICK,n.SDK_MODULE_ICONS_CLICK,r||"icons"):e===this.ClickTypes.BANNER_CLICK?n.ALSDK.toMiniProgram(t,this.ClickTypes.BANNER_CLICK,n.SDK_MODULE_BANNER_CLICK,r||"banner"):n.ALSDK.toMiniProgram(t,this.ClickTypes.ICONS_CLICK,n.SDK_MODULE_ICONS_CLICK,r)},e.getFavoData=function(t){n.ALSDK.requestModuleData(n.SDK_MODULE_LIKE,t)},e.ClickTypes={ICONS_CLICK:"0_11",BANNER_CLICK:"0_12"},e.ReportTypes={SHOW:"1_1",LOGIN:"1_2",OPEN_ID:"1_3",AUTH:"1_4",SHARE:"1_5",LIKE_CLICK:"1_6",DRAWER_CLICK:"1_7",LIKE_SHOW:"1_8",DRAWER_SHOW:"1_9",SHARE_Ready:"1_10",PAY_MENT:"6_1",PAY_MENT_STAR:"6_2",PAY_MENT_INTER:"6_3",PAY_MENT_FAIL:"6_4",MORE_SHOW:"2_0",MORE_FOLD:"2_1",MORE_CLICK:"2_2",MORE_LONG_CLICK:"2_3",VIDEO_OPEN:"2_4",VIDEO_WATCH_FAIL:"2_5",VIDEO_WATCH_NORMAL:"2_6",GAME_BOX_SHOW:"8_1",GAME_BOX_CLICK:"8_2",GAME_BOX_BANNER_CLICK:"8_3",VIDEO_BTN_SHOW:"5_6",VIDEO_CLICK:"5_7",SHARE_BTN_SHOW:"5_8",SHARE_CLICK:"5_9"},e);function e(){}n.AladinSDK=t,__reflect(t.prototype,"aladin.AladinSDK")}(aladin=aladin||{}),function(t){var e=(r.sdkVersion="1.2.0",r.envVersion="release",r.appId="",r.version="1.0.0",r.openId="",r.unionId="",r.ReportMarketDomain="https://mprogram.boomegg.cn",r.ReportDataDomain="https://distribute-stats.boomegg.cn",r.ImgDomain="https://ad-static.boomegg.cn",r);function r(){}t.ALConfig=e,__reflect(e.prototype,"aladin.ALConfig")}(aladin=aladin||{}),function(t){var e=(r.opts=null,r.scene=0,r.shareScene=0,r.topInviter="0",r.inviter="0",r.level=1,r.score=1,r.isVertical=!1,r.isTSA=!1,r.allowShare=!1,r.appIdListStr="",r.sdkData=null,r.moreData=null,r.iconData=null,r);function r(){}t.ALData=e,__reflect(e.prototype,"aladin.ALData");var i=(n.InitUserinfo=function(){var e;t.ALUtil.wxqqExist()&&(e=t.ALUtil.wxExist()?wx:qq).getUserInfo({complete:function(t){t&&t.userInfo&&(n.NickName=t.userInfo.nickName||"",n.AvatarUrl=t.userInfo.avatarUrl||"",n.Country=t.userInfo.country||"",n.Gender=void 0!==t.userInfo.gender?t.userInfo.gender:0,n.Language=t.userInfo.language||"",n.Province=t.userInfo.province||"");try{e.getSystemInfo({success:function(t){n.Model=t.model}})}catch(t){}}})},n.NickName="",n.AvatarUrl="",n.Country="",n.Gender=0,n.Language="",n.Province="",n.Model="",n);function n(){}t.UserInfoData=i,__reflect(i.prototype,"aladin.UserInfoData")}(aladin=aladin||{}),function(h){var t=(o.EmptyFn=function(){h.ALUtil.LOG("empty fn")},o.init=function(){this._inited||(this._inited=!0,h.ALUtil.LOG("ALIntercept init "),h.ALUtil.wxqqNotExist()||(this._pay(),this._shareApp(),this._execShowHide(),this._onShareApp(),this._rewardedVideoAd(),h.ALUtil.LOG("ALIntercept init success ")))},o._execShowHide=function(){o.TimeShow=Date.now(),o.Params={type:"duration",sub_type:h.REPORT_TYPE_GAME_DURATION,diff_key:"",extra:""};var t=h.ALUtil.wxExist()?wx:qq;t.onShow(function(t){o.TimeShow=Date.now(),h.ALUtil.LOG("ALIntercept wxQQ.onShow")}),t.onHide(function(t){var e=Math.ceil((Date.now()-o.TimeShow)/1e3);2<e&&(o.Params.diff_key=e.toString(),o.Params.extra=h.ALReport.getAdsPos(),h.ALReport.reportDataToMarket(o.Params)),h.ALUtil.LOG("ALIntercept wxQQ.onHide")})},o._rewardedVideoAd=function(){var t=h.ALUtil.wxExist()?wx:qq,i=t.createRewardedVideoAd;Object.defineProperty(t,"createRewardedVideoAd",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=i.apply(this,arguments);if(o.VideoId=(arguments[0]||{}).adUnitId,t.isIntercept)return t;t.isIntercept=!0;var e=t.show;Object.defineProperty(t,"show",{configurable:!0,enumerable:!0,writable:!0,value:function(){return h.ALUtil.LOG("ALIntercept _rewardedVideoAd show ---"),h.ALReport.report(h.REPORT_TYPE_VIDEO_OPEN,o.VideoId),e.apply(this,arguments)}}),t.onClose(o.VideoClose);var r=t.offClose;return Object.defineProperty(t,"offClose",{configurable:!0,enumerable:!0,writable:!0,value:function(){h.ALUtil.LOG("ALIntercept _rewardedVideoAd offClose!!!"),r.apply(this,arguments)}}),t}}),o._rewardedVideoAd=o.EmptyFn},o.VideoClose=function(t){h.ALUtil.LOG("ALIntercept _rewardedVideoAd VideoClose--- ",t),void 0===t||t&&t.isEnded?h.ALReport.report(h.REPORT_TYPE_VIDEO_WATCH_NORMAL,o.VideoId):h.ALReport.report(h.REPORT_TYPE_VIDEO_WATCH_FAIL,o.VideoId)},o._pay=function(){var t=h.ALUtil.qqExist()?qq:wx,n=t.requestMidasPayment;Object.defineProperty(t,"requestMidasPayment",{configurable:!0,enumerable:!0,writable:!0,value:function(){h.ALReport.report(h.REPORT_TYPE_PAY_MENT_START);var t=arguments[0]||{},e="0",e=h.ALUtil.qqExist()?t.starCurrency:t.buyQuantity,r=t.success||null;t.success=function(t){h.ALUtil.LOG("ALIntercept _pay success --- ",t),e+="|1",h.ALReport.reportPay(e),r&&r(t)};var i=t.fail||null;return t.fail=function(t){h.ALUtil.LOG("ALIntercept _pay fail --- ",t),e+="|0",h.ALReport.reportPay(e),i&&i(t)},n.apply(this,arguments)}}),o._pay=o.EmptyFn},o._execOnShareApp=function(){var t;o.InfoGot=!0,o.ShareParamFunc&&((t=h.ALUtil.wxExist()?wx:qq).offShareAppMessage(o.ShareParamFunc),t.onShareAppMessage(o.ShareParamFunc))},o._shareApp=function(){var t=h.ALUtil.wxExist()?wx:qq,e=t.shareAppMessage;Object.defineProperty(t,"shareAppMessage",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=arguments[0]||{};return o._handleShareParam(t),t.query=t.query+("&a_inviter="+h.ALData.inviter+"&a_level="+h.ALData.level+"&a_top_inviter="+h.ALData.topInviter),h.ALUtil.LOG("ALIntercept shareAppMessage query ",t.query),e.apply(this,arguments)}}),o._shareApp=o.EmptyFn},o._onShareApp=function(){var t=h.ALUtil.wxExist()?wx:qq,r=t.onShareAppMessage;Object.defineProperty(t,"onShareAppMessage",{configurable:!0,enumerable:!0,writable:!0,value:function(){h.ALUtil.LOG("开始拦截_onShareApp");var e=arguments[0];return e?o.InfoGot?(h.ALUtil.LOG("ALIntercept onShareAppMessage _infoExist"),arguments[0]=function(){var t=e();return o._handleShareParam(t,!1),t.query=t.query+("&a_inviter="+h.ALData.inviter+"&a_level="+h.ALData.level+"&a_top_inviter="+h.ALData.topInviter),h.ALUtil.LOG("ALIntercept onShareAppMessage query ",t.query),{title:t.title,imageUrl:t.imageUrl,imageUrlId:t.imageUrlId,query:t.query}}):(o.ShareParamFunc=e,h.ALUtil.LOG("ALIntercept onShareAppMessage _infoExist not")):h.ALUtil.LOG("ALIntercept onShareAppMessage argument0F empty"),r.apply(this,arguments)}});var e=t.offShareAppMessage;Object.defineProperty(t,"offShareAppMessage",{configurable:!0,enumerable:!0,writable:!0,value:function(){e.apply(this,arguments),h.ALUtil.LOG("ALIntercept offShareAppMessage !!!")}}),o._onShareApp=o.EmptyFn},o._handleShareParam=function(t,e){void 0===e&&(e=!0);var r=t.query||"",i=t.imageUrl,n=t.imageUrlId,o=h.ALUtil._parseQueryString(r);h.ALUtil.LOG("ALIntercept _handleShareParam queryObj ",o),h.ALData.shareScene=o.shareScene||0;var a,s,l,c,u="default";o.Ads||(h.ALData.sdkData&&h.ALData.sdkData.shares&&0<h.ALData.sdkData.shares.length?(a=Math.floor(Math.random()*h.ALData.sdkData.shares.length),s=h.ALData.sdkData.shares[a],t.imageUrl=s.url,t.title=s.desc,u=s.shareid):n?u=n:i&&(l=h.ALUtil.getUrlFileName(i),h.ALUtil.LOG("ALIntercept _handleShareParam ",i,l),u=0!==i.indexOf("http")&&-1===l.indexOf(".")?"screenShot":l.replace(".","_")),c="&Ads=a_Share&AdsPos="+u,h.ALUtil.LOG("ALIntercept _handleShareParam ads_str ",c),t.query=r+c),e&&h.ALReport.report(h.REPORT_TYPE_SHARE_READY,u)},o._inited=!1,o.TimeShow=null,o.Params=null,o.VideoId=null,o.InfoGot=!1,o.ShareParamFunc=null,o);function o(){}h.ALIntercept=t,__reflect(t.prototype,"aladin.ALIntercept")}(aladin=aladin||{}),function(l){var t=(i.getAdsPos=function(){return this.Ads+"|"+this.AdsPos},i.init=function(){this._inited||(this._inited=!0,l.ALUtil.LOG("ALReport init "),l.ALUtil.wxqqNotExist()||(this.initStartTime(),this._initAdsPos(),this._initReportData(),l.ALUtil.LOG("ALReport init success")))},i.initStartTime=function(){i.startTime=(new Date).getTime(),l.ALUtil.LOG("初始化游戏开始时间",i.startTime)},i.reportTime=function(t){var e,r;0!=i.startTime&&(e=(new Date).getTime(),r={type:"loadtime",sub_type:l.REPORT_TYPE_TIME,data:t,now:e,start:i.startTime,extra:e-i.startTime},this.reportDataToMarket(r))},i.reportAnalytics=function(t,e){var r,i;isNaN(e)?l.ALUtil.LOG("ALReport step error --- ",e):(this._inited||(l.ALConfig.appId=t,this.init()),this._initReportData(),r=this.reportPrefix+this._getCurrentDate()+"|"+this._getTimeStamp()+"|"+this.reportDevice2Sence+l.ALData.level+"|0|"+l.ALConfig.openId+"|10|"+e+"||||"+l.ALData.topInviter+"|"+l.UserInfoData.Gender,l.ALUtil.LOG("ALReport reportAnalytics str --- ",r),i=l.StringUtil.base64encode(r),l.HttpUtil.POST(l.ALConfig.ReportDataDomain+"/report",{info:i},function(t){t.isSucc||l.ALUtil.LOG("ALReport reportAnalytics fail --- ",t.reason)}))},i.report=function(t,e){if(this._inited||this.init(),t!=l.REPORT_TYPE_TIME){var r=t.split("_");if(r.length<2)console.warn("ALReport 参数传递错误");else{var i=e||"";if(t===l.REPORT_TYPE_OPEN_ID)return l.ALConfig.openId=e,window.ALOpenId=e,this.reportOpenId(),void this._initLevelData();var n=r[0],o=r[1];this._initReportData();var a=this.reportPrefix+this._getCurrentDate()+"|"+this._getTimeStamp()+"|"+this.reportDevice2Sence+l.ALData.level+"|0|"+l.ALConfig.openId+"|"+n+"|"+o+"|0|"+i+"||"+l.ALData.topInviter+"|"+l.UserInfoData.Gender;l.ALUtil.LOG("ALReport _report str --- ",a);var s=l.StringUtil.base64encode(a);l.HttpUtil.POST(l.ALConfig.ReportDataDomain+"/report",{info:s},function(t){t.isSucc||l.ALUtil.LOG("ALReport _report fail --- ",t.reason)})}}else this.reportTime(e)},i.reportOpenId=function(){var e,r={type:"openId",sub_type:l.REPORT_TYPE_OPEN_ID,extra:this.getAdsPos()};l.UserInfoData.InitUserinfo(),l.ALUtil.wxqqExist()?(e=l.ALUtil.wxExist()?wx:qq).getUserInfo({complete:function(t){t&&t.userInfo&&(r.nickName=t.userInfo.nickName||"",r.avatarUrl=t.userInfo.avatarUrl||"",r.country=t.userInfo.country||"",r.gender=void 0!==t.userInfo.gender?t.userInfo.gender:0,r.language=t.userInfo.language||"",r.province=t.userInfo.province||"");try{e.getSystemInfo({success:function(t){r.model=t.model},complete:function(){e.getNetworkType({success:function(t){r.networkType=t.networkType},complete:function(){i.reportDataToMarket(r)}})}})}catch(t){i.reportDataToMarket(r)}l.UserInfoData.InitUserinfo()}}):i.reportDataToMarket(r)},i.reportPay=function(t){l.ALUtil.LOG("拦截支付数据",t);var e={type:"pay",sub_type:l.REPORT_TYPE_PAY_MENT_ENTER,extra:t};this.reportDataToMarket(e)},i.reportShareState=function(t){var e=t?"1":"2",r={type:"share",sub_type:l.REPORT_TYPE_SHARE_SUCCESS,diff_key:e};this.reportDataToMarket(r)},i.reportDataToMarket=function(t){t.id=l.ALConfig.appId,t.openid=l.ALConfig.openId,l.ALUtil.LOG("reportDataToMarket param --- ",t),l.HttpUtil.POST(l.ALConfig.ReportMarketDomain+"/box/stats_sdk",t,function(t){t.isSucc||l.ALUtil.LOG("ALReport reportServer fail --- ",t.reason)})},i._initAdsPos=function(){var t="",e="";try{var r,i,n,o=(l.ALUtil.wxExist()?wx:qq).getLaunchOptionsSync();l.ALUtil.LOG("ALReport opts --- ",o),l.ALData.opts=o,l.ALData.scene=o.scene,(r=o.query).scene?(t=(i=decodeURIComponent(r.scene).split(","))[1],e=i[2]):r.Ads||r.AdsPos?(t=r.Ads?r.Ads:"",e=r.AdsPos?r.AdsPos:""):o.referrerInfo&&o.referrerInfo.extraData&&(t=(n=o.referrerInfo.extraData).Ads?n.Ads:"",e=n.AdsPos?n.AdsPos:""),""===t&&(e="1037"==o.scene?(t="fromMini",o.referrerInfo.appId||"0"):(t=l.ALUtil.qqExist()?"qq":"weixin",o.scene||"0"))}catch(t){console.log("ALReport _initAdSource catch--- ",t)}this.Ads=t,this.AdsPos=e,1044!=l.ALData.scene&&1007!=l.ALData.scene&&1036!=l.ALData.scene&&1008!=l.ALData.scene||(r=l.ALData.opts.query,l.ALData.topInviter=r.a_top_inviter||"0",l.ALData.level=r.a_level||1)},i._initLevelData=function(){var t,e=null;e=1044==l.ALData.scene||1007==l.ALData.scene||1036==l.ALData.scene||1008==l.ALData.scene?(t=l.ALData.opts.query,{appid:l.ALConfig.appId,openid:l.ALConfig.openId,level:t.a_level||"",inviter:t.a_inviter||"",top_inviter:t.a_top_inviter||""}):{appid:l.ALConfig.appId,openid:l.ALConfig.openId},l.HttpUtil.GET(l.ALConfig.ReportMarketDomain+"/box/accountinfo",e,function(t){var e;t.isSucc?(e=t.data.info,l.ALUtil.LOG("ALReport _initLevelData data --- ",t.data),l.ALUtil.LOG("初始化得到的分享数据：",e),l.ALData.topInviter=e.top_inviter||"0",l.ALData.inviter=l.ALConfig.openId,l.ALData.level=e.share_level?parseInt(e.share_level)+1:1,l.ALData.score=e.score?parseInt(e.score):0,l.ALIntercept._execOnShareApp()):l.ALUtil.LOG("ALReport _initLevelData fail --- ",t.reason)})},i._initReportData=function(){var t="",e="",r="",i="",n="";try{var o=(l.ALUtil.wxExist()?wx:qq).getSystemInfoSync(),t=o.platform,e=o.model,r=o.system,i=o.language,n=o.version}catch(t){console.warn("ALReport _initParam error--- ",t)}e&&"unknown"!==e?-1==e.toLowerCase().indexOf("iphone")&&-1==e.toLowerCase().indexOf("ipad")||(e="ios"):e="android",this.reportPrefix="t_event|distribute_all|",this.reportDevice2Sence=t+"|"+e+"|"+l.ALConfig.version+"|"+r+"||0.0.0.0||"+i+"||"+n+"|"+l.ALConfig.appId+"|"+this.Ads+"|"+this.AdsPos+"|"},i._getCurrentDate=function(){var t=new Date,e=t.getFullYear().toString(),r=(t.getMonth()+1).toString(),i=t.getDate().toString();return 1===r.length&&(r="0"+r),1===i.length&&(i="0"+i),e+r+i},i._getTimeStamp=function(){return Math.round(Date.now()/1e3)},i.Ads="",i.AdsPos="",i.reportPrefix="",i.reportDevice2Sence="",i._inited=!1,i.startTime=0,i);function i(){}l.ALReport=t,__reflect(t.prototype,"aladin.ALReport"),l.REPORT_TYPE_SHOW="1_1",l.REPORT_TYPE_LOGIN="1_2",l.REPORT_TYPE_OPEN_ID="1_3",l.REPORT_TYPE_AUTH="1_4",l.REPORT_TYPE_LIKE_CLICK="1_6",l.REPORT_TYPE_LIKE_SHOW="1_8",l.REPORT_TYPE_DRAWER_CLICK="1_7",l.REPORT_TYPE_DRAWER_SHOW="1_9",l.REPORT_TYPE_CLICK_SUCCESS="3_1",l.REPORT_TYPE_SHARE_READY="1_10",l.REPORT_TYPE_SHARE_SUCCESS="1_5",l.REPORT_TYPE_GAME_DURATION="1_12",l.REPORT_TYPE_SCENE_CLICK="1_13",l.REPORT_TYPE_SCENE_CLICK_SUCCESS="1_14",l.REPORT_TYPE_PAY_MENT="6_0",l.REPORT_TYPE_PAY_MENT_START="6_2",l.REPORT_TYPE_PAY_MENT_ENTER="6_3",l.REPORT_TYPE_MORE_SHOW="2_0",l.REPORT_TYPE_MORE_CLICK="2_1",l.REPORT_TYPE_MORE_CLICK_O="2_2",l.REPORT_TYPE_MORE_LONG_CLICK_O="2_3",l.REPORT_TYPE_VIDEO_OPEN="2_4",l.REPORT_TYPE_VIDEO_WATCH_FAIL="2_5",l.REPORT_TYPE_VIDEO_WATCH_NORMAL="2_6",l.REPORT_TYPE_GAME_BOX_SHOW="8_1",l.REPORT_TYPE_GAME_BOX_CLICK="8_2",l.REPORT_TYPE_GAME_BOX_BANNER_CLICK="8_3",l.REPORT_TYPE_VIDEO_BTN_SHOW="5_6",l.REPORT_TYPE_VIDEO_CLICK="5_7",l.REPORT_TYPE_SHARE_BTN_SHOW="5_8",l.REPORT_TYPE_SHARE_CLICK="5_9",l.REPORT_TYPE_TIME="15_1"}(aladin=aladin||{}),function(u){var t=(h.init2=function(t,e,r,i){this._inited||(this._inited=!0,u.ALConfig.appId=t,u.ALConfig.version=e)},h.toMiniProgram=function(t,e,r,i){var n,o,a=u.ALUtil.parseNavigateParam(t),s=t[14]||t[4],l={appid:a.target_appid,type:"click",sub_type:e,diff_key:s,extra:r,scene:i},c={appid:a.target_appid,type:"jump",sub_type:u.REPORT_TYPE_SCENE_CLICK_SUCCESS,extra:r,scene:i};u.ALUtil.LOG("[aladinsdk] 跳转参数如下：",t),u.ALUtil.LOG("[aladinsdk] data.appId:>>",a.appId),u.ALUtil.LOG("[aladinsdk] data.path:>>",a.path),u.ALUtil.LOG("[aladinsdk] data.extraData:>>",a.extraData),u.ALUtil.LOG("[aladinsdk] Data.conf.envVersion:>>",u.ALConfig.envVersion),u.ALUtil.wxqqNotExist()||(n=t[6]||null,o=u.ALUtil.qqExist()?qq:wx,u.ALReport.reportDataToMarket(l),n||!o.navigateToMiniProgram?h._preview(n,c):o.navigateToMiniProgram({appId:a.appId,path:a.path,extraData:a.extraData,envVersion:u.ALConfig.envVersion,success:function(t){u.ALReport.reportDataToMarket(c)},fail:function(t){u.ALUtil.LOG("ALSDK navigateToMiniProgram fail ",t),t&&t.errMsg&&-1===t.errMsg.indexOf("cancel")&&n&&h._preview(n,c)}}))},h._preview=function(t,e){(u.ALUtil.qqExist()?qq:wx).previewImage({urls:[t],success:function(){u.ALUtil.LOG("ALSDK _preview success "),u.ALReport.reportDataToMarket(e)},fail:function(t){console.warn("ALSDK _preview error ",t)}})},h.requestModuleData=function(i,n){u.ALUtil.readAppIDList().then(function(t){var e={id:u.ALConfig.appId,module:i,appidList:t,openid:u.ALConfig.openId,nickName:u.UserInfoData.NickName,avatarUrl:u.UserInfoData.AvatarUrl,country:u.UserInfoData.Country,gender:u.UserInfoData.Gender,language:u.UserInfoData.Language,province:u.UserInfoData.Province},r="Icon"===i?u.ALData.iconData:u.ALData.moreData;return r?void n(r):void u.HttpUtil.GET(u.ALConfig.ReportMarketDomain+"/box/sdk/module",e,function(t){var e;t.isSucc?(e=h.handleHttpData(t),"Icon"===i?u.ALData.iconData=e:"more"===i&&(u.ALData.moreData=e),n(e)):console.warn("ALSDK requestModuleData fail !!!",t.reason,i)})})},h.handleHttpData=function(t){var e=t.data.values||[],r=t.data.base;if(r&&0<e.length)for(var i=0,n=e.length;i<n;i++){var o=e[i];o[4]=r+o[4]}return e},h._inited=!1,h);function h(){}u.ALSDK=t,__reflect(t.prototype,"aladin.ALSDK"),u.SDK_MODULE_LIKE="Icon",u.SDK_MODULE_ICONS_CLICK="ICONS_CLICK",u.SDK_MODULE_BANNER_CLICK="BANNER_CLICK"}(aladin=aladin||{}),function(r){var t=(o.LOG=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.DEBUG&&console.log("[AladinSDK]",t,e)},o.wxNotExist=function(){return"undefined"==typeof wx},o.wxExist=function(){return"undefined"!=typeof wx},o.qqNotExist=function(){return"undefined"==typeof qq},o.qqExist=function(){return"undefined"!=typeof qq},o.wxqqExist=function(){return"undefined"!=typeof wx||"undefined"!=typeof qq},o.wxqqNotExist=function(){return"undefined"==typeof wx&&"undefined"==typeof qq},o.readAppIDList=function(){return new Promise(function(n,t){var e=o.qqExist()?qq:wx,r="devtools"===e.getSystemInfoSync().platform?"game.json":"app-config.json";e.getFileSystemManager().readFile({filePath:r,encoding:"utf-8",success:function(t){var e=t.data,r=JSON.parse(e).navigateToMiniProgramAppIdList,i="";r&&(i=r.join(",")),o.LOG("ALSDK readAppIDList appIdListStr ",i),n(i)},fail:function(t){o.LOG("ALSDK readAppIDList error ",t),n("")}})})},o.getUrlFileName=function(t){return t.split("/").pop().split("?")[0].split("#")[0]},o.getUrlReportName=function(t){var e=t.split(r.ALConfig.ImgDomain);return 1<e.length?e[1].toString():e[0].toString()},o._buildQueryString=function(t){var e=new Array;for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return e.join("&")},o._mergeParams=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},o._parseQueryString=function(t){var e={};if(!t)return e;for(var r,i=t.split("&"),n=0,o=i.length;n<o;n++)e[(r=i[n].split("="))[0]]=r[1];return e},o.parseNavigateParam=function(t){var e,r,i=t[0],n=t[1],o=t[2]||"pages/index/index",a=this._parseQueryString(t[3]);return-1<o.indexOf("?")&&(e=o.split("?"),r=this._parseQueryString(e[1]),this._mergeParams(a,r)),a.tgt=t[1],{appId:i,path:o+="?"+this._buildQueryString(a),extraData:a,target_appid:n}},o.DEBUG=!0,o);function o(){}r.ALUtil=t,__reflect(t.prototype,"aladin.ALUtil")}(aladin=aladin||{}),function(l){l.METHOD_GET="GET",l.METHOD_POST="POST";var t=(e.GET=function(t,e,r,i){this._request(t,l.METHOD_GET,e,r,i)},e.POST=function(t,e,r,i){this._request(t,l.METHOD_POST,e,r,i)},e._request=function(t,e,r,i,n){var o,a,s;l.ALUtil.LOG("请求参数[param]",r),"undefined"!=typeof wx||"undefined"!=typeof qq?("GET"==e&&r&&(t+=encodeURI("?"+this.objParam2PostString(r))),l.ALUtil.LOG("HttpUtil url ----- ",t),o={url:t,method:e,success:function(t){l.ALUtil.LOG("HttpUtil responseText---",t);try{var e=t.data;return e&&0!==e.code&&0!==e.ret?(l.ALUtil.LOG("HttpUtil json---"),void i({isSucc:!1,reason:e.msg})):void i({isSucc:!0,data:e?e.data:null})}catch(t){return l.ALUtil.LOG("HttpUtil parse---",t),void i({isSucc:!1,reason:"json_parse_error"})}},fail:function(t){l.ALUtil.LOG("HttpUtil fail---",t),i({isSucc:!1,reason:"network_error"})}},this.Authorization?o.header={"content-type":"application/x-www-form-urlencoded",Authorization:this.Authorization}:o.header={"content-type":"application/x-www-form-urlencoded"},r&&(o.data=r),(l.ALUtil.wxExist()?wx:qq).request(o)):(a=new XMLHttpRequest,s=null,"GET"==e?r&&(t+=encodeURI("?"+this.objParam2PostString(r))):s=null==r?null:encodeURI(this.objParam2PostString(r)),a.open(e,t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.Authorization&&a.setRequestHeader("Authorization",this.Authorization),a.onreadystatechange=function(){if(4===a.readyState&&199<a.status&&a.status<400){l.ALUtil.LOG("HttpUtil responseText---",a.responseText);try{var t=a.responseText?JSON.parse(a.responseText):null;return t&&0!==t.code&&0!==t.ret?(l.ALUtil.LOG("HttpUtil json---"),void i({isSucc:!1,reason:t.msg})):void i({isSucc:!0,data:t?t.data:null})}catch(t){return l.ALUtil.LOG("HttpUtil parse---",t),void i({isSucc:!1,reason:"json_parse_error"})}}},a.onerror=function(t){l.ALUtil.LOG("HttpUtil onerror---",t),i({isSucc:!1,reason:"network_error"})},a.ontimeout=function(t){l.ALUtil.LOG("HttpUtil ontimeout---",t),i({isSucc:!1,reason:"timeout_error"})},a.send(s))},e.objParam2PostString=function(t){var e="";for(var r in t)e+=r+"="+t[r],e+="&";return""!=e&&(e=e.slice(0,e.length-1)),e},e.Authorization=null,e);function e(){}l.HttpUtil=t,__reflect(t.prototype,"aladin.HttpUtil")}(aladin=aladin||{}),function(t){var e=(r.base64encode=function(t){for(var e,r,i,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=t.length,a=0,s="";a<o;){if(e=255&t.charCodeAt(a++),a==o){s+=n.charAt(e>>2),s+=n.charAt((3&e)<<4),s+="==";break}if(r=t.charCodeAt(a++),a==o){s+=n.charAt(e>>2),s+=n.charAt((3&e)<<4|(240&r)>>4),s+=n.charAt((15&r)<<2),s+="=";break}i=t.charCodeAt(a++),s+=n.charAt(e>>2),s+=n.charAt((3&e)<<4|(240&r)>>4),s+=n.charAt((15&r)<<2|(192&i)>>6),s+=n.charAt(63&i)}return s},r);function r(){}t.StringUtil=e,__reflect(e.prototype,"aladin.StringUtil")}(aladin=aladin||{}),function(t){var e=(r.BODY=0,r.WEAPON=1,r.WING=2,r.HORSE=4,r.HORSE_UP=5,r.SHIELD=6,r.DEFAULT=7,r);function r(){}t.ActorPart=e,__reflect(e.prototype,"qmr.ActorPart")}(qmr=qmr||{}),function(c){var t=(u.parseMsg=function(t){var e=t.readInt()-u.ADD_L,r=t.readInt(),i=c.ByteArrayPool.getInstance().createByte();t.readBytes(i,0,e);var n=this.decryptForDis(i);c.ByteArrayPool.getInstance().recycleByte(i),c.Rpc.getInstance().onDataIn(r,n),c.ByteArrayPool.getInstance().recycleByte(n)},u.getSendMsg=function(t,e,r){void 0===r&&(r=!1);var i,n=c.MessageIDLogin.getMsgNameById(e);c.MessageID&&c.MessageID.getMsgNameById&&(i=c.MessageID.getMsgNameById(e))&&(n=i);var o=com.message[n].encode(t).finish(),a=o.byteLength;if(null==n||null==e)return c.LogUtil.log("[send:error:"+t+"]"),s;r&&c.PlatformConfig.isDebug&&c.LogUtil.log("[C_S:"+e+" "+n+"] msgLength:"+a);var s,l=this.encryptForDis(o,a);return(s=c.ByteArrayPool.getInstance().createByte()).writeInt(a+u.ADD_L),s.writeInt(e),s.writeBytes(l),c.ByteArrayPool.getInstance().recycleByte(l),s},u.encryptForDis=function(t,e){var r=c.ByteArrayPool.getInstance().createByte();r._writeUint8Array(t);for(var i,n=r.bytes,o=0;o<e&&!(e-1<o+3);o+=5)i=~n[o+2],n[o+2]=n[o+3],n[o+3]=i;return r},u.decryptForDis=function(t){var e=c.ByteArrayPool.getInstance().createByte();e.writeBytes(t);for(var r,i=e.bytes,n=i.byteLength,o=0;o<n&&!(n-1<o+3);o+=5)r=i[o+2],i[o+2]=~i[o+3],i[o+3]=r;return e},u.KEY="",u.ADD_L=4,u);function u(){}c.BufferGid=t,__reflect(t.prototype,"qmr.BufferGid")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return null==r._instance&&(r._instance=new r),r._instance},r.prototype.createByte=function(){if(0<this.byteList.length)return this.byteList.shift();var t=new egret.ByteArray;return t.endian=egret.Endian.BIG_ENDIAN,t},r.prototype.recycleByte=function(t){t.clear(),this.byteList.push(t)},r);function r(){this.byteList=[];for(var t=0;t<20;t++){var e=new egret.ByteArray;e.endian=egret.Endian.BIG_ENDIAN,this.byteList.push(e)}}t.ByteArrayPool=e,__reflect(e.prototype,"qmr.ByteArrayPool")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.prototype.getCountter=function(){return this._counter+=1,this._counter},r.prototype.resetCounter=function(){this._counter=-1},r.maxReconnectCount=3,r);function r(){this._counter=-1}t.PbGlobalCounter=e,__reflect(e.prototype,"qmr.PbGlobalCounter")}(qmr=qmr||{}),function(){function t(){}(qmr||(qmr={})).RequestHandler=t,__reflect(t.prototype,"qmr.RequestHandler")}(),function(c){var t=(e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.addSocketListener=function(t,e,r,i){var n;void 0===i&&(i=!1),null==this.eventPool[t]?((n=new c.RequestHandler).callBack=e,n.thisObject=r,n.isRpc=!1,n.isLog=i,this.eventPool[t]=n):c.LogUtil.error("[error = addSocketListener 添加重复的消息 msgId="+t+"]")},e.prototype.removeSocketListener=function(t,e,r){this.eventPool[t]&&delete this.eventPool[t]},e.prototype.connect=function(t,e,r,i){this.close(),this.loginSocket=new c.WebSocket,this.loginSocket.connect(t,e,function(){r.call(i)},this.onConnectClose,this.onConnectClose,this)},e.prototype.sendCmd=function(t,e,r){void 0===r&&(r=!1),this.loginSocket&&this.loginSocket.sendCmd(t,e,r)},e.prototype.rpcCMD=function(t,e,r,i,n,o,a,s){var l;void 0===o&&(o=null),void 0===a&&(a=10),void 0===s&&(s=!1),null==this.callbackPool[t]?((l=new c.RequestHandler).callBack=i,l.thisObject=n,l.timeOutCallBack=o,l.timeOut=a,l.isRpc=!0,l.isLog=s,l.sendTime=Date.now(),this.callbackPool[t]=l,this.sendCmd(e,r,s),c.Ticker.getInstance().unRegisterTick(this.checkTimeOut,this),c.Ticker.getInstance().registerTick(this.checkTimeOut,this,1e3)):c.LogUtil.warn("[error = rpcCMD 添加重复的消息 eventMsgId="+t+"]")},e.prototype.onDataIn=function(t,e){var r=c.ProtoMsgIdMapLogin.instance.msgIdMap;c.ProtoMsgIdMap&&c.ProtoMsgIdMap.instance&&c.ProtoMsgIdMap.instance.msgIdMap&&(r=c.ProtoMsgIdMap.instance.msgIdMap);var i,n,o,a,s,l=r[t];null!=l?(i=e.buffer,n=new Uint8Array(i),o=l.decode(n),(a=this.eventPool[t])?(a.isLog&&c.LogUtil.log("[S_C:"+t+" "+l.name+"]"),a.clientData?a.callBack.call(a.thisObject,o,a.clientData):a.callBack.call(a.thisObject,o),a=null):c.LogUtil.error("[未监听协议 [msgId="+t+"]"),(s=this.callbackPool[t])&&s.callBack&&(delete this.callbackPool[t],s.clientData?s.callBack.call(s.thisObject,o,s.clientData):s.callBack.call(s.thisObject,o),s=null)):c.LogUtil.error("[尚未注册 ProtoMsgIdMap.instance.msgIdMap["+t+"] = null]")},Object.defineProperty(e.prototype,"isconnect",{get:function(){return!this.loginSocket||this.loginSocket.isconnected},enumerable:!0,configurable:!0}),e.prototype.onConnectClose=function(){c.PbGlobalCounter.getInstance().resetCounter(),c.SystemController.instance.clearHeart(),c.LoginModel.instance.isInstead?this.showDisConnectView("您的账号在另一台设备登录，请重新登录"):c.LoginModel.instance.isDisconnect?this.showDisConnectView("小伙子，不要开车，你掉线了"):0<c.PbGlobalCounter.maxReconnectCount?(c.PbGlobalCounter.maxReconnectCount--,e.getInstance().close(),c.LoginModel.instance.isEnterGame?(c.GameLoading.getInstance().setLoadingTip("重连中..."),egret.setTimeout(function(){e.getInstance().startReConnect()},this,2e3)):egret.setTimeout(function(){e.getInstance().startReLogin()},this,2e3)):c.LoginModel.instance.isEnterGame?this.showDisConnectView("重连服务器失败，请检查手机网络环境!"):(c.PbGlobalCounter.maxReconnectCount=3,e.getInstance().close(),c.GameLoading.getInstance().close(),c.TipManagerCommon.getInstance().createCommonColorTip("连接服务器失败，请重试！",!1))},e.prototype.showDisConnectView=function(t){c.GameLoading.getInstance().close(),c.ModuleManager.showModule(c.ModuleNameLogin.DISCONNECT_VIEW,{msg:t,code:-1},c.LayerConst.TIP,!0,!1)},e.prototype.startReConnect=function(){this.connect(c.GlobalConfig.loginServer,c.GlobalConfig.loginPort,this.onGameServerConnect,this)},e.prototype.onGameServerConnect=function(){c.GameLoading.getInstance().setLoadingTip("重连中..."),c.LoginController.instance.reqReconnect()},e.prototype.startReLogin=function(){this.connect(c.GlobalConfig.loginServer,c.GlobalConfig.loginPort,this.onGameLoginServerConnect,this)},e.prototype.onGameLoginServerConnect=function(){c.GameLoading.getInstance().setLoadingTip("登录中..."),c.LoginController.instance.reqRelogin()},e.prototype.onConnnectError=function(){c.PbGlobalCounter.getInstance().resetCounter(),c.LogUtil.log("ioerror")},e.prototype.close=function(){this.loginSocket&&(this.loginSocket.dispos(),this.loginSocket=null)},e.prototype.fnErrorTrap=function(){},e.prototype.checkTimeOut=function(){var t=this.callbackPool;for(var e in t){var r=t[e];r&&r.isRpc&&Date.now()-r.sendTime>1e3*r.timeOut&&delete t[e]}},e);function e(){this.eventPool={},this.callbackPool={}}c.Rpc=t,__reflect(t.prototype,"qmr.Rpc")}(qmr=qmr||{}),function(c){var t=(e.prototype.connect=function(t,e,r,i,n,o){this.connectCallBack=r,this.connectCloseBack=i,this.connectErrorBack=n,this.thisObject=o;var a=c.PlatformManager.instance,s=a.platform.webSocketProtoco,l="";a.isOutNetPlatForm?(l=s+"://"+t+"/s"+c.GlobalConfig.sid,c.PlatformConfig.isWSS&&(l="wss://"+t+"/s"+c.GlobalConfig.sid)):l="ws://"+t+":"+e+this.WEB_KEY,this.websocket.connectByUrl(l),this.clearConTimeout(),this.tid=egret.setTimeout(this.onTimeOut,this,1e4),c.LogUtil.log("链接的服务器和端口:"+l)},e.prototype.onTimeOut=function(){this.clearConTimeout(),this.connectCloseBack&&this.connectCloseBack.call(this.thisObject),c.LogUtil.log("10秒链接不上超时")},e.prototype.onSocketConnected=function(t){this._isConnect=!0,this.clearConTimeout(),this.connectCallBack&&this.connectCallBack.call(this.thisObject),c.LogUtil.log("连接服务器成功！")},e.prototype.onSocketClose=function(t){this._isConnect=!1,this.clearConTimeout(),this.connectCloseBack&&this.connectCloseBack.call(this.thisObject),c.LogUtil.log("服务器连接关闭")},e.prototype.onDataIn=function(t){if(this.websocket){var e=c.ByteArrayPool.getInstance().createByte();for(this.websocket.readBytes(e);e.bytesAvailable;)c.BufferGid.parseMsg(e);c.ByteArrayPool.getInstance().recycleByte(e)}},e.prototype.onIoError=function(t){this._isConnect=!1,this.clearConTimeout(),this.connectErrorBack&&this.connectErrorBack.call(this.thisObject),c.LogUtil.log("服务器连接错误")},e.prototype.sendCmd=function(t,e,r){var i;void 0===r&&(r=!1),this.isconnected&&((i=c.BufferGid.getSendMsg(t,e,r))&&(this.websocket.writeBytes(i),this.websocket.flush(),c.ByteArrayPool.getInstance().recycleByte(i)),t=null)},Object.defineProperty(e.prototype,"isconnected",{get:function(){return this._isConnect&&this.websocket&&this.websocket.connected},enumerable:!0,configurable:!0}),e.prototype.clearConTimeout=function(){this.tid&&(egret.clearTimeout(this.tid),this.tid=0)},e.prototype.dispos=function(){var t=this;t.clearConTimeout(),null!=t.websocket&&(t.websocket.removeEventListener(egret.Event.CONNECT,t.onSocketConnected,t),t.websocket.removeEventListener(egret.Event.CLOSE,t.onSocketClose,t),t.websocket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,t.onDataIn,t),t.websocket.removeEventListener(egret.IOErrorEvent.IO_ERROR,t.onIoError,t),t.isconnected&&(t._isConnect=!1,t.websocket.close()),t.websocket=null),t.connectCallBack=null,t.connectCloseBack=null,t.connectErrorBack=null,t.thisObject=null},e);function e(){this.WEB_KEY="/ws",this.websocket=new egret.WebSocket,this.websocket.type=egret.WebSocket.TYPE_BINARY,this.websocket.addEventListener(egret.Event.CONNECT,this.onSocketConnected,this),this.websocket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.websocket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onDataIn,this),this.websocket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIoError,this)}c.WebSocket=t,__reflect(t.prototype,"qmr.WebSocket")}(qmr=qmr||{}),function(t){var e=(r.prototype.play=function(t,e){void 0===e&&(e=0),null!=this.sound&&(this.isPlay=!0,this.soundChannel=this.sound.play(t,e),this.soundChannel.once(egret.Event.SOUND_COMPLETE,this.onPlayerEnd,this),this.sound.type==egret.Sound.MUSIC&&(this.soundChannel.volume=.7))},r.prototype.onPlayerEnd=function(){this.isPlay=!1},r.prototype.stop=function(){null!=this.sound&&(this.isPlay=!1,null!=this.soundChannel&&this.soundChannel.stop())},Object.defineProperty(r.prototype,"position",{get:function(){return this.soundChannel?this.soundChannel.position:0},enumerable:!0,configurable:!0}),r);function r(t,e){void 0===t&&(t=null),void 0===e&&(e=egret.Sound.EFFECT),this.sound=t,this.isPlay=!1,this.type=e,null!=t&&(this.sound.type=e)}t.SoundItem=e,__reflect(e.prototype,"qmr.SoundItem")}(qmr=qmr||{}),function(c){var t=(n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},Object.defineProperty(n.prototype,"soundPool",{get:function(){return this._soundPool},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEffectSoundOpen",{get:function(){return this._isEffectSoundOpen},set:function(t){if(!(this._isEffectSoundOpen=t))for(var e in this._soundPool){var r=this._soundPool[e];null!=r&&null!=r.sound&&r.sound.type==egret.Sound.EFFECT&&r.stop()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isMusicSoundOpen",{get:function(){return this._isMusicSoundOpen},set:function(t){(this._isMusicSoundOpen=t)?(null!=this._bgSoundItem&&this._bgSoundItem.stop(),""!=this._musicName&&(this._bgSoundItem=this._soundPool[this._musicName],this._bgSoundItem?(this._lastMusicName=this._musicName,this._lastMusicPosition=0,this._bgSoundItem.play(0)):this.loadBgMusic(this._musicName))):null!=this._bgSoundItem&&(this._lastMusicPosition=this._bgSoundItem.position,this._bgSoundItem.stop())},enumerable:!0,configurable:!0}),n.prototype.loadAndPlayEffect=function(t,r,i){if(void 0===r&&(r=1),void 0===i&&(i=!1),this._isMusicLifecycleOpen&&this._isEffectSoundOpen){var n=this._soundPool,e=this.getSoundCfg(t);if(!e)return void c.LogUtil.log("音效不存在。。。"+t);var o=e.soundName;if(null==o||""==o)return;var a,s=n[o],l=0<e.isPlaySameTime;null==s?(a=RES.getRes(o+"_mp3"))?(n[o]||(s=new c.SoundItem(a),n[o]=s),(l&&!i||!s.isPlay&&s.position<=0)&&s.play(0,r)):c.ResManager.getRes(c.SystemPath.getEffect_musicUrl(o),function(t){var e;n[o]||(e=new c.SoundItem(t),n[o]=e,(l&&!i||!e.isPlay&&e.position<=0)&&e.play(0,r))},this,c.LoadPriority.HIGH,RES.ResourceItem.TYPE_SOUND):(l&&!i||!s.isPlay&&s.position<=0)&&s.play(0,r)}},n.prototype.stopSoundEffect=function(t){var e,r=this.getMusicName(t);null==r||""==r||!this._isEffectSoundOpen||null!=(e=this._soundPool[r])&&e.stop()},n.prototype.loadAndPlayMusic=function(t){null!=(this._musicName=t)&&""!=t&&this._isMusicLifecycleOpen&&this._isMusicSoundOpen&&(null!=this._bgSoundItem?this._lastMusicName==t?this._bgSoundItem.position<=0&&(this._bgSoundItem.stop(),this._bgSoundItem.play(0)):(this._bgSoundItem&&this._bgSoundItem.stop(),this._bgSoundItem=this._soundPool[t],this._bgSoundItem?(this._lastMusicName=t,this._lastMusicPosition=0,n.getInstance().isMusicSoundOpen&&this._bgSoundItem.play(0)):this.loadBgMusic(t)):this.loadBgMusic(t))},n.prototype.getMusicName=function(t){var e=this.getSoundCfg(t);return e?e.soundName:(c.LogUtil.log("音效不存在。。。"+t),"")},n.prototype.getMusicIsPlaySameTime=function(t){var e=this.getSoundCfg(t);return e?e.isPlaySameTime:(c.LogUtil.log("音效不存在。。。"+t),0)},n.prototype.getSoundCfg=function(t){if(this._soundCfgDic.has(t))return this._soundCfgDic.get(t);var e=c.ConfigManagerBase.getConf(c.ConfigEnumBase.MUSIC,t);return e&&this._soundCfgDic.set(t,e),e},n.prototype.loadBgMusic=function(r){var i,t=this.getMusicName(r);null!=t&&""!=t&&(this._lastMusicName=t,i=this,c.ResManager.getRes(c.SystemPath.bg_music+t+".mp3",function(t){var e=new c.SoundItem(t,egret.Sound.MUSIC);i._soundPool[r]=e,i._bgSoundItem&&i._bgSoundItem.stop(),i._bgSoundItem=e,i._lastMusicPosition=0,n.getInstance().isMusicSoundOpen&&i._bgSoundItem.play(0)},this,c.LoadPriority.LOW,RES.ResourceItem.TYPE_SOUND))},n.prototype.stopMusic=function(){var t=this._bgSoundItem;null!=t&&t.isPlay&&t.stop(),this._isMusicLifecycleOpen=!1},n.prototype.reStartMusic=function(){this._isMusicLifecycleOpen||(this._isMusicLifecycleOpen=!0,this.loadAndPlayMusic(this._lastMusicName))},n);function n(){this._isEffectSoundOpen=!0,this._isMusicSoundOpen=!0,this._isMusicLifecycleOpen=!0,this._soundCfgDic=new c.Dictionary,this._lastMusicPosition=0,this._lastMusicName="",this._musicName="",this._soundPool={},this._isMusicSoundOpen=!c.SettingUtil.getInstance().getForbidState(c.MusicType.BG_MUSIC),this._isEffectSoundOpen=!c.SettingUtil.getInstance().getForbidState(c.MusicType.EFFECT_MUSIC)}c.SoundManager=t,__reflect(t.prototype,"qmr.SoundManager")}(qmr=qmr||{}),function(t){var e=(Object.defineProperty(r,"instance",{get:function(){return null==this._instance&&(this._instance=new r),this._instance},enumerable:!0,configurable:!0}),r.prototype.start=function(){if(!this._running){for(var t=0,e=this.eventList;t<e.length;t++){var r=e[t];r&&(r.lastCount=r.updateInterval,r.lastTimeStamp=egret.getTimer())}egret.startTick(this.update,this),this._running=!0}},r.prototype.update=function(t){for(var e=0,r=this.eventList;e<r.length;e++){var i=r[e];if(i){var n=t-i.lastTimeStamp;if((n*=this.scale)>=i.delay){var o,a=Math.floor(n/i.delay);for(4<a&&(a=4);0<a;)a--,0==i.repeatCount?i.callBack&&(i.params?i.callBack.call(i.thisObject,i.params):i.callBack.call(i.thisObject)):(i.currentCount++,0<i.repeatCount&&i.currentCount>=i.repeatCount&&(i.callBack&&(i.params?i.callBack.call(i.thisObject,i.params):i.callBack.call(i.thisObject)),-1!=(o=this.eventList.indexOf(i))&&this.eventList.splice(o,1)));i.lastTimeStamp=t,i.lastCount=i.updateInterval}else{if(i.lastCount-=1e3*this.scale,0<i.lastCount)continue;i.lastCount+=i.updateInterval,i.lastTimeStamp=t,i.currentCount++,0==i.repeatCount?i.callBack&&(i.params?i.callBack.call(i.thisObject,i.params):i.callBack.call(i.thisObject)):0<i.repeatCount&&i.currentCount>=i.repeatCount&&(i.callBack&&(i.params?i.callBack.call(i.thisObject,i.params):i.callBack.call(i.thisObject)),-1!=(o=this.eventList.indexOf(i))&&this.eventList.splice(o,1))}}}return!1},r.prototype.stop=function(){this._running&&(egret.stopTick(this.update,this),this._running=!1)},Object.defineProperty(r.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),r.prototype.registerTick=function(t,e,r,i,n){void 0===r&&(r=1e3),void 0===i&&(i=0),void 0===n&&(n=null);for(var o,a=!0,s=0,l=this.eventList;s<l.length;s++){var c=l[s];if(c.callBack==t&&c.thisObject==e){c.update(r,i),c.params=n,a=!1;break}}a&&((o=new u(r,i)).callBack=t,o.params=n,o.thisObject=e,this.eventList.push(o))},r.prototype.unRegisterTick=function(t,e){for(var r=0,i=this.eventList;r<i.length;r++){var n=i[r];if(n.callBack==t&&n.thisObject==e){var o=this.eventList.indexOf(n);-1!=o&&this.eventList.splice(o,1);break}}},r.prototype.clearAllTick=function(){this.eventList.length=0},r.prototype.test=function(){console.warn("FightTicker:eventList.length...............................",this.eventList.length),console.warn(this.eventList)},r);function r(){this.scale=1,this.eventList=[],this._running=!1,this.start()}t.FightTimer=e,__reflect(e.prototype,"qmr.FightTimer");var u=(i.prototype.update=function(t,e){void 0===e&&(e=0),this.currentCount=0,t<1&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t),this.lastTimeStamp=egret.getTimer(),this._repeatCount=0|+e)},Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"repeatCount",{get:function(){return this._repeatCount},enumerable:!0,configurable:!0}),i);function i(t,e){void 0===e&&(e=0),this.lastTimeStamp=0,this.currentCount=0,this.update(t,e)}__reflect(u.prototype,"TickParams")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return null==this.instance&&(this.instance=new r),this.instance},r.prototype.start=function(){if(!this._running){for(var t=0,e=this.eventList;t<e.length;t++){var r=e[t];r&&(r.lastCount=r.updateInterval,r.lastTimeStamp=egret.getTimer())}egret.startTick(this.update,this),this._running=!0}},r.prototype.update=function(t){for(var e=0,r=this.eventList;e<r.length;e++){var i=r[e];if(i){var n=t-i.lastTimeStamp;if(n>=i.delay){var o,a=Math.floor(n/i.delay);for(4<a&&(a=4);0<a;)a--,0==i.repeatCount?i.callBack&&i.callBack.call(i.thisObject):(i.currentCount++,0<i.repeatCount&&i.currentCount>=i.repeatCount&&(i.callBack&&i.callBack.call(i.thisObject),-1!=(o=this.eventList.indexOf(i))&&this.eventList.splice(o,1)));i.lastTimeStamp=t,i.lastCount=i.updateInterval}else{if(i.lastCount-=1e3,0<i.lastCount)continue;i.lastCount+=i.updateInterval,i.lastTimeStamp=t,i.currentCount++,0==i.repeatCount?i.callBack&&i.callBack.call(i.thisObject):0<i.repeatCount&&i.currentCount>=i.repeatCount&&(i.callBack&&i.callBack.call(i.thisObject),-1!=(o=this.eventList.indexOf(i))&&this.eventList.splice(o,1))}}}return!1},r.prototype.stop=function(){this._running&&(egret.stopTick(this.update,this),this._running=!1)},Object.defineProperty(r.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),r.prototype.registerTick=function(t,e,r,i){void 0===r&&(r=1e3),void 0===i&&(i=0);for(var n,o=!0,a=this.eventList,s=0,l=a;s<l.length;s++){var c=l[s];if(c.callBack==t&&c.thisObject==e){c.update(r,i),o=!1;break}}o&&((n=new u(r,i)).callBack=t,n.thisObject=e,a.push(n))},r.prototype.unRegisterTick=function(t,e){for(var r=this.eventList,i=0,n=r;i<n.length;i++){var o=n[i];if(o.callBack==t&&o.thisObject==e){var a=r.indexOf(o);-1!=a&&r.splice(a,1);break}}},r.prototype.test=function(){console.warn("Ticker info......................................................",this.eventList.length),console.warn(this.eventList)},r);function r(){this.eventList=[],this._running=!1,this.start()}t.Ticker=e,__reflect(e.prototype,"qmr.Ticker");var u=(i.prototype.update=function(t,e){void 0===e&&(e=0),this.currentCount=0,t<1&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t),this.lastTimeStamp=egret.getTimer(),this._repeatCount=0|+e)},Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"repeatCount",{get:function(){return this._repeatCount},enumerable:!0,configurable:!0}),i);function i(t,e){void 0===e&&(e=0),this.lastTimeStamp=0,this.currentCount=0,this.update(t,e)}__reflect(u.prototype,"TickParams")}(qmr=qmr||{}),function(t){var e=(r.checkAvalibe=function(t,e){return 1==(t>>e-1&1)},r.changeBit=function(t,e,r){var i=Math.pow(2,e-1);return t&i?r||(t-=i):r&&(t+=i),t},r.inToBytes=function(t){var e=[];return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e},r);function r(){}t.BitUtil=e,__reflect(e.prototype,"qmr.BitUtil")}(qmr=qmr||{}),function(t){var e=(r.loadScript=function(t,e,r){var i=window.document.createElement("script");i.type="text/javascript",i.src=e?decodeURIComponent(t):t,window.document.head.appendChild(i),i.onload=function(){i.onload=null,r()}},r);function r(){}t.ChannelUtil=e,__reflect(e.prototype,"qmr.ChannelUtil")}(qmr=qmr||{}),function(e){var t=(r.getColorByQuality=function(t){switch(t){case 1:return e.ColorQualityConst.COLOR_G;case 2:return e.ColorQualityConst.COLOR_GREEN;case 3:return e.ColorQualityConst.COLOR_BLUE;case 4:return e.ColorQualityConst.COLOR_VIOLET;case 5:return e.ColorQualityConst.COLOR_CADMIUM;case 6:return e.ColorQualityConst.COLOR_RED;case 7:return e.ColorQualityConst.COLOR_DIAMOND}return e.ColorQualityConst.COLOR_G},r.getColorBySubType=function(t){switch(t){case 2:return e.ColorQualityConst.COLOR_GREEN;case 3:return e.ColorQualityConst.COLOR_BLUE;case 4:return e.ColorQualityConst.COLOR_VIOLET;case 5:return e.ColorQualityConst.COLOR_CADMIUM;case 6:return e.ColorQualityConst.COLOR_RED}return e.ColorQualityConst.COLOR_G},r.getTipColorByType=function(t){switch(t){case 0:return 16711680;case 1:return 632328}return 16777215},r);function r(){}e.ColorUtil=t,__reflect(t.prototype,"qmr.ColorUtil")}(qmr=qmr||{}),function(t){var e=(r.getMsg=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();for(var i in t)var n=t[i],r=r.replace(/\{\d+\}/,n);return r},r);function r(){}t.CommonTool=e,__reflect(e.prototype,"qmr.CommonTool")}(qmr=qmr||{}),function(e){var t=(r.getInstance=function(){return null==r._instance&&(r._instance=new r),r._instance},r);function r(){var t={};t[e.ActorPart.WEAPON]=e.SystemPath.weaponPath,t[e.ActorPart.WING]=e.SystemPath.wingPath,t[e.ActorPart.HORSE]=e.SystemPath.horsePath,t[e.ActorPart.HORSE_UP]=e.SystemPath.horsePath,t[e.ActorPart.DEFAULT]=e.SystemPath.defaultPath,this.partDic=t}e.ActorPartResourceDic=t,__reflect(t.prototype,"qmr.ActorPartResourceDic")}(qmr=qmr||{}),function(s){var t=(e.hasDirtywords=function(t,i,n){var e=(new Date).getTime()/1e3|0,r=encodeURI(t),o=encodeURI(s.Md5Util.getInstance().hex_md5(t+e+s.GlobalConfig.loginKey)),a=s.PlatformManager.instance.platform.dirtyWordCheckUrl+"?time="+e+"&content="+r+"&sign="+o;s.LogUtil.log("url=",a),s.HttpRequest.sendGet(a,function(t){s.LogUtil.log("dirtywords",t);var e,r=!0;!t||(e=JSON.parse(t))&&1==e.ret&&(r=!1),i&&i.call(n,r,t.content)},this)},e);function e(){}s.DirtyWordsUtils=t,__reflect(t.prototype,"qmr.DirtyWordsUtils")}(qmr=qmr||{}),function(t){var e=(r.getDir=function(t){return t<=5?t:6==t?r.RIGHT_DOWN:7==t?r.RIGHT:8==t?r.RIGHT_UP:void 0},r.UP=1,r.RIGHT_UP=2,r.RIGHT=3,r.RIGHT_DOWN=4,r.DOWN=5,r.LEFT_DOWN=6,r.LEFT=7,r.LEFT_UP=8,r);function r(){}t.DirUtil=e,__reflect(e.prototype,"qmr.DirUtil")}(qmr=qmr||{}),function(n){var t=(o.removeAllChild=function(t){if(t)for(;t.numChildren;)t.removeChildAt(0)},o.removeDisplay=function(t,e){void 0===e&&(e=null),t&&(e=e||t.parent)&&e.removeChild(t)},o.addDisplayToTop=function(t,e){void 0===e&&(e=null),t&&(e=e||t.parent)&&e.addChild(t)},o.removeClick=function(t){var e;for(var r in this.eventDic)if((e=this.eventDic[r]).target==t){e.target.removeEventListener(e.type,e.callBack,e.thisObject),e.target.removeEventListener(e.type,e.callFunc,e.thisCall),delete this.eventDic[r];break}},o.removeAllEvent=function(t){var e=t.hashCode;delete this.eventDic[e+egret.TouchEvent.TOUCH_BEGIN],delete this.eventDic[e+egret.TouchEvent.TOUCH_END],delete this.eventDic[e+egret.TouchEvent.TOUCH_CANCEL],delete this.eventDic[e+egret.TouchEvent.TOUCH_RELEASE_OUTSIDE]},o.addClick=function(t,e,r,i){var n,o,a,s;void 0===i&&(i=null),t&&(null==this.eventDic&&(this.eventDic={}),t instanceof eui.Group&&(t.touchChildren=!1),(n={}).target=t,n.type=egret.TouchEvent.TOUCH_BEGIN,n.thisObject=r,n.callFunc=this.onTouchBegin,n.longPressCallBack=i,n.thisCall=this,t&&!this.eventDic[t.hashCode+n.type]&&(t.addEventListener(n.type,this.onTouchBegin,this),this.eventDic[t.hashCode+n.type]=n),(o={}).target=t,o.type=egret.TouchEvent.TOUCH_END,o.callBack=e,o.thisObject=r,o.callFunc=this.onTouchEnd,o.thisCall=this,t&&!this.eventDic[t.hashCode+o.type]&&(t.addEventListener(o.type,this.onTouchEnd,this),this.eventDic[t.hashCode+o.type]=o),(a={}).target=t,a.type=egret.TouchEvent.TOUCH_CANCEL,a.callBack=e,a.thisObject=r,a.callFunc=this.onTouchReleaseCancel,a.thisCall=this,t&&!this.eventDic[t.hashCode+a.type]&&(t.addEventListener(a.type,this.onTouchReleaseCancel,this),this.eventDic[t.hashCode+a.type]=a),(s={}).target=t,s.type=egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,s.thisObject=r,s.callFunc=this.onTouchReleaseOutSide,s.thisCall=this,t&&!this.eventDic[t.hashCode+s.type]&&(t.addEventListener(s.type,this.onTouchReleaseOutSide,this),this.eventDic[t.hashCode+s.type]=s))},o.onTouchBegin=function(t){this.touchBeginTaret&&this.touchBeginTaret==t.target||egret.getTimer()-this.lastTime<300||(this.touchBeginTaret=t.target,this.lastTime=egret.getTimer(),egret.Tween.get(t.target).to({scaleX:1.1,scaleY:1.1},50),n.Ticker.getInstance().registerTick(this.longPress,this,300))},o.onTouchEnd=function(t){var r=this,i=t.target;this.touchBeginTaret==i&&(this.touchBeginTaret=null,egret.Tween.get(i).to({scaleX:1,scaleY:1},50).call(function(){for(var t in r.eventDic){var e=r.eventDic[t];e.target==i&&e.type==egret.TouchEvent.TOUCH_END&&e.callBack.call(e.thisObject)}},this),n.Ticker.getInstance().unRegisterTick(this.longPress,this))},o.onTouchReleaseCancel=function(t){this.touchBeginTaret==t.currentTarget&&(this.touchBeginTaret&&egret.Tween.removeTweens(this.touchBeginTaret),this.touchBeginTaret=null,t.currentTarget.scaleX=1,t.currentTarget.scaleY=1)},o.onTouchReleaseOutSide=function(t){this.touchBeginTaret==t.target&&(this.touchBeginTaret&&egret.Tween.removeTweens(this.touchBeginTaret),this.touchBeginTaret=null,t.target.scaleX=1,t.target.scaleY=1)},o.longPress=function(){for(var t in this.eventDic){var e=this.eventDic[t];e.target==this.touchBeginTaret&&e.longPressCallBack&&e.longPressCallBack.call(e.thisObject)}},o.setGlow=function(t,e){e?t.filters&&0!=t.filters.length||(t.filters=[n.FilterUtil.glowFilter]):t.filters=[]},o.setGrey=function(t,e,r){return void 0===r&&(r=!0),t instanceof eui.Button&&r?void(t.enabled=!e):void(e?(t.filters&&0!=t.filters.length||(t.filters=[n.FilterUtil.grayFilter]),r&&(t.touchEnabled=!1)):(t.filters=[],r&&(t.touchEnabled=!0)))},o.setBtnGray=function(t,e,r,i){void 0===r&&(r=!0),void 0===i&&(i=1),e?r?(t.currentState="disabled",t.touchEnabled=!1):t.skinName=o.getBtnSkin(i,e):(r?t.currentState="up":t.skinName=o.getBtnSkin(i,e),t.touchEnabled=!0)},o.getBtnSkin=function(t,e){var r="ButtonYellowSkin";switch(t){case n.BtnSkinType.Type_1:r=e?"ButtonYellowDisabledSkin":"ButtonYellowSkin";break;case n.BtnSkinType.Type_2:r=e?"ButtonYellowDisabledSkin1":"ButtonYellowSkin1"}return r},o.setGreyGoup=function(t,e){var r=this;t.forEach(function(t){r.setGrey(t,e)})},o.setDisable=function(t,e){this.setGrey(t,e),t.touchEnabled=!e},o.LoadResByNameAndWH=function(t,e,r,i,n,o){return void 0===n&&(n=50),void 0===o&&(o=50),t.width=r,t.height=i,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=e.width/100*n,t.y=e.height/100*o,t},o.updateStar=function(t,e){for(var r=t.numChildren,i=0;i<r;i++)t.getChildAt(i).imgStar.visible=i<e},o.getGlobelPoint=function(t){return t.parent?t.parent.localToGlobal(t.x,t.y):null},o);function o(){}n.DisplayUtils=t,__reflect(t.prototype,"qmr.DisplayUtils")}(qmr=qmr||{}),function(t){var e=(r.grayFilter=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),r.glowFilter=new egret.GlowFilter(16773632,.8,35,35,2,3,!1,!1),r);function r(){}t.FilterUtil=e,__reflect(e.prototype,"qmr.FilterUtil")}(qmr=qmr||{}),function(n){var t=(s.getHtmlString=function(t){if(-1<t.indexOf("\\n")){var e=t.split("\\n").join("\n");return s.htmlParse.parse(e)}return s.htmlParse.parse(t)},s.getHtmlTextElement=function(t,e,r,i,n,o){void 0===r&&(r=!1);var a="<font color="+e;return i&&(a+=" href=event:"+i),r&&(a+=" u='true'"),n&&(a+=" strokecolor="+n),o&&(a+=" stroke="+o),s.getHtmlString(a+=">"+t+"</font>")},s.getHtmlText=function(t,e,r,i){return void 0===r&&(r=!1),i&&r?"<font color="+e+" href=event:"+i+" u='true'>"+t+"</font>":i?"<font color="+e+" href=event:"+i+">"+t+"</font>":r?"<font color="+e+" u='true'>"+t+"</font>":"<font color="+e+">"+t+"</font>"},s.getColorSize=function(t,e,r){return r?"<font color="+e+" size="+r+">"+t+"</font>":"<font color="+e+">"+t+"</font>"},s.getHtmlTexts=function(t){for(var e=[],r=0;r<t.length;r++)e.push(this.getHtmlText(t[r][1],t[r][0],t[r][2],t[r][3]));return e.join("")},s.getItemHtmlText=function(t,e){return""},s.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r="args:";for(var i in t){if(!n.PlatformConfig.isDebug||!t)return;r+=t[i]+"\n"}return r},s.htmlParse=new egret.HtmlTextParser,s);function s(){}n.HtmlUtil=t,__reflect(t.prototype,"qmr.HtmlUtil")}(qmr=qmr||{}),function(o){var t=(e.setItemIcon=function(e,t,r,i){var n;void 0===i&&(i=!1),t&&""!=t&&(e.source=null,1==i&&(t+="_g"),n=r==o.BagType.HERO?o.SystemPath.cardHeadIcon:o.SystemPath.itemIcon,o.ResManager.getRes(n+t+".png",function(t){e&&(e.source=t)},this,o.LoadPriority.HIGH,RES.ResourceItem.TYPE_IMAGE))},e.setBmpIcon=function(e,t){o.ResManager.getRes(t,function(t){e&&(e.texture=t)},this,o.LoadPriority.HIGH,RES.ResourceItem.TYPE_IMAGE)},e.decoratePathForGray=function(t){return t.split(".png")[0]+"_g.png"},e.setImageIcon=function(e,t){""!=t&&null!=t&&null!=e&&e.source!=t&&(e.source=null,o.ResManager.getRes(t,function(t){e&&(e.source=t)},this,o.LoadPriority.HIGH,RES.ResourceItem.TYPE_IMAGE))},e.setFilter=function(t){for(var e=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),r=0;r<t.length;r++)t[r].filters=[e]},e.setTitleIcon=function(e,t,r,i){void 0===r&&(r=null),void 0===i&&(i=null),o.ResManager.getRes(o.SystemPath.titlePath+t+".png",function(t){e&&(e.texture=t,r&&r.call(i))},this,o.LoadPriority.HIGH,RES.ResourceItem.TYPE_IMAGE)},e.setSkillIcon=function(t,e,r){var i;void 0===r&&(r=!1),t&&(i=1==r?"_g.png":".png",t.source=o.SystemPath.skillIcon+e+i)},e);function e(){}o.ImageUtil=t,__reflect(t.prototype,"qmr.ImageUtil")}(qmr=qmr||{}),function(t){function r(t){return null==t?0:"number"==typeof t?t:parseFloat(t.toString())}function i(t){return t%1e4}var e=(n.getNumber=function(t){return null==t||""==t||isNaN(t)?0:"number"==typeof t?t:parseFloat(t.toString())},n.getNumberArr=function(t){var e=new Array;if(t)for(var r,i=0;i<t.length;i++)r=n.getNumber(t[i]),e.push(r);return e},n);function n(){}t.Int64Util=e,__reflect(e.prototype,"qmr.Int64Util"),t.getNumber=r,t.getServerNumber=i,t.getServerNickName=function(t,e){return"S"+i(r(t))+"."+e}}(qmr=qmr||{}),function(t){var e=(n.getQueryString=function(){for(var t=location.search.match(new RegExp("[?&][^?&]+=[^?&]+","g")),e=0;e<t.length;e++)t[e]=t[e].substring(1);return t},n.getQueryStringByName=function(t){var e=location.search.match(new RegExp("[?&]"+t+"=([^&]+)","i"));return null==e||e.length<1?"":e[1]},n.getQueryStringByIndex=function(t){if(null==t)return"";var e=n.getQueryString();if(t>=e.length)return"";var r=e[t],i=r.indexOf("=")+1;return r.substring(i)},n.getValueFromParams=function(t,e){var r=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i");if(e){var i=e.match(r);if(i)return decodeURIComponent(i[2])}return null},n);function n(){}t.JsUtil=e,__reflect(e.prototype,"qmr.JsUtil")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return r.instance||(r.instance=new r),r.instance},r);function r(){}t.LabelTip=e,__reflect(e.prototype,"qmr.LabelTip")}(qmr=qmr||{}),function(l){var t=(r.setLabelText=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=l.ConfigManagerBase.getCNValue(e);r&&0<r.length&&(r.unshift(n),n=l.StringUtils.getmsg.apply(l.StringUtils,r)),t.textFlow=l.HtmlUtil.htmlParse.parser(n)},r.setLabel=function(t,e,r){if(void 0===r&&(r=!1),e){e=l.StringUtils.getSectionMsg(e);var i=l.HtmlUtil.htmlParse.parser(e);if(r)for(var n=i.length,o=0;o<n;o++){var a=i[o];a.style?a.style.textColor=7891039:a.style={textColor:7891039}}t.textFlow=i}else t.text=""},r.setLabelCount=function(t,e,r,i){void 0===i&&(i=!1);var n="<font color='"+(0<r?l.ColorQualityConst.COLOR_GREEN:l.ColorQualityConst.COLOR_RED)+"'>"+r+"</font>";t.textFlow=l.HtmlUtil.htmlParse.parser(i?n+e:e+n)},r.setLabelCount2=function(t,e,r,i){void 0===i&&(i=!1);var n="<font color='"+(0<r?l.ColorQualityConst.COLOR_RED:l.ColorQualityConst.COLOR_GREEN)+"'>"+r+"</font>";t.textFlow=l.HtmlUtil.htmlParse.parser(i?n+e:e+n)},r.addLabelEvent=function(t,e,r,i){void 0===i&&(i="");for(var n=[],o=4;o<arguments.length;o++)n[o-4]=arguments[o];var a,s="";null!=n&&0!=n.length||(a="<u>"+t.text+"</u>",n=[t.hashCode,a]),""==i&&(i="CN_119"),s=l.ConfigManagerBase.getCNValue(i),n&&0<n.length&&(n.unshift(s),s=l.StringUtils.getmsg.apply(l.StringUtils,n)),t.textFlow=l.HtmlUtil.htmlParse.parser(s),t.hasEventListener(egret.TextEvent.LINK)||e&&t.addEventListener(egret.TextEvent.LINK,e,r)},r.removeLabelEvent=function(t,e,r){t&&(t.name="",t.removeEventListener(egret.TextEvent.LINK,e,r))},r.addInputListener=function(t,e){t.addEventListener(egret.FocusEvent.FOCUS_IN,r.focusInTxtHandler,e),t.addEventListener(egret.FocusEvent.FOCUS_OUT,r.focusInTxtHandler,e)},r.removeInputListener=function(t,e){t.addEventListener(egret.FocusEvent.FOCUS_IN,r.focusInTxtHandler,e),t.addEventListener(egret.FocusEvent.FOCUS_OUT,r.focusInTxtHandler,e)},r.focusInTxtHandler=function(){document&&document.body&&setTimeout(function(){window.scrollTo&&window.scrollTo(0,document.body.clientHeight)},400)},r);function r(){}l.LabelUtil=t,__reflect(t.prototype,"qmr.LabelUtil")}(qmr=qmr||{}),function(t){var e=(r.prototype.append=function(t){var e,r=new i(t);if(this._head){for(e=this._head;e.next;)e=e.next;e.next=r}else this._head=r;this.nodeLen+=1},r.prototype.indexOf=function(t){if(!this._head)return-1;for(var e=-1,r=this._head;r;){if(e+=1,r.current===t)return e;r=r.next}return-1},r.prototype.removeAt=function(t){var e,r;this._head&&-1<t&&t<this.size&&(0==t?this._head=this._head.next:(e=this.getNodeAt(t),r=this.getNodeAt(t-1),e&&r&&(r.next=e.next)),--this.nodeLen)},r.prototype.getNodeAt=function(t){if(!this._head)return null;for(var e=this._head,r=-1;e;){if((r+=1)===t)return e;e=e.next}return null},Object.defineProperty(r.prototype,"head",{get:function(){return this._head},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this.nodeLen},enumerable:!0,configurable:!0}),r);function r(){this.nodeLen=0}t.LinkedList=e,__reflect(e.prototype,"qmr.LinkedList");var i=function(t){this.current=t};t.LinkNode=i,__reflect(i.prototype,"qmr.LinkNode")}(qmr=qmr||{}),function(i){var t=(r.log=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];i.PlatformConfig.isDebug&&console.log.apply(console,[t].concat(e))},r.saveLogAndShowLog=function(t,e){r.reportLogData.logKey=e,egret.log(e)},r.logF=function(t){i.GlobalConfig.isDebugF&&egret.log(t)},r.warn=function(t){i.PlatformConfig.isDebug&&egret.warn(t)},r.error=function(t){i.PlatformConfig.isDebug&&egret.error(t)},r.slowLog=function(t){i.GlobalConfig.bIsShowSlowLog&&console.log(t)},r.errorLogUrl="v1/artisan/uploadlog",r.reportLogData={},r.reportLogUrl="http://testmt.housepig.cn/xyws/",r);function r(){}i.LogUtil=t,__reflect(t.prototype,"qmr.LogUtil")}(qmr=qmr||{}),function(r){var t=(e.manhattan=function(t,e,r,i){return 100*((r<t?t-r:r-t)+(i<e?e-i:i-e))},e.distance=function(t,e){return e&&t?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},e.getAngle=function(t,e){var r=e.x-t.x,i=e.y-t.y;return 180*Math.atan2(i,r)/Math.PI},e.equal=function(t,e){if(t&&e)if(t.high&&e.high){if(t.high==e.high&&t.low==e.low)return!0}else if(1e3*t/1e3==1e3*e/1e3)return!0;return!1},e.randomCount=function(t,e){return t+Math.round(Math.random()*(e-t))},e.dir=function(t,e){return e?Math.abs(e.y-t.y)<10?e.x>t.x?r.DirUtil.RIGHT:r.DirUtil.LEFT:e.y<t.y?Math.abs(e.x-t.x)<10?r.DirUtil.UP:e.x>t.x?r.DirUtil.RIGHT_UP:r.DirUtil.LEFT_UP:Math.abs(e.x-t.x)<10?r.DirUtil.DOWN:e.x>t.x?r.DirUtil.RIGHT_DOWN:r.DirUtil.LEFT_DOWN:1},e.getRodomPos=function(t){var e=1==t?[[1040,1122],[997,1283],[870,1033],[1124,969],[1216,1407]]:[[1470,1260],[1394,1068],[1432,1241],[1537,1035],[1473,1308]],r=Math.round(Math.random()*(e.length-1));return{x:e[r][0],y:e[r][1]}},e.getGaussianPoint=function(t,e){var r=new egret.Point;return r.x=Math.random()*(t/2)+Math.random()*(t/2),r.y=Math.random()*(e/2)+Math.random()*(e/2),r},e);function e(){}r.MathUtil=t,__reflect(t.prototype,"qmr.MathUtil")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},r.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},r.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},r.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},r.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},r.prototype.any_hmac_md5=function(t,e,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),r)},r.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},r.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},r.prototype.rstr_hmac_md5=function(t,e){var r=this.rstr2binl(t);16<r.length&&(r=this.binl_md5(r,8*t.length));for(var i=Array(16),n=Array(16),o=0;o<16;o++)i[o]=909522486^r[o],n[o]=1549556828^r[o];var a=this.binl_md5(i.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(n.concat(a),640))},r.prototype.rstr2hex=function(t){try{this.hexcase}catch(t){this.hexcase=0}for(var e,r=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",n=0;n<t.length;n++)e=t.charCodeAt(n),i+=r.charAt(e>>>4&15)+r.charAt(15&e);return i},r.prototype.rstr2b64=function(t){try{this.b64pad}catch(t){this.b64pad=""}for(var e="",r=t.length,i=0;i<r;i+=3)for(var n=t.charCodeAt(i)<<16|(i+1<r?t.charCodeAt(i+1)<<8:0)|(i+2<r?t.charCodeAt(i+2):0),o=0;o<4;o++)e+=8*i+6*o>8*t.length?this.b64pad:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>>6*(3-o)&63);return e},r.prototype.rstr2any=function(t,e){for(var r,i,n,o=e.length,a=Array(Math.ceil(t.length/2)),s=0;s<a.length;s++)a[s]=t.charCodeAt(2*s)<<8|t.charCodeAt(2*s+1);for(var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(l),u=0;u<l;u++){for(n=Array(),s=i=0;s<a.length;s++)i=(i<<16)+a[s],i-=(r=Math.floor(i/o))*o,(0<n.length||0<r)&&(n[n.length]=r);c[u]=i,a=n}var h="";for(s=c.length-1;0<=s;s--)h+=e.charAt(c[s]);return h},r.prototype.str2rstr_utf8=function(t){for(var e,r,i="",n=-1;++n<t.length;)e=t.charCodeAt(n),r=n+1<t.length?t.charCodeAt(n+1):0,55296<=e&&e<=56319&&56320<=r&&r<=57343&&(e=65536+((1023&e)<<10)+(1023&r),n++),e<=127?i+=String.fromCharCode(e):e<=2047?i+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i},r.prototype.str2rstr_utf16le=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r),t.charCodeAt(r)>>>8&255);return e},r.prototype.str2rstr_utf16be=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t.charCodeAt(r)>>>8&255,255&t.charCodeAt(r));return e},r.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),r=0;r<e.length;r++)e[r]=0;for(r=0;r<8*t.length;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e},r.prototype.binl2rstr=function(t){for(var e="",r=0;r<32*t.length;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e},r.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var r=1732584193,i=-271733879,n=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=r,l=i,c=n,u=o,r=this.md5_ff(r,i,n,o,t[a+0],7,-680876936),o=this.md5_ff(o,r,i,n,t[a+1],12,-389564586),n=this.md5_ff(n,o,r,i,t[a+2],17,606105819),i=this.md5_ff(i,n,o,r,t[a+3],22,-1044525330);r=this.md5_ff(r,i,n,o,t[a+4],7,-176418897),o=this.md5_ff(o,r,i,n,t[a+5],12,1200080426),n=this.md5_ff(n,o,r,i,t[a+6],17,-1473231341),i=this.md5_ff(i,n,o,r,t[a+7],22,-45705983),r=this.md5_ff(r,i,n,o,t[a+8],7,1770035416),o=this.md5_ff(o,r,i,n,t[a+9],12,-1958414417),n=this.md5_ff(n,o,r,i,t[a+10],17,-42063),i=this.md5_ff(i,n,o,r,t[a+11],22,-1990404162),r=this.md5_ff(r,i,n,o,t[a+12],7,1804603682),o=this.md5_ff(o,r,i,n,t[a+13],12,-40341101),n=this.md5_ff(n,o,r,i,t[a+14],17,-1502002290),i=this.md5_ff(i,n,o,r,t[a+15],22,1236535329),r=this.md5_gg(r,i,n,o,t[a+1],5,-165796510),o=this.md5_gg(o,r,i,n,t[a+6],9,-1069501632),n=this.md5_gg(n,o,r,i,t[a+11],14,643717713),i=this.md5_gg(i,n,o,r,t[a+0],20,-373897302),r=this.md5_gg(r,i,n,o,t[a+5],5,-701558691),o=this.md5_gg(o,r,i,n,t[a+10],9,38016083),n=this.md5_gg(n,o,r,i,t[a+15],14,-660478335),i=this.md5_gg(i,n,o,r,t[a+4],20,-405537848),r=this.md5_gg(r,i,n,o,t[a+9],5,568446438),o=this.md5_gg(o,r,i,n,t[a+14],9,-1019803690),n=this.md5_gg(n,o,r,i,t[a+3],14,-187363961),i=this.md5_gg(i,n,o,r,t[a+8],20,1163531501),r=this.md5_gg(r,i,n,o,t[a+13],5,-1444681467),o=this.md5_gg(o,r,i,n,t[a+2],9,-51403784),n=this.md5_gg(n,o,r,i,t[a+7],14,1735328473),i=this.md5_gg(i,n,o,r,t[a+12],20,-1926607734),r=this.md5_hh(r,i,n,o,t[a+5],4,-378558),o=this.md5_hh(o,r,i,n,t[a+8],11,-2022574463),n=this.md5_hh(n,o,r,i,t[a+11],16,1839030562),i=this.md5_hh(i,n,o,r,t[a+14],23,-35309556),r=this.md5_hh(r,i,n,o,t[a+1],4,-1530992060),o=this.md5_hh(o,r,i,n,t[a+4],11,1272893353),n=this.md5_hh(n,o,r,i,t[a+7],16,-155497632),i=this.md5_hh(i,n,o,r,t[a+10],23,-1094730640),r=this.md5_hh(r,i,n,o,t[a+13],4,681279174),o=this.md5_hh(o,r,i,n,t[a+0],11,-358537222),n=this.md5_hh(n,o,r,i,t[a+3],16,-722521979),i=this.md5_hh(i,n,o,r,t[a+6],23,76029189),r=this.md5_hh(r,i,n,o,t[a+9],4,-640364487),o=this.md5_hh(o,r,i,n,t[a+12],11,-421815835),n=this.md5_hh(n,o,r,i,t[a+15],16,530742520),i=this.md5_hh(i,n,o,r,t[a+2],23,-995338651),r=this.md5_ii(r,i,n,o,t[a+0],6,-198630844),o=this.md5_ii(o,r,i,n,t[a+7],10,1126891415),n=this.md5_ii(n,o,r,i,t[a+14],15,-1416354905),i=this.md5_ii(i,n,o,r,t[a+5],21,-57434055),r=this.md5_ii(r,i,n,o,t[a+12],6,1700485571),o=this.md5_ii(o,r,i,n,t[a+3],10,-1894986606),n=this.md5_ii(n,o,r,i,t[a+10],15,-1051523),i=this.md5_ii(i,n,o,r,t[a+1],21,-2054922799),r=this.md5_ii(r,i,n,o,t[a+8],6,1873313359),o=this.md5_ii(o,r,i,n,t[a+15],10,-30611744),n=this.md5_ii(n,o,r,i,t[a+6],15,-1560198380),i=this.md5_ii(i,n,o,r,t[a+13],21,1309151649),r=this.md5_ii(r,i,n,o,t[a+4],6,-145523070),o=this.md5_ii(o,r,i,n,t[a+11],10,-1120210379),n=this.md5_ii(n,o,r,i,t[a+2],15,718787259),i=this.md5_ii(i,n,o,r,t[a+9],21,-343485551),r=this.safe_add(r,s),i=this.safe_add(i,l),n=this.safe_add(n,c),o=this.safe_add(o,u)}return[r,i,n,o]},r.prototype.md5_cmn=function(t,e,r,i,n,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,o)),n),r)},r.prototype.md5_ff=function(t,e,r,i,n,o,a){return this.md5_cmn(e&r|~e&i,t,e,n,o,a)},r.prototype.md5_gg=function(t,e,r,i,n,o,a){return this.md5_cmn(e&i|r&~i,t,e,n,o,a)},r.prototype.md5_hh=function(t,e,r,i,n,o,a){return this.md5_cmn(e^r^i,t,e,n,o,a)},r.prototype.md5_ii=function(t,e,r,i,n,o,a){return this.md5_cmn(r^(e|~i),t,e,n,o,a)},r.prototype.safe_add=function(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r},r.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},r);function r(){this.hexcase=0,this.b64pad=""}t.Md5Util=e,__reflect(e.prototype,"qmr.Md5Util")}(qmr=qmr||{}),function(t){var e=(r.getPoolBySign=function(t){return r._poolDic[t]||(r._poolDic[t]=[])},r.clearBySign=function(t){r._poolDic[t]&&(r._poolDic[t].length=0)},r._getClassSign=function(t){var e=t.name;return""!=e&&null!=e||(t.name=e=this.getGID()+""),e},r.getItemByClass=function(t,e){if(!this._poolDic[t])return new e;var r,i=this.getPoolBySign(t);return i&&i.length?(r=i.pop())[this.POOLSIGN]=!1:r=new e,r},r.recover=function(t,e){e&&(e[this.POOLSIGN]||(e[this.POOLSIGN]=!0,this.getPoolBySign(t).push(e)))},r.isInPool=function(t){return!(!t||!t[this.POOLSIGN])},r.getItemByCreateFun=function(t,e,r){void 0===r&&(r=null);var i=this.getPoolBySign(t),n=i.length?i.pop():e.call(r);return n[this.POOLSIGN]=!1,n},r.getItem=function(t){var e=this.getPoolBySign(t),r=e.length?e.pop():null;return r&&(r[this.POOLSIGN]=!1),r},r.getGID=function(){return this._gid++},r.POOLSIGN="__InPool",r._poolDic={},r._gid=1,r);function r(){}t.Pool=e,__reflect(e.prototype,"qmr.Pool")}(qmr=qmr||{}),function(i){var t=(e.getQualityUrl=function(t,e){var r;switch(void 0===e&&(e=i.ActorSizeType.small),e){case i.ActorSizeType.small:r="S";break;case i.ActorSizeType.mid:r="M";break;case i.ActorSizeType.big:r="L";break;default:r="S",console.error("怪物配置的sizeType不存在,id:",t)}return i.SystemPath.qualityPath+r+"/"+t+".png"},e.getQualityTypeUrl=function(t,e){var r;switch(void 0===e&&(e=i.ActorSizeType.small),e){case i.ActorSizeType.small:r="S";break;case i.ActorSizeType.mid:case i.ActorSizeType.big:r="M"}return i.SystemPath.qualityPath+r+"/"+t+".png"},e.getBgUrl=function(t){return i.SystemPath.bgPath+t+".png"},e.getHeroTypeUrl=function(t){return i.SystemPath.cardTypeIcon+t+".png"},e.getHeroCardUrl=function(t){return i.SystemPath.rolePath+"png/"+t+".png"},e.getMonsterCardUrl=function(t){return i.SystemPath.monsterPath+"png/"+t+".png"},e.getHeroHeadUrl=function(t){return i.SystemPath.cardHeadIcon+t+".png"},e.getEmbattleQualityUrl=function(t){return i.SystemPath.buzhenPath+"pz_"+t+".png"},e.getMapUrl=function(t){return i.SystemPath.mapPath+t+".jpg"},e.getHangMapUrl=function(t){return i.SystemPath.hangMapPath+t},e.getItemQualityUrl=function(t){return i.SystemPath.qualityPath+"itemQ"+t+".png"},e.getEquipPosImg=function(t){return i.SystemPath.equipPosPath+"equipPos"+t+".png"},e.getForgeEquipPosPath=function(t,e){void 0===e&&(e=!1);var r=e?"y"+t:t+"";return i.SystemPath.forgeEquipPosPath+"equipPos"+r+".png"},e.getItemIconUrl=function(t){return i.SystemPath.itemIcon+t+".png"},e.getBossHeadIconUrl=function(t){return i.SystemPath.bossHeadPath+"headIcon/"+t+".png"},e.getBossRenderBgUrl=function(t){return"ui_grbs_bg"+t+"_png"},e.getShopPromotionIconUrl=function(t){return"ui_shangcheng_"+t+"_png"},e.getShopPromotionIconUrl2=function(t){return"shop"+t+"_png"},e.getBossVipMenuImgUrl=function(t){return"ui_boss_"+t+"_png"},e.getGuildBossImgUrl=function(t){return"guild_"+t+"_png"},e.getWelfareBanner=function(t){return i.SystemPath.welfarePath+t+".png"},e.monthCardPathBanner=function(t,e){return i.SystemPath.monthCardPath+t+"."+e},e.getSkillIcon=function(t,e){return void 0===e&&(e=!1),1==e&&(t+="_g"),i.SystemPath.skillIcon+t+".png"},e.getMainCityImg=function(t){return i.SystemPath.mainCityPath+t+".png"},e.getDanIcon=function(t){return i.SystemPath.danIcon+"dan_"+t+".png"},e.getFaBaoIcon=function(t){return i.SystemPath.fabao+t+".png"},e.getBossBg=function(t){return t+"_png"},e.getRankIcon=function(t){return"rank"+t+"_png"},e.getActForecastIcon=function(t){return i.SystemPath.actForecastPath+t+".png"},e.getFunOpenIcon=function(t){return i.SystemPath.funOpenPath+t+".png"},e.getChoukaHeroNameImg=function(t){return i.SystemPath.icon_heroName+"name/ui_hero_name_"+t+".png"},e.getJibanHeroNameImg=function(t){return i.SystemPath.icon_heroName+"jibanSkillName/ui_hero_skill_"+t+".png"},e.getMonsterSoulLevelImg=function(t){return i.SystemPath.monsterSoulPath+"stage"+t+".png"},e.getGemIcon=function(t){return i.SystemPath.gemIconPath+t+".png"},e.festivalcelebrationBanner=function(t){return"festival_banner"+t+"_png"},e.getHeroPuzzleUrl=function(t,e){return i.SystemPath.heroPuzzlePath+t+"/p"+e+".png"},e.getXiangmoluShowIconUrl=function(t){return i.SystemPath.xiangmoluPath+t+".png"},e);function e(){}i.ResPathUtil=t,__reflect(t.prototype,"qmr.ResPathUtil")}(qmr=qmr||{}),function(f){var t=(e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.startClock=function(){this.isClockStart=!0,f.Ticker.getInstance().registerTick(this.onTimer,this,1e3*this.CLOCK_INTERVAL)},e.prototype.onTimer=function(){this.isOverDay()&&(this.onOverDay(),f.NotifyManager.sendNotification(f.NotifyConstLogin.CROSS_DAY));for(var t=this._weekAffairsTodo,e=this._weekAffairsDone,r=this._dailyAffairsTodo,i=this._dailyAffairsDone,n=this._dayAfterServerStartAffairsTodo,o=this._dayAppointTimeAffairsTodo,a=this._dayAppointTimeStampAffairsTodo,s=r.length-1;0<=s;s--)l=r[s],this.isTimeIn(l.t)&&(l.c.run(),r.splice(s,1),i.push(l));for(s=n.length-1;0<=s;s--){var l=n[s];new Date(f.TimeUtil.serverTime).getDate()==l.r&&this.checkIsStartNow(l.ta[0],l.ta[1],l.d)&&(l.c.run(),n.splice(s,1))}for(s=t.length-1;0<=s;s--)l=t[s],this.isTimeIn(l.t)&&(l.c.run(),t.splice(s,1),e.push(l));for(s=o.length-1;0<=s;s--)l=o[s],this.checkAppointTimeIsTimeIn(l)&&(l.c.run(),o.splice(s,1));for(s=a.length-1;0<=s;s--)l=a[s],this.checkAppointTimeStampIsTimeIn(l)&&(l.c.run(),a.splice(s,1))},e.prototype.checkAppointTimeIsTimeIn=function(t){var e=f.TimeUtil.getTimeStamp2(t.s.month,t.s.day,t.s.hour,t.s.minute),r=f.TimeUtil.getTimeStamp2(t.e.month,t.e.day,t.e.hour,t.e.minute);return f.TimeUtil.serverTime>=e&&f.TimeUtil.serverTime<=r},e.prototype.checkAppointTimeStampIsTimeIn=function(t){var e=t.s;return f.TimeUtil.serverTime>=e},e.prototype.isTimeIn=function(t){var e=f.TimeUtil.serverTime,r=this.getDailyTimeArrByTimeStamp(e,this.helpTimeArr),i=3600*r[0]+60*r[1]+r[2];return 3600*t[0]+60*t[1]+t[2]<=i},e.prototype.checkIsStartNow=function(t,e,r){var i=f.TimeUtil.changeServerTimeToSeconds(f.TimeUtil.serverTime),n=3600*t+60*e;return n<i&&i<n+r},e.prototype.onOverDay=function(){var e=this;this._dailyAffairsTodo=this._dailyAffairsDone.concat(),this._dailyAffairsDone=[],this._weekAffairsTodo=this._weekAffairsDone.concat(),this._weekAffairsDone=[];var r=[];this._weekAffairsTodo.forEach(function(t){r.push(t)}),this._weekAffairsTodo=[],r.forEach(function(t){e.registerWeekAlarmClock(t.w,t.tl,t.o,t.d,t.c,t.to)})},e.prototype.registerDailyAlarmClock=function(t,e,r){var i,n=this.getDailyTimeArrByTimeOffset(e,r);this.isExist(t,t.args,n)?f.LogUtil.warn("请不要重复注册！ -- > registerDailyAlarmClock"):(i={c:t,p:t.args,t:n},this.isTimeOut(n)?this._dailyAffairsDone.push(i):this._dailyAffairsTodo.push(i))},e.prototype.registerDailyAlarmClock2=function(t,e,r,i){void 0===i&&(i=0);var n,o=e[0],a=e[1],s=this.getDailyTimeArrByTimeOffset(f.TimeUtil.timeToMilSeconds(o,a,0),i);this.isExist(t,t.args,s)?f.LogUtil.warn("请不要重复注册！ -- > registerDailyAlarmClock"):(n={c:t,p:t.args,t:s},this.checkIsStartNow(o,a,r)&&n.c.run(),this.isTimeOut(s)?this._dailyAffairsDone.push(n):this._dailyAffairsTodo.push(n))},e.prototype.registerWeekAlarmClock=function(t,e,r,i,n,o){for(var a=this.getCurDay(),s=0,l=t.length;s<l;){if(a==t[s]){var c=e[0],u=e[1],h=this.getDailyTimeArrByTimeOffset(f.TimeUtil.timeToMilSeconds(c,u,0),o),p={c:n,p:n.args,t:h,o:r,d:i,tl:e,w:t,to:o};this.checkIsStartNow(c,u,i)&&p.c.run(),this.isTimeOut(h)?this._weekAffairsDone.push(p):this._weekAffairsTodo.push(p);break}s++}},e.prototype.registerDayAfterServerStartAlarmClock=function(t,e,r,i,n,o){var a=e+(i-1)*this.oneDayMileSeconds,s=new Date(a).getDate(),l=this.getDailyTimeArrByTimeOffset(n,o),c={c:t,p:t.args,s:e,d:r,r:s,a:n,t:o,ta:l};this._dayAfterServerStartAffairsTodo.push(c)},e.prototype.registerAppointTimeAlarmClock=function(t,e,r){var i,n=f.TimeUtil.getTimeStamp2(r.month,r.day,r.hour,r.minute);f.TimeUtil.serverTime>n?f.LogUtil.warn("注册时间已过了,不需要再注册了 -- > registerAppointTimeAlarmClock"):(i={c:t,p:t.args,s:e,e:r},this._dayAppointTimeAffairsTodo.push(i))},e.prototype.registerAppointTimeStampAlarmClock=function(t,e){var r;f.TimeUtil.serverTime>e?f.LogUtil.warn("注册时间已过了,不需要再注册了 -- > registerAppointTimeAlarmClock"):(r={c:t,p:t.args,s:e},this._dayAppointTimeStampAffairsTodo.push(r))},e.prototype.unRegisterAppointTimeStampAlarmClock=function(t){for(var e=this._dayAppointTimeStampAffairsTodo,r=e.length-1;0<=r;r--)e[r].c==t&&e.splice(r,1)},e.prototype.isExistDayAfterServerStart=function(t,e,r,i){for(var n=0,o=this._dayAfterServerStartAffairsTodo;n<o.length;n++){var a=o[n];if(a.s==t&&a.r==e&&a.a==r&&a.t==i)return!0}return!1},e.prototype.isExist=function(t,e,r){for(var i,n=this._dailyAffairsTodo,o=this._dailyAffairsDone,a=n.length,s=0;s<a;s++)if((i=n[s]).c==t&&this.equalArray(i.p,e)&&this.equalArray(i.t,r))return!0;a=o.length;for(var l=0;l<a;l++)if((i=o[l]).c==t&&this.equalArray(i.p,e)&&this.equalArray(i.t,r))return!0;return!1},e.prototype.equalArray=function(t,e){if(t==e)return!0;if(null==t)return!1;if(null==e)return!1;if(t.length!=e.length)return!1;for(var r=t.length,i=!0,n=0;n<r;n++)if(t[n]!=e[n]){i=!1;break}return i},e.prototype.getDailyTimeArrByTimeOffset=function(t,e,r){void 0===r&&(r=null);var i=new Date(f.TimeUtil.serverTime),n=3600*i.getHours(),o=60*i.getMinutes(),a=i.getSeconds(),s=i.getMilliseconds(),l=1e3*(n+o+a),c=f.TimeUtil.serverTime-l+s+t,u=this.getDailyTimeArrByTimeStamp(c,r),h=this.getDailyTimeArrByTimeStamp(c+e,r);return 0<e?u.concat(h):h.concat(u)},e.prototype.getDailyTimeArrByTimeStamp=function(t,e){var r=this.helperDate1;return r.setTime(t),null==e&&(e=[]),e[0]=r.getHours(),e[1]=r.getMinutes(),e[2]=r.getSeconds(),e},e.prototype.isTimeOut=function(t){var e=f.TimeUtil.serverTime,r=this.getDailyTimeArrByTimeStamp(e,this.helpTimeArr),i=3600*r[0]+60*r[1]+r[2];return 3600*t[3]+60*t[4]+t[5]<=i},e.prototype.isOverDay=function(){var t=f.TimeUtil.serverTime;return this.helperDate1.setTime(t),this.helperDate2.setTime(t-1e3*this.CLOCK_INTERVAL),this.helperDate2.getDate()!=this.helperDate1.getDate()},e.prototype.getCurDay=function(){this.helperDate1.setTime(f.TimeUtil.serverTime);var t=this.helperDate1.getDay();return 0==t&&(t=7),t},e);function e(){this.CLOCK_INTERVAL=3,this._dailyAffairsTodo=[],this._dailyAffairsDone=[],this._dayAfterServerStartAffairsTodo=[],this._dayAppointTimeAffairsTodo=[],this._dayAppointTimeStampAffairsTodo=[],this._weekAffairsTodo=[],this._weekAffairsDone=[],this.oneDayMileSeconds=864e5,this.helperDate1=new Date,this.helperDate2=new Date,this.helpTimeArr=[],this.isClockStart=!1}f.ServerClock=t,__reflect(t.prototype,"qmr.ServerClock")}(qmr=qmr||{}),function(r){var t=(e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.getForbidState=function(t){return r.BitUtil.checkAvalibe(this.sVariantType,t)},e.prototype.setForbidState=function(t,e){this.sVariantType=r.BitUtil.changeBit(this.sVariantType,t,e),egret.localStorage.setItem(r.PlatformConfig.channelId+"zgmrsetting"+r.GlobalConfig.userId,this.sVariantType+"")},e);function e(){this.sVariantType=0;var t=egret.localStorage.getItem(r.PlatformConfig.channelId+"zgmrsetting"+r.GlobalConfig.userId);t&&"undefined"!=t&&(this.sVariantType=parseInt(t))}r.SettingUtil=t,__reflect(t.prototype,"qmr.SettingUtil")}(qmr=qmr||{}),function(o){var t=(Object.defineProperty(a,"stageWidth",{get:function(){return a.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(a,"stageHeight",{get:function(){return a.stage.stageHeight},enumerable:!0,configurable:!0}),a.setStageFrameRate=function(t){a.stage.frameRate=t},a.getStageFrameRate=function(){return a.stage.frameRate},a.init=function(t){a.stage=t;var e=a;e.maxStageWidth=Math.floor(e.DESIGN_HEIGHT/e.MIN_HW_RATIO),e.maxStageHeight=Math.floor(e.DESIGN_WIDTH*e.MAX_HW_RATIO),e.setStageFrameRate(e.FRAME_RATE),e.changeStageSize(),window.addEventListener("resize",e.changeStageSize)},a.changeStageSize=function(){function t(){var t="",e=0,r=0,i=window.innerHeight/window.innerWidth,r=i>=n.MAX_HW_RATIO?(t=egret.StageScaleMode.SHOW_ALL,e=n.DESIGN_WIDTH,n.maxStageHeight):(e=i>=n.STANDARD_RATIO?(t=egret.StageScaleMode.FIXED_WIDTH,n.DESIGN_WIDTH):i>n.MIN_HW_RATIO?(t=egret.StageScaleMode.FIXED_HEIGHT,n.DESIGN_WIDTH):(t=egret.StageScaleMode.SHOW_ALL,n.maxStageWidth),n.DESIGN_HEIGHT);n.stage.scaleMode=t,n.stage.setContentSize(e,r),o.NotifyManager.sendNotification(a.STAGE_RESIZE)}var n=a;t(),"IOS"==egret.Capabilities.os.toUpperCase()&&egret.setTimeout(t,this,100)},a.stageEnable=function(t){this.stage&&(this.stage.touchChildren=t)},a.isPC=function(){for(var t=navigator.userAgent.toString(),e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],r=!0,i=0;i<e.length;i++)if(0<t.indexOf(e[i])){r=!1;break}return r},a.FRAME_RATE=60,a.STAGE_RESIZE="stage_resize",a.STAGE_ACTIVE="stage_active",a.STAGE_DEACTIVATE="stage_deactivate",a.DESIGN_WIDTH=750,a.DESIGN_HEIGHT=1334,a.STANDARD_RATIO=1.78,a.MAX_HW_RATIO=2.16,a.MIN_HW_RATIO=1.333,a.maxStageWidth=0,a.maxStageHeight=0,a);function a(){}o.StageUtil=t,__reflect(t.prototype,"qmr.StageUtil")}(qmr=qmr||{}),function(i){var t=(o.getmsg=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();for(var i in t)var n=t[i],r=r.replace(/\{\d+\}/,n);return r},o.getmsg2=function(t,e){for(var r=0;r<e.length;r++){var i=e[r];t=t.replace(/\{\d+\}/,i)}return t},o.getCharLength=function(t){for(var e,r=0,i=t.length,n=0;n<i;n++)r+=0<=(e=t.charCodeAt(n))&&e<=128?1:2;return r},o.getChineseNumber=function(t,e){void 0===e&&(e=!1);var r="";if(0==t)return e?"零":r;var i=t+"";if(100<t){r+=o.getChineseNumber(parseInt(i.charAt(0))),r+="百";var n=parseInt(i.charAt(1));return 0<n?(r+=o.getChineseNumber(n),r+="十"):r+="零",r+o.getChineseNumber(parseInt(i.charAt(2)))}if(100==t)return(r+=o.getChineseNumber(parseInt(i.charAt(0))))+"百";if(19<t)return r+=o.getChineseNumber(parseInt(i.charAt(0))),(r+="十")+o.getChineseNumber(parseInt(i.charAt(1)));if(10<t)return(r+="十")+o.getChineseNumber(parseInt(i.charAt(1)));switch(t){case 1:r="一";break;case 2:r="二";break;case 3:r="三";break;case 4:r="四";break;case 5:r="五";break;case 6:r="六";break;case 7:r="七";break;case 8:r="八";break;case 9:r="九";break;case 10:r="十"}return r},o.getStepStr=function(t){return o.getLevelStr(t)+"j"},o.getFightToWanStr=function(t){return t/=1e4,(t=Math.floor(100*t)/100).toString()},o.getLevelStr=function(t){var e=""+t;return 0==t?e="z":10==t?e="0":10<t&&t<20?e="0"+(t-10):20<t&&t%10!=0&&(e=e.slice(0,1)+"0"+e.slice(1)),e},o.getRedOrGreenNum=function(t,e){var r=e?i.ColorQualityConst.COLOR_RED:i.ColorQualityConst.COLOR_GREEN;return i.HtmlUtil.getHtmlTexts([[r,""+t]])},o.getSectionMsg=function(t){return t.replace(/\\n/g,"\n")},o.padLeft=function(t,e){if("number"==typeof e)return Array(e+1).join(" ")+t;if("string"==typeof e)return e+t;throw new Error("Expected string or number, got '"+e+"'.")},o.copyClipBoard=function(t){var e;i.PlatformConfig.platformId==i.PlatformEnum.P_WX?window.wx.setClipboardData({data:t,success:function(t){window.wx.getClipboardData({success:function(t){}})}}):i.PlatformConfig.platformId==i.PlatformEnum.P_XIYOU_SQQ?window.qq.setClipboardData({data:t,success:function(t){window.qq.getClipboardData({success:function(t){i.TipManagerCommon.getInstance().createCommonColorTip("复制成功！",!0)}})}}):i.PlatformConfig.platformId==i.PlatformEnum.P_OPPO?window.qg.setClipboardData({data:t,success:function(t){i.TipManagerCommon.getInstance().createCommonColorTip("复制成功！",!0)}}):((e=document.createElement("input")).value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e),i.TipManagerCommon.getInstance().createCommonColorTip("复制成功！",!0))},o);function o(){}i.StringUtils=t,__reflect(t.prototype,"qmr.StringUtils")}(qmr=qmr||{}),function(t){var e=(r.getmsg=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();for(var i in t)var n=t[i],r=r.replace(/\{\d+\}/,n);return r},r);function r(){}t.StringUtilsBase=e,__reflect(e.prototype,"qmr.StringUtilsBase")}(qmr=qmr||{}),function(r){var t=(Object.defineProperty(e,"mapPath",{get:function(){return r.PlatformConfig.webRoot+"map/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"hangMapPath",{get:function(){return r.PlatformConfig.webRoot+"hangMap/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"effectPath",{get:function(){return r.PlatformConfig.webRoot+"animation/effect/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"minePath",{get:function(){return r.PlatformConfig.webRoot+"animation/xianmai/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"uieffect",{get:function(){return r.PlatformConfig.webRoot+"animation/uieffect/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"fabao",{get:function(){return r.PlatformConfig.webRoot+"animation/fabao/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"monsterPath",{get:function(){return r.PlatformConfig.webRoot+"animation/monster/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"rolePath",{get:function(){return r.PlatformConfig.webRoot+"animation/role/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultPath",{get:function(){return r.PlatformConfig.useCdnRes?r.PlatformConfig.webUrl+"resourceLogin/animation/":"resourceLogin/animation/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"roleUiPath",{get:function(){return r.PlatformConfig.webRoot+"animation/role/UI/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"horsePath",{get:function(){return r.PlatformConfig.webRoot+"animation/horse/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"wingPath",{get:function(){return r.PlatformConfig.webRoot+"animation/wing/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ShugoPath",{get:function(){return r.PlatformConfig.webRoot+"animation/bow/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GuangHuanPath",{get:function(){return r.PlatformConfig.webRoot+"animation/guanghuan/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tortoisePath",{get:function(){return r.PlatformConfig.webRoot+"animation/tortoise/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"weaponPath",{get:function(){return r.PlatformConfig.webRoot+"animation/weapon/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bigSkillPath",{get:function(){return r.PlatformConfig.webRoot+"animation/ultimateSkill/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"itemIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/item/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"warriorIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/warrior/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"qualityPath",{get:function(){return r.PlatformConfig.webRoot+"icon/quality/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cardTypeIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/hero/type/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cardHeadIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/hero/head/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buff_icon",{get:function(){return r.PlatformConfig.webRoot+"icon/buff/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"skillIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/skill/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"danIcon",{get:function(){return r.PlatformConfig.webRoot+"icon/duanwei/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"jinjie_level_icon",{get:function(){return r.PlatformConfig.webRoot+"icon/jinjielevel/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buzhenPath",{get:function(){return r.PlatformConfig.webRoot+"icon/quality/buzhen/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"equipPosPath",{get:function(){return r.PlatformConfig.webRoot+"icon/equipPos/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"forgeEquipPosPath",{get:function(){return r.PlatformConfig.webRoot+"icon/forgeEquipPos/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bossHeadPath",{get:function(){return r.PlatformConfig.webRoot+"icon/boss/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"actForecastPath",{get:function(){return r.PlatformConfig.webRoot+"icon/actForecast/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"funOpenPath",{get:function(){return r.PlatformConfig.webRoot+"icon/funOpen/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"rankPath",{get:function(){return r.PlatformConfig.webRoot+"icon/rank/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"gemIconPath",{get:function(){return r.PlatformConfig.webRoot+"icon/gemIcon/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"monsterSoulPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/monsterSoul/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bg_music",{get:function(){return r.PlatformConfig.webRoot+"sound/music/"},enumerable:!0,configurable:!0}),e.getEffect_musicUrl=function(t){var e=r.PlatformConfig.webRoot+"sound/effect/";return"dianji"!=t&&"tanchu"!=t||(e=r.PlatformConfig.useCdnRes?r.PlatformConfig.webUrl+"resourceLogin/sound/":"resourceLogin/sound/"),e+t+".mp3"},Object.defineProperty(e,"titlePath",{get:function(){return r.PlatformConfig.webRoot+"animation/title/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"icon_heroName",{get:function(){return r.PlatformConfig.webRoot+"icon/hero/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"heroPuzzlePath",{get:function(){return r.PlatformConfig.webRoot+"icon/heroPuzzle/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"xiangmoluPath",{get:function(){return r.PlatformConfig.webRoot+"icon/xiagnmolu/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"actHallPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/actHall/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bossPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/boss/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unpack_battle",{get:function(){return r.PlatformConfig.webRoot+"unpack/battle/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"shopPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/shop/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"welfarePath",{get:function(){return r.PlatformConfig.webRoot+"unpack/welfare/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"mainCityPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/mainCity/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"monthCardPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/monthCard/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"bgPath",{get:function(){return r.PlatformConfig.webRoot+"unpack/bg/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"textureMergerPath",{get:function(){return r.PlatformConfig.webRoot+"textureMerger/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"icon_headBg",{get:function(){return r.PlatformConfig.webRoot+"icon/headBg/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"icon_chatBg",{get:function(){return r.PlatformConfig.webRoot+"icon/chatBubble/"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"config",{get:function(){return r.PlatformConfig.webRoot+"config/"},enumerable:!0,configurable:!0}),e);function e(){}r.SystemPath=t,__reflect(t.prototype,"qmr.SystemPath")}(qmr=qmr||{}),function(t){var e=(r.getInstance=function(){return null==this._instance&&(this._instance=new r),this._instance},r.prototype.strlen=function(t){for(var e=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);1<=i&&i<=126||65376<=i&&i<=65439?e++:e+=2}return e},r.prototype.fixTextBox=function(t,e){if(e.textWidth>t){var r=t/e.textWidth;return e.width=Math.ceil(e.textWidth),e.scaleX=r,!0}return!1},r);function r(){}t.TextFixWidthUtil=e,__reflect(e.prototype,"qmr.TextFixWidthUtil")}(qmr=qmr||{}),function(r){var t=(e.prototype.setDes=function(t){this.des=t},e.prototype.startTick=function(t,e){void 0===e&&(e=1e3),this.runing=!0,this.count=t,r.Ticker.getInstance().registerTick(this.tick,this,e),this.showMsg()},e.prototype.tick=function(){return this.count--<1?(this.stopTick(),void(this.backFun&&this.backFun.call(this.thisObj))):(this.updateFun&&this.updateFun.call(this.thisObj),void this.showMsg())},e.prototype.showMsg=function(){this.label&&this.des&&(this.label.text=r.CommonTool.getMsg(this.des,this.count)),this.btn&&this.des&&(this.btn.label=r.CommonTool.getMsg(this.des,this.count))},e.prototype.stopTick=function(){this.runing&&(this.runing=!1,r.Ticker.getInstance().unRegisterTick(this.tick,this))},e);function e(t,e,r){void 0===t&&(t=null),void 0===e&&(e=null),this.label=t,this.des=e,this.thisObj=r}r.TickTool=t,__reflect(t.prototype,"qmr.TickTool")}(qmr=qmr||{}),function(t){var e=(l.getServerSecond=function(){return Math.floor((egret.getTimer()+this.tickOffset)/1e3)},Object.defineProperty(l,"serverTime",{get:function(){return egret.getTimer()+this.tickOffset},enumerable:!0,configurable:!0}),l.getSeverDate=function(){return new Date(1e3*this.getServerSecond())},l.getZoneOffsetSeverDate=function(){return new Date(1e3*this.getZoneOffsetSeverSecond())},l.getZoneOffsetSeverSecond=function(){return this.getServerSecond()},l.syncServerTime=function(t){this.tickOffset=t-egret.getTimer()},l.getTimeBySecond=function(t){var e="";return 60<=t&&(e=this.dateStringFillZero(Math.floor(t/60))+":"),e+this.dateStringFillZero(Math.floor(t%60))},l.getDateByTimer=function(t){l.date||(l.date=new Date),l.date.setTime(t);var e=l.date.getFullYear(),r=l.date.getMonth()+1,i=l.date.getDate(),n=l.date.getHours(),o=l.date.getMinutes(),a=l.date.getSeconds(),s=(r<10||r.toString(),i<10||i.toString(),n<10?"0"+n:n.toString());return e+"-"+r+"-"+i+" "+s+":"+(o<10?"0"+o:o.toString())+":"+(a<10?"0"+a:a.toString())},l.getDateByTimerSecond=function(t){return l.getDateByTimer(1e3*t)},l.getDayOverTime=function(){var t=this.getSeverDate();return(new Date(t.getFullYear(),t.getMonth(),t.getDate()+1).getTime()-t.getTime())/1e3},l.getDayTime=function(){var t=this.getSeverDate(),e=new Date(t.getFullYear(),t.getMonth(),t.getDate());return(t.getTime()-e.getTime())/1e3},l.getTimeToNow=function(t){var e=new Date(t),r=new Date(e.getFullYear(),e.getMonth(),e.getDate());return(e.getTime()-r.getTime())/1e3},l.formatDate=function(t){var e=t.getHours(),r=t.getMinutes(),i=t.getMilliseconds();return(e<10?"0"+e:e.toString())+":"+(r<10?"0"+r:r.toString())+":"+(i<10?"0"+i:i.toString())},l.formatTime=function(t){var e=Math.floor(t/60/60)%24,r=Math.floor(t/60)%60,i=Math.floor(t%60);return(e<10?"0"+e:e.toString())+":"+(r<10?"0"+r:r.toString())+":"+(i<10?"0"+i:i.toString())},l.formatTime1=function(t){var e=Math.floor(t/60/60),r=Math.floor(t/60)%60,i=Math.floor(t%60);return(e<10?"0"+e:e.toString())+":"+(r<10?"0"+r:r.toString())+":"+(i<10?"0"+i:i.toString())},l.formatTime4=function(t){var e=Math.floor(t/60/60)%24,r=Math.floor(t/60)%60,i=e<10?""+e:e.toString(),n=r<10?""+r:r.toString();return i+this.CN_HOUR+n+this.CN_MIN},l.formatTime5=function(t){var e=Math.floor(t/60/60)%24,r=Math.floor(t/60)%60,i=Math.floor(t%60),n=e<10?"0"+e:e.toString(),o=r<10?"0"+r:r.toString(),a=i<10?"0"+i:i.toString();return 0<e?n+this.CN_HOUR+o+this.CN_MIN+a+this.CN_SEC:o+this.CN_MIN+" "+a+this.CN_SEC},l.formatTime2=function(t){var e=Math.floor(t/60)%60,r=Math.floor(t%60);return(e<10?"0"+e:e.toString())+":"+(r<10?"0"+r:r.toString())},l.formatTime3=function(t){var e=Math.floor(t/60/60/24),r=Math.floor(t/60/60)%24+24*e,i=Math.floor(t/60)%60,n=Math.floor(t%60);return(r<10?"0"+r:r.toString())+":"+(i<10?"0"+i:i.toString())+":"+(n<10?"0"+n:n.toString())},l.formatTime6=function(t){var e=Math.floor(t/60)%60,r=Math.floor(t%60);return(e<10?"0"+e:e.toString())+"分"+(r<10?"0"+r:r.toString())+"秒"},l.formatTime7=function(t){var e=new Date(t),r=e.getMinutes(),i=e.getHours();return(i<10?"0"+i:i.toString())+":"+(r<10?"0"+r:r.toString())},l.formatColumnDate=function(t){var e="";return e+=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<10?"0":"")+t.getDate()+" ",e+=(t.getHours()<10?"0":"")+t.getHours(),(e+=":")+(t.getMinutes()<10?"0":"")+t.getMinutes()},l.formatDate1=function(t){return t.getFullYear().toString()+"/"+(t.getMonth()+1<10?"0":"")+(t.getMonth()+1)+"/"+(t.getDate()<10?"0":"")+t.getDate()+" "+(t.getHours()<10?"0"+t.getHours():t.getHours().toString())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes().toString())},l.formatYMD=function(t){return t.getFullYear()+this.CN_YEAR+(t.getMonth()+1)+this.CN_MONTH+t.getDate()+this.CN_SUN},l.formatYMDForEn=function(t){return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()},l.formatYMD1=function(t){return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+"/"},l.formatRemain=function(t){var e=Math.floor(t/60/60/24),r=Math.floor(t/60/60)%24,i=Math.floor(t/60)%60,n=Math.floor(t%60);return e+this.CN_DAY+" "+r+this.CN_HOUR+" "+i+this.CN_MIN+" "+n+this.CN_SEC},l.formatRemain1=function(t){var e=Math.floor(t/60/60/24),r=Math.floor(t/60/60)%24,i=Math.floor(t/60)%60;return e+this.CN_DAY+r+this.CN_HOUR+i+this.CN_MIN},l.formatRemain3=function(t){var e=Math.floor(t/60/60)%24,r=Math.floor(t/60)%60;return e+" "+this.CN_HOUR+" "+r+" "+this.CN_MIN},l.formatRemain2=function(t){var e=Math.floor(t/60/60/24),r=Math.floor(t/60/60)%24,i=Math.floor(t/60)%60;return Math.floor(t%60),[e,r,i]},l.formatRemain4=function(t){var e="",r=l.getZeroize,i=Math.floor(t/60/60/24);0!=i&&(e+=r(i)+this.CN_DAY);var n=Math.floor(t/60/60)%24;0!=n&&(e+=r(n)+this.CN_HOUR);var o=Math.floor(t/60)%60;0!=o&&(e+=r(o)+this.CN_MIN);var a=Math.floor(t%60);return 0!=a&&(e+=r(a)+this.CN_SEC),e},l.formatRemain5=function(t){var e=Math.floor(t/60/60/24);if(0!=e)return e+"d";var r=Math.floor(t/60/60)%24;if(0!=r)return r+"h";var i=Math.floor(t/60)%60;if(0!=i)return i+"m";var n=Math.floor(t%60);return 0!=n?n+"s":""},l.formatRemain6=function(t){var e="",r=l.getZeroize,i=Math.floor(t/60/60/24);0!=i&&(e+=i+this.CN_DAY+" ");var n=Math.floor(t/60/60)%24;e+=0!=n?r(n)+":":"00:";var o=Math.floor(t/60)%60;e+=0!=o?r(o)+":":"00:";var a=Math.floor(t%60);return e+(0!=a?r(a):"00")},l.formatRemain7=function(t){var e="",r=l.getZeroize,i=Math.floor(t/60/60/24);0!=i&&(e+=i+this.CN_DAY+" ");var n=Math.floor(t/60/60)%24;0!=n&&(e+=r(n)+":");var o=Math.floor(t/60)%60;e+=0!=o?r(o)+":":"00:";var a=Math.floor(t%60);return e+(0!=a?r(a):"00")},l.formatRemain8=function(t){var e="",r=Math.floor(t/60/60/24);0!=r&&(e+=r+this.CN_DAY);var i=Math.floor(t/60/60)%24;0!=i&&(e+=i+this.CN_HOUR);var n=Math.floor(t/60)%60;0!=n&&(e+=n+this.CN_MIN+"钟");var o=Math.floor(t%60);return 0!=o&&(e+=o+this.CN_SEC),e},l.formatRemainForEn=function(t){var e=24*Math.floor(t/60/60/24)+Math.floor(t/60/60)%24,r=Math.floor(t/60)%60,i=Math.floor(t%60);return(e<10?"0"+e:e.toString())+":"+(r<10?"0"+r:r.toString())+":"+(i<10?"0"+i:i.toString())},l.getTimeDifference=function(t,e){var r=[0,0,0,0],i=e-t;return r[0]=Math.floor(i/864e5),r[1]=Math.floor(i%864e5/36e5),r[2]=Math.floor(i%864e5%36e5/6e4),r[3]=Math.floor(i%864e5%36e5%6e4/1e3),r},l.prototype.timeStrToDate=function(t){var e=t.split(" "),r=e[0].split("-"),i=e[1].split("-");return new Date(r[0],r[1],r[2],i[0],i[1],i[2])},l.dateStringFillZero=function(t){return(10<=t?(.1*t>>0).toString():"0")+(t%10).toString()},l.gettodayTimeByHour=function(t){var e=this.getZoneOffsetSeverDate();return e.setHours(t),e.setMinutes(0),e.setSeconds(0),e.getTime()/1e3},l.changeServerTimeToSeconds=function(t){var e=new Date(t);return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds()},l.timeToMilSeconds=function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),1e3*(3600*t+60*e+r)},l.getTimeStamp2=function(t,e,r,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=new Date(l.serverTime);return o.setMonth(t-1),o.setDate(e),o.setHours(r),o.setMinutes(i),o.setSeconds(n),o.setMilliseconds(0),o.getTime()},l.getTimeStamp3=function(t,e,r,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0);var a=new Date;return a.setFullYear(t),a.setMonth(e-1),a.setDate(r),a.setHours(i),a.setMinutes(n),a.setSeconds(o),a.setMilliseconds(0),a.getTime()},l.getCurDay=function(){var t=new Date(l.serverTime).getDay();return 0==t&&(t=7),t},l.getTimeStamp=function(t,e){var r=new Date(l.serverTime);return r.setHours(t),r.setMinutes(e),r.setSeconds(0),r.setMilliseconds(0),r.getTime()},l.getDayTimeStamp=function(t){return l.serverTime+24*t*60*60*1e3},l.getTimeStampByTime=function(t,e,r){var i=new Date(t);return i.setHours(e),i.setMinutes(r),i.setSeconds(0),i.setMilliseconds(0),i.getTime()},l.getBetweenDays=function(t,e){return this.getTotalDaysByTime(t)-this.getTotalDaysByTime(e)},l.getTotalDays=function(t){return Math.floor(t.getTime()- -288e5)/864e5},l.getTotalDaysByTime=function(t){return Math.floor((t- -288e5)/864e5)},l.getTimeNoHourSecond=function(t){var e=new Date(t);return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()},l.getZeroize=function(t){return t<10?"0"+t:t+""},l.getTodayStartTime=function(){return l.getTimeNoHourSecond(l.serverTime)},l.getTimesplit=function(t){var e={},r=t.split(" "),i=r[0],n=r[1],o=i.split("-");e.year=parseInt(o[0]),e.month=parseInt(o[1]),e.day=parseInt(o[2]);var a=n.split(":");return e.hour=parseInt(a[0]),e.minute=parseInt(a[1]),e.second=parseInt(a[2]),e},l.fun10=function(){var t=new Date;return t.getTime()-60*t.getHours()*60*1e3-60*t.getMinutes()*1e3-1e3*t.getSeconds()-t.getMilliseconds()},l.getWeekByTime=function(t,e,r){return 1!=e&&2!=e||(e+=12,--t),(r+2*e+Math.floor(3*(e+1)/5)+t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)+1)%7},l.getWeekByTimeStr=function(t,e,r){var i="";switch(l.getWeekByTime(t,e,r)){case 1:i="星期一";break;case 2:i="星期二";break;case 3:i="星期三";break;case 4:i="星期四";break;case 5:i="星期五";break;case 6:i="星期六";break;case 0:i="星期日"}return i},l.DAY_MICRO_SECONDS=864e5,l.HOUR_MICRO_SECONDS=36e5,l.MINUTE_MICRO_SECONDS=6e4,l.SECOND_MICRO_SECONDS=1e3,l.CN_YEAR="年",l.CN_MONTH="月",l.CN_SUN="日",l.CN_DAY="天",l.CN_HOUR="小时",l.CN_MIN="分",l.CN_SEC="秒",l.tickOffset=0,l);function l(){}t.TimeUtil=e,__reflect(e.prototype,"qmr.TimeUtil")}(qmr=qmr||{});var TimeUtil=qmr.TimeUtil,qmr;!function(t){var e=(r.initSysInfo=function(){this.initMd()},r.initMd=function(){console.log("运行系统:"+egret.Capabilities.os);var t,e,r,i,n,o,a=window.MobileDetect;a&&(o="","iOS"==(r=(e=new a(t=navigator.userAgent)).os())?o=e.mobile():"AndroidOS"==r&&(i=t.split(";"),o=-1<(n=this.contains(i,"Build/"))?i[n].substring(0,i[n].indexOf("Build/")):e.mobile()),this.model=o,this.OS=r,egret.log("md:"+JSON.stringify(e)),egret.log("操作系统:"+r),egret.log("手机型号:"+o))},r.contains=function(t,e){for(var r in t)if(0<t[r].indexOf(e))return Number(r);return-1},r);function r(){}t.WebBrowerUtil=e,__reflect(e.prototype,"qmr.WebBrowerUtil")}(qmr=qmr||{}),function(global,undefined){"use strict";var x4a,y4a,z4a,B4a;x4a={1:[function(t,e,r){e.exports=function(t,e){var r=new Array(arguments.length-1),o=0,i=2,a=!0;for(;i<arguments.length;)r[o++]=arguments[i++];return new Promise(function(i,n){r[o]=function(t){if(a)if(a=!1,t)n(t);else{for(var e=new Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];i.apply(null,e)}};try{t.apply(e||null,r)}catch(t){a&&(a=!1,n(t))}})}},{}],2:[function(t,e,r){var i=r;i.length=function(t){var e=t.length;if(!e)return 0;for(var r=0;1<--e%4&&"="===t.charAt(e);)++r;return Math.ceil(3*t.length)/4-r};for(var c=new Array(64),l=new Array(123),n=0;n<64;)l[c[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;i.encode=function(t,e,r){for(var i,n=null,o=[],a=0,s=0;e<r;){var l=t[e++];switch(s){case 0:o[a++]=c[l>>2],i=(3&l)<<4,s=1;break;case 1:o[a++]=c[i|l>>4],i=(15&l)<<2,s=2;break;case 2:o[a++]=c[i|l>>6],o[a++]=c[63&l],s=0}8191<a&&((n=n||[]).push(String.fromCharCode.apply(String,o)),a=0)}return s&&(o[a++]=c[i],o[a++]=61,1===s&&(o[a++]=61)),n?(a&&n.push(String.fromCharCode.apply(String,o.slice(0,a))),n.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var u="invalid encoding";i.decode=function(t,e,r){for(var i,n=r,o=0,a=0;a<t.length;){var s=t.charCodeAt(a++);if(61===s&&1<o)break;if((s=l[s])===undefined)throw Error(u);switch(o){case 0:i=s,o=1;break;case 1:e[r++]=i<<2|(48&s)>>4,i=s,o=2;break;case 2:e[r++]=(15&i)<<4|(60&s)>>2,i=s,o=3;break;case 3:e[r++]=(3&i)<<6|s,o=0}}if(1===o)throw Error(u);return r-n},i.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},{}],3:[function(t,e,r){function h(e,r){"string"==typeof e&&(r=e,e=undefined);var l=[];function c(t){if("string"!=typeof t){var e=u();if(h.verbose&&console.log("codegen: "+e),e="return "+e,t){for(var r=Object.keys(t),i=new Array(r.length+1),n=new Array(r.length),o=0;o<r.length;)i[o]=r[o],n[o]=t[r[o++]];return i[o]=e,Function.apply(null,i).apply(null,n)}return Function(e)()}for(var a=new Array(arguments.length-1),s=0;s<a.length;)a[s]=arguments[++s];if(s=0,t=t.replace(/%([%dfijs])/g,function(t,e){var r=a[s++];switch(e){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),s!==a.length)throw Error("parameter count mismatch");return l.push(t),c}function u(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+l.join("\n  ")+"\n}"}return c.toString=u,c}(e.exports=h).verbose=!1},{}],4:[function(t,e,r){function i(){this._listeners={}}(e.exports=i).prototype.on=function(t,e,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:r||this}),this},i.prototype.off=function(t,e){if(t===undefined)this._listeners={};else if(e===undefined)this._listeners[t]=[];else for(var r=this._listeners[t],i=0;i<r.length;)r[i].fn===e?r.splice(i,1):++i;return this},i.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<e.length;)e[i].fn.apply(e[i++].ctx,r)}return this}},{}],5:[function(t,e,r){e.exports=s;var o=t(1),a=t(7)("fs");function s(r,i,n){return i="function"==typeof i?(n=i,{}):i||{},n?!i.xhr&&a&&a.readFile?a.readFile(r,function(t,e){return t&&"undefined"!=typeof XMLHttpRequest?s.xhr(r,i,n):t?n(t):n(null,i.binary?e:e.toString("utf8"))}):s.xhr(r,i,n):o(s,this,r,i)}s.xhr=function(t,r,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4!==n.readyState)return undefined;if(0!==n.status&&200!==n.status)return i(Error("status "+n.status));if(r.binary){var t=n.response;if(!t){t=[];for(var e=0;e<n.responseText.length;++e)t.push(255&n.responseText.charCodeAt(e))}return i(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return i(null,n.responseText)},r.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",t),n.send()}},{1:1,7:7}],6:[function(t,e,r){function i(t){function e(t,e,r,i){var n,o=e<0?1:0;o&&(e=-e),0===e?t(0<1/e?0:2147483648,r,i):isNaN(e)?t(2143289344,r,i):t(34028234663852886e22<e?(o<<31|2139095040)>>>0:e<11754943508222875e-54?(o<<31|Math.round(e/1401298464324817e-60))>>>0:(o<<31|(n=Math.floor(Math.log(e)/Math.LN2))+127<<23|8388607&Math.round(e*Math.pow(2,-n)*8388608))>>>0,r,i)}function r(t,e,r){var i=t(e,r),n=2*(i>>31)+1,o=i>>>23&255,a=8388607&i;return 255==o?a?NaN:1/0*n:0==o?1401298464324817e-60*n*a:n*Math.pow(2,o-150)*(8388608+a)}function i(t,e,r){s[0]=t,e[r]=l[0],e[r+1]=l[1],e[r+2]=l[2],e[r+3]=l[3]}function n(t,e,r){s[0]=t,e[r]=l[3],e[r+1]=l[2],e[r+2]=l[1],e[r+3]=l[0]}function o(t,e){return l[0]=t[e],l[1]=t[e+1],l[2]=t[e+2],l[3]=t[e+3],s[0]}function a(t,e){return l[3]=t[e],l[2]=t[e+1],l[1]=t[e+2],l[0]=t[e+3],s[0]}var s,l,c,u,h,p;function f(t,e,r,i,n,o){var a,s,l=i<0?1:0;l&&(i=-i),0===i?(t(0,n,o+e),t(0<1/i?0:2147483648,n,o+r)):isNaN(i)?(t(0,n,o+e),t(2146959360,n,o+r)):17976931348623157e292<i?(t(0,n,o+e),t((l<<31|2146435072)>>>0,n,o+r)):i<22250738585072014e-324?(t((a=i/5e-324)>>>0,n,o+e),t((l<<31|a/4294967296)>>>0,n,o+r)):(1024===(s=Math.floor(Math.log(i)/Math.LN2))&&(s=1023),t(4503599627370496*(a=i*Math.pow(2,-s))>>>0,n,o+e),t((l<<31|s+1023<<20|1048576*a&1048575)>>>0,n,o+r))}function d(t,e,r,i,n){var o=t(i,n+e),a=t(i,n+r),s=2*(a>>31)+1,l=a>>>20&2047,c=4294967296*(1048575&a)+o;return 2047==l?c?NaN:1/0*s:0==l?5e-324*s*c:s*Math.pow(2,l-1075)*(c+4503599627370496)}function g(t,e,r){u[0]=t,e[r]=h[0],e[r+1]=h[1],e[r+2]=h[2],e[r+3]=h[3],e[r+4]=h[4],e[r+5]=h[5],e[r+6]=h[6],e[r+7]=h[7]}function m(t,e,r){u[0]=t,e[r]=h[7],e[r+1]=h[6],e[r+2]=h[5],e[r+3]=h[4],e[r+4]=h[3],e[r+5]=h[2],e[r+6]=h[1],e[r+7]=h[0]}function y(t,e){return h[0]=t[e],h[1]=t[e+1],h[2]=t[e+2],h[3]=t[e+3],h[4]=t[e+4],h[5]=t[e+5],h[6]=t[e+6],h[7]=t[e+7],u[0]}function v(t,e){return h[7]=t[e],h[6]=t[e+1],h[5]=t[e+2],h[4]=t[e+3],h[3]=t[e+4],h[2]=t[e+5],h[1]=t[e+6],h[0]=t[e+7],u[0]}return"undefined"!=typeof Float32Array?(s=new Float32Array([-0]),l=new Uint8Array(s.buffer),c=128===l[3],t.writeFloatLE=c?i:n,t.writeFloatBE=c?n:i,t.readFloatLE=c?o:a,t.readFloatBE=c?a:o):(t.writeFloatLE=e.bind(null,_),t.writeFloatBE=e.bind(null,b),t.readFloatLE=r.bind(null,T),t.readFloatBE=r.bind(null,S)),"undefined"!=typeof Float64Array?(u=new Float64Array([-0]),h=new Uint8Array(u.buffer),p=128===h[7],t.writeDoubleLE=p?g:m,t.writeDoubleBE=p?m:g,t.readDoubleLE=p?y:v,t.readDoubleBE=p?v:y):(t.writeDoubleLE=f.bind(null,_,0,4),t.writeDoubleBE=f.bind(null,b,4,0),t.readDoubleLE=d.bind(null,T,0,4),t.readDoubleBE=d.bind(null,S,4,0)),t}function _(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function b(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function T(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function S(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}e.exports=i(i)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},{}],8:[function(t,e,r){var i=r,o=i.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},n=i.normalize=function(t){var e=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=o(t),i="";r&&(i=e.shift()+"/");for(var n=0;n<e.length;)".."===e[n]?0<n&&".."!==e[n-1]?e.splice(--n,2):r?e.splice(n,1):++n:"."===e[n]?e.splice(n,1):++n;return i+e.join("/")};i.resolve=function(t,e,r){return r||(e=n(e)),o(e)?e:(r||(t=n(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?n(t+"/"+e):e)}},{}],9:[function(t,e,r){e.exports=function(r,i,t){var n=t||8192,o=n>>>1,a=null,s=n;return function(t){if(t<1||o<t)return r(t);n<s+t&&(a=r(n),s=0);var e=i.call(a,s,s+=t);return 7&s&&(s=1+(7|s)),e}}},{}],10:[function(t,e,r){var i=r;i.length=function(t){for(var e,r=0,i=0;i<t.length;++i)(e=t.charCodeAt(i))<128?r+=1:e<2048?r+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(i+1))?(++i,r+=4):r+=3;return r},i.read=function(t,e,r){if(r-e<1)return"";for(var i,n=null,o=[],a=0;e<r;)(i=t[e++])<128?o[a++]=i:191<i&&i<224?o[a++]=(31&i)<<6|63&t[e++]:239<i&&i<365?(i=((7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[a++]=55296+(i>>10),o[a++]=56320+(1023&i)):o[a++]=(15&i)<<12|(63&t[e++])<<6|63&t[e++],8191<a&&((n=n||[]).push(String.fromCharCode.apply(String,o)),a=0);return n?(a&&n.push(String.fromCharCode.apply(String,o.slice(0,a))),n.join("")):String.fromCharCode.apply(String,o.slice(0,a))},i.write=function(t,e,r){for(var i,n,o=r,a=0;a<t.length;++a)(i=t.charCodeAt(a))<128?e[r++]=i:(i<2048?e[r++]=i>>6|192:(55296==(64512&i)&&56320==(64512&(n=t.charCodeAt(a+1)))?(i=65536+((1023&i)<<10)+(1023&n),++a,e[r++]=i>>18|240,e[r++]=i>>12&63|128):e[r++]=i>>12|224,e[r++]=i>>6&63|128),e[r++]=63&i|128);return r-o}},{}],11:[function(t,e,r){e.exports=o;var i,n=/\/|\./;function o(t,e){n.test(t)||(t="google/protobuf/"+t+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),o[t]=e}o("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),o("duration",{Duration:i={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),o("timestamp",{Timestamp:i}),o("empty",{Empty:{fields:{}}}),o("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),o("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),o.get=function(t){return o[t]||null}},{}],12:[function(t,e,r){var i=r,h=t(15),p=t(37);function a(t,e,r,i){if(e.resolvedType)if(e.resolvedType instanceof h){t("switch(d%s){",i);for(var n=e.resolvedType.values,o=Object.keys(n),a=0;a<o.length;++a)e.repeated&&n[o[a]]===e.typeDefault&&t("default:"),t("case%j:",o[a])("case %i:",n[o[a]])("m%s=%j",i,n[o[a]])("break");t("}")}else t('if(typeof d%s!=="object")',i)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,r,i);else{var s=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",i,i);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,s)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,s?"true":"");break;case"bytes":t('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length)",i)("m%s=d%s",i,i);break;case"string":t("m%s=String(d%s)",i,i);break;case"bool":t("m%s=Boolean(d%s)",i,i)}}return t}function f(t,e,r,i){if(e.resolvedType)e.resolvedType instanceof h?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",i,r,i,i):t("d%s=types[%i].toObject(m%s,o)",i,r,i);else{var n=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":n=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,n?"true":"",i);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:t("d%s=m%s",i,i)}}return t}i.fromObject=function(t){var e=t.fieldsArray,r=p.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return r("return new this.ctor");r("var m=new this.ctor");for(var i=0;i<e.length;++i){var n=e[i].resolve(),o=p.safeProp(n.name);n.map?(r("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",n.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),a(r,n,i,o+"[ks[i]]")("}")("}")):n.repeated?(r("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",n.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),a(r,n,i,o+"[i]")("}")("}")):(n.resolvedType instanceof h||r("if(d%s!=null){",o),a(r,n,i,o),n.resolvedType instanceof h||r("}"))}return r("return m")},i.toObject=function(t){var e=t.fieldsArray.slice().sort(p.compareFieldsById);if(!e.length)return p.codegen()("return {}");for(var r=p.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],n=[],o=[],a=0;a<e.length;++a)e[a].partOf||(e[a].resolve().repeated?i:e[a].map?n:o).push(e[a]);if(i.length){for(r("if(o.arrays||o.defaults){"),a=0;a<i.length;++a)r("d%s=[]",p.safeProp(i[a].name));r("}")}if(n.length){for(r("if(o.objects||o.defaults){"),a=0;a<n.length;++a)r("d%s={}",p.safeProp(n[a].name));r("}")}if(o.length){for(r("if(o.defaults){"),a=0;a<o.length;++a){var s=o[a],l=p.safeProp(s.name);s.resolvedType instanceof h?r("d%s=o.enums===String?%j:%j",l,s.resolvedType.valuesById[s.typeDefault],s.typeDefault):s.long?r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",s.typeDefault.low,s.typeDefault.high,s.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,s.typeDefault.toString(),s.typeDefault.toNumber()):s.bytes?r("d%s=o.bytes===String?%j:%s",l,String.fromCharCode.apply(String,s.typeDefault),"["+Array.prototype.slice.call(s.typeDefault).join(",")+"]"):r("d%s=%j",l,s.typeDefault)}r("}")}for(var c=!1,a=0;a<e.length;++a){var s=e[a],u=t._fieldsArray.indexOf(s),l=p.safeProp(s.name);s.map?(c||(c=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),f(r,s,u,l+"[ks2[j]]")("}")):s.repeated?(r("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),f(r,s,u,l+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",l,s.name),f(r,s,u,l),s.partOf&&r("if(o.oneofs)")("d%s=%j",p.safeProp(s.partOf.name),s.name)),r("}")}return r("return d")}},{15:15,37:37}],13:[function(t,e,r){e.exports=function(t){var e=c.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(t){return t.map}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break");e("switch(t>>>3){");for(var r=0;r<t.fieldsArray.length;++r){var i=t._fieldsArray[r].resolve(),n=i.resolvedType instanceof s?"int32":i.type,o="m"+c.safeProp(i.name);e("case %i:",i.id),i.map?(e("r.skip().pos++")("if(%s===util.emptyObject)",o)("%s={}",o)("k=r.%s()",i.keyType)("r.pos++"),l.long[i.keyType]!==undefined?l.basic[n]===undefined?e('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',o,r):e('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',o,n):l.basic[n]===undefined?e("%s[k]=types[%i].decode(r,r.uint32())",o,r):e("%s[k]=r.%s()",o,n)):i.repeated?(e("if(!(%s&&%s.length))",o,o)("%s=[]",o),l.packed[n]!==undefined&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",o,n)("}else"),l.basic[n]===undefined?e(i.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",o,r):e("%s.push(r.%s())",o,n)):l.basic[n]===undefined?e(i.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",o,r):e("%s=r.%s()",o,n),e("break")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<t._fieldsArray.length;++r){var a=t._fieldsArray[r];a.required&&e("if(!m.hasOwnProperty(%j))",a.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+a.name+"'")}return e("return m")};var s=t(15),l=t(36),c=t(37)},{15:15,36:36,37:37}],14:[function(t,e,r){e.exports=function(t){for(var e,r=h.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),i=t.fieldsArray.slice().sort(h.compareFieldsById),n=0;n<i.length;++n){var o=i[n].resolve(),a=t._fieldsArray.indexOf(o),s=o.resolvedType instanceof c?"int32":o.type,l=u.basic[s];e="m"+h.safeProp(o.name),o.map?(r("if(%s!=null&&m.hasOwnProperty(%j)){",e,o.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(o.id<<3|2)>>>0,8|u.mapKey[o.keyType],o.keyType),l===undefined?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",a,e):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|l,s,e),r("}")("}")):o.repeated?(r("if(%s!=null&&%s.length){",e,e),o.packed&&u.packed[s]!==undefined?r("w.uint32(%i).fork()",(o.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",e)("w.%s(%s[i])",s,e)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",e),l===undefined?p(r,o,a,e+"[i]"):r("w.uint32(%i).%s(%s[i])",(o.id<<3|l)>>>0,s,e)),r("}")):(o.optional&&r("if(%s!=null&&m.hasOwnProperty(%j))",e,o.name),l===undefined?p(r,o,a,e):r("w.uint32(%i).%s(%s)",(o.id<<3|l)>>>0,s,e))}return r("return w")};var c=t(15),u=t(36),h=t(37);function p(t,e,r,i){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,i,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,i,(e.id<<3|2)>>>0)}},{15:15,36:36,37:37}],15:[function(t,e,r){e.exports=a;var o=t(24);((a.prototype=Object.create(o.prototype)).constructor=a).className="Enum";var i=t(23),n=t(37);function a(t,e,r){if(o.call(this,t,r),e&&"object"!=typeof e)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comments={},this.reserved=undefined,e)for(var i=Object.keys(e),n=0;n<i.length;++n)"number"==typeof e[i[n]]&&(this.valuesById[this.values[i[n]]=e[i[n]]]=i[n])}a.fromJSON=function(t,e){var r=new a(t,e.values,e.options);return r.reserved=e.reserved,r},a.prototype.toJSON=function(){return n.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined])},a.prototype.add=function(t,e,r){if(!n.isString(t))throw TypeError("name must be a string");if(!n.isInteger(e))throw TypeError("id must be an integer");if(this.values[t]!==undefined)throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(this.valuesById[e]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return this.comments[t]=r||null,this},a.prototype.remove=function(t){if(!n.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(null==e)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this},a.prototype.isReservedId=function(t){return i.isReservedId(this.reserved,t)},a.prototype.isReservedName=function(t){return i.isReservedName(this.reserved,t)}},{23:23,24:24,37:37}],16:[function(t,e,r){e.exports=u;var a=t(24);((u.prototype=Object.create(a.prototype)).constructor=u).className="Field";var i,n=t(15),s=t(36),l=t(37),c=/^required|optional|repeated$/;function u(t,e,r,i,n,o){if(l.isObject(i)?(o=i,i=n=undefined):l.isObject(n)&&(o=n,n=undefined),a.call(this,t,o),!l.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!l.isString(r))throw TypeError("type must be a string");if(i!==undefined&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(n!==undefined&&!l.isString(n))throw TypeError("extend must be a string");this.rule=i&&"optional"!==i?i:undefined,this.type=r,this.id=e,this.extend=n||undefined,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!l.Long&&s.long[r]!==undefined,this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null}u.fromJSON=function(t,e){return new u(t,e.id,e.type,e.rule,e.extend,e.options)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(t,e,r){return"packed"===t&&(this._packed=null),a.prototype.setOption.call(this,t,e,r)},u.prototype.toJSON=function(){return l.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options])},u.prototype.resolve=function(){return this.resolved?this:((this.typeDefault=s.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof n&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof n)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long?(this.typeDefault=l.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(l.base64.test(this.typeDefault)?l.base64.decode(this.typeDefault,t=l.newBuffer(l.base64.length(this.typeDefault)),0):l.utf8.write(this.typeDefault,t=l.newBuffer(l.utf8.length(this.typeDefault)),0),this.typeDefault=t),this.map?this.defaultValue=l.emptyObject:this.repeated?this.defaultValue=l.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),a.prototype.resolve.call(this));var t},u.d=function(r,i,n,o){return"function"==typeof i?i=l.decorateType(i).name:i&&"object"==typeof i&&(i=l.decorateEnum(i).name),function(t,e){l.decorateType(t.constructor).add(new u(e,r,i,n,{default:o}))}},u._configure=function(t){i=t}},{15:15,24:24,36:36,37:37}],17:[function(t,e,r){var i=e.exports=t(18);i.build="light",i.load=function(t,e,r){return(e="function"==typeof e?(r=e,new i.Root):e||new i.Root).load(t,r)},i.loadSync=function(t,e){return(e=e||new i.Root).loadSync(t)},i.encoder=t(14),i.decoder=t(13),i.verifier=t(40),i.converter=t(12),i.ReflectionObject=t(24),i.Namespace=t(23),i.Root=t(29),i.Enum=t(15),i.Type=t(35),i.Field=t(16),i.OneOf=t(25),i.MapField=t(20),i.Service=t(33),i.Method=t(22),i.Message=t(21),i.wrappers=t(41),i.types=t(36),i.util=t(37),i.ReflectionObject._configure(i.Root),i.Namespace._configure(i.Type,i.Service),i.Root._configure(i.Type),i.Field._configure(i.Type)},{12:12,13:13,14:14,15:15,16:16,18:18,20:20,21:21,22:22,23:23,24:24,25:25,29:29,33:33,35:35,36:36,37:37,40:40,41:41}],18:[function(t,e,r){var i=r;function n(){i.Reader._configure(i.BufferReader),i.util._configure()}i.build="minimal",i.Writer=t(42),i.BufferWriter=t(43),i.Reader=t(27),i.BufferReader=t(28),i.util=t(39),i.rpc=t(31),i.roots=t(30),i.configure=n,i.Writer._configure(i.BufferWriter),n()},{27:27,28:28,30:30,31:31,39:39,42:42,43:43}],19:[function(t,e,r){var i=e.exports=t(17);i.build="full",i.tokenize=t(34),i.parse=t(26),i.common=t(11),i.Root._configure(i.Type,i.parse,i.common)},{11:11,17:17,26:26,34:34}],20:[function(t,e,r){e.exports=s;var o=t(16);((s.prototype=Object.create(o.prototype)).constructor=s).className="MapField";var i=t(36),a=t(37);function s(t,e,r,i,n){if(o.call(this,t,e,i,n),!a.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(t,e){return new s(t,e.id,e.keyType,e.type,e.options)},s.prototype.toJSON=function(){return a.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options])},s.prototype.resolve=function(){if(this.resolved)return this;if(i.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return o.prototype.resolve.call(this)},s.d=function(r,i,n){return"function"==typeof n?n=a.decorateType(n).name:n&&"object"==typeof n&&(n=a.decorateEnum(n).name),function(t,e){a.decorateType(t.constructor).add(new s(e,r,i,n))}}},{16:16,36:36,37:37}],21:[function(t,e,r){e.exports=n;var i=t(39);function n(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)this[e[r]]=t[e[r]]}n.create=function(t){return this.$type.create(t)},n.encode=function(t,e){return this.$type.encode(t,e)},n.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)},n.decode=function(t){return this.$type.decode(t)},n.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},n.verify=function(t){return this.$type.verify(t)},n.fromObject=function(t){return this.$type.fromObject(t)},n.toObject=function(t,e){return this.$type.toObject(t,e)},n.prototype.toJSON=function(){return this.$type.toObject(this,i.toJSONOptions)}},{39:39}],22:[function(t,e,r){e.exports=i;var s=t(24);((i.prototype=Object.create(s.prototype)).constructor=i).className="Method";var l=t(37);function i(t,e,r,i,n,o,a){if(l.isObject(n)?(a=n,n=o=undefined):l.isObject(o)&&(a=o,o=undefined),e!==undefined&&!l.isString(e))throw TypeError("type must be a string");if(!l.isString(r))throw TypeError("requestType must be a string");if(!l.isString(i))throw TypeError("responseType must be a string");s.call(this,t,a),this.type=e||"rpc",this.requestType=r,this.requestStream=!!n||undefined,this.responseType=i,this.responseStream=!!o||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null}i.fromJSON=function(t,e){return new i(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options)},i.prototype.toJSON=function(){return l.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),s.prototype.resolve.call(this))}},{24:24,37:37}],23:[function(t,e,r){e.exports=u;var i=t(24);((u.prototype=Object.create(i.prototype)).constructor=u).className="Namespace";var n,o,a=t(15),s=t(16),l=t(37);function c(t){if(!t||!t.length)return undefined;for(var e={},r=0;r<t.length;++r)e[t[r].name]=t[r].toJSON();return e}function u(t,e){i.call(this,t,e),this.nested=undefined,this._nestedArray=null}function h(t){return t._nestedArray=null,t}u.fromJSON=function(t,e){return new u(t,e.options).addJSON(e.nested)},u.arrayToJSON=c,u.isReservedId=function(t,e){if(t)for(var r=0;r<t.length;++r)if("string"!=typeof t[r]&&t[r][0]<=e&&t[r][1]>=e)return!0;return!1},u.isReservedName=function(t,e){if(t)for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),u.prototype.toJSON=function(){return l.toObject(["options",this.options,"nested",c(this.nestedArray)])},u.prototype.addJSON=function(t){if(t)for(var e,r=Object.keys(t),i=0;i<r.length;++i)e=t[r[i]],this.add((e.fields!==undefined?n.fromJSON:e.values!==undefined?a.fromJSON:e.methods!==undefined?o.fromJSON:e.id!==undefined?s.fromJSON:u.fromJSON)(r[i],e));return this},u.prototype.get=function(t){return this.nested&&this.nested[t]||null},u.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof a)return this.nested[t].values;throw Error("no such enum")},u.prototype.add=function(t){if(!(t instanceof s&&t.extend!==undefined||t instanceof n||t instanceof a||t instanceof o||t instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof u&&t instanceof u)||e instanceof n||e instanceof o)throw Error("duplicate name '"+t.name+"' in "+this);for(var r=e.nestedArray,i=0;i<r.length;++i)t.add(r[i]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0)}}else this.nested={};return(this.nested[t.name]=t).onAdd(this),h(this)},u.prototype.remove=function(t){if(!(t instanceof i))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=undefined),t.onRemove(this),h(this)},u.prototype.define=function(t,e){if(l.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var r=this;0<t.length;){var i=t.shift();if(r.nested&&r.nested[i]){if(!((r=r.nested[i])instanceof u))throw Error("path conflicts with non-namespace objects")}else r.add(r=new u(i))}return e&&r.addJSON(e),r},u.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof u?t[e++].resolveAll():t[e++].resolve();return this.resolve()},u.prototype.lookup=function(t,e,r){if("boolean"==typeof e?(r=e,e=undefined):e&&!Array.isArray(e)&&(e=[e]),l.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),e);var i=this.get(t[0]);if(i){if(1===t.length){if(!e||-1<e.indexOf(i.constructor))return i}else if(i instanceof u&&(i=i.lookup(t.slice(1),e,!0)))return i}else for(var n=0;n<this.nestedArray.length;++n)if(this._nestedArray[n]instanceof u&&(i=this._nestedArray[n].lookup(t,e,!0)))return i;return null===this.parent||r?null:this.parent.lookup(t,e)},u.prototype.lookupType=function(t){var e=this.lookup(t,[n]);if(!e)throw Error("no such type");return e},u.prototype.lookupEnum=function(t){var e=this.lookup(t,[a]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e},u.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[n,a]);if(!e)throw Error("no such Type or Enum '"+t+"' in "+this);return e},u.prototype.lookupService=function(t){var e=this.lookup(t,[o]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e},u._configure=function(t,e){n=t,o=e}},{15:15,16:16,24:24,37:37}],24:[function(t,e,r){(e.exports=o).className="ReflectionObject";var i,n=t(37);function o(t,e){if(!n.isString(t))throw TypeError("name must be a string");if(e&&!n.isObject(e))throw TypeError("options must be an object");this.options=e,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof i&&e._handleAdd(this)},o.prototype.onRemove=function(t){var e=t.root;e instanceof i&&e._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof i&&(this.resolved=!0),this},o.prototype.getOption=function(t){return this.options?this.options[t]:undefined},o.prototype.setOption=function(t,e,r){return r&&this.options&&this.options[t]!==undefined||((this.options||(this.options={}))[t]=e),this},o.prototype.setOptions=function(t,e){if(t)for(var r=Object.keys(t),i=0;i<r.length;++i)this.setOption(r[i],t[r[i]],e);return this},o.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},o._configure=function(t){i=t}},{37:37}],25:[function(t,e,r){e.exports=a;var i=t(24);((a.prototype=Object.create(i.prototype)).constructor=a).className="OneOf";var n=t(16),o=t(37);function a(t,e,r){if(Array.isArray(e)||(r=e,e=undefined),i.call(this,t,r),e!==undefined&&!Array.isArray(e))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[]}function s(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}a.fromJSON=function(t,e){return new a(t,e.oneof,e.options)},a.prototype.toJSON=function(){return o.toObject(["options",this.options,"oneof",this.oneof])},a.prototype.add=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),s(t.partOf=this),this},a.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),-1<(e=this.oneof.indexOf(t.name))&&this.oneof.splice(e,1),t.partOf=null,this},a.prototype.onAdd=function(t){i.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var r=t.get(this.oneof[e]);r&&!r.partOf&&(r.partOf=this).fieldsArray.push(r)}s(this)},a.prototype.onRemove=function(t){for(var e,r=0;r<this.fieldsArray.length;++r)(e=this.fieldsArray[r]).parent&&e.parent.remove(e);i.prototype.onRemove.call(this,t)},a.d=function(){for(var r=new Array(arguments.length),t=0;t<arguments.length;)r[t]=arguments[t++];return function(t,e){o.decorateType(t.constructor).add(new a(e,r)),Object.defineProperty(t,e,{get:o.oneOfGetter(r),set:o.oneOfSetter(r)})}}},{16:16,24:24,37:37}],26:[function(t,e,r){(e.exports=J).filename=null,J.defaults={keepCase:!1};var I=t(34),w=t(29),D=t(35),R=t(16),x=t(20),A=t(25),M=t(15),N=t(33),k=t(22),U=t(36),B=t(37),G=/^[1-9][0-9]*$/,j=/^-?[1-9][0-9]*$/,F=/^0[x][0-9a-fA-F]+$/,q=/^-?0[x][0-9a-fA-F]+$/,H=/^0[0-7]+$/,W=/^-?0[0-7]+$/,Y=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,V=/^[a-zA-Z_][a-zA-Z_0-9]*$/,X=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,K=/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/;function J(t,e,r){e instanceof w||(r=e,e=new w),r=r||J.defaults;var i,n,o,a,s,l=I(t),c=l.next,u=l.push,h=l.peek,p=l.skip,f=l.cmnt,d=!0,g=!1,m=e,y=r.keepCase?function(t){return t}:B.camelCase;function v(t,e,r){var i=J.filename;return r||(J.filename=null),Error("illegal "+(e||"token")+" '"+t+"' ("+(i?i+", ":"")+"line "+l.line+")")}function _(){var t,e=[];do{if('"'!==(t=c())&&"'"!==t)throw v(t);e.push(c()),p(t),t=h()}while('"'===t||"'"===t);return e.join("")}function b(e){var r=c();switch(r){case"'":case'"':return u(r),_();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(t,e){var r=1;"-"===t.charAt(0)&&(r=-1,t=t.substring(1));switch(t){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(G.test(t))return r*parseInt(t,10);if(F.test(t))return r*parseInt(t,16);if(H.test(t))return r*parseInt(t,8);if(Y.test(t))return r*parseFloat(t);throw v(t,"number",e)}(r,!0)}catch(t){if(e&&X.test(r))return r;throw v(r,"value")}}function T(t,e){for(var r,i;!e||'"'!==(r=h())&&"'"!==r?t.push([i=S(c()),p("to",!0)?S(c()):i]):t.push(_()),p(",",!0););p(";")}function S(t,e){switch(t){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!e&&"-"===t.charAt(0))throw v(t,"id");if(j.test(t))return parseInt(t,10);if(q.test(t))return parseInt(t,16);if(W.test(t))return parseInt(t,8);throw v(t,"id")}function C(t,e){switch(e){case"option":return O(t,e),p(";"),1;case"message":return function(t,e){if(!V.test(e=c()))throw v(e,"type name");var r=new D(e);$(r,function(t){if(!C(r,t))switch(t){case"map":!function(t){p("<");var e=c();if(U.mapKey[e]===undefined)throw v(e,"type");p(",");var r=c();if(!X.test(r))throw v(r,"type");p(">");var i=c();if(!V.test(i))throw v(i,"name");p("=");var n=new x(y(i),S(c()),e,r);$(n,function(t){if("option"!==t)throw v(t);O(n,t),p(";")},function(){L(n)}),t.add(n)}(r);break;case"required":case"optional":case"repeated":E(r,t);break;case"oneof":!function(t,e){if(!V.test(e=c()))throw v(e,"name");var r=new A(y(e));$(r,function(t){"option"===t?(O(r,t),p(";")):(u(t),E(r,"optional"))}),t.add(r)}(r,t);break;case"extensions":T(r.extensions||(r.extensions=[]));break;case"reserved":T(r.reserved||(r.reserved=[]),!0);break;default:if(!g||!X.test(t))throw v(t);u(t),E(r,"optional")}}),t.add(r)}(t,e),1;case"enum":return function(t,e){if(!V.test(e=c()))throw v(e,"name");var r=new M(e);$(r,function(t){switch(t){case"option":O(r,t),p(";");break;case"reserved":T(r.reserved||(r.reserved=[]),!0);break;default:!function(t,e){if(!V.test(e))throw v(e,"name");p("=");var r=S(c(),!0),i={};$(i,function(t){if("option"!==t)throw v(t);O(i,t),p(";")},function(){L(i)}),t.add(e,r,i.comment)}(r,t)}}),t.add(r)}(t,e),1;case"service":return function(t,e){if(!V.test(e=c()))throw v(e,"service name");var r=new N(e);$(r,function(t){if(!C(r,t)){if("rpc"!==t)throw v(t);!function(t,e){var r=e;if(!V.test(e=c()))throw v(e,"name");var i,n,o,a,s=e;p("("),p("stream",!0)&&(n=!0);if(!X.test(e=c()))throw v(e);i=e,p(")"),p("returns"),p("("),p("stream",!0)&&(a=!0);if(!X.test(e=c()))throw v(e);o=e,p(")");var l=new k(s,r,i,o,n,a);$(l,function(t){if("option"!==t)throw v(t);O(l,t),p(";")}),t.add(l)}(r,t)}}),t.add(r)}(t,e),1;case"extend":return function(e,t){if(!X.test(t=c()))throw v(t,"reference");var r=t;$(null,function(t){switch(t){case"required":case"repeated":case"optional":E(e,t,r);break;default:if(!g||!X.test(t))throw v(t);u(t),E(e,"optional",r)}})}(t,e),1}}function $(t,e,r){var i,n=l.line;if(t&&(t.comment=f(),t.filename=J.filename),p("{",!0)){for(;"}"!==(i=c());)e(i);p(";",!0)}else r&&r(),p(";"),t&&"string"!=typeof t.comment&&(t.comment=f(n))}function E(t,e,r){var i=c();if("group"!==i){if(!X.test(i))throw v(i,"type");var n=c();if(!V.test(n))throw v(n,"name");n=y(n),p("=");var o=new R(n,S(c()),i,e,r);$(o,function(t){if("option"!==t)throw v(t);O(o,t),p(";")},function(){L(o)}),t.add(o),g||!o.repeated||U.packed[i]===undefined&&U.basic[i]!==undefined||o.setOption("packed",!1,!0)}else!function(t,e){var r=c();if(!V.test(r))throw v(r,"name");var i=B.lcFirst(r);r===i&&(r=B.ucFirst(r));p("=");var n=S(c()),o=new D(r);o.group=!0;var a=new R(i,n,r,e);a.filename=J.filename,$(o,function(t){switch(t){case"option":O(o,t),p(";");break;case"required":case"optional":case"repeated":E(o,t);break;default:throw v(t)}}),t.add(o).add(a)}(t,e)}function O(t,e){var r=p("(",!0);if(!X.test(e=c()))throw v(e,"name");var i=e;r&&(p(")"),i="("+i+")",e=h(),K.test(e)&&(i+=e,c())),p("="),function t(e,r){if(p("{",!0))do{if(!V.test(s=c()))throw v(s,"name");"{"===h()?t(e,r+"."+s):(p(":"),"{"===h()?t(e,r+"."+s):P(e,r+"."+s,b(!0)))}while(!p("}",!0));else P(e,r,b(!0))}(t,i)}function P(t,e,r){t.setOption&&t.setOption(e,r)}function L(t){if(p("[",!0)){for(;O(t,"option"),p(",",!0););p("]")}return t}for(;null!==(s=c());)switch(s){case"package":if(!d)throw v(s);!function(){if(i!==undefined)throw v("package");if(i=c(),!X.test(i))throw v(i,"name");m=m.define(i),p(";")}();break;case"import":if(!d)throw v(s);!function(){var t,e=h();switch(e){case"weak":t=o=o||[],c();break;case"public":c();default:t=n=n||[]}e=_(),p(";"),t.push(e)}();break;case"syntax":if(!d)throw v(s);!function(){if(p("="),a=_(),!(g="proto3"===a)&&"proto2"!==a)throw v(a,"syntax");p(";")}();break;case"option":if(!d)throw v(s);O(m,s),p(";");break;default:if(C(m,s)){d=!1;continue}throw v(s)}return J.filename=null,{package:i,imports:n,weakImports:o,syntax:a,root:e}}},{15:15,16:16,20:20,22:22,25:25,29:29,33:33,34:34,35:35,36:36,37:37}],27:[function(t,e,r){e.exports=l;var i,n=t(39),o=n.LongBits,a=n.utf8;function s(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function l(t){this.buf=t,this.pos=0,this.len=t.length}var c,u="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new l(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new l(t);throw Error("illegal buffer")};function h(){var t=new o(0,0),e=0;if(!(4<this.len-this.pos)){for(;e<3;++e){if(this.pos>=this.len)throw s(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,4<this.len-this.pos){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw s(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=n.Buffer?function(t){return(l.create=function(t){return n.Buffer.isBuffer(t)?new i(t):u(t)})(t)}:u,l.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},l.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},l.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw s(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,r):e===r?new this.buf.constructor(0):this._slice.call(this.buf,e,r)},l.prototype.string=function(){var t=this.bytes();return a.read(t,0,t.length)},l.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw s(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;;){if(4==(t=7&this.uint32()))break;this.skipType(t)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},l._configure=function(t){i=t;var e=n.Long?"toLong":"toNumber";n.merge(l.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}},{39:39}],28:[function(t,e,r){e.exports=o;var i=t(27);(o.prototype=Object.create(i.prototype)).constructor=o;var n=t(39);function o(t){i.call(this,t)}n.Buffer&&(o.prototype._slice=n.Buffer.prototype.slice),o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},{27:27,39:39}],29:[function(t,e,r){e.exports=l;var i=t(23);((l.prototype=Object.create(i.prototype)).constructor=l).className="Root";var n,f,d,o=t(16),a=t(15),s=t(25),g=t(37);function l(t){i.call(this,"",t),this.deferred=[],this.files=[]}function m(){}l.fromJSON=function(t,e){return e=e||new l,t.options&&e.setOptions(t.options),e.addJSON(t.nested)},l.prototype.resolvePath=g.path.resolve,l.prototype.load=function t(e,o,a){"function"==typeof o&&(a=o,o=undefined);var s=this;if(!a)return g.asPromise(t,s,e,o);var l=a===m;function c(t,e){if(a){var r=a;if(a=null,l)throw t;r(t,e)}}function u(t,e){try{if(g.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),g.isString(e)){f.filename=t;var r,i=f(e,s,o),n=0;if(i.imports)for(;n<i.imports.length;++n)(r=s.resolvePath(t,i.imports[n]))&&h(r);if(i.weakImports)for(n=0;n<i.weakImports.length;++n)(r=s.resolvePath(t,i.weakImports[n]))&&h(r,!0)}else s.setOptions(e.options).addJSON(e.nested)}catch(t){c(t)}l||p||c(null,s)}function h(r,i){var t,e,n=r.lastIndexOf("google/protobuf/");if(-1<n&&((t=r.substring(n))in d&&(r=t)),!(-1<s.files.indexOf(r)))if(s.files.push(r),r in d)l?u(r,d[r]):(++p,setTimeout(function(){--p,u(r,d[r])}));else if(l){try{e=g.fs.readFileSync(r).toString("utf8")}catch(t){return void(i||c(t))}u(r,e)}else++p,g.fetch(r,function(t,e){--p,a&&(t?i?p||c(null,s):c(t):u(r,e))})}var p=0;g.isString(e)&&(e=[e]);for(var r,i=0;i<e.length;++i)(r=s.resolvePath("",e[i]))&&h(r);return l?s:(p||c(null,s),undefined)},l.prototype.loadSync=function(t,e){if(!g.isNode)throw Error("not supported");return this.load(t,e,m)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return i.prototype.resolveAll.call(this)};var c=/^[A-Z]/;function u(t,e){var r=e.parent.lookup(e.extend);if(r){var i=new o(e.fullName,e.id,e.type,e.rule,undefined,e.options);return(i.declaringField=e).extensionField=i,r.add(i),1}}l.prototype._handleAdd=function(t){if(t instanceof o)t.extend===undefined||t.extensionField||u(0,t)||this.deferred.push(t);else if(t instanceof a)c.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof s)){if(t instanceof n)for(var e=0;e<this.deferred.length;)u(0,this.deferred[e])?this.deferred.splice(e,1):++e;for(var r=0;r<t.nestedArray.length;++r)this._handleAdd(t._nestedArray[r]);c.test(t.name)&&(t.parent[t.name]=t)}},l.prototype._handleRemove=function(t){var e;if(t instanceof o)t.extend!==undefined&&(t.extensionField?(t.extensionField.parent.remove(t.extensionField),t.extensionField=null):-1<(e=this.deferred.indexOf(t))&&this.deferred.splice(e,1));else if(t instanceof a)c.test(t.name)&&delete t.parent[t.name];else if(t instanceof i){for(var r=0;r<t.nestedArray.length;++r)this._handleRemove(t._nestedArray[r]);c.test(t.name)&&delete t.parent[t.name]}},l._configure=function(t,e,r){n=t,f=e,d=r}},{15:15,16:16,23:23,25:25,37:37}],30:[function(t,e,r){e.exports={}},{}],31:[function(t,e,r){r.Service=t(32)},{32:32}],32:[function(t,e,r){e.exports=i;var s=t(39);function i(t,e,r){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}((i.prototype=Object.create(s.EventEmitter.prototype)).constructor=i).prototype.rpcCall=function t(r,e,i,n,o){if(!n)throw TypeError("request must be specified");var a=this;if(!o)return s.asPromise(t,a,r,e,i,n);if(!a.rpcImpl)return setTimeout(function(){o(Error("already ended"))},0),undefined;try{return a.rpcImpl(r,e[a.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(t,e){if(t)return a.emit("error",t,r),o(t);if(null===e)return a.end(!0),undefined;if(!(e instanceof i))try{e=i[a.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return a.emit("error",t,r),o(t)}return a.emit("data",e,r),o(null,e)})}catch(t){return a.emit("error",t,r),setTimeout(function(){o(t)},0),undefined}},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{39:39}],33:[function(t,e,r){e.exports=a;var i=t(23);((a.prototype=Object.create(i.prototype)).constructor=a).className="Service";var o=t(22),s=t(37),l=t(31);function a(t,e){i.call(this,t,e),this.methods={},this._methodsArray=null}function n(t){return t._methodsArray=null,t}a.fromJSON=function(t,e){var r=new a(t,e.options);if(e.methods)for(var i=Object.keys(e.methods),n=0;n<i.length;++n)r.add(o.fromJSON(i[n],e.methods[i[n]]));return e.nested&&r.addJSON(e.nested),r},a.prototype.toJSON=function(){var t=i.prototype.toJSON.call(this);return s.toObject(["options",t&&t.options||undefined,"methods",i.arrayToJSON(this.methodsArray)||{},"nested",t&&t.nested||undefined])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),a.prototype.get=function(t){return this.methods[t]||i.prototype.get.call(this,t)},a.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return i.prototype.resolve.call(this)},a.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof o?n((this.methods[t.name]=t).parent=this):i.prototype.add.call(this,t)},a.prototype.remove=function(t){if(t instanceof o){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,n(this)}return i.prototype.remove.call(this,t)},a.prototype.create=function(t,e,r){for(var i,n=new l.Service(t,e,r),o=0;o<this.methodsArray.length;++o){var a=s.lcFirst((i=this._methodsArray[o]).resolve().name).replace(/[^$\w_]/g,"");n[a]=s.codegen(["r","c"],s.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor})}return n}},{22:22,23:23,31:31,37:37}],34:[function(t,e,r){e.exports=o;var b=/[\s{}=;:[\],'"()<>]/g,T=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,S=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,C=/^ *[*/]+ */,$=/\n/g,E=/\s/,i=/\\(.?)/g,n={0:"\0",r:"\r",n:"\n",t:"\t"};function O(t){return t.replace(i,function(t,e){switch(e){case"\\":case"":return e;default:return n[e]||""}})}function o(s){s=s.toString();var l=0,c=s.length,u=1,a=null,h=null,p=0,f=!1,d=[],g=null;function m(t){return Error("illegal "+t+" (line "+u+")")}function y(t){return s.charAt(t)}function v(t,e){a=s.charAt(t++),p=u,f=!1;var r,i=t-3;do{if(--i<0||"\n"===(r=s.charAt(i))){f=!0;break}}while(" "===r||"\t"===r);for(var n=s.substring(t,e).split($),o=0;o<n.length;++o)n[o]=n[o].replace(C,"").trim();h=n.join("\n").trim()}function i(){if(0<d.length)return d.shift();if(g)return function(){var t="'"===g?S:T;t.lastIndex=l-1;var e=t.exec(s);if(!e)throw m("string");return l=t.lastIndex,_(g),g=null,O(e[1])}();var t,e,r,i,n;do{if(l===c)return null;for(t=!1;E.test(r=y(l));)if("\n"===r&&++u,++l===c)return null;if("/"===y(l)){if(++l===c)throw m("comment");if("/"===y(l)){for(n="/"===y(i=l+1);"\n"!==y(++l);)if(l===c)return null;++l,n&&v(i,l-1),++u,t=!0}else{if("*"!==(r=y(l)))return"/";n="*"===y(i=l+1);do{if("\n"===r&&++u,++l===c)throw m("comment");e=r,r=y(l)}while("*"!==e||"/"!==r);++l,n&&v(i,l-2),t=!0}}}while(t);var o=l;if(b.lastIndex=0,!b.test(y(o++)))for(;o<c&&!b.test(y(o));)++o;var a=s.substring(l,l=o);return'"'!==a&&"'"!==a||(g=a),a}function _(t){d.push(t)}function n(){if(!d.length){var t=i();if(null===t)return null;_(t)}return d[0]}return Object.defineProperty({next:i,peek:n,push:_,skip:function(t,e){var r=n();if(r===t)return i(),!0;if(!e)throw m("token '"+r+"', '"+t+"' expected");return!1},cmnt:function(t){var e=null;return t===undefined?p!==u-1||"*"!==a&&!f||(e=h):(p<t&&n(),p!==t||f||"/"!==a||(e=h)),e}},"line",{get:function(){return u}})}o.unescape=O},{}],35:[function(t,e,r){e.exports=_;var a=t(23);((_.prototype=Object.create(a.prototype)).constructor=_).className="Type";var s=t(15),l=t(25),c=t(16),u=t(20),h=t(33),n=t(21),o=t(27),p=t(42),f=t(37),d=t(14),g=t(13),m=t(40),y=t(12),v=t(41);function _(t,e){a.call(this,t,e),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function i(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(_.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var r=this.fields[t[e]],i=r.id;if(this._fieldsById[i])throw Error("duplicate id "+i+" in "+this);this._fieldsById[i]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=f.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=f.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=_.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof n||((t.prototype=new n).constructor=t,f.merge(t.prototype,e)),t.$type=t.prototype.$type=this,f.merge(t,n,!0),this._ctor=t;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();for(var i={},r=0;r<this.oneofsArray.length;++r)i[this._oneofsArray[r].resolve().name]={get:f.oneOfGetter(this._oneofsArray[r].oneof),set:f.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(t.prototype,i)}}}),_.generateConstructor=function(t){for(var e,r=f.codegen(["p"],t.name),i=0;i<t.fieldsArray.length;++i)(e=t._fieldsArray[i]).map?r("this%s={}",f.safeProp(e.name)):e.repeated&&r("this%s=[]",f.safeProp(e.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},_.fromJSON=function(t,e){var r=new _(t,e.options);r.extensions=e.extensions,r.reserved=e.reserved;for(var i=Object.keys(e.fields),n=0;n<i.length;++n)r.add((void 0!==e.fields[i[n]].keyType?u.fromJSON:c.fromJSON)(i[n],e.fields[i[n]]));if(e.oneofs)for(i=Object.keys(e.oneofs),n=0;n<i.length;++n)r.add(l.fromJSON(i[n],e.oneofs[i[n]]));if(e.nested)for(i=Object.keys(e.nested),n=0;n<i.length;++n){var o=e.nested[i[n]];r.add((o.id!==undefined?c.fromJSON:o.fields!==undefined?_.fromJSON:o.values!==undefined?s.fromJSON:o.methods!==undefined?h.fromJSON:a.fromJSON)(i[n],o))}return e.extensions&&e.extensions.length&&(r.extensions=e.extensions),e.reserved&&e.reserved.length&&(r.reserved=e.reserved),e.group&&(r.group=!0),r},_.prototype.toJSON=function(){var t=a.prototype.toJSON.call(this);return f.toObject(["options",t&&t.options||undefined,"oneofs",a.arrayToJSON(this.oneofsArray),"fields",a.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField}))||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined])},_.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();for(var r=this.oneofsArray,e=0;e<r.length;)r[e++].resolve();return a.prototype.resolveAll.call(this)},_.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},_.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof c&&t.extend===undefined){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),(this.fields[t.name]=t).message=this,t.onAdd(this),i(this)}return t instanceof l?(this.oneofs||(this.oneofs={}),(this.oneofs[t.name]=t).onAdd(this),i(this)):a.prototype.add.call(this,t)},_.prototype.remove=function(t){if(t instanceof c&&t.extend===undefined){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),i(this)}if(t instanceof l){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),i(this)}return a.prototype.remove.call(this,t)},_.prototype.isReservedId=function(t){return a.isReservedId(this.reserved,t)},_.prototype.isReservedName=function(t){return a.isReservedName(this.reserved,t)},_.prototype.create=function(t){return new this.ctor(t)},_.prototype.setup=function(){for(var t=this.fullName,e=[],r=0;r<this.fieldsArray.length;++r)e.push(this._fieldsArray[r].resolve().resolvedType);this.encode=d(this)({Writer:p,types:e,util:f}),this.decode=g(this)({Reader:o,types:e,util:f}),this.verify=m(this)({types:e,util:f}),this.fromObject=y.fromObject(this)({types:e,util:f}),this.toObject=y.toObject(this)({types:e,util:f});var i,n=v[t];return n&&((i=Object.create(this)).fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)),this},_.prototype.encode=function(t,e){return this.setup().encode(t,e)},_.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()},_.prototype.decode=function(t,e){return this.setup().decode(t,e)},_.prototype.decodeDelimited=function(t){return t instanceof o||(t=o.create(t)),this.decode(t,t.uint32())},_.prototype.verify=function(t){return this.setup().verify(t)},_.prototype.fromObject=function(t){return this.setup().fromObject(t)},_.prototype.toObject=function(t,e){return this.setup().toObject(t,e)},_.d=function(e){return function(t){f.decorateType(t,e)}}},{12:12,13:13,14:14,15:15,16:16,20:20,21:21,23:23,25:25,27:27,33:33,37:37,40:40,41:41,42:42}],36:[function(t,e,r){var i=r,n=t(37),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(t,e){var r=0,i={};for(e|=0;r<t.length;)i[o[r+e]]=t[r++];return i}i.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),i.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),i.long=a([0,0,0,1,1],7),i.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),i.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},{37:37}],37:[function(i,t,e){var n,r,o=t.exports=i(39),a=i(30);o.codegen=i(3),o.fetch=i(5),o.path=i(8),o.fs=o.inquire("fs"),o.toArray=function(t){if(t){for(var e=Object.keys(t),r=new Array(e.length),i=0;i<e.length;)r[i]=t[e[i++]];return r}return[]},o.toObject=function(t){for(var e={},r=0;r<t.length;){var i=t[r++],n=t[r++];n!==undefined&&(e[i]=n)}return e};var s=/\\/g,l=/"/g;o.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},o.safeProp=function(t){return!/^[$\w_]+$/.test(t)||o.isReserved(t)?'["'+t.replace(s,"\\\\").replace(l,'\\"')+'"]':"."+t},o.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var c=/_([a-z])/g;o.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(c,function(t,e){return e.toUpperCase()})},o.compareFieldsById=function(t,e){return t.id-e.id},o.decorateType=function(t,e){if(t.$type)return e&&t.$type.name!==e&&(o.decorateRoot.remove(t.$type),t.$type.name=e,o.decorateRoot.add(t.$type)),t.$type;var r=new(n=n||i(35))(e||t.name);return o.decorateRoot.add(r),r.ctor=t,Object.defineProperty(t,"$type",{value:r,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:r,enumerable:!1}),r};var u=0;o.decorateEnum=function(t){if(t.$type)return t.$type;var e=new(r=r||i(15))("Enum"+u++,t);return o.decorateRoot.add(e),Object.defineProperty(t,"$type",{value:e,enumerable:!1}),e},Object.defineProperty(o,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(i(29)))}})},{15:15,29:29,3:3,30:30,35:35,39:39,5:5,8:8}],38:[function(t,e,r){e.exports=n;var i=t(39);function n(t,e){this.lo=t>>>0,this.hi=e>>>0}var o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return o;var e=t<0;e&&(t=-t);var r=t>>>0,i=(t-r)/4294967296>>>0;return e&&(i=~i>>>0,r=~r>>>0,4294967295<++r&&(r=0,4294967295<++i&&(i=0))),new n(r,i)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(i.isString(t)){if(!i.Long)return n.fromNumber(parseInt(t,10));t=i.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):o},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return"\0\0\0\0\0\0\0\0"===t?o:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0==r?0==e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}},{39:39}],39:[function(t,e,r){var i=r;function n(t,e,r){for(var i=Object.keys(e),n=0;n<i.length;++n)t[i[n]]!==undefined&&r||(t[i[n]]=e[i[n]]);return t}function o(t){function r(t,e){if(!(this instanceof r))return new r(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return(r.prototype=Object.create(Error.prototype)).constructor=r,Object.defineProperty(r.prototype,"name",{get:function(){return t}}),r.prototype.toString=function(){return this.name+": "+this.message},r}i.asPromise=t(1),i.base64=t(2),i.EventEmitter=t(4),i.float=t(6),i.inquire=t(7),i.utf8=t(10),i.pool=t(9),i.LongBits=t(38),i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isNode=Boolean(global.process&&global.process.versions&&global.process.versions.node),i.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},i.isString=function(t){return"string"==typeof t||t instanceof String},i.isObject=function(t){return t&&"object"==typeof t},i.isset=i.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!=typeof r||0<(Array.isArray(r)?r.length:Object.keys(r).length))},i.Buffer=function(){try{var t=i.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(t){return"number"==typeof t?i.Buffer?i._Buffer_allocUnsafe(t):new i.Array(t):i.Buffer?i._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},i.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,i.Long=global.dcodeIO&&global.dcodeIO.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(t){return t?i.LongBits.from(t).toHash():i.LongBits.zeroHash},i.longFromHash=function(t,e){var r=i.LongBits.fromHash(t);return i.Long?i.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},i.merge=n,i.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},i.newError=o,i.ProtocolError=o("ProtocolError"),i.oneOfGetter=function(t){for(var r={},e=0;e<t.length;++e)r[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;-1<e;--e)if(1===r[t[e]]&&this[t[e]]!==undefined&&null!==this[t[e]])return t[e]}},i.oneOfSetter=function(r){return function(t){for(var e=0;e<r.length;++e)r[e]!==t&&delete this[r[e]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var r=i.Buffer;r?(i._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,e){return new r(t,e)},i._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,38:38,4:4,6:6,7:7,9:9}],40:[function(t,e,r){e.exports=function(t){var e=l.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=t.oneofsArray,i={};r.length&&e("var p={}");for(var n=0;n<t.fieldsArray.length;++n){var o,a=t._fieldsArray[n].resolve(),s="m"+l.safeProp(a.name);a.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",s,a.name),a.map?(e("if(!util.isObject(%s))",s)("return%j",c(a,"object"))("var k=Object.keys(%s)",s)("for(var i=0;i<k.length;++i){"),function(t,e,r){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",r)("return%j",c(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",r)("return%j",c(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",r)("return%j",c(e,"boolean key"))}}(e,a,"k[i]"),u(e,a,n,s+"[k[i]]")("}")):a.repeated?(e("if(!Array.isArray(%s))",s)("return%j",c(a,"array"))("for(var i=0;i<%s.length;++i){",s),u(e,a,n,s+"[i]")("}")):(a.partOf&&(o=l.safeProp(a.partOf.name),1===i[a.partOf.name]&&e("if(p%s===1)",o)("return%j",a.partOf.name+": multiple values"),i[a.partOf.name]=1,e("p%s=1",o)),u(e,a,n,s)),a.optional&&e("}")}return e("return null")};var a=t(15),l=t(37);function c(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected"}function u(t,e,r,i){if(e.resolvedType)if(e.resolvedType instanceof a){t("switch(%s){",i)("default:")("return%j",c(e,"enum value"));for(var n=Object.keys(e.resolvedType.values),o=0;o<n.length;++o)t("case %i:",e.resolvedType.values[n[o]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",i)("return%j",c(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",c(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',i)("return%j",c(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',i)("return%j",c(e,"boolean"));break;case"string":t("if(!util.isString(%s))",i)("return%j",c(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",c(e,"buffer"))}return t}},{15:15,37:37}],41:[function(t,e,r){var i=r,o=t(21);i[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=this.lookup(t["@type"]);if(e){var r="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"];return this.create({type_url:"/"+r,value:e.encode(e.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var r,i;if(e&&e.json&&t.type_url&&t.value&&(r=t.type_url.substring(t.type_url.lastIndexOf("/")+1),(i=this.lookup(r))&&(t=i.decode(t.value))),t instanceof this.ctor||!(t instanceof o))return this.toObject(t,e);var n=t.$type.toObject(t,e);return n["@type"]=t.$type.fullName,n}}},{21:21}],42:[function(t,e,r){e.exports=h;var i,n=t(39),o=n.LongBits,a=n.base64,s=n.utf8;function l(t,e,r){this.fn=t,this.len=e,this.next=undefined,this.val=r}function c(){}function u(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}function p(t,e,r){e[r]=255&t}function f(t,e){this.len=t,this.next=undefined,this.val=e}function d(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function g(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}h.create=n.Buffer?function(){return(h.create=function(){return new i})()}:function(){return new h},h.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(h.alloc=n.pool(h.alloc,n.Array.prototype.subarray)),h.prototype._push=function(t,e,r){return this.tail=this.tail.next=new l(t,e,r),this.len+=e,this},(f.prototype=Object.create(l.prototype)).fn=function(t,e,r){for(;127<t;)e[r++]=127&t|128,t>>>=7;e[r]=t},h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this._push(d,10,o.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.int64=h.prototype.uint64=function(t){var e=o.from(t);return this._push(d,e.length(),e)},h.prototype.sint64=function(t){var e=o.from(t).zzEncode();return this._push(d,e.length(),e)},h.prototype.bool=function(t){return this._push(p,1,t?1:0)},h.prototype.sfixed32=h.prototype.fixed32=function(t){return this._push(g,4,t>>>0)},h.prototype.sfixed64=h.prototype.fixed64=function(t){var e=o.from(t);return this._push(g,4,e.lo)._push(g,4,e.hi)},h.prototype.float=function(t){return this._push(n.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this._push(n.float.writeDoubleLE,8,t)};var m=n.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var i=0;i<t.length;++i)e[r+i]=t[i]};h.prototype.bytes=function(t){var e,r=t.length>>>0;return r?(n.isString(t)&&(e=h.alloc(r=a.length(t)),a.decode(t,e,0),t=e),this.uint32(r)._push(m,r,t)):this._push(p,1,0)},h.prototype.string=function(t){var e=s.length(t);return e?this.uint32(e)._push(s.write,e,t):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},h.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},h._configure=function(t){i=t}},{39:39}],43:[function(t,e,r){e.exports=a;var i=t(42);(a.prototype=Object.create(i.prototype)).constructor=a;var n=t(39),o=n.Buffer;function a(){i.call(this)}a.alloc=function(t){return(a.alloc=n._Buffer_allocUnsafe)(t)};var s=o&&o.prototype instanceof Uint8Array&&"set"===o.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var i=0;i<t.length;)e[r++]=t[i++]};function l(t,e,r){t.length<40?n.utf8.write(t,e,r):e.utf8Write(t,r)}a.prototype.bytes=function(t){n.isString(t)&&(t=n._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(s,e,t),this},a.prototype.string=function(t){var e=o.byteLength(t);return this.uint32(e),e&&this._push(l,e,t),this}},{39:39,42:42}]},y4a={},z4a=[19],B4a=global.protobuf=function t(e){var r=y4a[e];return r||x4a[e][0].call(r=y4a[e]={exports:{}},t,r,r.exports),r.exports}(z4a[0]),"function"==typeof define&&define.amd&&define(["long"],function(t){return t&&t.isLong&&(B4a.util.Long=t,B4a.configure()),B4a}),"object"==typeof module&&module&&module.exports&&(module.exports=B4a)}("object"==typeof window&&window||"object"==typeof self&&self||this);